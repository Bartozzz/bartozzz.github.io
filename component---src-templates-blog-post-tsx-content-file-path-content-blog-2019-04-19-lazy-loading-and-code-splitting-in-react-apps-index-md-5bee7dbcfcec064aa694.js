"use strict";(self.webpackChunklaniewski_me=self.webpackChunklaniewski_me||[]).push([[621],{4206:function(e,s,n){n.r(s),n.d(s,{Head:function(){return f},default:function(){return g}});var a=n(7294),t=n(5893),c=n(1151);function l(e){const s=Object.assign({p:"p",a:"a",code:"code",blockquote:"blockquote",strong:"strong",h2:"h2",svg:"svg",path:"path",ul:"ul",li:"li",h3:"h3",pre:"pre",span:"span",h4:"h4",ol:"ol"},(0,c.a)(),e.components),{Newsletter:n}=s;return n||function(e,s){throw new Error("Expected "+(s?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Newsletter",!0),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(s.p,{children:["Lazy loading is a well-known technique for improving performance and reducing the associated resource costs. It’s so effective that it’s even ",(0,t.jsx)(s.a,{href:"https://github.com/whatwg/html/pull/3752",rel:"nofollow noopener noreferrer",target:"_blank",children:"being added to the web standard"})," via the ",(0,t.jsx)(s.code,{children:'loading="lazy"'})," attribute. In this article, we will learn how to perform lazy resource loading and code splitting in React."]}),"\n",(0,t.jsxs)(s.blockquote,{children:["\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Note:"})," at the time of writing this article, a lot of APIs are still in development and are not ready to be used in production."]}),"\n"]}),"\n",(0,t.jsxs)(s.h2,{id:"glossary",children:["Glossary",(0,t.jsx)(s.a,{className:"heading-link","aria-label":'Permalink to "Glossary"',href:"#glossary",children:(0,t.jsx)(s.svg,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",width:"16",height:"16",fill:"currentColor","aria-hidden":"true",children:(0,t.jsx)(s.path,{d:"m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"})})})]}),"\n",(0,t.jsxs)(s.blockquote,{children:["\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Code splitting"})," […] allows you to split your code into various bundles which can then be loaded on demand or in parallel. It can be used to achieve smaller bundles and control resource load prioritization which, if used correctly, can have a major impact on load time. ~ ",(0,t.jsx)(s.a,{href:"https://webpack.js.org/guides/code-splitting/",rel:"nofollow noopener noreferrer",target:"_blank",children:"Webpack"})]}),"\n"]}),"\n",(0,t.jsxs)(s.blockquote,{children:["\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Lazy loading"})," is a design pattern […] used to defer initialization of an object until the point at which it is needed. It can contribute to efficiency in the program’s operation if properly and appropriately used. […] The performance gains are especially significant if the initialization of the object is costly, such as in case of accessing network services. ~ ",(0,t.jsx)(s.a,{href:"https://en.wikipedia.org/wiki/Lazy_loading",rel:"nofollow noopener noreferrer",target:"_blank",children:"Wikipedia"})]}),"\n"]}),"\n",(0,t.jsxs)(s.h2,{id:"problem",children:["Problem",(0,t.jsx)(s.a,{className:"heading-link","aria-label":'Permalink to "Problem"',href:"#problem",children:(0,t.jsx)(s.svg,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",width:"16",height:"16",fill:"currentColor","aria-hidden":"true",children:(0,t.jsx)(s.path,{d:"m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"})})})]}),"\n",(0,t.jsxs)(s.p,{children:["A lot of ",(0,t.jsx)("abbr",{title:"Single-Page Application: a web application that loads once and dynamically updates as the response for user interactions.",children:"SPAs"})," nowadays are “monolithic” – there’s a giant JavaScript bundle that contains all of the application’s files. This bundle is required via a ",(0,t.jsx)(s.code,{children:"<script>"})," tag, gets downloaded on the initial visit, and is hopefully cached. This results in:"]}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:["a ",(0,t.jsx)(s.strong,{children:"longer initial load"}),": we download all of the app’s code, even if it’s not needed to perform the initial render or not used at all;"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"faster application rendering and in-app navigation"}),": all of the components are already downloaded and don’t need to be lazily fetched."]}),"\n"]}),"\n",(0,t.jsx)(s.p,{children:"This is the typical drawback of code-splitting: the initial page load is faster but each dynamic import degrades the visible in-app performance."}),"\n",(0,t.jsx)(s.p,{children:"Developers tend to provide visual feedback for each asynchronous action. It often results in an immense amount of loaders and it’s still badly perceived by users. Once the lazy components render, they can perform other asynchronous actions (like network requests) which adds another layer of loaders."}),"\n",(0,t.jsx)(s.p,{children:"As a developer, you need to find the perfect balance between initial and dynamic loading and focus on creating great fallback experiences."}),"\n",(0,t.jsx)(n,{}),"\n",(0,t.jsxs)(s.h2,{id:"solutions",children:["Solutions",(0,t.jsx)(s.a,{className:"heading-link","aria-label":'Permalink to "Solutions"',href:"#solutions",children:(0,t.jsx)(s.svg,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",width:"16",height:"16",fill:"currentColor","aria-hidden":"true",children:(0,t.jsx)(s.path,{d:"m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"})})})]}),"\n",(0,t.jsx)(s.p,{children:"Concurrent React can partially render a tree without committing the result."}),"\n",(0,t.jsxs)(s.h3,{id:"code-splitting",children:["Code splitting",(0,t.jsx)(s.a,{className:"heading-link","aria-label":'Permalink to "Code splitting"',href:"#code-splitting",children:(0,t.jsx)(s.svg,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",width:"16",height:"16",fill:"currentColor","aria-hidden":"true",children:(0,t.jsx)(s.path,{d:"m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"})})})]}),"\n",(0,t.jsxs)(s.p,{children:["React 16.6 introduced ",(0,t.jsx)(s.a,{href:"https://react.dev/reference/react/lazy",rel:"nofollow noopener noreferrer",target:"_blank",children:(0,t.jsx)(s.code,{children:"React.lazy"})})," which allows us to perform code splitting and a ",(0,t.jsx)(s.a,{href:"https://react.dev/reference/react/Suspense",rel:"nofollow noopener noreferrer",target:"_blank",children:(0,t.jsx)(s.code,{children:"Suspense"})})," component which renders placeholders for lazy-loaded resources."]}),"\n",(0,t.jsx)(s.pre,{className:"language-jsx",children:(0,t.jsxs)(s.code,{className:"language-jsx code-highlight",children:[(0,t.jsxs)(s.span,{className:"code-line",children:[(0,t.jsx)(s.span,{className:"token keyword module",children:"import"})," ",(0,t.jsxs)(s.span,{className:"token imports",children:[(0,t.jsx)(s.span,{className:"token maybe-class-name",children:"React"}),(0,t.jsx)(s.span,{className:"token punctuation",children:","})," ",(0,t.jsx)(s.span,{className:"token punctuation",children:"{"})," ",(0,t.jsx)(s.span,{className:"token maybe-class-name",children:"Suspense"}),(0,t.jsx)(s.span,{className:"token punctuation",children:","})," lazy ",(0,t.jsx)(s.span,{className:"token punctuation",children:"}"})]})," ",(0,t.jsx)(s.span,{className:"token keyword module",children:"from"})," ",(0,t.jsx)(s.span,{className:"token string",children:'"react"'}),(0,t.jsx)(s.span,{className:"token punctuation",children:";"}),"\n"]}),(0,t.jsx)(s.span,{className:"code-line",children:"\n"}),(0,t.jsxs)(s.span,{className:"code-line",children:[(0,t.jsx)(s.span,{className:"token keyword",children:"const"})," ",(0,t.jsx)(s.span,{className:"token maybe-class-name",children:"Foo"})," ",(0,t.jsx)(s.span,{className:"token operator",children:"="})," ",(0,t.jsx)(s.span,{className:"token function",children:"lazy"}),(0,t.jsx)(s.span,{className:"token punctuation",children:"("}),(0,t.jsx)(s.span,{className:"token punctuation",children:"("}),(0,t.jsx)(s.span,{className:"token punctuation",children:")"})," ",(0,t.jsx)(s.span,{className:"token arrow operator",children:"=>"})," ",(0,t.jsx)(s.span,{className:"token keyword module",children:"import"}),(0,t.jsx)(s.span,{className:"token punctuation",children:"("}),(0,t.jsx)(s.span,{className:"token string",children:'"./Foo"'}),(0,t.jsx)(s.span,{className:"token punctuation",children:")"}),(0,t.jsx)(s.span,{className:"token punctuation",children:")"}),(0,t.jsx)(s.span,{className:"token punctuation",children:";"}),"\n"]}),(0,t.jsxs)(s.span,{className:"code-line",children:[(0,t.jsx)(s.span,{className:"token keyword",children:"const"})," ",(0,t.jsx)(s.span,{className:"token maybe-class-name",children:"Bar"})," ",(0,t.jsx)(s.span,{className:"token operator",children:"="})," ",(0,t.jsx)(s.span,{className:"token function",children:"lazy"}),(0,t.jsx)(s.span,{className:"token punctuation",children:"("}),(0,t.jsx)(s.span,{className:"token punctuation",children:"("}),(0,t.jsx)(s.span,{className:"token punctuation",children:")"})," ",(0,t.jsx)(s.span,{className:"token arrow operator",children:"=>"})," ",(0,t.jsx)(s.span,{className:"token keyword module",children:"import"}),(0,t.jsx)(s.span,{className:"token punctuation",children:"("}),(0,t.jsx)(s.span,{className:"token string",children:'"./Bar"'}),(0,t.jsx)(s.span,{className:"token punctuation",children:")"}),(0,t.jsx)(s.span,{className:"token punctuation",children:")"}),(0,t.jsx)(s.span,{className:"token punctuation",children:";"}),"\n"]}),(0,t.jsx)(s.span,{className:"code-line",children:"\n"}),(0,t.jsxs)(s.span,{className:"code-line",children:[(0,t.jsx)(s.span,{className:"token keyword",children:"const"})," ",(0,t.jsx)(s.span,{className:"token function-variable function",children:(0,t.jsx)(s.span,{className:"token maybe-class-name",children:"LazyFooBar"})})," ",(0,t.jsx)(s.span,{className:"token operator",children:"="})," ",(0,t.jsx)(s.span,{className:"token punctuation",children:"("}),(0,t.jsx)(s.span,{className:"token punctuation",children:")"})," ",(0,t.jsx)(s.span,{className:"token arrow operator",children:"=>"})," ",(0,t.jsx)(s.span,{className:"token punctuation",children:"("}),"\n"]}),(0,t.jsxs)(s.span,{className:"code-line",children:["  ",(0,t.jsxs)(s.span,{className:"token tag",children:[(0,t.jsxs)(s.span,{className:"token tag",children:[(0,t.jsx)(s.span,{className:"token punctuation",children:"<"}),(0,t.jsx)(s.span,{className:"token class-name",children:"ErrorBoundary"})]}),(0,t.jsx)(s.span,{className:"token punctuation",children:">"})]}),(0,t.jsx)(s.span,{className:"token plain-text",children:"\n"})]}),(0,t.jsxs)(s.span,{className:"code-line",children:[(0,t.jsx)(s.span,{className:"token plain-text",children:"    "}),(0,t.jsxs)(s.span,{className:"token tag",children:[(0,t.jsxs)(s.span,{className:"token tag",children:[(0,t.jsx)(s.span,{className:"token punctuation",children:"<"}),(0,t.jsx)(s.span,{className:"token class-name",children:"Suspense"})]})," ",(0,t.jsx)(s.span,{className:"token attr-name",children:"maxDuration"}),(0,t.jsxs)(s.span,{className:"token script language-javascript",children:[(0,t.jsx)(s.span,{className:"token script-punctuation punctuation",children:"="}),(0,t.jsx)(s.span,{className:"token punctuation",children:"{"}),(0,t.jsx)(s.span,{className:"token number",children:"1500"}),(0,t.jsx)(s.span,{className:"token punctuation",children:"}"})]})," ",(0,t.jsx)(s.span,{className:"token attr-name",children:"fallback"}),(0,t.jsxs)(s.span,{className:"token script language-javascript",children:[(0,t.jsx)(s.span,{className:"token script-punctuation punctuation",children:"="}),(0,t.jsx)(s.span,{className:"token punctuation",children:"{"}),(0,t.jsx)(s.span,{className:"token string",children:'"Loading…"'}),(0,t.jsx)(s.span,{className:"token punctuation",children:"}"})]}),(0,t.jsx)(s.span,{className:"token punctuation",children:">"})]}),(0,t.jsx)(s.span,{className:"token plain-text",children:"\n"})]}),(0,t.jsxs)(s.span,{className:"code-line",children:[(0,t.jsx)(s.span,{className:"token plain-text",children:"      "}),(0,t.jsxs)(s.span,{className:"token tag",children:[(0,t.jsxs)(s.span,{className:"token tag",children:[(0,t.jsx)(s.span,{className:"token punctuation",children:"<"}),(0,t.jsx)(s.span,{className:"token class-name",children:"Foo"})]})," ",(0,t.jsx)(s.span,{className:"token punctuation",children:"/>"})]}),(0,t.jsx)(s.span,{className:"token plain-text",children:"\n"})]}),(0,t.jsx)(s.span,{className:"code-line",children:(0,t.jsx)(s.span,{className:"token plain-text",children:"\n"})}),(0,t.jsxs)(s.span,{className:"code-line",children:[(0,t.jsx)(s.span,{className:"token plain-text",children:"      "}),(0,t.jsxs)(s.span,{className:"token tag",children:[(0,t.jsxs)(s.span,{className:"token tag",children:[(0,t.jsx)(s.span,{className:"token punctuation",children:"<"}),(0,t.jsx)(s.span,{className:"token class-name",children:"Suspense"})]})," ",(0,t.jsx)(s.span,{className:"token attr-name",children:"maxDuration"}),(0,t.jsxs)(s.span,{className:"token script language-javascript",children:[(0,t.jsx)(s.span,{className:"token script-punctuation punctuation",children:"="}),(0,t.jsx)(s.span,{className:"token punctuation",children:"{"}),(0,t.jsx)(s.span,{className:"token number",children:"1000"}),(0,t.jsx)(s.span,{className:"token punctuation",children:"}"})]})," ",(0,t.jsx)(s.span,{className:"token attr-name",children:"fallback"}),(0,t.jsxs)(s.span,{className:"token script language-javascript",children:[(0,t.jsx)(s.span,{className:"token script-punctuation punctuation",children:"="}),(0,t.jsx)(s.span,{className:"token punctuation",children:"{"}),(0,t.jsx)(s.span,{className:"token string",children:'"Loading…"'}),(0,t.jsx)(s.span,{className:"token punctuation",children:"}"})]}),(0,t.jsx)(s.span,{className:"token punctuation",children:">"})]}),(0,t.jsx)(s.span,{className:"token plain-text",children:"\n"})]}),(0,t.jsxs)(s.span,{className:"code-line",children:[(0,t.jsx)(s.span,{className:"token plain-text",children:"        "}),(0,t.jsxs)(s.span,{className:"token tag",children:[(0,t.jsxs)(s.span,{className:"token tag",children:[(0,t.jsx)(s.span,{className:"token punctuation",children:"<"}),(0,t.jsx)(s.span,{className:"token class-name",children:"Bar"})]})," ",(0,t.jsx)(s.span,{className:"token punctuation",children:"/>"})]}),(0,t.jsx)(s.span,{className:"token plain-text",children:"\n"})]}),(0,t.jsxs)(s.span,{className:"code-line",children:[(0,t.jsx)(s.span,{className:"token plain-text",children:"      "}),(0,t.jsxs)(s.span,{className:"token tag",children:[(0,t.jsxs)(s.span,{className:"token tag",children:[(0,t.jsx)(s.span,{className:"token punctuation",children:"</"}),(0,t.jsx)(s.span,{className:"token class-name",children:"Suspense"})]}),(0,t.jsx)(s.span,{className:"token punctuation",children:">"})]}),(0,t.jsx)(s.span,{className:"token plain-text",children:"\n"})]}),(0,t.jsxs)(s.span,{className:"code-line",children:[(0,t.jsx)(s.span,{className:"token plain-text",children:"    "}),(0,t.jsxs)(s.span,{className:"token tag",children:[(0,t.jsxs)(s.span,{className:"token tag",children:[(0,t.jsx)(s.span,{className:"token punctuation",children:"</"}),(0,t.jsx)(s.span,{className:"token class-name",children:"Suspense"})]}),(0,t.jsx)(s.span,{className:"token punctuation",children:">"})]}),(0,t.jsx)(s.span,{className:"token plain-text",children:"\n"})]}),(0,t.jsxs)(s.span,{className:"code-line",children:[(0,t.jsx)(s.span,{className:"token plain-text",children:"  "}),(0,t.jsxs)(s.span,{className:"token tag",children:[(0,t.jsxs)(s.span,{className:"token tag",children:[(0,t.jsx)(s.span,{className:"token punctuation",children:"</"}),(0,t.jsx)(s.span,{className:"token class-name",children:"ErrorBoundary"})]}),(0,t.jsx)(s.span,{className:"token punctuation",children:">"})]}),"\n"]}),(0,t.jsxs)(s.span,{className:"code-line",children:[(0,t.jsx)(s.span,{className:"token punctuation",children:")"}),(0,t.jsx)(s.span,{className:"token punctuation",children:";"}),"\n"]})]})}),"\n",(0,t.jsxs)(s.p,{children:["The dynamic ",(0,t.jsx)(s.code,{children:"import()"})," tells the bundler to exclude requested files from the main bundle. ",(0,t.jsx)(s.code,{children:"React.lazy"})," returns a special component type that will suspend the render until it resolves or rejects The exact behavior is described in the following ",(0,t.jsx)(s.a,{href:"https://github.com/reactjs/rfcs/blob/main/text/0064-lazy.md",rel:"nofollow noopener noreferrer",target:"_blank",children:"RFC"}),":"]}),"\n",(0,t.jsxs)(s.blockquote,{children:["\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.code,{children:"React.lazy"})," accepts a Promise factory, and returns a new component type. When React renders that type for the first time, it triggers the Promise factory […]. If the Promise is fulfilled, React reads the ",(0,t.jsx)(s.code,{children:".default"})," value from it […], and uses it as a component type for rendering. If the Promise is rejected, the rejection is handled in the same way as React normally handles errors (by letting the nearest error boundary handle it). After the code has loaded, React caches the Promise result. Next renders of the components with this type become synchronous and have no extra cost."]}),"\n"]}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.code,{children:"Suspense"})," allows you to define a fallback placeholder which is displayed when the render is in the suspended state. It also allows you to configure the delay after which the fallback should be shown (via the ",(0,t.jsx)(s.code,{children:"maxDuration"})," property). It will prevent the fallback component from showing up on fast networks."]}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.code,{children:"Suspense"})," is quite similar to ",(0,t.jsx)(s.code,{children:"ErrorBoundary"}),". In fact, you can think of ",(0,t.jsx)(s.code,{children:"Suspense"})," as being the ",(0,t.jsx)(s.code,{children:"try { … }"})," block whereas ",(0,t.jsx)(s.code,{children:"ErrorBoundary"})," is the ",(0,t.jsx)(s.code,{children:"catch (error) { … }"})," block."]}),"\n",(0,t.jsxs)(s.h3,{id:"lazy-loading-and-preloading",children:["Lazy loading and preloading",(0,t.jsx)(s.a,{className:"heading-link","aria-label":'Permalink to "Lazy loading and preloading"',href:"#lazy-loading-and-preloading",children:(0,t.jsx)(s.svg,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",width:"16",height:"16",fill:"currentColor","aria-hidden":"true",children:(0,t.jsx)(s.path,{d:"m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"})})})]}),"\n",(0,t.jsxs)(s.p,{children:["React team is working on an experimental library named ",(0,t.jsx)(s.a,{href:"https://github.com/facebook/react/tree/master/packages/react-cache",rel:"nofollow noopener noreferrer",target:"_blank",children:(0,t.jsx)(s.code,{children:"react-cache"})}),". It provides APIs for implementing various caches for React applications. As it is dependent on some not-yet-released React APIs, this library should not be used in production."]}),"\n",(0,t.jsxs)(s.h4,{id:"api-calls",children:["API calls",(0,t.jsx)(s.a,{className:"heading-link","aria-label":'Permalink to "API calls"',href:"#api-calls",children:(0,t.jsx)(s.svg,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",width:"16",height:"16",fill:"currentColor","aria-hidden":"true",children:(0,t.jsx)(s.path,{d:"m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"})})})]}),"\n",(0,t.jsxs)(s.p,{children:["One of ",(0,t.jsx)(s.code,{children:"react-cache"})," use cases is to suspend rendering on pending requests."]}),"\n",(0,t.jsx)(s.pre,{className:"language-javascript",children:(0,t.jsx)(s.code,{className:"language-javascript code-highlight",children:(0,t.jsxs)(s.span,{className:"code-line",children:[(0,t.jsx)(s.span,{className:"token keyword",children:"const"})," ",(0,t.jsx)(s.span,{className:"token maybe-class-name",children:"FooListResource"})," ",(0,t.jsx)(s.span,{className:"token operator",children:"="})," ",(0,t.jsx)(s.span,{className:"token function",children:"unstable_createResource"}),(0,t.jsx)(s.span,{className:"token punctuation",children:"("}),(0,t.jsx)(s.span,{className:"token punctuation",children:"("}),(0,t.jsx)(s.span,{className:"token parameter",children:"query"}),(0,t.jsx)(s.span,{className:"token punctuation",children:")"})," ",(0,t.jsx)(s.span,{className:"token arrow operator",children:"=>"})," ",(0,t.jsx)(s.span,{className:"token function",children:"fetchFooList"}),(0,t.jsx)(s.span,{className:"token punctuation",children:"("}),"query",(0,t.jsx)(s.span,{className:"token punctuation",children:")"}),(0,t.jsx)(s.span,{className:"token punctuation",children:")"}),(0,t.jsx)(s.span,{className:"token punctuation",children:";"}),"\n"]})})}),"\n",(0,t.jsxs)(s.p,{children:["In our render, we just read the data using the ",(0,t.jsx)(s.code,{children:"FooListResource.read"}),". This method returns the response from the ",(0,t.jsx)(s.code,{children:"unstable_createResource"})," Promise factory and tells the nearest parent ",(0,t.jsx)(s.code,{children:"React.Suspense"})," to stop the rendering and display the fallback till the resource is ready. The implementation is simple:"]}),"\n",(0,t.jsx)(s.pre,{className:"language-jsx",children:(0,t.jsxs)(s.code,{className:"language-jsx code-highlight",children:[(0,t.jsxs)(s.span,{className:"code-line",children:[(0,t.jsx)(s.span,{className:"token keyword",children:"const"})," ",(0,t.jsx)(s.span,{className:"token function-variable function",children:(0,t.jsx)(s.span,{className:"token maybe-class-name",children:"FooList"})})," ",(0,t.jsx)(s.span,{className:"token operator",children:"="})," ",(0,t.jsx)(s.span,{className:"token punctuation",children:"("}),(0,t.jsx)(s.span,{className:"token punctuation",children:")"})," ",(0,t.jsx)(s.span,{className:"token arrow operator",children:"=>"})," ",(0,t.jsx)(s.span,{className:"token punctuation",children:"{"}),"\n"]}),(0,t.jsxs)(s.span,{className:"code-line",children:["  ",(0,t.jsx)(s.span,{className:"token keyword",children:"const"})," response ",(0,t.jsx)(s.span,{className:"token operator",children:"="})," ",(0,t.jsx)(s.span,{className:"token maybe-class-name",children:"FooListResource"}),(0,t.jsx)(s.span,{className:"token punctuation",children:"."}),(0,t.jsx)(s.span,{className:"token method function property-access",children:"read"}),(0,t.jsx)(s.span,{className:"token punctuation",children:"("}),(0,t.jsx)(s.span,{className:"token punctuation",children:"{"}),"\n"]}),(0,t.jsxs)(s.span,{className:"code-line",children:["    ",(0,t.jsx)(s.span,{className:"token literal-property property",children:"search"}),(0,t.jsx)(s.span,{className:"token operator",children:":"})," ",(0,t.jsx)(s.span,{className:"token string",children:'"search string"'}),(0,t.jsx)(s.span,{className:"token punctuation",children:","}),"\n"]}),(0,t.jsxs)(s.span,{className:"code-line",children:["  ",(0,t.jsx)(s.span,{className:"token punctuation",children:"}"}),(0,t.jsx)(s.span,{className:"token punctuation",children:")"}),(0,t.jsx)(s.span,{className:"token punctuation",children:";"}),"\n"]}),(0,t.jsx)(s.span,{className:"code-line",children:"\n"}),(0,t.jsxs)(s.span,{className:"code-line",children:["  ",(0,t.jsx)(s.span,{className:"token keyword control-flow",children:"return"})," ",(0,t.jsx)(s.span,{className:"token punctuation",children:"("}),"\n"]}),(0,t.jsxs)(s.span,{className:"code-line",children:["    ",(0,t.jsxs)(s.span,{className:"token tag",children:[(0,t.jsxs)(s.span,{className:"token tag",children:[(0,t.jsx)(s.span,{className:"token punctuation",children:"<"}),"ul"]}),(0,t.jsx)(s.span,{className:"token punctuation",children:">"})]}),(0,t.jsx)(s.span,{className:"token plain-text",children:"\n"})]}),(0,t.jsxs)(s.span,{className:"code-line",children:[(0,t.jsx)(s.span,{className:"token plain-text",children:"      "}),(0,t.jsx)(s.span,{className:"token punctuation",children:"{"}),"response",(0,t.jsx)(s.span,{className:"token punctuation",children:"."}),(0,t.jsx)(s.span,{className:"token method function property-access",children:"map"}),(0,t.jsx)(s.span,{className:"token punctuation",children:"("}),(0,t.jsx)(s.span,{className:"token punctuation",children:"("}),(0,t.jsx)(s.span,{className:"token parameter",children:"item"}),(0,t.jsx)(s.span,{className:"token punctuation",children:")"})," ",(0,t.jsx)(s.span,{className:"token arrow operator",children:"=>"})," ",(0,t.jsx)(s.span,{className:"token punctuation",children:"("}),"\n"]}),(0,t.jsxs)(s.span,{className:"code-line",children:["        ",(0,t.jsxs)(s.span,{className:"token tag",children:[(0,t.jsxs)(s.span,{className:"token tag",children:[(0,t.jsx)(s.span,{className:"token punctuation",children:"<"}),"li"]})," ",(0,t.jsx)(s.span,{className:"token attr-name",children:"key"}),(0,t.jsxs)(s.span,{className:"token script language-javascript",children:[(0,t.jsx)(s.span,{className:"token script-punctuation punctuation",children:"="}),(0,t.jsx)(s.span,{className:"token punctuation",children:"{"}),"item",(0,t.jsx)(s.span,{className:"token punctuation",children:"."}),(0,t.jsx)(s.span,{className:"token property-access",children:"id"}),(0,t.jsx)(s.span,{className:"token punctuation",children:"}"})]}),(0,t.jsx)(s.span,{className:"token punctuation",children:">"})]}),(0,t.jsx)(s.span,{className:"token punctuation",children:"{"}),"item",(0,t.jsx)(s.span,{className:"token punctuation",children:"."}),(0,t.jsx)(s.span,{className:"token property-access",children:"text"}),(0,t.jsx)(s.span,{className:"token punctuation",children:"}"}),(0,t.jsxs)(s.span,{className:"token tag",children:[(0,t.jsxs)(s.span,{className:"token tag",children:[(0,t.jsx)(s.span,{className:"token punctuation",children:"</"}),"li"]}),(0,t.jsx)(s.span,{className:"token punctuation",children:">"})]}),"\n"]}),(0,t.jsxs)(s.span,{className:"code-line",children:["      ",(0,t.jsx)(s.span,{className:"token punctuation",children:")"}),(0,t.jsx)(s.span,{className:"token punctuation",children:")"}),(0,t.jsx)(s.span,{className:"token punctuation",children:"}"}),(0,t.jsx)(s.span,{className:"token plain-text",children:"\n"})]}),(0,t.jsxs)(s.span,{className:"code-line",children:[(0,t.jsx)(s.span,{className:"token plain-text",children:"    "}),(0,t.jsxs)(s.span,{className:"token tag",children:[(0,t.jsxs)(s.span,{className:"token tag",children:[(0,t.jsx)(s.span,{className:"token punctuation",children:"</"}),"ul"]}),(0,t.jsx)(s.span,{className:"token punctuation",children:">"})]}),"\n"]}),(0,t.jsxs)(s.span,{className:"code-line",children:["  ",(0,t.jsx)(s.span,{className:"token punctuation",children:")"}),(0,t.jsx)(s.span,{className:"token punctuation",children:";"}),"\n"]}),(0,t.jsxs)(s.span,{className:"code-line",children:[(0,t.jsx)(s.span,{className:"token punctuation",children:"}"}),(0,t.jsx)(s.span,{className:"token punctuation",children:";"}),"\n"]})]})}),"\n",(0,t.jsxs)(s.h4,{id:"embedded-documents",children:["Embedded documents",(0,t.jsx)(s.a,{className:"heading-link","aria-label":'Permalink to "Embedded documents"',href:"#embedded-documents",children:(0,t.jsx)(s.svg,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",width:"16",height:"16",fill:"currentColor","aria-hidden":"true",children:(0,t.jsx)(s.path,{d:"m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"})})})]}),"\n",(0,t.jsxs)(s.p,{children:["You can use ",(0,t.jsx)(s.code,{children:"react-cache"})," to lazy load embedded documents, such as images, videos, scripts, stylesheets, and more. The implementation is quite similar to caching API calls. We start with creating an image resource:"]}),"\n",(0,t.jsx)(s.pre,{className:"language-javascript",children:(0,t.jsxs)(s.code,{className:"language-javascript code-highlight",children:[(0,t.jsxs)(s.span,{className:"code-line",children:[(0,t.jsx)(s.span,{className:"token keyword",children:"const"})," ",(0,t.jsx)(s.span,{className:"token maybe-class-name",children:"ImageResource"})," ",(0,t.jsx)(s.span,{className:"token operator",children:"="})," ",(0,t.jsx)(s.span,{className:"token function",children:"unstable_createResource"}),(0,t.jsx)(s.span,{className:"token punctuation",children:"("}),"\n"]}),(0,t.jsxs)(s.span,{className:"code-line",children:["  ",(0,t.jsx)(s.span,{className:"token punctuation",children:"("}),(0,t.jsx)(s.span,{className:"token parameter",children:"src"}),(0,t.jsx)(s.span,{className:"token punctuation",children:")"})," ",(0,t.jsx)(s.span,{className:"token arrow operator",children:"=>"}),"\n"]}),(0,t.jsxs)(s.span,{className:"code-line",children:["    ",(0,t.jsx)(s.span,{className:"token keyword",children:"new"})," ",(0,t.jsx)(s.span,{className:"token class-name",children:"Promise"}),(0,t.jsx)(s.span,{className:"token punctuation",children:"("}),(0,t.jsx)(s.span,{className:"token punctuation",children:"("}),(0,t.jsxs)(s.span,{className:"token parameter",children:["resolve",(0,t.jsx)(s.span,{className:"token punctuation",children:","})," reject"]}),(0,t.jsx)(s.span,{className:"token punctuation",children:")"})," ",(0,t.jsx)(s.span,{className:"token arrow operator",children:"=>"})," ",(0,t.jsx)(s.span,{className:"token punctuation",children:"{"}),"\n"]}),(0,t.jsxs)(s.span,{className:"code-line",children:["      ",(0,t.jsx)(s.span,{className:"token keyword",children:"const"})," img ",(0,t.jsx)(s.span,{className:"token operator",children:"="})," ",(0,t.jsx)(s.span,{className:"token keyword",children:"new"})," ",(0,t.jsx)(s.span,{className:"token class-name",children:"Image"}),(0,t.jsx)(s.span,{className:"token punctuation",children:"("}),(0,t.jsx)(s.span,{className:"token punctuation",children:")"}),(0,t.jsx)(s.span,{className:"token punctuation",children:";"}),"\n"]}),(0,t.jsxs)(s.span,{className:"code-line",children:["      img",(0,t.jsx)(s.span,{className:"token punctuation",children:"."}),(0,t.jsx)(s.span,{className:"token property-access",children:"src"})," ",(0,t.jsx)(s.span,{className:"token operator",children:"="})," src",(0,t.jsx)(s.span,{className:"token punctuation",children:";"}),"\n"]}),(0,t.jsxs)(s.span,{className:"code-line",children:["      img",(0,t.jsx)(s.span,{className:"token punctuation",children:"."}),(0,t.jsx)(s.span,{className:"token property-access",children:"onload"})," ",(0,t.jsx)(s.span,{className:"token operator",children:"="})," resolve",(0,t.jsx)(s.span,{className:"token punctuation",children:";"}),"\n"]}),(0,t.jsxs)(s.span,{className:"code-line",children:["      ",(0,t.jsx)(s.span,{className:"token comment",children:"// img.onerror = reject;"}),"\n"]}),(0,t.jsxs)(s.span,{className:"code-line",children:["    ",(0,t.jsx)(s.span,{className:"token punctuation",children:"}"}),(0,t.jsx)(s.span,{className:"token punctuation",children:")"}),"\n"]}),(0,t.jsxs)(s.span,{className:"code-line",children:[(0,t.jsx)(s.span,{className:"token punctuation",children:")"}),(0,t.jsx)(s.span,{className:"token punctuation",children:";"}),"\n"]})]})}),"\n",(0,t.jsxs)(s.p,{children:["Now, we need to create an alternative ",(0,t.jsx)(s.code,{children:"img"})," component which will make use of the ",(0,t.jsx)(s.code,{children:"ImageResource"}),". For this, we simply need to call ",(0,t.jsx)(s.code,{children:"ImageResource.read(src)"})," – it will tell the nearest parent ",(0,t.jsx)(s.code,{children:"React.Suspense"})," to stop the rendering and display the fallback till the image is fully loaded. The implementation is straightforward:"]}),"\n",(0,t.jsx)(s.pre,{className:"language-jsx",children:(0,t.jsxs)(s.code,{className:"language-jsx code-highlight",children:[(0,t.jsxs)(s.span,{className:"code-line",children:[(0,t.jsx)(s.span,{className:"token keyword",children:"const"})," ",(0,t.jsx)(s.span,{className:"token function-variable function",children:(0,t.jsx)(s.span,{className:"token maybe-class-name",children:"Img"})})," ",(0,t.jsx)(s.span,{className:"token operator",children:"="})," ",(0,t.jsx)(s.span,{className:"token punctuation",children:"("}),(0,t.jsxs)(s.span,{className:"token parameter",children:[(0,t.jsx)(s.span,{className:"token punctuation",children:"{"})," src",(0,t.jsx)(s.span,{className:"token punctuation",children:","})," ",(0,t.jsx)(s.span,{className:"token spread operator",children:"..."}),"props ",(0,t.jsx)(s.span,{className:"token punctuation",children:"}"})]}),(0,t.jsx)(s.span,{className:"token punctuation",children:")"})," ",(0,t.jsx)(s.span,{className:"token arrow operator",children:"=>"})," ",(0,t.jsx)(s.span,{className:"token punctuation",children:"{"}),"\n"]}),(0,t.jsxs)(s.span,{className:"code-line",children:["  ",(0,t.jsx)(s.span,{className:"token maybe-class-name",children:"ImageResource"}),(0,t.jsx)(s.span,{className:"token punctuation",children:"."}),(0,t.jsx)(s.span,{className:"token method function property-access",children:"read"}),(0,t.jsx)(s.span,{className:"token punctuation",children:"("}),"src",(0,t.jsx)(s.span,{className:"token punctuation",children:")"}),(0,t.jsx)(s.span,{className:"token punctuation",children:";"}),"\n"]}),(0,t.jsx)(s.span,{className:"code-line",children:"\n"}),(0,t.jsxs)(s.span,{className:"code-line",children:["  ",(0,t.jsx)(s.span,{className:"token keyword control-flow",children:"return"})," ",(0,t.jsxs)(s.span,{className:"token tag",children:[(0,t.jsxs)(s.span,{className:"token tag",children:[(0,t.jsx)(s.span,{className:"token punctuation",children:"<"}),"img"]})," ",(0,t.jsx)(s.span,{className:"token attr-name",children:"src"}),(0,t.jsxs)(s.span,{className:"token script language-javascript",children:[(0,t.jsx)(s.span,{className:"token script-punctuation punctuation",children:"="}),(0,t.jsx)(s.span,{className:"token punctuation",children:"{"}),"src",(0,t.jsx)(s.span,{className:"token punctuation",children:"}"})]})," ",(0,t.jsxs)(s.span,{className:"token spread",children:[(0,t.jsx)(s.span,{className:"token punctuation",children:"{"}),(0,t.jsx)(s.span,{className:"token spread operator",children:"..."}),"props",(0,t.jsx)(s.span,{className:"token punctuation",children:"}"})]})," ",(0,t.jsx)(s.span,{className:"token punctuation",children:"/>"})]}),(0,t.jsx)(s.span,{className:"token punctuation",children:";"}),"\n"]}),(0,t.jsxs)(s.span,{className:"code-line",children:[(0,t.jsx)(s.span,{className:"token punctuation",children:"}"}),(0,t.jsx)(s.span,{className:"token punctuation",children:";"}),"\n"]})]})}),"\n",(0,t.jsxs)(s.p,{children:["Now, we can create a wrapper that will take care of providing the low-resolution fallback image for us – we just need to wrap the newly created ",(0,t.jsx)(s.code,{children:"Img"})," component with a ",(0,t.jsx)(s.code,{children:"React.Suspense"})," and provide a fallback image, as follows:"]}),"\n",(0,t.jsx)(s.pre,{className:"language-jsx",children:(0,t.jsxs)(s.code,{className:"language-jsx code-highlight",children:[(0,t.jsxs)(s.span,{className:"code-line",children:[(0,t.jsx)(s.span,{className:"token keyword",children:"const"})," ",(0,t.jsx)(s.span,{className:"token function-variable function",children:(0,t.jsx)(s.span,{className:"token maybe-class-name",children:"LazyImg"})})," ",(0,t.jsx)(s.span,{className:"token operator",children:"="})," ",(0,t.jsx)(s.span,{className:"token punctuation",children:"("}),(0,t.jsxs)(s.span,{className:"token parameter",children:[(0,t.jsx)(s.span,{className:"token punctuation",children:"{"})," lowResSrc",(0,t.jsx)(s.span,{className:"token punctuation",children:","})," highResSrc",(0,t.jsx)(s.span,{className:"token punctuation",children:","})," ",(0,t.jsx)(s.span,{className:"token spread operator",children:"..."}),"props ",(0,t.jsx)(s.span,{className:"token punctuation",children:"}"})]}),(0,t.jsx)(s.span,{className:"token punctuation",children:")"})," ",(0,t.jsx)(s.span,{className:"token arrow operator",children:"=>"})," ",(0,t.jsx)(s.span,{className:"token punctuation",children:"("}),"\n"]}),(0,t.jsxs)(s.span,{className:"code-line",children:["  ",(0,t.jsxs)(s.span,{className:"token tag",children:[(0,t.jsxs)(s.span,{className:"token tag",children:[(0,t.jsx)(s.span,{className:"token punctuation",children:"<"}),(0,t.jsx)(s.span,{className:"token class-name",children:"React.Suspense"})]})," ",(0,t.jsx)(s.span,{className:"token attr-name",children:"fallback"}),(0,t.jsxs)(s.span,{className:"token script language-javascript",children:[(0,t.jsx)(s.span,{className:"token script-punctuation punctuation",children:"="}),(0,t.jsx)(s.span,{className:"token punctuation",children:"{"}),(0,t.jsxs)(s.span,{className:"token tag",children:[(0,t.jsxs)(s.span,{className:"token tag",children:[(0,t.jsx)(s.span,{className:"token punctuation",children:"<"}),"img"]})," ",(0,t.jsxs)(s.span,{className:"token spread",children:[(0,t.jsx)(s.span,{className:"token punctuation",children:"{"}),(0,t.jsx)(s.span,{className:"token spread operator",children:"..."}),"props",(0,t.jsx)(s.span,{className:"token punctuation",children:"}"})]})," ",(0,t.jsx)(s.span,{className:"token attr-name",children:"src"}),(0,t.jsxs)(s.span,{className:"token script language-javascript",children:[(0,t.jsx)(s.span,{className:"token script-punctuation punctuation",children:"="}),(0,t.jsx)(s.span,{className:"token punctuation",children:"{"}),"lowResSrc",(0,t.jsx)(s.span,{className:"token punctuation",children:"}"})]})," ",(0,t.jsx)(s.span,{className:"token punctuation",children:"/>"})]}),(0,t.jsx)(s.span,{className:"token punctuation",children:"}"})]}),(0,t.jsx)(s.span,{className:"token punctuation",children:">"})]}),(0,t.jsx)(s.span,{className:"token plain-text",children:"\n"})]}),(0,t.jsxs)(s.span,{className:"code-line",children:[(0,t.jsx)(s.span,{className:"token plain-text",children:"    "}),(0,t.jsxs)(s.span,{className:"token tag",children:[(0,t.jsxs)(s.span,{className:"token tag",children:[(0,t.jsx)(s.span,{className:"token punctuation",children:"<"}),(0,t.jsx)(s.span,{className:"token class-name",children:"Img"})]})," ",(0,t.jsxs)(s.span,{className:"token spread",children:[(0,t.jsx)(s.span,{className:"token punctuation",children:"{"}),(0,t.jsx)(s.span,{className:"token spread operator",children:"..."}),"props",(0,t.jsx)(s.span,{className:"token punctuation",children:"}"})]})," ",(0,t.jsx)(s.span,{className:"token attr-name",children:"src"}),(0,t.jsxs)(s.span,{className:"token script language-javascript",children:[(0,t.jsx)(s.span,{className:"token script-punctuation punctuation",children:"="}),(0,t.jsx)(s.span,{className:"token punctuation",children:"{"}),"highResSrc",(0,t.jsx)(s.span,{className:"token punctuation",children:"}"})]})," ",(0,t.jsx)(s.span,{className:"token punctuation",children:"/>"})]}),(0,t.jsx)(s.span,{className:"token plain-text",children:"\n"})]}),(0,t.jsxs)(s.span,{className:"code-line",children:[(0,t.jsx)(s.span,{className:"token plain-text",children:"  "}),(0,t.jsxs)(s.span,{className:"token tag",children:[(0,t.jsxs)(s.span,{className:"token tag",children:[(0,t.jsx)(s.span,{className:"token punctuation",children:"</"}),(0,t.jsx)(s.span,{className:"token class-name",children:"React.Suspense"})]}),(0,t.jsx)(s.span,{className:"token punctuation",children:">"})]}),"\n"]}),(0,t.jsxs)(s.span,{className:"code-line",children:[(0,t.jsx)(s.span,{className:"token punctuation",children:")"}),"\n"]})]})}),"\n",(0,t.jsxs)(s.p,{children:["There’s a GitHub project named ",(0,t.jsx)(s.code,{children:"the-platform"})," which turns Web APIs into React Hooks and Suspense-friendly React components. It provides a set of lazy components out of the box, such as:"]}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsx)(s.li,{children:(0,t.jsx)(s.a,{href:"https://github.com/jaredpalmer/the-platform#img",rel:"nofollow noopener noreferrer",target:"_blank",children:(0,t.jsx)(s.code,{children:"<Img>"})})}),"\n",(0,t.jsx)(s.li,{children:(0,t.jsx)(s.a,{href:"https://github.com/jaredpalmer/the-platform#script",rel:"nofollow noopener noreferrer",target:"_blank",children:(0,t.jsx)(s.code,{children:"<Script>"})})}),"\n",(0,t.jsx)(s.li,{children:(0,t.jsx)(s.a,{href:"https://github.com/jaredpalmer/the-platform#video",rel:"nofollow noopener noreferrer",target:"_blank",children:(0,t.jsx)(s.code,{children:"<Video>"})})}),"\n",(0,t.jsx)(s.li,{children:(0,t.jsx)(s.a,{href:"https://github.com/jaredpalmer/the-platform#audio",rel:"nofollow noopener noreferrer",target:"_blank",children:(0,t.jsx)(s.code,{children:"<Audio>"})})}),"\n",(0,t.jsx)(s.li,{children:(0,t.jsx)(s.a,{href:"https://github.com/jaredpalmer/the-platform#preload",rel:"nofollow noopener noreferrer",target:"_blank",children:(0,t.jsx)(s.code,{children:"<Preload>"})})}),"\n",(0,t.jsx)(s.li,{children:(0,t.jsx)(s.a,{href:"https://github.com/jaredpalmer/the-platform#stylesheet",rel:"nofollow noopener noreferrer",target:"_blank",children:(0,t.jsx)(s.code,{children:"<Stylesheet>"})})}),"\n"]}),"\n",(0,t.jsxs)(s.h2,{id:"resources",children:["Resources",(0,t.jsx)(s.a,{className:"heading-link","aria-label":'Permalink to "Resources"',href:"#resources",children:(0,t.jsx)(s.svg,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",width:"16",height:"16",fill:"currentColor","aria-hidden":"true",children:(0,t.jsx)(s.path,{d:"m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"})})})]}),"\n",(0,t.jsxs)(s.ol,{children:["\n",(0,t.jsx)(s.li,{children:"https://legacy.reactjs.org/docs/code-splitting.html"}),"\n",(0,t.jsx)(s.li,{children:"https://medium.com/@rossbulat/react-lazy-suspense-and-concorrent-react-breakdown-with-examples-2758de98cb1c"}),"\n",(0,t.jsx)(s.li,{children:"https://github.com/palmerhq/the-platform"}),"\n",(0,t.jsx)(s.li,{children:"https://youtube.com/watch?v=SCQgE4mTnjU"}),"\n",(0,t.jsx)(s.li,{children:"https://www.youtube.com/watch?v=ByBPyMBTzM0"}),"\n"]})]})}var i=function(e){void 0===e&&(e={});const{wrapper:s}=Object.assign({},(0,c.a)(),e.components);return s?(0,t.jsx)(s,Object.assign({},e,{children:(0,t.jsx)(l,e)})):l(e)};var o=n(4361),r=n(8029),d=n(8875),p=n(180),h=n(5551),m=n(9213),x=n(3120),u=n(6026),j=n(2349),k=n(7123);function N(e){let{data:s,pageContext:n,children:a}=e;const l=n.data,{frontmatter:i,tableOfContents:j}=l,{slug:N,timeToRead:g}=l.fields,{title:f,language:w,authors:b,datePublished:y,datePublishedMeta:v,dateUpdated:R,dateUpdatedMeta:P}=i,_=`${s.site.siteMetadata.siteUrl}/thumbnails/${(0,o.H)(N)}.png`;return(0,t.jsx)(h.A,{children:(0,t.jsx)(d.V,{children:(0,t.jsxs)("article",{className:"post",itemScope:!0,itemType:"http://schema.org/Article",lang:w,children:[(0,t.jsx)("meta",{itemProp:"image",content:_}),(0,t.jsx)("meta",{itemProp:"dateModified",content:P}),(0,t.jsx)("meta",{itemProp:"wordCount",content:`${g.words}`}),(0,t.jsxs)("header",{className:"post__header",children:[(0,t.jsx)("h1",{itemProp:"headline",children:f}),(0,t.jsxs)("p",{className:"post__header--metadata",children:[(0,t.jsx)(x.X,{data:b})," on ",(0,t.jsx)("time",{dateTime:v,itemProp:"datePublished",title:`Last modified on ${R}`,className:"post__header--date",children:y})," • ",(0,t.jsx)(u.t,{value:g.minutes})]})]}),(0,t.jsxs)("div",{className:"post__wrapper",children:[j.items?(0,t.jsx)("div",{className:"post__toc",children:(0,t.jsx)(k.o,{data:j})}):null,(0,t.jsxs)("div",{className:"post__content",children:[(0,t.jsx)("div",{itemProp:"articleBody",children:(0,t.jsx)(c.Z,{components:{Alert:r.b,Newsletter:m.m},children:a})}),(0,t.jsx)(p.$,{lang:w})]})]})]})})})}function g(e){return a.createElement(N,e,a.createElement(i,e))}function f(e){let{data:s,pageContext:n}=e;const a=n.data,c=a.fields.slug,{excerpt:l}=a,{title:i,description:r}=a.frontmatter,d=s.site.siteMetadata.siteUrl,p=`${d}/thumbnails/${(0,o.H)(c)}.png`;return(0,t.jsx)(j.H,{url:`${d}${c}`,title:i,image:p,description:r||l,children:(0,t.jsx)("html",{className:"smooth-scroll"})})}}}]);
//# sourceMappingURL=component---src-templates-blog-post-tsx-content-file-path-content-blog-2019-04-19-lazy-loading-and-code-splitting-in-react-apps-index-md-5bee7dbcfcec064aa694.js.map