<!DOCTYPE html><html lang="en" dir="ltr" vocab="http://schema.org" itemtype="http://schema.org/WebPage" itemscope=""><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=5,shrink-to-fit=no,minimal-ui"><link rel="prefetch" href="/discussion-dark.css" as="style"><link rel="prefetch" href="/discussion-light.css" as="style"><meta data-react-helmet="true" name="twitter:description" content="Lazy loading is a well-known technique for improving performance and reducing the associated resources costs. It&#x27;s so effective that it&#x27;s…"><meta data-react-helmet="true" name="twitter:title" content="Lazy loading and code splitting in React"><meta data-react-helmet="true" name="twitter:card" content="summary"><meta data-react-helmet="true" property="og:type" content="website"><meta data-react-helmet="true" property="og:description" content="Lazy loading is a well-known technique for improving performance and reducing the associated resources costs. It&#x27;s so effective that it&#x27;s…"><meta data-react-helmet="true" property="og:title" content="Lazy loading and code splitting in React"><meta data-react-helmet="true" name="description" content="Lazy loading is a well-known technique for improving performance and reducing the associated resources costs. It&#x27;s so effective that it&#x27;s…"><meta name="generator" content="Gatsby 4.11.2"><style data-href="/styles.a7859ca1c9ed617c5a9e.css" data-identity="gatsby-global-css">/*! normalize.css v8.0.1 | MIT License | github.com/necolas/normalize.css */html{-webkit-text-size-adjust:100%;line-height:1.15}body{margin:0}main{display:block}h1{font-size:2em;margin:.67em 0}hr{box-sizing:content-box;height:0;overflow:visible}pre{font-family:monospace,monospace;font-size:1em}a{background-color:transparent}abbr[title]{border-bottom:none;text-decoration:underline;-webkit-text-decoration:underline dotted;text-decoration:underline dotted}b,strong{font-weight:bolder}code,kbd,samp{font-family:monospace,monospace;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}button,input,optgroup,select,textarea{font-family:inherit;font-size:100%;line-height:1.15;margin:0}button,input{overflow:visible}button,select{text-transform:none}[type=button],[type=reset],[type=submit],button{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{padding:.35em .75em .625em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}progress{vertical-align:baseline}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}details{display:block}summary{display:list-item}[hidden],template{display:none}*,:after,:before{box-sizing:inherit;outline:0}*{-webkit-tap-highlight-color:transparent}body,html{text-rendering:optimizeLegibility;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;box-sizing:border-box;min-width:320px}h1,h2,h3,h4,h5,h6{-webkit-font-feature-settings:"zero","liga","lnum","kern";font-feature-settings:"zero","liga","lnum","kern"}html{font-size:62.5%}body{background-color:var(--background-100);font-family:var(--fn-main);font-size:var(--vr-fs)}:root{--fn-main:-apple-system,BlinkMacSystemFont,"Segoe UI",Helvetica,Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol";--fn-head:"Gill Sans","Gill Sans MT",Calibri,"Trebuchet MS",var(--fn-main);--fn-mono:SFMono-Regular,Consolas,Liberation Mono,Menlo,Courier,monospace;--fn-serif:"pt serif",Georgia,Cambria,times new roman,Times,serif;--vr-unit:0.8rem;--vr-fs:calc(var(--vr-unit)*2);--vr-lh:calc(var(--vr-unit)*3);--fs-xs:1.2rem;--lh-xs:var(--vr-lh);--fs-sm:1.4rem;--lh-sm:var(--vr-lh);--fs-md:1.6rem;--lh-md:var(--vr-lh);--fs-lg:2rem;--lh-lg:var(--vr-lh);--fs-xl:3.2rem;--lh-xl:calc(var(--vr-lh)*2);--fs-xxl:3.8rem;--lh-xxl:calc(var(--vr-lh)*2);--br-md:calc(var(--vr-unit)*2);--cs-sm:calc(var(--vr-unit)*1);--cs-md:calc(var(--vr-unit)*2);--cs-xl:calc(var(--vr-unit)*3);--ls-xxs:calc(var(--vr-unit)*2);--ls-xs:calc(var(--vr-unit)*3);--ls-sm:calc(var(--vr-unit)*4);--ls-md:calc(var(--vr-unit)*6);--ls-lg:calc(var(--vr-unit)*8);--ls-xl:calc(var(--vr-unit)*12);--ls-xxl:calc(var(--vr-unit)*20);--mw-xxs:calc(var(--vr-unit)*54);--mw-xs:calc(var(--vr-unit)*74);--mw-sm:calc(var(--vr-unit)*107);--mw-md:calc(var(--vr-unit)*156)}body.dark{--text-primary:#e8e8e8;--text-secondary:#9e9e9e;--background-100-shade:0 0% 7%;--background-100:hsl(var(--background-100-shade));--background-300:#121212;--background-500:#262626;--primary-100:#241439;--primary-300:#542e84;--primary-500:#7742bd;--color-success:#16a249;--color-success-background:rgba(22,162,73,.1);--color-failure:#ba1c1c;--color-failure-background:rgba(186,28,28,.1);--color-warning:#db7706;--color-warning-background:rgba(219,119,6,.1);--color-info:#1d4fd7;--color-info-background:rgba(29,79,215,.1);--color-prettylights-syntax-comment:#768390;--color-prettylights-syntax-constant:#6cb6ff;--color-prettylights-syntax-entity:#dcbdfb;--color-prettylights-syntax-storage-modifier-import:#adbac7;--color-prettylights-syntax-entity-tag:#8ddb8c;--color-prettylights-syntax-keyword:#f47067;--color-prettylights-syntax-string:#96d0ff;--color-prettylights-syntax-variable:#f69d50;--color-prettylights-syntax-brackethighlighter-unmatched:#e5534b;--color-prettylights-syntax-invalid-illegal-text:#cdd9e5;--color-prettylights-syntax-invalid-illegal-bg:#922323;--color-prettylights-syntax-carriage-return-text:#cdd9e5;--color-prettylights-syntax-carriage-return-bg:#ad2e2c;--color-prettylights-syntax-string-regexp:#8ddb8c;--color-prettylights-syntax-markup-list:#eac55f;--color-prettylights-syntax-markup-heading:#316dca;--color-prettylights-syntax-markup-italic:#adbac7;--color-prettylights-syntax-markup-bold:#adbac7;--color-prettylights-syntax-markup-deleted-text:#ffd8d3;--color-prettylights-syntax-markup-deleted-bg:#78191b;--color-prettylights-syntax-markup-inserted-text:#b4f1b4;--color-prettylights-syntax-markup-inserted-bg:#1b4721;--color-prettylights-syntax-markup-changed-text:#ffddb0;--color-prettylights-syntax-markup-changed-bg:#682d0f;--color-prettylights-syntax-markup-ignored-text:#adbac7;--color-prettylights-syntax-markup-ignored-bg:#255ab2;--color-prettylights-syntax-meta-diff-range:#dcbdfb;--color-prettylights-syntax-brackethighlighter-angle:#768390;--color-prettylights-syntax-sublimelinter-gutter-mark:#545d68;--color-prettylights-syntax-constant-other-reference-link:#96d0ff;color-scheme:dark}body.light{--text-primary:#000;--text-secondary:#404040;--background-100-shade:0 0% 100%;--background-100:hsl(var(--background-100-shade));--background-300:#f7f7f7;--background-500:#e0e0e0;--primary-100:#fff6eb;--primary-300:#fec581;--primary-500:#fc8c03;--color-success:#16a249;--color-success-background:rgba(22,162,73,.1);--color-failure:#ba1c1c;--color-failure-background:rgba(186,28,28,.1);--color-warning:#db7706;--color-warning-background:rgba(219,119,6,.1);--color-info:#1d4fd7;--color-info-background:rgba(29,79,215,.1);--color-prettylights-syntax-comment:#6e7781;--color-prettylights-syntax-constant:#0550ae;--color-prettylights-syntax-entity:#8250df;--color-prettylights-syntax-storage-modifier-import:#24292f;--color-prettylights-syntax-entity-tag:#116329;--color-prettylights-syntax-keyword:#cf222e;--color-prettylights-syntax-string:#0a3069;--color-prettylights-syntax-variable:#953800;--color-prettylights-syntax-brackethighlighter-unmatched:#82071e;--color-prettylights-syntax-invalid-illegal-text:#f6f8fa;--color-prettylights-syntax-invalid-illegal-bg:#82071e;--color-prettylights-syntax-carriage-return-text:#f6f8fa;--color-prettylights-syntax-carriage-return-bg:#cf222e;--color-prettylights-syntax-string-regexp:#116329;--color-prettylights-syntax-markup-list:#3b2300;--color-prettylights-syntax-markup-heading:#0550ae;--color-prettylights-syntax-markup-italic:#24292f;--color-prettylights-syntax-markup-bold:#24292f;--color-prettylights-syntax-markup-deleted-text:#82071e;--color-prettylights-syntax-markup-deleted-bg:#ffebe9;--color-prettylights-syntax-markup-inserted-text:#116329;--color-prettylights-syntax-markup-inserted-bg:#dafbe1;--color-prettylights-syntax-markup-changed-text:#953800;--color-prettylights-syntax-markup-changed-bg:#ffd8b5;--color-prettylights-syntax-markup-ignored-text:#eaeef2;--color-prettylights-syntax-markup-ignored-bg:#0550ae;--color-prettylights-syntax-meta-diff-range:#8250df;--color-prettylights-syntax-brackethighlighter-angle:#57606a;--color-prettylights-syntax-sublimelinter-gutter-mark:#8c959f;--color-prettylights-syntax-constant-other-reference-link:#0a3069;color-scheme:light}a{color:var(--primary-500);text-decoration:none}.visually-hidden:not(:focus){clip:rect(0,0,0,0)!important;border:0!important;height:1px!important;margin:-1px!important;overflow:hidden!important;padding:0!important;position:absolute!important;white-space:nowrap!important;width:1px!important}.list{list-style:none;margin:0;padding:0}.repositories{-webkit-column-gap:var(--ls-xxs);column-gap:var(--ls-xxs);display:grid;padding:0 0 var(--ls-xl) 0;row-gap:var(--ls-xxs)}@media screen and (min-width:700px){.repositories{grid-template-columns:repeat(2,1fr)}}@media screen and (min-width:1050px){.repositories{grid-template-columns:repeat(3,1fr)}}.post__content{counter-reset:h2}.post__content h2{counter-reset:h3}.post__content h3{counter-reset:h4}.post__content h4{counter-reset:h5}.post__content h5{counter-reset:h6}.post__content h2:before{content:counter(h2) ". ";counter-increment:h2}.post__content h3:before{content:counter(h2) "." counter(h3) ". ";counter-increment:h3}.post__content h4:before{content:counter(h2) "." counter(h3) "." counter(h4) ". ";counter-increment:h4}.post__content h5:before{content:counter(h2) "." counter(h3) "." counter(h4) "." counter(h5) ". ";counter-increment:h5}.post__content h6:before{content:counter(h2) "." counter(h3) "." counter(h4) "." counter(h5) "." counter(h6) ". ";counter-increment:h6}.post h1,.post h2,.post h3,.post h4,.post h5,.post h6{font-family:var(--fn-head);font-style:normal;font-weight:700;letter-spacing:-.02em}.post__content,.post__content blockquote,.post__content blockquote p,.post__content ol li,.post__content p,.post__content ul li{font-family:var(--fn-serif);font-size:var(--fs-lg);font-style:normal;font-weight:400;line-height:calc(var(--vr-unit)*4)}.post__content{word-wrap:break-word;overflow-wrap:break-word;word-break:break-word}.post__header{color:var(--text-primary);margin:var(--ls-xl) 0;text-align:center}.post__header time{display:block;font-size:var(--fs-md);line-height:var(--lh-md);margin-top:var(--ls-xxs)}.post h1,.post h2,.post h3,.post h4,.post h5,.post h6{margin:0}.post h1{font-size:var(--fs-xxl);line-height:var(--lh-xxl)}.post h2{font-size:var(--fs-xl);line-height:var(--lh-xl)}.post h3,.post h4{font-size:var(--fs-lg);line-height:var(--lh-lg)}.post__content{color:var(--text-primary);margin:0 auto;max-width:var(--mw-sm);width:100%}.post__content a{border:solid;border-width:0 0 1px;letter-spacing:-.005em}.post__content a,.post__content a code{color:inherit}.post__content a:focus,.post__content a:hover{border:solid var(--primary-500);border-width:0 0 2px;color:var(--primary-500)}.post__content abbr{border-bottom:1px dashed var(--text-secondary);cursor:help;text-decoration:none}.post__content h2,.post__content h3{margin-top:var(--ls-md)}.post__content h4{margin-top:var(--ls-sm)}.post__content b,.post__content strong{font-weight:700}.post__content p{letter-spacing:.01rem;margin-bottom:0;margin-top:var(--ls-xxs)}.post__content p img{height:auto;margin:var(--ls-sm) auto var(--ls-xxs);max-width:100%}.post__content a>code,.post__content li>code,.post__content p>code{font-size:calc(var(--fs-lg)*.9);line-height:calc(var(--vr-unit)*4)}.post__content ol,.post__content ul{margin:var(--ls-sm) 0;padding:0}.post__content ol li,.post__content ul li{letter-spacing:-.005em;margin-bottom:var(--ls-xxs);margin-left:var(--ls-sm)}.post__content ol ol,.post__content ol ul,.post__content ul ol,.post__content ul ul{margin:var(--ls-xxs) 0 0}.post__content blockquote{border-left:5px solid var(--text-secondary);margin:var(--ls-md) calc(var(--ls-xxs)*-1);padding:var(--cs-xxs) var(--ls-xxs) var(--cs-xxs) calc(var(--ls-xxs) - 5px)}.post__content blockquote,.post__content blockquote p{color:var(--text-secondary);font-style:italic;letter-spacing:-.01em}.post__content code,.post__content pre{word-wrap:normal;color:var(--text-secondary);font-family:var(--fn-mono);font-size:var(--fs-md);font-style:normal;font-weight:400;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none;line-height:var(--lh-md);-o-tab-size:4;tab-size:4;text-align:left;white-space:pre;word-break:normal;word-spacing:normal}.post__content pre{-webkit-overflow-scrolling:auto;background-color:var(--background-300);margin:var(--ls-md) calc(var(--ls-xxs)*-1);min-width:100%;overflow:auto;padding:var(--ls-xs) var(--ls-xxs)}@media screen and (min-width:800px){.post__content pre{border-radius:var(--br-md);margin:var(--ls-md) 0;padding:var(--ls-xs)}}.post__content code{border-radius:var(--br-md);letter-spacing:-.005em}.post__content code .comment{color:var(--color-prettylights-syntax-comment)}.post__content code .constant{color:var(--color-prettylights-syntax-constant)}.post__content code .function{color:var(--color-prettylights-syntax-entity)}.post__content code .keyword{color:var(--color-prettylights-syntax-keyword)}.post__content code .string{color:var(--color-prettylights-syntax-string)}.post__content code .number{color:var(--color-prettylights-syntax-constant)}.post__content code .variable{color:var(--color-prettylights-syntax-variable)}.post__content code .operator{color:var(--color-prettylights-syntax-constant)}.post__content code .class-name{color:var(--color-prettylights-syntax-storage-modifier-import)}.post__content code .attr-name,.post__content code .selector{color:var(--color-prettylights-syntax-constant)}.post__content code .rule{color:var(--color-prettylights-syntax-keyword)}.post__content code .tag>.tag{color:var(--color-prettylights-syntax-entity-tag)}.post__content code .tag>.punctuation:last-child,.post__content code .tag>.tag .punctuation{color:var(--color-prettylights-syntax-constant)}.post__content code .deleted{background-color:var(--color-prettylights-syntax-markup-deleted-bg);color:var(--color-prettylights-syntax-markup-deleted-text)}.post__content code .inserted{background-color:var(--color-prettylights-syntax-markup-inserted-bg);color:var(--color-prettylights-syntax-markup-inserted-text)}.post__content code .property{color:var(--color-prettylights-syntax-entity-tag)}.post__content code .gatsby-highlight-code-line{background-color:var(--background-500);border-left:.25em solid var(--primary-500);display:block;margin-left:calc(var(--ls-xs)*-1);margin-right:calc(var(--ls-xs)*-1);padding-left:1.25em;padding-right:1em}.post__content figure{margin:0}.post__content hr{border:0;display:block;height:0;margin:var(--ls-xl) 0;padding:0;text-align:center}.post__content hr:before{color:var(--text-secondary);content:"...";display:inline-block;font-family:var(--fn-serif);font-size:var(--fs-xl);font-style:italic;font-weight:400;letter-spacing:.6em;line-height:var(--lh-xl);margin-left:.6em;position:relative;top:-30px}.index-module--alert--r0Bkf{border-left-style:solid;border-left-width:5px;font-family:var(--fn-serif);font-size:var(--fs-lg);font-style:normal;font-weight:400;line-height:calc(var(--vr-unit)*4);margin:var(--ls-md) calc(var(--ls-xxs)*-1);padding:var(--ls-xxs) var(--ls-xxs) var(--ls-xxs) calc(var(--ls-xxs) - 5px)}.index-module--alert--r0Bkf>:first-child{margin-top:0}.index-module--alert--r0Bkf>:last-child,.index-module--alert--r0Bkf>:last-child pre{margin-bottom:0}.index-module--alert__success--FEQ2z{background-color:var(--color-success-background);border-left-color:var(--color-success)}.index-module--alert__failure--x7zLA{background-color:var(--color-failure-background);border-left-color:var(--color-failure)}.index-module--alert__warning--W6jhb{background-color:var(--color-warning-background);border-left-color:var(--color-warning)}.index-module--alert__info--z6D\+y{background-color:var(--color-info-background);border-left-color:var(--color-info)}.index-module--content--Ni\+7M{margin:0 auto;max-width:var(--mw-md);padding:0 var(--ls-xxs);position:relative;width:100%}.index-module--heading__wrapper--MoMom{margin:var(--ls-lg) 0;text-align:center}.index-module--heading__text--7fYiM{color:var(--text-primary);margin-left:auto;margin-right:auto;max-width:var(--mw-xxs)}.index-module--heading__text--h2--37Rxf{font-family:var(--fn-head);font-size:var(--fs-xxl);font-weight:700;line-height:var(--lh-xxl);margin-bottom:var(--ls-xxs);margin-top:0}.index-module--heading__text--h3--soBei{font-size:var(--fs-md);font-weight:400;line-height:var(--lh-md)}.index-module--hero--XvzmV{height:calc(100vh - var(--vr-lh)*3);min-height:288px}@media screen and (min-width:700px){.index-module--hero--XvzmV{height:480px}}.index-module--hero__wrapper--GiSG-{align-items:center;background-color:var(--background-300);background:linear-gradient(to bottom,var(--background-100),var(--background-300) 40%) fixed;display:flex;height:100%;justify-content:center}@media screen and (min-width:700px){.index-module--hero__wrapper--GiSG-{padding-bottom:calc(var(--vr-lh)*3)}}.index-module--hero__title--3Ox0E{color:var(--text-primary);font-family:var(--fn-head);font-size:65px;letter-spacing:-.003em;line-height:65px;margin:0 0 var(--cs-md)}@media screen and (min-width:700px){.index-module--hero__title--3Ox0E{font-size:83px;line-height:83px}}.index-module--hero__subtitle--zaaas{color:var(--text-primary);font-size:18px;letter-spacing:.85px;margin:0 0 0 4px}@media screen and (min-width:700px){.index-module--hero__subtitle--zaaas{font-size:16px;letter-spacing:.75px;margin:0 0 0 6px}}.index-module--hero__subtitle--zaaas span{display:none}@media screen and (min-width:700px){.index-module--hero__subtitle--zaaas span{display:initial}}.giscus{margin-left:auto;margin-right:auto;max-width:var(--mw-sm)}.index-module--skip--h8eFE{background-color:var(--primary-500);color:var(--text-primary);font-family:var(--fn-main);font-size:var(--fs-lg);font-weight:700;left:var(--cs-md);line-height:var(--lh-lg);position:absolute;top:var(--cs-xl);z-index:5}.index-module--footer__item--6JsIL a,.index-module--footer__source--KGfyF a{--line-color:var(--primary-500);--line-offset:8px;--line-size-hover:3px;--line-animation-duration:150ms;--line-animation-timing-function:ease-in-out;background-image:linear-gradient(to right,var(--line-color) 0,var(--line-color) 100%);background-position:left 85%;background-repeat:no-repeat;background-size:0 var(--line-size-hover);padding-bottom:var(--line-offset)}@media(prefers-reduced-motion:no-preference)and (hover:hover){.index-module--footer__item--6JsIL a,.index-module--footer__source--KGfyF a{transition-duration:var(--line-animation-duration);transition-property:background-size;transition-timing-function:var(--line-animation-timing-function)}}.index-module--footer__item--6JsIL a:focus,.index-module--footer__item--6JsIL a:hover,.index-module--footer__source--KGfyF a:focus,.index-module--footer__source--KGfyF a:hover{background-size:100% var(--line-size-hover)}.index-module--footer--cePDb{margin:0 auto;max-width:var(--mw-md);padding:var(--ls-lg) var(--cs-md)}.index-module--footer__menu--kVtyV{margin:0 0 var(--cs-xl);padding:0}.index-module--footer__item--6JsIL{display:inline-block;font-family:var(--fn-mono);font-size:var(--fs-md);line-height:var(--lh-md);margin-left:0;margin-right:var(--cs-xl)}.index-module--footer__item--right--52KWH{float:right;margin-left:var(--cs-xl);margin-right:0}.index-module--footer__item--6JsIL a{color:var(--text-primary)}.index-module--footer__item-text--NJUmW{display:none}@media screen and (min-width:700px){.index-module--footer__item-text--NJUmW{display:initial}}.index-module--footer__item-icon--7dhxi{fill:var(--text-primary);vertical-align:middle;width:22px}.index-module--footer__item-icon--youtube--iV7DW{width:26px}@media screen and (min-width:700px){.index-module--footer__item-icon--7dhxi{display:none}}.index-module--footer__source--KGfyF{color:var(--text-primary);font-size:var(--fs-md);line-height:var(--lh-md);margin:var(--cs-xl) 0 0}.index-module--header__item--fTLv5 a{--line-color:var(--primary-500);--line-offset:8px;--line-size-hover:3px;--line-animation-duration:150ms;--line-animation-timing-function:ease-in-out;background-image:linear-gradient(to right,var(--line-color) 0,var(--line-color) 100%);background-position:left 85%;background-repeat:no-repeat;background-size:0 var(--line-size-hover);padding-bottom:var(--line-offset)}@media(prefers-reduced-motion:no-preference)and (hover:hover){.index-module--header__item--fTLv5 a{transition-duration:var(--line-animation-duration);transition-property:background-size;transition-timing-function:var(--line-animation-timing-function)}}.index-module--header__item--fTLv5 a:focus,.index-module--header__item--fTLv5 a:hover{background-size:100% var(--line-size-hover)}.index-module--header--uRWhT{background-color:hsla(var(--background-100-shade)/.85);box-shadow:0 0 8px -3px var(--background-100);position:-webkit-sticky;position:sticky;top:0;width:100%;z-index:4}@supports((-webkit-backdrop-filter:none) or (backdrop-filter:none)){.index-module--header--uRWhT{-webkit-backdrop-filter:blur(5px);backdrop-filter:blur(5px)}.dark .index-module--header--uRWhT{background-color:hsla(var(--background-100-shade)/.75)}.light .index-module--header--uRWhT{background-color:hsla(var(--background-100-shade)/.5)}}.index-module--header__content--uoC37{align-items:center;display:flex;list-style:none;margin:0 auto;max-width:var(--mw-md);padding:var(--cs-xl) var(--cs-md)}.index-module--header__item--fTLv5{font-family:var(--fn-main);font-size:var(--fs-md);font-weight:500;line-height:var(--lh-md);padding:0 0 0 var(--cs-xl)}.index-module--header__item--fTLv5 a{color:var(--text-primary)}.index-module--header__item--logo--wqw7T{flex:1 1;font-size:var(--fs-lg);font-weight:700;line-height:var(--lh-lg);padding:0}.index-module--header__item--toggle-placeholder--46\+wC{height:24px;width:40px}:root{--toggle-light:#fc8c03;--toggle-light-hover:#b16202;--toggle-dark:#7742bd;--toggle-dark-hover:#542e84}.react-toggle{cursor:pointer;position:relative;touch-action:pan-x;-webkit-user-select:none;-ms-user-select:none;user-select:none}.react-toggle-screenreader-only{clip:rect(0 0 0 0);border:0;height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;width:1px}.react-toggle-track{background-color:var(--toggle-light);border-radius:24px;height:24px;padding:0;width:40px}@media(prefers-reduced-motion:no-preference){.react-toggle-track{transition:all .2s ease}}.react-toggle:hover .react-toggle-track{background-color:var(--toggle-light-hover)}.react-toggle--checked .react-toggle-track{background-color:var(--toggle-dark)}.react-toggle--checked:hover .react-toggle-track{background-color:var(--toggle-dark-hover)}.react-toggle-thumb{background-color:#fafafa;border:1px solid var(--toggle-light);border-radius:50%;box-sizing:border-box;height:22px;left:1px;position:absolute;top:1px;width:22px}@media(prefers-reduced-motion:no-preference){.react-toggle-thumb{transition:all .5s cubic-bezier(.23,1,.32,1) 0s}}.react-toggle--checked .react-toggle-thumb{border-color:var(--toggle-dark);left:17px}.react-toggle--focus .react-toggle-thumb{box-shadow:0 0 0 3px hsla(0,0%,100%,.25)}.react-toggle:active .react-toggle-thumb{box-shadow:0 0 0 5px hsla(0,0%,100%,.25)}.index-module--post-excerpt__title---R0AJ a{--line-color:var(--primary-500);--line-offset:8px;--line-size-hover:3px;--line-animation-duration:150ms;--line-animation-timing-function:ease-in-out;background-image:linear-gradient(to right,var(--line-color) 0,var(--line-color) 100%);background-position:left 85%;background-repeat:no-repeat;background-size:0 var(--line-size-hover);padding-bottom:var(--line-offset)}@media(prefers-reduced-motion:no-preference)and (hover:hover){.index-module--post-excerpt__title---R0AJ a{transition-duration:var(--line-animation-duration);transition-property:background-size;transition-timing-function:var(--line-animation-timing-function)}}.index-module--post-excerpt__title---R0AJ a:focus,.index-module--post-excerpt__title---R0AJ a:hover{background-size:100% var(--line-size-hover)}.index-module--post-excerpt__wrapper--5cYKe{margin:var(--ls-lg) 0;max-width:var(--mw-xs)}.index-module--post-excerpt__title---R0AJ{font-size:var(--fs-lg);line-height:var(--lh-lg);margin:var(--cs-md) 0}.index-module--post-excerpt__title---R0AJ a{color:var(--text-primary)}.index-module--post-excerpt__content--eEd-L{color:var(--text-secondary);font-family:var(--fn-serif);font-size:var(--fs-md);letter-spacing:-.003em;line-height:var(--lh-md);margin:0}.index-module--post-excerpt__info--9Rmq1{color:var(--text-secondary);font-family:var(--fn-mono);font-size:var(--fs-sm);line-height:var(--lh-sm)}.index-module--post-excerpt__keyword--oMETK{color:var(--text-secondary);text-decoration:underline}.index-module--post-excerpt__keyword--oMETK:focus,.index-module--post-excerpt__keyword--oMETK:hover{color:var(--primary-500)}.index-module--repository__link--gk8Z7{--border-width:2px;border:var(--border-width) solid var(--background-500);border-radius:var(--br-md);display:flex;flex-direction:column;height:100%;outline:0;padding:calc(var(--cs-md) - var(--border-width)) calc(var(--cs-sm) - var(--border-width)) calc(var(--cs-sm) - var(--border-width))}@media(prefers-reduced-motion:no-preference){.index-module--repository__link--gk8Z7{transition-duration:.2s;transition-property:box-shadow,-webkit-transform;transition-property:transform,box-shadow;transition-property:transform,box-shadow,-webkit-transform;transition-timing-function:ease-in-out}}.index-module--repository__link--gk8Z7:focus,.index-module--repository__link--gk8Z7:hover{-webkit-transform:scale(1.025);transform:scale(1.025)}.index-module--repository__link--gk8Z7:focus{border-color:var(--primary-300);box-shadow:0 0 0 5px var(--primary-100)}.index-module--repository__name--0XZOg{color:var(--text-primary);font-family:var(--fn-mono);font-size:var(--fs-sm);font-weight:500;line-height:var(--lh-sm);margin:0 var(--cs-sm)}.index-module--repository__description--GacGk{color:var(--text-primary);flex:1 1;font-size:var(--fs-sm);line-height:var(--lh-sm);margin:var(--cs-sm) var(--cs-sm) var(--cs-md)}.index-module--keyword--Pq2tX{background-color:var(--primary-500);border-radius:var(--br-md);color:var(--primary-100);display:inline-block;font-size:var(--fs-xs);line-height:var(--lh-xs);margin:0 0 var(--cs-sm) var(--cs-sm);padding:0 var(--cs-sm);white-space:nowrap}</style><link rel="sitemap" type="application/xml" href="/sitemap/sitemap-index.xml"><style>.gatsby-image-wrapper{position:relative;overflow:hidden}.gatsby-image-wrapper picture.object-fit-polyfill{position:static!important}.gatsby-image-wrapper img{bottom:0;height:100%;left:0;margin:0;max-width:none;padding:0;position:absolute;right:0;top:0;width:100%;object-fit:cover}.gatsby-image-wrapper [data-main-image]{opacity:0;transform:translateZ(0);transition:opacity .25s linear;will-change:opacity}.gatsby-image-wrapper-constrained{display:inline-block;vertical-align:top}</style><noscript><style>.gatsby-image-wrapper noscript [data-main-image]{opacity:1!important}.gatsby-image-wrapper [data-placeholder-image]{opacity:0!important}</style></noscript><script type="module">const e="undefined"!=typeof HTMLImageElement&&"loading"in HTMLImageElement.prototype;e&&document.body.addEventListener("load",(function(e){if(void 0===e.target.dataset.mainImage)return;if(void 0===e.target.dataset.gatsbyImageSsr)return;const t=e.target;let a=null,n=t;for(;null===a&&n;)void 0!==n.parentNode.dataset.gatsbyImageWrapper&&(a=n.parentNode),n=n.parentNode;const o=a.querySelector("[data-placeholder-image]"),r=new Image;r.src=t.currentSrc,r.decode().catch(()=>{}).then(()=>{t.style.opacity=1,o&&(o.style.opacity=0,o.style.transition="opacity 500ms linear")})}),!0)</script><title data-react-helmet="true">Lazy loading and code splitting in React • Bartosz Łaniewski</title><link rel="alternate" type="application/rss+xml" title="Bartosz Łaniewski RSS Feed" href="/rss.xml"><link rel="icon" href="/favicon-32x32.png?v=9379c9a40cfa959fe92aaf414e4e246a" type="image/png"><link rel="icon" href="/favicon.svg?v=9379c9a40cfa959fe92aaf414e4e246a" type="image/svg+xml"><link rel="manifest" href="/manifest.webmanifest" crossorigin="anonymous"><link as="script" rel="preload" href="/webpack-runtime-d8efd0c88cb8164891b6.js"><link as="script" rel="preload" href="/framework-6747fd38be938981ed04.js"><link as="script" rel="preload" href="/app-f8310bed87e14265a8de.js"><link as="script" rel="preload" href="/commons-43a749d64e0e563e1df6.js"><link as="script" rel="preload" href="/component---src-templates-blog-post-tsx-f1fac75eba020381e011.js"><link as="fetch" rel="preload" href="/page-data/blog/2019-04-19-lazy-loading-and-code-splitting-in-react-apps/page-data.json" crossorigin="anonymous"><link as="fetch" rel="preload" href="/page-data/sq/d/3000541721.json" crossorigin="anonymous"><link as="fetch" rel="preload" href="/page-data/sq/d/3216310583.json" crossorigin="anonymous"><link as="fetch" rel="preload" href="/page-data/app-data.json" crossorigin="anonymous"></head><body class="light"><script>function setTheme(e){window.__theme=e,preferredTheme=e,document.body.className=e,window.__onThemeChange(e)}window.__theme="light",window.__onThemeChange=function(){},window.__setPreferredTheme=function(e){setTheme(e),localStorage.setItem("theme",e)};var preferredTheme=localStorage.getItem("theme"),prefersDarkQuery=window.matchMedia("(prefers-color-scheme: dark)");prefersDarkQuery.addListener((function(e){window.__setPreferredTheme(e.matches?"dark":"light")})),setTheme(preferredTheme||(prefersDarkQuery.matches?"dark":"light"))</script><div id="___gatsby"><div style="outline:0" tabindex="-1" id="gatsby-focus-wrapper"><a class="index-module--skip--h8eFE visually-hidden" href="#content">Skip to main content</a><nav class="index-module--header--uRWhT" itemtype="http://schema.org/SiteNavigationElement" itemscope=""><ul class="index-module--header__content--uoC37"><li class="index-module--header__item--fTLv5 index-module--header__item--logo--wqw7T"><a title="Go to main page" href="/">Bart</a></li><li class="index-module--header__item--fTLv5"><a href="/posts/">Devblog</a></li><li class="index-module--header__item--fTLv5"><a target="_blank" rel="author noopener noreferrer" href="https://drive.google.com/file/d/1Zh3NaFogEkufa25H7qxqj0QdqHPzyfZX/view" title="Get my résumé from Google Drive">Résumé</a></li><li class="index-module--header__item--fTLv5"><div class="index-module--header__item--toggle-placeholder--46+wC"></div></li></ul></nav><main id="content" class="index-module--content--Ni+7M" itemprop="mainContentOfPage"><article class="post" itemscope="" itemtype="http://schema.org/Article" lang="en"><header class="post__header"><h1 itemprop="headline">Lazy loading and code splitting in React</h1><time datetime="April 19, 2019" itemprop="datePublished">April 19, 2019</time><ul class="visually-hidden"><li><p itemprop="author">Bartosz Łaniewski</p></li></ul></header><section itemprop="articleBody" class="post__content"><p>Lazy loading is a well-known technique for improving performance and reducing the associated resources costs. It&#x27;s so effective that it&#x27;s even <a href="https://github.com/whatwg/html/pull/3752">being added to the web standard</a> via the <code class="language-text">loading=&quot;lazy&quot;</code> attribute. In this article we will learn how to perform lazy ressources loading and code splitting in React.</p><blockquote><p><strong>Note:</strong> at the time of writing this article, a lot of APIs are still in development and are not ready to be used in production.</p></blockquote><h2>Glossary</h2><blockquote><p><strong>Code splitting</strong>[…] allows you to split your code into various bundles which can then be loaded on demand or in parallel. It can be used to achieve smaller bundles and control resource load prioritization which, if used correctly, can have a major impact on load time. ~ <a href="https://webpack.js.org/guides/code-splitting/">Webpack</a></p></blockquote><blockquote><p><strong>Lazy loading</strong> is a design pattern […] used to defer initialization of an object until the point at which it is needed. It can contribute to efficiency in the program&#x27;s operation if properly and appropriately used. […] The performance gains are especially significant if the initialization of the object is costly, such as in case of accessing network services. ~ <a href="https://en.wikipedia.org/wiki/Lazy_loading">Wikipedia</a></p></blockquote><h2>Problem</h2><p>A lot of <abbr title="Single-Page Application: a web application that load once and dynamically update as the response for user interactions.">SPAs</abbr> nowadays are &quot;monolithic&quot; – there&#x27;s a giant JavaScript bundle which contains all of the application&#x27;s files. This bundle is required via a <code class="language-text">&lt;script&gt;</code> tag, gets downloaded on the initial visit and hopefully cached. This results in:</p><ul><li>a <strong>longer initial load</strong>: we download all of the app&#x27;s code, even if it&#x27;s not needed to perform the initial render or not used at all;</li><li><strong>faster application rendering and in-app navigation</strong>: all of the components are already downloaded and don&#x27;t need to be lazy fetched.</li></ul><p>This is the typical drowback of code-splitting: the initial page load is faster but each dynamic import degrades the visible in-app performance.</p><p>Developers tend to provide a visual feedback for each asynchronous action. It often results in an immense amount of loaders and it&#x27;s still badly perceived by users. Once the lazy components render, they can perform other asynchronous actions (like network requests) which adds another layer of loaders.</p><p>As a developer, you need to find the perfect balance between initial and dynamic loading and focus on creating great fallback experiences.</p><h2>Solutions</h2><p>Concurrent React can partially render a tree without committing the result.</p><h3>Code splitting</h3><p>React 16.6 introduced <a href="https://reactjs.org/docs/code-splitting.html#reactlazy"><code class="language-text">React.lazy</code></a> which allows us to perform code splitting and a <a href="https://reactjs.org/docs/code-splitting.html#suspense"><code class="language-text">Suspense</code></a> component which renders placeholders for lazy-loaded resources.</p><div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> Suspense<span class="token punctuation">,</span> lazy <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> Foo <span class="token operator">=</span> <span class="token function">lazy</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">&quot;./Foo&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> Bar <span class="token operator">=</span> <span class="token function">lazy</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">&quot;./Bar&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">LazyFooBar</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">ErrorBoundary</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Suspense</span></span> <span class="token attr-name">maxDuration</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token number">1500</span><span class="token punctuation">}</span></span> <span class="token attr-name">fallback</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token string">&quot;Loading…&quot;</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Foo</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">

      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Suspense</span></span> <span class="token attr-name">maxDuration</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token number">1000</span><span class="token punctuation">}</span></span> <span class="token attr-name">fallback</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token string">&quot;Loading…&quot;</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Bar</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Suspense</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Suspense</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">ErrorBoundary</span></span><span class="token punctuation">&gt;</span></span>
<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div><p>The dynamic <code class="language-text">import()</code> tells the bundler to exclude requestes filed from the main bundle. <code class="language-text">React.lazy</code> returns a special component type that will suspend the render until it resolves or rejectes The exact behaviour is described in the following <a href="https://github.com/reactjs/rfcs/blob/master/text/0064-lazy.md">RFC</a>:</p><blockquote><p><code class="language-text">React.lazy</code> accepts a Promise factory, and returns a new component type. When React renders that type for the first time, it triggers the Promise factory […]. If the Promise is fulfilled, React reads the <code class="language-text">.default</code> value from it […], and uses it as a component type for rendering. If the Promise is rejected, the rejection is handled in the same way as React normally handles errors (by letting the nearest error boundary handle it). After the code has loaded, React caches the Promise result. Next renders of the components with this type become synchronous and have no extra cost.</p></blockquote><p><code class="language-text">Suspense</code> allows you to define a fallback placeholder which is displayed when the render is in the suspended state. It also allows you to configure the delay after which the fallback should be shown (via the <code class="language-text">maxDuration</code> property). It will prevent the fallback component from showing up on fast networks.</p><p><code class="language-text">Suspense</code> is quite similar to <code class="language-text">ErrorBoundary</code>. In fact, you can think of <code class="language-text">Suspense</code> as being the <code class="language-text">try { … }</code> block whereas <code class="language-text">ErrorBoundary</code> is the <code class="language-text">catch (error) { … }</code> block.</p><h3>Lazy loading and preloading</h3><p>React team is working on an experimental library named <a href="https://github.com/facebook/react/tree/master/packages/react-cache"><code class="language-text">react-cache</code></a>. It provides APIs for implementing various caches for React applications. As it is dependant on some not-yet-released React APIs, this library should not be used in production.</p><h4>API calls</h4><p>One of <code class="language-text">react-cache</code> use-cases is to suspense rendering on pending requests.</p><div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">const</span> FooListResource <span class="token operator">=</span> <span class="token function">unstable_createResource</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">query</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">fetchFooList</span><span class="token punctuation">(</span>query<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div><p>In our render, we just read the data using the <code class="language-text">FooListResource.read</code>. This method returns the response from <code class="language-text">unstable_createResource</code> Promise factory and tells the nearest parent <code class="language-text">React.Suspense</code> to stop the rendering and display the fallback till the resource isn&#x27;t ready. The implementation is simple:</p><div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token keyword">const</span> <span class="token function-variable function">FooList</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> response <span class="token operator">=</span> FooListResource<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">search</span><span class="token operator">:</span> <span class="token string">&quot;Lorem ipsum dolor.&quot;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token punctuation">{</span>response<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">key</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>item<span class="token punctuation">.</span>id<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span>item<span class="token punctuation">.</span>text<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
      <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre></div><h4>Embedded documents</h4><p>You can use <code class="language-text">react-cache</code> to lezy load embedded documents, such as images, videos, scripts, stylesheets and more. The implementation is quite similar to caching API calls. We start with creating a Image resource:</p><div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">const</span> ImageResource <span class="token operator">=</span> <span class="token function">unstable_createResource</span><span class="token punctuation">(</span>
  <span class="token punctuation">(</span><span class="token parameter">src</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
    <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> img <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Image</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      img<span class="token punctuation">.</span>src <span class="token operator">=</span> src<span class="token punctuation">;</span>
      img<span class="token punctuation">.</span>onload <span class="token operator">=</span> resolve<span class="token punctuation">;</span>
      <span class="token comment">// img.onerror = reject;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div><p>Now, we need to create an alternative <code class="language-text">img</code> component which will make use of the <code class="language-text">ImageResource</code>. For this, we simply need to call <code class="language-text">ImageResource.read(src)</code> – it will tell the nearest parent <code class="language-text">React.Suspense</code> to stop the rendering and display the fallback till the image isn&#x27;t fully loaded. The implementation is straightforward:</p><div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token keyword">const</span> <span class="token function-variable function">Img</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> src<span class="token punctuation">,</span> <span class="token operator">...</span>props <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  ImageResource<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span>src<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>src<span class="token punctuation">}</span></span> <span class="token spread"><span class="token punctuation">{</span><span class="token operator">...</span>props<span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre></div><p>Now, we can create a wrapper which will take care of providing the low-resolution fallback image for us – we just need to wrap the newely created <code class="language-text">Img</code> component with a <code class="language-text">React.Suspense</code> and provide a fallback image, as follows:</p><div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token keyword">function</span> <span class="token function-variable function">LazyImg</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> lowResSrc<span class="token punctuation">,</span> highResSrc<span class="token punctuation">,</span> <span class="token operator">...</span>props <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">React.Suspense</span></span> <span class="token attr-name">fallback</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token spread"><span class="token punctuation">{</span><span class="token operator">...</span>props<span class="token punctuation">}</span></span> <span class="token attr-name">src</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>lowResSrc<span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Img</span></span> <span class="token spread"><span class="token punctuation">{</span><span class="token operator">...</span>props<span class="token punctuation">}</span></span> <span class="token attr-name">src</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>highResSrc<span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">React.Suspense</span></span><span class="token punctuation">&gt;</span></span>
<span class="token punctuation">)</span></code></pre></div><p>There&#x27;s a GitHub project named <code class="language-text">the-platform</code> which turns Web API&#x27;s into React Hooks and Suspense-friendly React components. It provides a sets of lazy components out-of-the-box, such as:</p><ul><li><a href="https://github.com/palmerhq/the-platform#img"><code class="language-text">&lt;Img&gt;</code></a></li><li><a href="https://github.com/palmerhq/the-platform#script"><code class="language-text">&lt;Script&gt;</code></a></li><li><a href="https://github.com/palmerhq/the-platform#video"><code class="language-text">&lt;Video&gt;</code></a></li><li><a href="https://github.com/palmerhq/the-platform#audio"><code class="language-text">&lt;Audio&gt;</code></a></li><li><a href="https://github.com/palmerhq/the-platform#preload"><code class="language-text">&lt;Preload&gt;</code></a></li><li><a href="https://github.com/palmerhq/the-platform#stylesheet"><code class="language-text">&lt;Stylesheet&gt;</code></a></li></ul><h2>Resources</h2><ol><li><a href="https://reactjs.org/docs/code-splitting.html">https://reactjs.org/docs/code-splitting.html</a></li><li><a href="https://medium.com/@rossbulat/react-lazy-suspense-and-concorrent-react-breakdown-with-examples-2758de98cb1c">https://medium.com/@rossbulat/react-lazy-suspense-and-concorrent-react-breakdown-with-examples-2758de98cb1c</a></li><li><a href="https://github.com/palmerhq/the-platform">https://github.com/palmerhq/the-platform</a></li><li><a href="https://youtube.com/watch?v=SCQgE4mTnjU">https://youtube.com/watch?v=SCQgE4mTnjU</a></li><li><a href="https://www.youtube.com/watch?v=ByBPyMBTzM0">https://www.youtube.com/watch?v=ByBPyMBTzM0</a></li></ol></section></article><div class="comments--null"></div></main><footer class="index-module--footer--cePDb" itemtype="http://schema.org/WPFooter" itemscope=""><nav typeof="http://schema.org/ContactPoint" itemscope=""><ul class="index-module--footer__menu--kVtyV list"><li class="index-module--footer__item--6JsIL"><a target="_blank" itemprop="url" rel="noopener noreferrer" href="https://github.com/Bartozzz"><svg class="index-module--footer__item-icon--7dhxi" role="img" viewBox="0 0 24 24"><title>GitHub icon</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"></path></svg><span class="index-module--footer__item-text--NJUmW">GitHub</span></a></li><li class="index-module--footer__item--6JsIL"><a target="_blank" itemprop="url" rel="noopener noreferrer" href="https://linkedin.com/in/bartozzz"><svg class="index-module--footer__item-icon--7dhxi" role="img" viewBox="0 0 24 24"><title>LinkedIn icon</title><path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"></path></svg><span class="index-module--footer__item-text--NJUmW">LinkedIn</span></a></li><li class="index-module--footer__item--6JsIL"><a target="_blank" itemprop="url" rel="noopener noreferrer" href="https://youtube.com/channel/UCIC1vaSJwSJ2sqKWC3wTTmQ"><svg class="index-module--footer__item-icon--7dhxi index-module--footer__item-icon--youtube--iV7DW" role="img" viewBox="0 0 24 24"><title>YouTube icon</title><path d="M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z"></path></svg><span class="index-module--footer__item-text--NJUmW">YouTube</span></a></li><li class="index-module--footer__item--6JsIL index-module--footer__item--right--52KWH"><a href="/blog/2019-04-19-lazy-loading-and-code-splitting-in-react-apps/rss.xml">RSS</a></li><li class="index-module--footer__item--6JsIL index-module--footer__item--right--52KWH"><a target="_blank" itemprop="email" rel="author noopener noreferrer" href="mailto:hi@laniewski.me">Get in touch</a></li></ul></nav><p class="index-module--footer__source--KGfyF" itemprop="description">Hand-coded using Gatsby, TypeScript and more. <a target="_blank" itemprop="url" rel="noopener noreferrer" href="https://github.com/Bartozzz/bartozzz.github.io">See the source.</a></p></footer></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">window.pagePath="/blog/2019-04-19-lazy-loading-and-code-splitting-in-react-apps/",window.___webpackCompilationHash="a540c2339f05141be749"</script><script id="gatsby-chunk-mapping">window.___chunkMapping={polyfill:["/polyfill-93d1da08cab91abe0ae6.js"],app:["/app-f8310bed87e14265a8de.js"],"component---src-pages-404-tsx":["/component---src-pages-404-tsx-029ba9a5769c03555707.js"],"component---src-pages-index-tsx":["/component---src-pages-index-tsx-310632027aab49f6f142.js"],"component---src-templates-blog-post-tsx":["/component---src-templates-blog-post-tsx-f1fac75eba020381e011.js"],"component---src-templates-blog-posts-tsx":["/component---src-templates-blog-posts-tsx-9584694fec5e3f630426.js"]}</script><script src="/polyfill-93d1da08cab91abe0ae6.js" nomodule=""></script><script src="/component---src-templates-blog-post-tsx-f1fac75eba020381e011.js" async=""></script><script src="/commons-43a749d64e0e563e1df6.js" async=""></script><script src="/app-f8310bed87e14265a8de.js" async=""></script><script src="/framework-6747fd38be938981ed04.js" async=""></script><script src="/webpack-runtime-d8efd0c88cb8164891b6.js" async=""></script></body></html>