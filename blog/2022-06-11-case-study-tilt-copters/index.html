<!DOCTYPE html><html lang="en" dir="ltr"><head><meta charSet="utf-8"/><meta name="color-scheme" content="dark light"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="prefetch" href="/discussion-dark.css" as="style"/><link rel="prefetch" href="/discussion-light.css" as="style"/><meta data-react-helmet="true" name="twitter:description" content="Tilt Copters  is a relatively simple game created with  pixi.js  and Expo. This is a project I&#x27;ve started to learn more about porting web…"/><meta data-react-helmet="true" name="twitter:title" content="Case study: Tilt Copters (a Expo/React Native game)"/><meta data-react-helmet="true" name="twitter:card" content="summary"/><meta data-react-helmet="true" property="og:type" content="website"/><meta data-react-helmet="true" property="og:description" content="Tilt Copters  is a relatively simple game created with  pixi.js  and Expo. This is a project I&#x27;ve started to learn more about porting web…"/><meta data-react-helmet="true" property="og:title" content="Case study: Tilt Copters (a Expo/React Native game)"/><meta data-react-helmet="true" name="description" content="Tilt Copters  is a relatively simple game created with  pixi.js  and Expo. This is a project I&#x27;ve started to learn more about porting web…"/><meta name="generator" content="Gatsby 4.16.0"/><style data-href="/styles.6518f8979fb098827d7f.css" data-identity="gatsby-global-css">/*! normalize.css v8.0.1 | MIT License | github.com/necolas/normalize.css */html{-webkit-text-size-adjust:100%;line-height:1.15}body{margin:0}main{display:block}h1{font-size:2em;margin:.67em 0}hr{box-sizing:content-box;height:0;overflow:visible}pre{font-family:monospace,monospace;font-size:1em}a{background-color:transparent}abbr[title]{border-bottom:none;text-decoration:underline;-webkit-text-decoration:underline dotted;text-decoration:underline dotted}b,strong{font-weight:bolder}code,kbd,samp{font-family:monospace,monospace;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}button,input,optgroup,select,textarea{font-family:inherit;font-size:100%;line-height:1.15;margin:0}button,input{overflow:visible}button,select{text-transform:none}[type=button],[type=reset],[type=submit],button{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{padding:.35em .75em .625em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}progress{vertical-align:baseline}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}details{display:block}summary{display:list-item}[hidden],template{display:none}*,:after,:before{box-sizing:inherit;outline:none}*{-webkit-tap-highlight-color:rgba(0,0,0,0)}body,html{text-rendering:optimizeLegibility;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;box-sizing:border-box;min-width:320px}h1,h2,h3,h4,h5,h6{-webkit-font-feature-settings:"zero","liga","lnum","kern";font-feature-settings:"zero","liga","lnum","kern"}html{font-size:62.5%}body{background-color:var(--background-100);font-family:var(--fn-main);font-size:var(--vr-fs)}:root{--fn-main:-apple-system,BlinkMacSystemFont,"Segoe UI",Helvetica,Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol";--fn-head:"Gill Sans","Gill Sans MT",Calibri,"Trebuchet MS",var(--fn-main);--fn-mono:SFMono-Regular,Consolas,Liberation Mono,Menlo,Courier,monospace;--fn-serif:"pt serif",Georgia,Cambria,times new roman,Times,serif;--vr-unit:0.8rem;--vr-fs:calc(var(--vr-unit)*2);--vr-lh:calc(var(--vr-unit)*3);--fs-xs:1.2rem;--lh-xs:var(--vr-lh);--fs-sm:1.4rem;--lh-sm:var(--vr-lh);--fs-md:1.6rem;--lh-md:var(--vr-lh);--fs-lg:2rem;--lh-lg:var(--vr-lh);--fs-xl:3.2rem;--lh-xl:calc(var(--vr-lh)*2);--fs-xxl:3.8rem;--lh-xxl:calc(var(--vr-lh)*2);--br-sm:calc(var(--vr-unit)*1);--br-md:calc(var(--vr-unit)*2);--cs-sm:calc(var(--vr-unit)*1);--cs-md:calc(var(--vr-unit)*2);--cs-xl:calc(var(--vr-unit)*3);--ls-xxs:calc(var(--vr-unit)*2);--ls-xs:calc(var(--vr-unit)*3);--ls-sm:calc(var(--vr-unit)*4);--ls-md:calc(var(--vr-unit)*6);--ls-lg:calc(var(--vr-unit)*8);--ls-xl:calc(var(--vr-unit)*10);--mw-xxs:calc(var(--vr-unit)*54);--mw-xs:calc(var(--vr-unit)*74);--mw-sm:calc(var(--vr-unit)*106);--mw-md:calc(var(--vr-unit)*156)}body.dark{--text-primary:#e8e8e8;--text-secondary:#9e9e9e;--background-100-shade:0 0% 7%;--background-100:hsl(var(--background-100-shade));--background-300:hsl(var(--background-100-shade));--background-500:#262626;--primary-100:#241439;--primary-300:#542e84;--primary-500:#7742bd;--color-success:#16a249;--color-success-background:rgba(22,162,73,.1);--color-failure:#ba1c1c;--color-failure-background:rgba(186,28,28,.1);--color-warning:#db7706;--color-warning-background:rgba(219,119,6,.1);--color-info:#1d4fd7;--color-info-background:rgba(29,79,215,.1);--color-prettylights-syntax-comment:#768390;--color-prettylights-syntax-constant:#6cb6ff;--color-prettylights-syntax-entity:#dcbdfb;--color-prettylights-syntax-storage-modifier-import:#adbac7;--color-prettylights-syntax-entity-tag:#8ddb8c;--color-prettylights-syntax-keyword:#f47067;--color-prettylights-syntax-string:#96d0ff;--color-prettylights-syntax-variable:#f69d50;--color-prettylights-syntax-brackethighlighter-unmatched:#e5534b;--color-prettylights-syntax-invalid-illegal-text:#cdd9e5;--color-prettylights-syntax-invalid-illegal-bg:#922323;--color-prettylights-syntax-carriage-return-text:#cdd9e5;--color-prettylights-syntax-carriage-return-bg:#ad2e2c;--color-prettylights-syntax-string-regexp:#8ddb8c;--color-prettylights-syntax-markup-list:#eac55f;--color-prettylights-syntax-markup-heading:#316dca;--color-prettylights-syntax-markup-italic:#adbac7;--color-prettylights-syntax-markup-bold:#adbac7;--color-prettylights-syntax-markup-deleted-text:#ffd8d3;--color-prettylights-syntax-markup-deleted-bg:#78191b;--color-prettylights-syntax-markup-inserted-text:#b4f1b4;--color-prettylights-syntax-markup-inserted-bg:#1b4721;--color-prettylights-syntax-markup-changed-text:#ffddb0;--color-prettylights-syntax-markup-changed-bg:#682d0f;--color-prettylights-syntax-markup-ignored-text:#adbac7;--color-prettylights-syntax-markup-ignored-bg:#255ab2;--color-prettylights-syntax-meta-diff-range:#dcbdfb;--color-prettylights-syntax-brackethighlighter-angle:#768390;--color-prettylights-syntax-sublimelinter-gutter-mark:#545d68;--color-prettylights-syntax-constant-other-reference-link:#96d0ff;color-scheme:dark}body.light{--text-primary:#000;--text-secondary:#404040;--background-100-shade:0 0% 100%;--background-100:hsl(var(--background-100-shade));--background-300:#f7f7f7;--background-500:#e0e0e0;--primary-100:#fff6eb;--primary-300:#fec581;--primary-500:#fc8c03;--color-success:#16a249;--color-success-background:rgba(22,162,73,.1);--color-failure:#ba1c1c;--color-failure-background:rgba(186,28,28,.1);--color-warning:#db7706;--color-warning-background:rgba(219,119,6,.1);--color-info:#1d4fd7;--color-info-background:rgba(29,79,215,.1);--color-prettylights-syntax-comment:#6e7781;--color-prettylights-syntax-constant:#0550ae;--color-prettylights-syntax-entity:#8250df;--color-prettylights-syntax-storage-modifier-import:#24292f;--color-prettylights-syntax-entity-tag:#116329;--color-prettylights-syntax-keyword:#cf222e;--color-prettylights-syntax-string:#0a3069;--color-prettylights-syntax-variable:#953800;--color-prettylights-syntax-brackethighlighter-unmatched:#82071e;--color-prettylights-syntax-invalid-illegal-text:#f6f8fa;--color-prettylights-syntax-invalid-illegal-bg:#82071e;--color-prettylights-syntax-carriage-return-text:#f6f8fa;--color-prettylights-syntax-carriage-return-bg:#cf222e;--color-prettylights-syntax-string-regexp:#116329;--color-prettylights-syntax-markup-list:#3b2300;--color-prettylights-syntax-markup-heading:#0550ae;--color-prettylights-syntax-markup-italic:#24292f;--color-prettylights-syntax-markup-bold:#24292f;--color-prettylights-syntax-markup-deleted-text:#82071e;--color-prettylights-syntax-markup-deleted-bg:#ffebe9;--color-prettylights-syntax-markup-inserted-text:#116329;--color-prettylights-syntax-markup-inserted-bg:#dafbe1;--color-prettylights-syntax-markup-changed-text:#953800;--color-prettylights-syntax-markup-changed-bg:#ffd8b5;--color-prettylights-syntax-markup-ignored-text:#eaeef2;--color-prettylights-syntax-markup-ignored-bg:#0550ae;--color-prettylights-syntax-meta-diff-range:#8250df;--color-prettylights-syntax-brackethighlighter-angle:#57606a;--color-prettylights-syntax-sublimelinter-gutter-mark:#8c959f;--color-prettylights-syntax-constant-other-reference-link:#0a3069;color-scheme:light}a{color:var(--primary-500);text-decoration:none}.visually-hidden:not(:focus){clip:rect(0,0,0,0)!important;border:0!important;height:1px!important;margin:-1px!important;overflow:hidden!important;padding:0!important;position:absolute!important;white-space:nowrap!important;width:1px!important}.list{list-style:none;margin:0;padding:0}.repositories{-webkit-column-gap:var(--ls-xxs);column-gap:var(--ls-xxs);display:grid;padding:0 0 var(--ls-xl) 0;row-gap:var(--ls-xxs)}@media screen and (min-width:700px){.repositories{grid-template-columns:repeat(2,1fr)}}@media screen and (min-width:1050px){.repositories{grid-template-columns:repeat(3,1fr)}}.post__content{counter-reset:h2}.post__content h2{counter-reset:h3}.post__content h3{counter-reset:h4}.post__content h4{counter-reset:h5}.post__content h5{counter-reset:h6}.post__content h2:before{content:counter(h2) ". ";counter-increment:h2}.post__content h3:before{content:counter(h2) "." counter(h3) ". ";counter-increment:h3}.post__content h4:before{counter-increment:h4}.post__content h5:before{counter-increment:h5}.post__content h6:before{counter-increment:h6}.post__content h1,.post__content h2,.post__content h3,.post__content h4,.post__content h5,.post__content h6,.post__header h1{font-family:var(--fn-head);font-style:normal;font-weight:700;letter-spacing:-.02em}.post__content,.post__content blockquote,.post__content blockquote p,.post__content ol li,.post__content p,.post__content table td,.post__content table th,.post__content ul li{font-family:var(--fn-serif);font-size:var(--fs-lg);font-style:normal;font-weight:400;line-height:calc(var(--vr-unit)*4)}.post__content,.post__content table td,.post__content table th{word-wrap:break-word;overflow-wrap:break-word;word-break:break-word}.post__header{color:var(--text-primary);margin:var(--ls-xl) 0;text-align:center}.post__header h1{font-size:var(--fs-xxl);line-height:var(--lh-xxl);margin:0}.post__header time{display:block;font-size:var(--fs-md);line-height:var(--lh-md);margin-top:var(--ls-xxs)}.post__wrapper{display:flex;flex-direction:row-reverse;flex-wrap:nowrap}.post__toc{display:none}@media screen and (min-width:1250px){.post__toc{display:block}}.post__content{color:var(--text-primary);margin:0 auto;max-width:var(--mw-sm);width:100%}@media screen and (min-width:1250px){.post__content{margin:0 auto 0 0}}.post__content a{border:solid;border-width:0 0 1px;letter-spacing:-.005em}.post__content a,.post__content a code{color:inherit}.post__content a:focus,.post__content a:hover{border-color:var(--primary-500);border-style:solid;border-width:0 0 2px;color:var(--primary-500)}.post__content abbr{border-bottom:1px dashed var(--text-secondary);cursor:help;text-decoration:none}.post__content h1,.post__content h2,.post__content h3,.post__content h4,.post__content h5,.post__content h6{margin:0}.post__content h1{font-size:var(--fs-xxl);line-height:var(--lh-xxl)}.post__content h2{font-size:var(--fs-xl);line-height:var(--lh-xl);margin-top:var(--ls-md)}.post__content h3{margin-top:var(--ls-md)}.post__content h3,.post__content h4{font-size:var(--fs-lg);line-height:var(--lh-lg)}.post__content h4,.post__content h5,.post__content h6{margin-top:var(--ls-sm)}.post__content b,.post__content strong{font-weight:700}.post__content .gatsby-image-wrapper{height:auto;margin:var(--ls-md) auto;max-width:100%}.post__content p{letter-spacing:.01rem;margin-bottom:0;margin-top:var(--ls-xxs)}.post__content a>code,.post__content li>code,.post__content p>code{font-size:calc(var(--fs-lg)*.9)}.post__content ol,.post__content ul{margin:var(--ls-sm) 0;padding:0}.post__content ol li,.post__content ul li{letter-spacing:-.005em;margin-bottom:var(--ls-xxs);margin-left:var(--ls-sm)}.post__content ol ol,.post__content ol ul,.post__content ul ol,.post__content ul ul{margin:var(--ls-xxs) 0 0}.post__content blockquote{border-left:5px solid var(--text-secondary);margin:var(--ls-md) calc(var(--ls-xxs)*-1);padding-bottom:0;padding-left:calc(var(--ls-xxs) - 5px);padding-right:var(--ls-xxs);padding-top:0}.post__content blockquote,.post__content blockquote p{color:var(--text-secondary);font-style:italic;letter-spacing:-.01em}.post__content code,.post__content pre{word-wrap:normal;color:var(--text-secondary);font-family:var(--fn-mono);font-size:var(--fs-md);font-style:normal;font-weight:400;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none;line-height:var(--lh-md);-o-tab-size:4;tab-size:4;text-align:left;white-space:pre;word-break:normal;word-spacing:normal}.post__content pre{-webkit-overflow-scrolling:auto;background-color:var(--background-300);margin:var(--ls-sm) calc(var(--ls-xxs)*-1);min-width:100%;overflow:auto;padding:var(--ls-xs) var(--ls-xxs)}@media screen and (min-width:800px){.post__content pre{border-radius:var(--br-md);margin:var(--ls-sm) 0;padding:var(--ls-xs)}}.post__content code{border-radius:var(--br-md);letter-spacing:-.005em}.post__content code .comment{color:var(--color-prettylights-syntax-comment)}.post__content code .constant{color:var(--color-prettylights-syntax-constant)}.post__content code .function{color:var(--color-prettylights-syntax-entity)}.post__content code .keyword{color:var(--color-prettylights-syntax-keyword)}.post__content code .string{color:var(--color-prettylights-syntax-string)}.post__content code .number{color:var(--color-prettylights-syntax-constant)}.post__content code .variable{color:var(--color-prettylights-syntax-variable)}.post__content code .operator{color:var(--color-prettylights-syntax-constant)}.post__content code .class-name{color:var(--color-prettylights-syntax-storage-modifier-import)}.post__content code .attr-name,.post__content code .selector{color:var(--color-prettylights-syntax-constant)}.post__content code .rule{color:var(--color-prettylights-syntax-keyword)}.post__content code .tag>.tag{color:var(--color-prettylights-syntax-entity-tag)}.post__content code .tag>.punctuation:last-child,.post__content code .tag>.tag .punctuation{color:var(--color-prettylights-syntax-constant)}.post__content code .deleted{background-color:var(--color-prettylights-syntax-markup-deleted-bg);color:var(--color-prettylights-syntax-markup-deleted-text)}.post__content code .inserted{background-color:var(--color-prettylights-syntax-markup-inserted-bg);color:var(--color-prettylights-syntax-markup-inserted-text)}.post__content code .property{color:var(--color-prettylights-syntax-entity-tag)}.post__content code .gatsby-highlight-code-line{background-color:var(--background-500);border-left:.25em solid var(--primary-500);display:block;margin-left:calc(var(--ls-xs)*-1);margin-right:calc(var(--ls-xs)*-1);padding-left:1.25em;padding-right:1em}.post__content figure{margin:0}.post__content hr{border:0;display:block;height:0;margin:var(--ls-xl) 0;padding:0;text-align:center}.post__content hr:before{color:var(--text-secondary);content:"...";display:inline-block;font-family:var(--fn-serif);font-size:var(--fs-xl);font-style:italic;font-weight:400;letter-spacing:.6em;line-height:var(--lh-xl);margin-left:.6em;position:relative;top:-30px}.post__content table{border-collapse:collapse;margin:var(--ls-sm) 0;width:100%}.post__content table tbody tr:hover{background:var(--background-300)}.post__content table td,.post__content table th{border-color:var(--background-500);border-style:solid;border-width:1px;padding:var(--cs-sm) var(--cs-md);padding-top:calc(var(--cs-sm) - 1px);text-align:left}.post__content table td:first-of-type,.post__content table th:first-of-type{border-left-width:0}.post__content table td:last-of-type,.post__content table th:last-of-type{border-right-width:0}.post__content table th{border-width:0;font-weight:700}.index-module--alert--r0Bkf{border-left-style:solid;border-left-width:5px;font-family:var(--fn-serif);font-size:var(--fs-lg);font-style:normal;font-weight:400;line-height:calc(var(--vr-unit)*4);margin:var(--ls-md) calc(var(--ls-xxs)*-1);padding:var(--ls-xxs) var(--ls-xxs) var(--ls-xxs) calc(var(--ls-xxs) - 5px)}.index-module--alert--r0Bkf>:first-child{margin-top:0}.index-module--alert--r0Bkf>:last-child,.index-module--alert--r0Bkf>:last-child pre{margin-bottom:0}.index-module--alert__success--FEQ2z{background-color:var(--color-success-background);border-left-color:var(--color-success)}.index-module--alert__failure--x7zLA{background-color:var(--color-failure-background);border-left-color:var(--color-failure)}.index-module--alert__warning--W6jhb{background-color:var(--color-warning-background);border-left-color:var(--color-warning)}.index-module--alert__info--z6D\+y{background-color:var(--color-info-background);border-left-color:var(--color-info)}.keywords{margin:var(--ls-md) 0;max-width:var(--mw-sm);padding:0}.index-module--content--Ni\+7M{margin:0 auto;max-width:var(--mw-md);padding:0 var(--ls-xxs);position:relative;width:100%}.games{--gap:var(--ls-md);--size:30rem;display:grid;gap:calc(var(--gap)/2);grid-auto-flow:column;margin:0;overflow-x:auto;overscroll-behavior-inline:contain;padding:0 var(--ls-md) var(--ls-xl);scroll-padding-inline:var(--gap);scroll-padding-left:var(--gap);scroll-padding-right:var(--gap);-ms-scroll-snap-type:inline mandatory;scroll-snap-type:inline mandatory}@media screen and (min-width:500px){.games{--size:38rem}}@media(prefers-reduced-motion:no-preference){.games{scroll-behavior:smooth}}.games .index-module--game__wrapper--uaiHv{list-style:none}.games .index-module--game__wrapper--uaiHv:last-of-type .index-module--game__card--yuPxJ{position:relative}.games .index-module--game__wrapper--uaiHv:last-of-type .index-module--game__card--yuPxJ:after{block-size:100%;content:"";inline-size:var(--gap);inset-block-start:0;inset-inline-end:calc(var(--gap)*-1);position:absolute}.games .index-module--game__link--V\+dYb{color:inherit;outline-offset:12px;text-decoration:none}.games .index-module--game__link--V\+dYb:focus{outline-offset:7px}@media(prefers-reduced-motion:no-preference){.games .index-module--game__link--V\+dYb{transition:outline-offset .25s ease}}.games .index-module--game__card--yuPxJ{background-color:red;border-radius:var(--br-md);display:grid;gap:calc(var(--gap)/2);margin:0;overflow:hidden;padding:0;scroll-snap-align:center;-webkit-user-select:none;-ms-user-select:none;user-select:none;width:var(--size)}.games .index-module--game__card--yuPxJ img{height:var(--size);width:var(--size)}.games .index-module--game__card--yuPxJ figcaption{padding:var(--cs-xl)}.games .index-module--game__card--yuPxJ .index-module--game__description--KS7j2,.games .index-module--game__card--yuPxJ .index-module--game__name--dHjV3{word-break:break-word}.games .index-module--game__card--yuPxJ .index-module--game__name--dHjV3{font-family:var(--fn-head);font-size:var(--fs-xxl);font-weight:700;line-height:var(--lh-xxl);margin-bottom:var(--ls-xxs);margin-top:0;text-align:center}.games .index-module--game__card--yuPxJ .index-module--game__description--KS7j2{font-size:var(--fs-md);font-weight:400;line-height:var(--lh-md)}.index-module--heading__wrapper--MoMom{margin:var(--ls-lg) 0;text-align:center}.index-module--heading__text--7fYiM{color:var(--text-primary);margin-left:auto;margin-right:auto;max-width:var(--mw-xxs)}.index-module--heading__text--h2--37Rxf{font-family:var(--fn-head);font-size:var(--fs-xxl);font-weight:700;line-height:var(--lh-xxl);margin-bottom:var(--ls-xxs);margin-top:0}.index-module--heading__text--h3--soBei{font-size:var(--fs-md);font-weight:400;line-height:var(--lh-md)}.index-module--hero--XvzmV{height:calc(100vh - var(--vr-lh)*3);min-height:288px}@media screen and (min-width:700px){.index-module--hero--XvzmV{height:480px}}.index-module--hero__wrapper--GiSG-{align-items:center;background-color:var(--background-300);background:linear-gradient(to bottom,var(--background-100),var(--background-300) 40%) fixed;display:flex;height:100%;justify-content:center}@media screen and (min-width:700px){.index-module--hero__wrapper--GiSG-{padding-bottom:calc(var(--vr-lh)*3)}}.index-module--hero__title--3Ox0E{color:var(--text-primary);font-family:var(--fn-head);font-size:65px;letter-spacing:-.003em;line-height:65px;margin:0 0 var(--cs-md)}@media screen and (min-width:700px){.index-module--hero__title--3Ox0E{font-size:83px;line-height:83px}}.index-module--hero__subtitle--zaaas{color:var(--text-primary);font-size:18px;letter-spacing:.85px;margin:0 0 0 4px}@media screen and (min-width:700px){.index-module--hero__subtitle--zaaas{font-size:16px;letter-spacing:.75px;margin:0 0 0 6px}}.index-module--hero__subtitle--zaaas span{display:none}@media screen and (min-width:700px){.index-module--hero__subtitle--zaaas span{display:initial}}.giscus{margin-left:auto;margin-right:auto;max-width:var(--mw-sm)}.index-module--skip--h8eFE{background-color:var(--primary-500);color:var(--text-primary);font-family:var(--fn-main);font-size:var(--fs-lg);font-weight:700;left:var(--cs-md);line-height:var(--lh-lg);position:absolute;top:var(--cs-xl);z-index:5}.index-module--footer__item--6JsIL a,.index-module--footer__source--KGfyF a{--line-color:var(--primary-500);--line-offset:8px;--line-size-hover:3px;--line-animation-duration:150ms;--line-animation-timing-function:ease-in-out;background-image:linear-gradient(to right,var(--line-color) 0,var(--line-color) 100%);background-position:left 85%;background-repeat:no-repeat;background-size:0 var(--line-size-hover);padding-bottom:var(--line-offset)}@media(prefers-reduced-motion:no-preference)and (hover:hover){.index-module--footer__item--6JsIL a,.index-module--footer__source--KGfyF a{transition-duration:var(--line-animation-duration);transition-property:background-size;transition-timing-function:var(--line-animation-timing-function)}}.index-module--footer__item--6JsIL a:focus,.index-module--footer__item--6JsIL a:hover,.index-module--footer__source--KGfyF a:focus,.index-module--footer__source--KGfyF a:hover{background-size:100% var(--line-size-hover)}.index-module--footer--cePDb{margin:0 auto;max-width:var(--mw-md);padding:var(--ls-lg) var(--cs-md)}.index-module--footer__menu--kVtyV{margin:0 0 var(--cs-xl);padding:0}.index-module--footer__item--6JsIL{display:inline-block;font-family:var(--fn-mono);font-size:var(--fs-md);line-height:var(--lh-md);margin-left:0;margin-right:var(--cs-xl)}.index-module--footer__item--right--52KWH{float:right;margin-left:var(--cs-xl);margin-right:0}.index-module--footer__item--6JsIL a{color:var(--text-primary)}.index-module--footer__item-text--NJUmW{display:none}@media screen and (min-width:700px){.index-module--footer__item-text--NJUmW{display:initial}}.index-module--footer__item-icon--7dhxi{fill:var(--text-primary);vertical-align:middle;width:22px}.index-module--footer__item-icon--youtube--iV7DW{width:26px}@media screen and (min-width:700px){.index-module--footer__item-icon--7dhxi{display:none}}.index-module--footer__source--KGfyF{color:var(--text-primary);font-size:var(--fs-md);line-height:var(--lh-md);margin:var(--cs-xl) 0 0}.index-module--header__item--fTLv5 a{--line-color:var(--primary-500);--line-offset:8px;--line-size-hover:3px;--line-animation-duration:150ms;--line-animation-timing-function:ease-in-out;background-image:linear-gradient(to right,var(--line-color) 0,var(--line-color) 100%);background-position:left 85%;background-repeat:no-repeat;background-size:0 var(--line-size-hover);padding-bottom:var(--line-offset)}@media(prefers-reduced-motion:no-preference)and (hover:hover){.index-module--header__item--fTLv5 a{transition-duration:var(--line-animation-duration);transition-property:background-size;transition-timing-function:var(--line-animation-timing-function)}}.index-module--header__item--fTLv5 a:focus,.index-module--header__item--fTLv5 a:hover{background-size:100% var(--line-size-hover)}.index-module--header--uRWhT{background-color:hsla(var(--background-100-shade)/.85);box-shadow:0 0 8px -3px var(--background-100);position:-webkit-sticky;position:sticky;top:0;width:100%;z-index:4}@supports((-webkit-backdrop-filter:none) or (backdrop-filter:none)){.index-module--header--uRWhT{-webkit-backdrop-filter:blur(5px);backdrop-filter:blur(5px)}.dark .index-module--header--uRWhT{background-color:hsla(var(--background-100-shade)/.75)}.light .index-module--header--uRWhT{background-color:hsla(var(--background-100-shade)/.5)}}.index-module--header__content--uoC37{align-items:center;display:flex;list-style:none;margin:0 auto;max-width:var(--mw-md);padding:var(--cs-xl) var(--cs-md)}.index-module--header__item--fTLv5{font-family:var(--fn-main);font-size:var(--fs-md);font-weight:500;line-height:var(--lh-md);padding:0 0 0 var(--cs-xl)}.index-module--header__item--fTLv5 a{color:var(--text-primary)}.index-module--header__item--logo--wqw7T{flex:1 1;font-size:var(--fs-lg);font-weight:700;line-height:var(--lh-lg);padding:0}.index-module--header__item--toggle-placeholder--46\+wC{height:24px;width:40px}:root{--toggle-light:#fc8c03;--toggle-light-hover:#b16202;--toggle-dark:#7742bd;--toggle-dark-hover:#542e84}.react-toggle{cursor:pointer;position:relative;touch-action:pan-x;-webkit-user-select:none;-ms-user-select:none;user-select:none}.react-toggle-screenreader-only{clip:rect(0 0 0 0);border:0;height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;width:1px}.react-toggle-track{background-color:var(--toggle-light);border-radius:24px;height:24px;padding:0;width:40px}@media(prefers-reduced-motion:no-preference){.react-toggle-track{transition:all .2s ease}}.react-toggle:hover .react-toggle-track{background-color:var(--toggle-light-hover)}.react-toggle--checked .react-toggle-track{background-color:var(--toggle-dark)}.react-toggle--checked:hover .react-toggle-track{background-color:var(--toggle-dark-hover)}.react-toggle-thumb{background-color:#fafafa;border:1px solid var(--toggle-light);border-radius:50%;box-sizing:border-box;height:22px;left:1px;position:absolute;top:1px;width:22px}@media(prefers-reduced-motion:no-preference){.react-toggle-thumb{transition:all .5s cubic-bezier(.23,1,.32,1) 0ms}}.react-toggle--checked .react-toggle-thumb{border-color:var(--toggle-dark);left:17px}.react-toggle--focus .react-toggle-thumb{box-shadow:0 0 0 3px hsla(0,0%,100%,.25)}.react-toggle:active .react-toggle-thumb{box-shadow:0 0 0 5px hsla(0,0%,100%,.25)}.index-module--toc__list--GWUjT{list-style:none;margin:0;padding:0}.index-module--toc__title--keXB4{font-family:var(--fn-serif);font-size:var(--fs-lg);font-style:normal;font-weight:400;line-height:calc(var(--vr-unit)*4)}.index-module--toc--FuuSd{--toc-outer-space:var(--ls-sm);--toc-inner-space:var(--cs-md);--toc-wrapper-width:calc(var(--mw-md) - var(--ls-xs)*2);--toc-available-width:calc(var(--toc-wrapper-width) - var(--mw-sm) - var(--toc-outer-space));position:-webkit-sticky;position:sticky;top:7.2rem;width:var(--toc-available-width)}.index-module--toc__title--keXB4{color:var(--text-primary);font-family:var(--fn-head);font-weight:700;margin:var(--ls-xxs) 0}.index-module--toc__list--GWUjT{--toc-link-max-depth:2;--toc-link-border-width:2px;--toc-link-max-width:calc(var(--toc-available-width) - var(--toc-link-max-depth)*var(--toc-inner-space) - var(--toc-link-border-width))}.index-module--toc__list--GWUjT .index-module--toc__list--GWUjT{padding-left:var(--toc-inner-space)}.index-module--toc__ellipsis--KhoXX{max-width:var(--toc-link-max-width);overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.index-module--toc__link--FXHFR{border-left:var(--toc-link-border-width) solid transparent;border-radius:0 var(--br-sm) var(--br-sm) 0;color:var(--text-secondary);display:inline-flex;font-size:var(--fs-sm);line-height:var(--lh-sm);margin:0;padding:var(--cs-sm) var(--cs-md)}.index-module--toc__link--FXHFR:hover,.index-module--toc__link--active--K3k3P{background-color:var(--background-300);border-left-color:var(--primary-500);color:var(--text-primary)}.index-module--toc__link--active--K3k3P{font-weight:700}.dark .index-module--toc__link--FXHFR:hover,.dark .index-module--toc__link--active--K3k3P{background-color:var(--background-500)}.index-module--post-excerpt__title---R0AJ a{--line-color:var(--primary-500);--line-offset:8px;--line-size-hover:3px;--line-animation-duration:150ms;--line-animation-timing-function:ease-in-out;background-image:linear-gradient(to right,var(--line-color) 0,var(--line-color) 100%);background-position:left 85%;background-repeat:no-repeat;background-size:0 var(--line-size-hover);padding-bottom:var(--line-offset)}@media(prefers-reduced-motion:no-preference)and (hover:hover){.index-module--post-excerpt__title---R0AJ a{transition-duration:var(--line-animation-duration);transition-property:background-size;transition-timing-function:var(--line-animation-timing-function)}}.index-module--post-excerpt__title---R0AJ a:focus,.index-module--post-excerpt__title---R0AJ a:hover{background-size:100% var(--line-size-hover)}.index-module--post-excerpt__wrapper--5cYKe{margin:var(--ls-lg) 0;max-width:var(--mw-xs)}.index-module--post-excerpt__title---R0AJ{font-size:var(--fs-lg);line-height:var(--lh-lg);margin:var(--cs-md) 0}.index-module--post-excerpt__title---R0AJ a{color:var(--text-primary)}.index-module--post-excerpt__content--eEd-L{color:var(--text-secondary);font-family:var(--fn-serif);font-size:var(--fs-md);letter-spacing:-.003em;line-height:var(--lh-md);margin:0}.index-module--post-excerpt__info--9Rmq1{color:var(--text-secondary);font-family:var(--fn-mono);font-size:var(--fs-sm);line-height:var(--lh-sm)}.index-module--post-excerpt__keyword--oMETK{color:var(--text-secondary);text-decoration:underline}.index-module--post-excerpt__keyword--oMETK:focus,.index-module--post-excerpt__keyword--oMETK:hover{color:var(--primary-500)}.index-module--repository__link--gk8Z7{--border-width:2px;border-color:var(--background-500);border-radius:var(--br-md);border-style:solid;border-width:var(--border-width);display:flex;flex-direction:column;height:100%;outline:0;padding:calc(var(--cs-md) - var(--border-width)) calc(var(--cs-sm) - var(--border-width)) calc(var(--cs-sm) - var(--border-width))}@media(prefers-reduced-motion:no-preference){.index-module--repository__link--gk8Z7{transition-duration:.2s;transition-property:box-shadow,-webkit-transform;transition-property:transform,box-shadow;transition-property:transform,box-shadow,-webkit-transform;transition-timing-function:ease-in-out}}.index-module--repository__link--gk8Z7:focus,.index-module--repository__link--gk8Z7:hover{-webkit-transform:scale(1.025);transform:scale(1.025)}.index-module--repository__link--gk8Z7:focus{border-color:var(--primary-300);box-shadow:0 0 0 5px var(--primary-100)}.index-module--repository__name--0XZOg{color:var(--text-primary);font-family:var(--fn-mono);font-size:var(--fs-sm);font-weight:500;line-height:var(--lh-sm);margin:0 var(--cs-sm)}.index-module--repository__description--GacGk{color:var(--text-primary);flex:1 1;font-size:var(--fs-sm);line-height:var(--lh-sm);margin:var(--cs-sm) var(--cs-sm) var(--cs-md)}.index-module--keyword--Pq2tX{--border-width:2px;background-color:var(--primary-500);border-color:var(--primary-500);border-radius:var(--br-md);border-style:solid;border-width:var(--border-width);color:var(--primary-100);display:inline-block;font-size:var(--fs-xs);line-height:var(--lh-xs);line-height:calc(var(--lh-xs) - var(--border-width)*2);margin:0 0 var(--cs-sm) var(--cs-sm);padding:0 var(--cs-sm);white-space:nowrap}.index-module--keyword__outlined--tgho\+{background-color:transparent;color:var(--primary-500)}.index-module--keyword__wide--zUTWZ{border-radius:calc(var(--br-md)*2);padding:var(--cs-sm) var(--cs-md)}</style><style>.gatsby-image-wrapper{position:relative;overflow:hidden}.gatsby-image-wrapper picture.object-fit-polyfill{position:static!important}.gatsby-image-wrapper img{bottom:0;height:100%;left:0;margin:0;max-width:none;padding:0;position:absolute;right:0;top:0;width:100%;object-fit:cover}.gatsby-image-wrapper [data-main-image]{opacity:0;transform:translateZ(0);transition:opacity .25s linear;will-change:opacity}.gatsby-image-wrapper-constrained{display:inline-block;vertical-align:top}</style><noscript><style>.gatsby-image-wrapper noscript [data-main-image]{opacity:1!important}.gatsby-image-wrapper [data-placeholder-image]{opacity:0!important}</style></noscript><script type="module">const e="undefined"!=typeof HTMLImageElement&&"loading"in HTMLImageElement.prototype;e&&document.body.addEventListener("load",(function(e){const t=e.target;if(void 0===t.dataset.mainImage)return;if(void 0===t.dataset.gatsbyImageSsr)return;let a=null,n=t;for(;null===a&&n;)void 0!==n.parentNode.dataset.gatsbyImageWrapper&&(a=n.parentNode),n=n.parentNode;const o=a.querySelector("[data-placeholder-image]"),r=new Image;r.src=t.currentSrc,r.decode().catch((()=>{})).then((()=>{t.style.opacity=1,o&&(o.style.opacity=0,o.style.transition="opacity 500ms linear")}))}),!0);</script><title data-react-helmet="true">Case study: Tilt Copters (a Expo/React Native game) • Bartosz Łaniewski</title><link rel="sitemap" type="application/xml" href="/sitemap/sitemap-index.xml"/><link rel="alternate" type="application/rss+xml" title="Bartosz Łaniewski RSS Feed" href="/rss.xml"/><link rel="icon" href="/favicon-32x32.png?v=9379c9a40cfa959fe92aaf414e4e246a" type="image/png"/><link rel="icon" href="/favicon.svg?v=9379c9a40cfa959fe92aaf414e4e246a" type="image/svg+xml"/><link rel="manifest" href="/manifest.webmanifest" crossorigin="anonymous"/></head><body class="light"><script>
              window.__theme = "light";
              window.__onThemeChange = function onThemeChange() {};

              function setTheme(newTheme) {
                window.__theme = newTheme;
                preferredTheme = newTheme;
                document.body.className = newTheme;
                window.__onThemeChange(newTheme);
              }

              window.__setPreferredTheme = function setPreferredTheme(newTheme) {
                setTheme(newTheme);
                localStorage.setItem('theme', newTheme);
              }

              var preferredTheme = localStorage.getItem('theme');
              var prefersDarkQuery = window.matchMedia('(prefers-color-scheme: dark)');

              prefersDarkQuery.addListener(function (event) {
                window.__setPreferredTheme(event.matches ? 'dark' : 'light')
              });

              setTheme(preferredTheme || (prefersDarkQuery.matches ? 'dark' : 'light'));
            </script><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><a class="index-module--skip--h8eFE visually-hidden" href="#content">Skip to main content</a><nav class="index-module--header--uRWhT" itemType="http://schema.org/SiteNavigationElement" itemscope=""><ul class="index-module--header__content--uoC37"><li class="index-module--header__item--fTLv5 index-module--header__item--logo--wqw7T"><a title="Go to main page" href="/">Bart</a></li><li class="index-module--header__item--fTLv5"><a href="/posts/">Devblog</a></li><li class="index-module--header__item--fTLv5"><a target="_blank" rel="author noopener noreferrer" href="https://drive.google.com/file/d/1Zh3NaFogEkufa25H7qxqj0QdqHPzyfZX/view" title="Get my résumé from Google Drive">Résumé</a></li><li class="index-module--header__item--fTLv5"><div class="index-module--header__item--toggle-placeholder--46+wC"></div></li></ul></nav><main id="content" class="index-module--content--Ni+7M" itemProp="mainContentOfPage"><article class="post" itemscope="" itemType="http://schema.org/Article" lang="en"><header class="post__header"><h1 itemProp="headline">Case study: Tilt Copters (a Expo/React Native game)</h1><time dateTime="June 10, 2022" itemProp="datePublished">June 10, 2022</time><ul class="visually-hidden"><li><p itemProp="author">Bartosz Łaniewski</p></li></ul></header><div class="post__wrapper"><div class="post__toc"><nav aria-label="On this page" class="index-module--toc--FuuSd"><p class="index-module--toc__title--keXB4">Contents</p><ol class="index-module--toc__list--GWUjT"><li><a title="Introduction" class="index-module--toc__link--FXHFR index-module--toc__link--active--K3k3P" href="/blog/2022-06-11-case-study-tilt-copters/#introduction"><span class="index-module--toc__ellipsis--KhoXX">Introduction</span></a></li><li><a title="Development" class="index-module--toc__link--FXHFR " href="/blog/2022-06-11-case-study-tilt-copters/#development"><span class="index-module--toc__ellipsis--KhoXX">Development</span></a><ol class="index-module--toc__list--GWUjT"><li><a title="Architecture" class="index-module--toc__link--FXHFR " href="/blog/2022-06-11-case-study-tilt-copters/#architecture"><span class="index-module--toc__ellipsis--KhoXX">Architecture</span></a></li><li><a title="Navigation" class="index-module--toc__link--FXHFR " href="/blog/2022-06-11-case-study-tilt-copters/#navigation"><span class="index-module--toc__ellipsis--KhoXX">Navigation</span></a></li><li><a title="Responsiveness" class="index-module--toc__link--FXHFR " href="/blog/2022-06-11-case-study-tilt-copters/#responsiveness"><span class="index-module--toc__ellipsis--KhoXX">Responsiveness</span></a></li><li><a title="State management" class="index-module--toc__link--FXHFR " href="/blog/2022-06-11-case-study-tilt-copters/#state-management"><span class="index-module--toc__ellipsis--KhoXX">State management</span></a></li></ol></li><li><a title="Challenges" class="index-module--toc__link--FXHFR " href="/blog/2022-06-11-case-study-tilt-copters/#challenges"><span class="index-module--toc__ellipsis--KhoXX">Challenges</span></a><ol class="index-module--toc__list--GWUjT"><li><a title="Expo and libraries" class="index-module--toc__link--FXHFR " href="/blog/2022-06-11-case-study-tilt-copters/#expo-and-libraries"><span class="index-module--toc__ellipsis--KhoXX">Expo and libraries</span></a></li><li><a title="Game performance" class="index-module--toc__link--FXHFR " href="/blog/2022-06-11-case-study-tilt-copters/#game-performance"><span class="index-module--toc__ellipsis--KhoXX">Game performance</span></a></li><li><a title="React Native performance" class="index-module--toc__link--FXHFR " href="/blog/2022-06-11-case-study-tilt-copters/#react-native-performance"><span class="index-module--toc__ellipsis--KhoXX">React Native performance</span></a></li><li><a title="Android differences" class="index-module--toc__link--FXHFR " href="/blog/2022-06-11-case-study-tilt-copters/#android-differences"><span class="index-module--toc__ellipsis--KhoXX">Android differences</span></a></li></ol></li><li><a title="Conclusion" class="index-module--toc__link--FXHFR " href="/blog/2022-06-11-case-study-tilt-copters/#conclusion"><span class="index-module--toc__ellipsis--KhoXX">Conclusion</span></a></li></ol></nav></div><div class="post__content"><div itemProp="articleBody"><p><a href="https://tiltcopters.laniewski.me">Tilt Copters</a> is a relatively simple game created with <!-- --><a href="https://pixijs.com/">pixi.js</a> and Expo. This is a project I&#x27;ve started to learn more about porting web libraries to React Native but also about game architecture and monetization.<!-- --></p><h2 id="introduction">Introduction</h2><p>Tilt Copters is a casual endless game. The user picks the character he wishes to pilot and can explore various maps. The character can be moved by tilting the device. The user has to avoid obstacles and the higher he gets, the faster and more challenging the game becomes.</p><p>Technology stack:</p><ul><li><a href="https://expo.dev/">Expo</a></li><li><a href="https://www.typescriptlang.org/">TypeScript</a></li><li><a href="https://reactnavigation.org/">React Navigation</a></li><li><a href="https://styled-components.com/">Styled Components</a></li><li><a href="https://pixijs.com/">Pixi.js</a> with <!-- --><a href="https://github.com/Bartozzz/expo-pixi">my port</a> of the library<!-- --></li><li><a href="https://redux-toolkit.js.org/">Redux Toolkit</a></li><li><a href="https://github.com/pmndrs/zustand">Zustand</a></li></ul><h2 id="development">Development</h2><p>I am well aware that React Native might not be ready for game development just yet. I picked it out of curiosity – I wanted to see where the limits of this technology are.</p><p>Nevertheless, React Native has its benefits. The main advantage over native solutions is that it&#x27;s easy to make cross-platform applications for mobile, desktop and web while still having the option to interop native code when necessary. It has an established ecosystem, community and is backed by a lot of big companies (industry momentum).</p><h3 id="architecture">Architecture</h3><p>Let&#x27;s start by analyzing the elements and features that we have in the game. We have:</p><ul><li>a character and a map defined by a background, pipes and coins;</li><li>a controller system that hooks to the device accelerometer;</li><li>a collision system that handles pipes &amp; coins collisions;</li></ul><div data-gatsby-image-wrapper="" class="gatsby-image-wrapper"><div aria-hidden="true" style="padding-top:65.36796536796537%"></div><img aria-hidden="true" data-placeholder-image="" style="opacity:1;transition:opacity 500ms linear" decoding="async" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAC4jAAAuIwF4pT92AAADL0lEQVQ4y3VTTWgkRRitTTYaFFFcPLigEA+exOMeBEHBkyCyKh6UFZQVBQ857SkQNAuBvXiRjbhJQMhBAhElmSQk3aZjg8Nkh02mR9I9meru6p+q7upOd2p60tOTmd2kpMLOHlYt+HjFV9TjvfdVgTRN73e73ftJkvQFZlnWL5fLb3LOwfb29nuMMY4x7hFC+lEU8SRJ0PLy8qXV1VWwt7d3ATy+er0ePzk54fV6nRdFwc/Ozni5XH5HEKqq+rHoBUHAKaVcEHY6nUySpBcURQGNRuPfhI7jTEVRNIUxnqKU3hRYq9VekmVZKHiFMXYrz/Obrut+n+f5NMb4xsLCwlMTExMgjuOLvV5vuNvtDgtM03QICCWPl+/7Ai/819mgCCGgKApwenoK+v3+OTLGgDgcGlSlUhlZWVl5YnFxcURc2t3dvZKm6b0wDNUwDP+K43gniqLfS6XSqKZpl03TvO553ieO43zqed5nuq6/DyzLAvPz80/Ozc2NTk5OjszOzo6sra09LQgPDg4+yPOcN5tNrmkat21bZPgAAPC8JElfWpZ13vN9n4u967pUxDj0f7YkSXqtKIqyUAghvMcYq2VZtjo2NvbM+vr6FYTQL77v3/E8bxZj/LNhGNNgaWnpWYTQ2xDCqzMzM89hjKcZY1XGmJwkyR9BEFRrtdoXAAAx0YsDAbIsfyWUNZvNvmmaD0zT5IQQCHRd/w4hxEVjf3+/5Hnen47jCPlcIMZY2P1JWHmY9fmwFEV5yzRNyXGcX33f/w0hVDIM40dQqVQuU0qvHh4eXtva2no5iqJbRVFonU5HFdVut2sIoeuCsFqtDg8IVVW9luf5CSEkgBDSo6Mjdnx8vAPGx8dHbdt+3fO8N4Qly7KmKaV3gyCQwzCUoyi6W6/XPxeWDcN4lPfGxsa7URTtOI6zCSGUMcYqIWQBuK77rchCWIQQriRJsiV+BCGEe553/jsajcbth0SPLG9ubn4Ux7GLENJ0Xf+bEHJAKV0DEMIXfd//OgiCG4qivEop/aHdbrtZlmmtVktjjDkIoW+CIABJkgzerHijH7ZarRal1LJt20mSJGSMqf8A+oXz6OoM5NoAAAAASUVORK5CYII=" alt=""/><picture><source type="image/avif" data-srcset="/static/b8dbdbbb4d24f983c8497da4dc9908a0/dff33/architecture.avif 750w,/static/b8dbdbbb4d24f983c8497da4dc9908a0/0c242/architecture.avif 1080w,/static/b8dbdbbb4d24f983c8497da4dc9908a0/f94b2/architecture.avif 1366w,/static/b8dbdbbb4d24f983c8497da4dc9908a0/ed788/architecture.avif 1386w" sizes="100vw"/><source type="image/webp" data-srcset="/static/b8dbdbbb4d24f983c8497da4dc9908a0/9d02d/architecture.webp 750w,/static/b8dbdbbb4d24f983c8497da4dc9908a0/0c4b2/architecture.webp 1080w,/static/b8dbdbbb4d24f983c8497da4dc9908a0/35ad3/architecture.webp 1366w,/static/b8dbdbbb4d24f983c8497da4dc9908a0/90c98/architecture.webp 1386w" sizes="100vw"/><img data-gatsby-image-ssr="" data-main-image="" style="opacity:0" sizes="100vw" decoding="async" loading="lazy" data-src="/static/b8dbdbbb4d24f983c8497da4dc9908a0/59a03/architecture.png" data-srcset="/static/b8dbdbbb4d24f983c8497da4dc9908a0/7322b/architecture.png 750w,/static/b8dbdbbb4d24f983c8497da4dc9908a0/a7e9c/architecture.png 1080w,/static/b8dbdbbb4d24f983c8497da4dc9908a0/77534/architecture.png 1366w,/static/b8dbdbbb4d24f983c8497da4dc9908a0/59a03/architecture.png 1386w" alt="High level architecture"/></picture><noscript><picture><source type="image/avif" srcSet="/static/b8dbdbbb4d24f983c8497da4dc9908a0/dff33/architecture.avif 750w,/static/b8dbdbbb4d24f983c8497da4dc9908a0/0c242/architecture.avif 1080w,/static/b8dbdbbb4d24f983c8497da4dc9908a0/f94b2/architecture.avif 1366w,/static/b8dbdbbb4d24f983c8497da4dc9908a0/ed788/architecture.avif 1386w" sizes="100vw"/><source type="image/webp" srcSet="/static/b8dbdbbb4d24f983c8497da4dc9908a0/9d02d/architecture.webp 750w,/static/b8dbdbbb4d24f983c8497da4dc9908a0/0c4b2/architecture.webp 1080w,/static/b8dbdbbb4d24f983c8497da4dc9908a0/35ad3/architecture.webp 1366w,/static/b8dbdbbb4d24f983c8497da4dc9908a0/90c98/architecture.webp 1386w" sizes="100vw"/><img data-gatsby-image-ssr="" data-main-image="" style="opacity:0" sizes="100vw" decoding="async" loading="lazy" src="/static/b8dbdbbb4d24f983c8497da4dc9908a0/59a03/architecture.png" srcSet="/static/b8dbdbbb4d24f983c8497da4dc9908a0/7322b/architecture.png 750w,/static/b8dbdbbb4d24f983c8497da4dc9908a0/a7e9c/architecture.png 1080w,/static/b8dbdbbb4d24f983c8497da4dc9908a0/77534/architecture.png 1366w,/static/b8dbdbbb4d24f983c8497da4dc9908a0/59a03/architecture.png 1386w" alt="High level architecture"/></picture></noscript><script type="module">const t="undefined"!=typeof HTMLImageElement&&"loading"in HTMLImageElement.prototype;if(t){const t=document.querySelectorAll("img[data-main-image]");for(let e of t){e.dataset.src&&(e.setAttribute("src",e.dataset.src),e.removeAttribute("data-src")),e.dataset.srcset&&(e.setAttribute("srcset",e.dataset.srcset),e.removeAttribute("data-srcset"));const t=e.parentNode.querySelectorAll("source[data-srcset]");for(let e of t)e.setAttribute("srcset",e.dataset.srcset),e.removeAttribute("data-srcset");e.complete&&(e.style.opacity=1,e.parentNode.parentNode.querySelector("[data-placeholder-image]").style.opacity=0)}}</script></div><h4 id="game-manager">Game Manager</h4><p>The Game Manager is a <!-- --><a href="https://refactoring.guru/design-patterns/mediator">mediator</a> and serves as an aggregator for the Game Objects.<!-- --></p><div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">export</span> <!-- --><span class="token keyword">class</span> <!-- --><span class="token class-name">GameManager</span> <!-- --><span class="token punctuation">{</span>
  <!-- --><span class="token keyword">public</span> <!-- --><span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">{</span> context <!-- --><span class="token punctuation">}</span><span class="token operator">:</span> EngineConfiguration<!-- --><span class="token punctuation">)</span> <!-- --><span class="token punctuation">{</span>
    <!-- --><span class="token keyword">this</span><span class="token punctuation">.</span>application <!-- --><span class="token operator">=</span> <!-- --><span class="token keyword">new</span> <!-- --><span class="token class-name"><span class="token constant">PIXI</span></span><span class="token punctuation">.</span><span class="token function">Application</span><span class="token punctuation">(</span><span class="token punctuation">{</span> context <!-- --><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <!-- --><span class="token comment">// Updates:</span>
    <!-- --><span class="token keyword">this</span><span class="token punctuation">.</span>ticker<!-- --><span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <!-- --><span class="token operator">=&gt;</span> <!-- --><span class="token punctuation">{</span>
      <!-- --><span class="token keyword">if</span> <!-- --><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>store<!-- --><span class="token punctuation">.</span>state <!-- --><span class="token operator">===</span> <!-- --><span class="token string">&quot;isPlaying&quot;</span><span class="token punctuation">)</span> <!-- --><span class="token punctuation">{</span>
        <!-- --><span class="token comment">// Updates:</span>
        <!-- --><span class="token keyword">this</span><span class="token punctuation">.</span>background<!-- --><span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>speed<!-- --><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <!-- --><span class="token keyword">this</span><span class="token punctuation">.</span>character<!-- --><span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>speed<!-- --><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <!-- --><span class="token keyword">this</span><span class="token punctuation">.</span>pipes<!-- --><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span>pipe<!-- --><span class="token punctuation">)</span> <!-- --><span class="token operator">=&gt;</span> pipe<!-- --><span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>speed<!-- --><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <!-- --><span class="token keyword">this</span><span class="token punctuation">.</span>coins<!-- --><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span>coin<!-- --><span class="token punctuation">)</span> <!-- --><span class="token operator">=&gt;</span> coin<!-- --><span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>speed<!-- --><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <!-- --><span class="token comment">// Collision check:</span>
        <!-- --><span class="token keyword">this</span><span class="token punctuation">.</span>obstaclesManager<!-- --><span class="token punctuation">.</span><span class="token function">check</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <!-- --><span class="token comment">// Speed increase:</span>
        <!-- --><span class="token keyword">this</span><span class="token punctuation">.</span>speed <!-- --><span class="token operator">+=</span> configuration<!-- --><span class="token punctuation">.</span>game<!-- --><span class="token punctuation">.</span>acceleration<!-- --><span class="token punctuation">;</span>
      <!-- --><span class="token punctuation">}</span>
    <!-- --><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <!-- --><span class="token comment">// Controls:</span>
    <!-- --><span class="token keyword">this</span><span class="token punctuation">.</span>controlManager<!-- --><span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span>ControlManager<!-- --><span class="token punctuation">.</span><span class="token constant">MOVE</span><span class="token punctuation">,</span> <!-- --><span class="token punctuation">(</span>data<!-- --><span class="token operator">:</span> <!-- --><span class="token builtin">number</span><span class="token punctuation">)</span> <!-- --><span class="token operator">=&gt;</span> <!-- --><span class="token punctuation">{</span>
      <!-- --><span class="token keyword">this</span><span class="token punctuation">.</span>character<!-- --><span class="token punctuation">.</span><span class="token function">move</span><span class="token punctuation">(</span>data<!-- --><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <!-- --><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <!-- --><span class="token comment">// Collisions:</span>
    <!-- --><span class="token keyword">this</span><span class="token punctuation">.</span>obstaclesManager<!-- --><span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span>ObstaclesManager<!-- --><span class="token punctuation">.</span><span class="token constant">PIPE_COLLISION</span><span class="token punctuation">,</span> <!-- --><span class="token punctuation">(</span><span class="token punctuation">)</span> <!-- --><span class="token operator">=&gt;</span> <!-- --><span class="token punctuation">{</span>
      <!-- --><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">lose</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <!-- --><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <!-- --><span class="token keyword">this</span><span class="token punctuation">.</span>obstaclesManager<!-- --><span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span>ObstaclesManager<!-- --><span class="token punctuation">.</span><span class="token constant">PIPE_PASSED</span><span class="token punctuation">,</span> <!-- --><span class="token punctuation">(</span>pipe<!-- --><span class="token punctuation">)</span> <!-- --><span class="token operator">=&gt;</span> <!-- --><span class="token punctuation">{</span>
      pipe<!-- --><span class="token punctuation">.</span><span class="token function">score</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <!-- --><span class="token keyword">this</span><span class="token punctuation">.</span>store<!-- --><span class="token punctuation">.</span><span class="token function">incrementScore</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <!-- --><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <!-- --><span class="token keyword">this</span><span class="token punctuation">.</span>obstaclesManager<!-- --><span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span>ObstaclesManager<!-- --><span class="token punctuation">.</span><span class="token constant">COIN_COLLISION</span><span class="token punctuation">,</span> <!-- --><span class="token punctuation">(</span>coin<!-- --><span class="token punctuation">)</span> <!-- --><span class="token operator">=&gt;</span> <!-- --><span class="token punctuation">{</span>
      coin<!-- --><span class="token punctuation">.</span><span class="token function">score</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <!-- --><span class="token keyword">this</span><span class="token punctuation">.</span>store<!-- --><span class="token punctuation">.</span><span class="token function">incrementCoins</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <!-- --><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <!-- --><span class="token punctuation">}</span>

  <!-- --><span class="token keyword">public</span> <!-- --><span class="token function">initialize</span><span class="token punctuation">(</span>gameConfig<!-- --><span class="token operator">:</span> GameConfiguration<!-- --><span class="token punctuation">)</span> <!-- --><span class="token punctuation">{</span>
    <!-- --><span class="token comment">// …</span>
  <!-- --><span class="token punctuation">}</span>
  <!-- --><span class="token keyword">public</span> <!-- --><span class="token function">reset</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <!-- --><span class="token punctuation">{</span>
    <!-- --><span class="token comment">// …</span>
  <!-- --><span class="token punctuation">}</span>
  <!-- --><span class="token keyword">public</span> <!-- --><span class="token function">destroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <!-- --><span class="token punctuation">{</span>
    <!-- --><span class="token comment">// …</span>
  <!-- --><span class="token punctuation">}</span>

  <!-- --><span class="token keyword">public</span> <!-- --><span class="token function">prepare</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <!-- --><span class="token punctuation">{</span>
    <!-- --><span class="token keyword">this</span><span class="token punctuation">.</span>store<!-- --><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token string">&quot;isIdle&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <!-- --><span class="token keyword">this</span><span class="token punctuation">.</span>application<!-- --><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <!-- --><span class="token punctuation">}</span>
  <!-- --><span class="token keyword">public</span> <!-- --><span class="token function">play</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <!-- --><span class="token punctuation">{</span>
    <!-- --><span class="token keyword">this</span><span class="token punctuation">.</span>store<!-- --><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token string">&quot;isPlaying&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <!-- --><span class="token keyword">this</span><span class="token punctuation">.</span>application<!-- --><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <!-- --><span class="token punctuation">}</span>
  <!-- --><span class="token keyword">public</span> <!-- --><span class="token function">lose</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <!-- --><span class="token punctuation">{</span>
    <!-- --><span class="token keyword">this</span><span class="token punctuation">.</span>store<!-- --><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token string">&quot;isGameOver&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <!-- --><span class="token keyword">this</span><span class="token punctuation">.</span>application<!-- --><span class="token punctuation">.</span><span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <!-- --><span class="token punctuation">}</span>
<!-- --><span class="token punctuation">}</span>
<!-- --></code></pre></div><h4 id="game-objects">Game Objects</h4><p>The Game Objects describe elements in the game world (character, background, pipe, coin). All these elements are implementing the <!-- --><code class="language-text">GameObject</code> interface:<!-- --></p><div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">export</span> <!-- --><span class="token keyword">interface</span> <!-- --><span class="token class-name">GameObject</span> <!-- --><span class="token punctuation">{</span>
  <!-- --><span class="token function">update</span><span class="token punctuation">(</span>delta<!-- --><span class="token operator">:</span> <!-- --><span class="token builtin">number</span><span class="token punctuation">)</span><span class="token operator">:</span> <!-- --><span class="token keyword">void</span><span class="token punctuation">;</span>
  <!-- --><span class="token function">destroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <!-- --><span class="token keyword">void</span><span class="token punctuation">;</span>
  <!-- --><span class="token function">getBoundingBoxes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> BoundingBox<!-- --><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<!-- --><span class="token punctuation">}</span></code></pre></div><h3 id="navigation">Navigation</h3><p>I used <!-- --><a href="https://reactnavigation.org/docs/stack-navigator/"><code class="language-text">@react-navigation/stack</code></a> to handle all in-game navigation. I created <!-- --><a href="https://reactnavigation.org/docs/stack-navigator/#animations">custom interpolators</a> to give the user an illusion that the entire game is one big canvas just sliding down or up based on the view that we want to show.<!-- --></p><p>Below is the code that I used to customize the transition when navigating from menu to the shop and vice-versa:</p><div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">export</span> <!-- --><span class="token keyword">function</span> <!-- --><span class="token function">forShopInterpolator</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  index<!-- --><span class="token punctuation">,</span>
  current<!-- --><span class="token punctuation">,</span>
  next<!-- --><span class="token punctuation">,</span>
  inverted<!-- --><span class="token punctuation">,</span>
  layouts<!-- --><span class="token operator">:</span> <!-- --><span class="token punctuation">{</span> screen <!-- --><span class="token punctuation">}</span><span class="token punctuation">,</span>
<!-- --><span class="token punctuation">}</span><span class="token operator">:</span> StackCardInterpolationProps<!-- --><span class="token punctuation">)</span><span class="token operator">:</span> StackCardInterpolatedStyle <!-- --><span class="token punctuation">{</span>
  <!-- --><span class="token keyword">const</span> isFirst <!-- --><span class="token operator">=</span> index <!-- --><span class="token operator">===</span> <!-- --><span class="token number">0</span><span class="token punctuation">;</span>

  <!-- --><span class="token keyword">const</span> progress <!-- --><span class="token operator">=</span> <!-- --><span class="token function">add</span><span class="token punctuation">(</span>
    current<!-- --><span class="token punctuation">.</span>progress<!-- --><span class="token punctuation">.</span><span class="token function">interpolate</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      inputRange<!-- --><span class="token operator">:</span> <!-- --><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <!-- --><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      outputRange<!-- --><span class="token operator">:</span> <!-- --><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <!-- --><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      extrapolate<!-- --><span class="token operator">:</span> <!-- --><span class="token string">&quot;clamp&quot;</span><span class="token punctuation">,</span>
    <!-- --><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    next
      <!-- --><span class="token operator">?</span> next<!-- --><span class="token punctuation">.</span>progress<!-- --><span class="token punctuation">.</span><span class="token function">interpolate</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
          inputRange<!-- --><span class="token operator">:</span> <!-- --><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <!-- --><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
          outputRange<!-- --><span class="token operator">:</span> <!-- --><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <!-- --><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
          extrapolate<!-- --><span class="token operator">:</span> <!-- --><span class="token string">&quot;clamp&quot;</span><span class="token punctuation">,</span>
        <!-- --><span class="token punctuation">}</span><span class="token punctuation">)</span>
      <!-- --><span class="token operator">:</span> <!-- --><span class="token number">0</span>
  <!-- --><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <!-- --><span class="token keyword">const</span> translateY <!-- --><span class="token operator">=</span> <!-- --><span class="token function">multiply</span><span class="token punctuation">(</span>
    progress<!-- --><span class="token punctuation">.</span><span class="token function">interpolate</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      inputRange<!-- --><span class="token operator">:</span> <!-- --><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <!-- --><span class="token number">1</span><span class="token punctuation">,</span> <!-- --><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      outputRange<!-- --><span class="token operator">:</span> <!-- --><span class="token punctuation">[</span>
        screen<!-- --><span class="token punctuation">.</span>height<!-- --><span class="token punctuation">,</span>
        isFirst <!-- --><span class="token operator">?</span> <!-- --><span class="token number">0</span> <!-- --><span class="token operator">:</span> <!-- --><span class="token number">0</span><span class="token punctuation">,</span>
        isFirst <!-- --><span class="token operator">?</span> <!-- --><span class="token operator">-</span>screen<!-- --><span class="token punctuation">.</span>height <!-- --><span class="token operator">:</span> <!-- --><span class="token number">0</span><span class="token punctuation">,</span>
      <!-- --><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <!-- --><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    inverted
  <!-- --><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <!-- --><span class="token keyword">return</span> <!-- --><span class="token punctuation">{</span>
    cardStyle<!-- --><span class="token operator">:</span> <!-- --><span class="token punctuation">{</span>
      overflow<!-- --><span class="token operator">:</span> <!-- --><span class="token string">&quot;hidden&quot;</span><span class="token punctuation">,</span>
      transform<!-- --><span class="token operator">:</span> <!-- --><span class="token punctuation">[</span><span class="token punctuation">{</span> translateY <!-- --><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <!-- --><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <!-- --><span class="token punctuation">}</span><span class="token punctuation">;</span>
<!-- --><span class="token punctuation">}</span></code></pre></div><h3 id="responsiveness">Responsiveness</h3><p>Unlike most game engines, <!-- --><code class="language-text">pixi.js</code> does not handle multiple resolutions out of the box. You&#x27;ll have to manually stretch the game viewport to match the device screen size.<!-- --></p><p>My approach is to use a single base resolution and then fit it to everything else. The one I picked is 375x812pt (iPhone X). Think of this setting as the &quot;design size&quot;, i.e. the size of the area that you work with when creating textures.</p><div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">import</span> <!-- --><span class="token punctuation">{</span> Dimensions <!-- --><span class="token punctuation">}</span> <!-- --><span class="token keyword">from</span> <!-- --><span class="token string">&quot;react-native&quot;</span><span class="token punctuation">;</span>

<!-- --><span class="token keyword">const</span> window <!-- --><span class="token operator">=</span> Dimensions<!-- --><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;window&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<!-- --><span class="token keyword">export</span> <!-- --><span class="token keyword">const</span> targetWidth <!-- --><span class="token operator">=</span> <!-- --><span class="token number">375</span><span class="token punctuation">;</span>
<!-- --><span class="token keyword">export</span> <!-- --><span class="token keyword">const</span> targetHeight <!-- --><span class="token operator">=</span> <!-- --><span class="token number">812</span><span class="token punctuation">;</span>
<!-- --><span class="token keyword">export</span> <!-- --><span class="token keyword">const</span> scale <!-- --><span class="token operator">=</span> <!-- --><span class="token punctuation">(</span>window<!-- --><span class="token punctuation">.</span>width <!-- --><span class="token operator">*</span> window<!-- --><span class="token punctuation">.</span>scale<!-- --><span class="token punctuation">)</span> <!-- --><span class="token operator">/</span> targetWidth<!-- --><span class="token punctuation">;</span>

<!-- --><span class="token keyword">export</span> <!-- --><span class="token keyword">const</span> canvas <!-- --><span class="token operator">=</span> <!-- --><span class="token punctuation">{</span>
  width<!-- --><span class="token operator">:</span> targetWidth<!-- --><span class="token punctuation">,</span>
  height<!-- --><span class="token operator">:</span> targetHeight<!-- --><span class="token punctuation">,</span>
  scale<!-- --><span class="token operator">:</span> scale<!-- --><span class="token punctuation">,</span>
<!-- --><span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre></div><p>Then, I just had to set the <!-- --><a href="https://pixijs.download/v4.8.9/docs/PIXI.Application.html#Application"><code class="language-text">PIXI.Application</code></a> <!-- --><code class="language-text">width</code>, <!-- --><code class="language-text">height</code> and <!-- --><code class="language-text">resolution</code> as follows:<!-- --></p><div class="gatsby-highlight has-highlighted-lines" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">export</span> <!-- --><span class="token keyword">class</span> <!-- --><span class="token class-name">GameManager</span> <!-- --><span class="token punctuation">{</span>
  <!-- --><span class="token keyword">private</span> application<!-- --><span class="token operator">!</span><span class="token operator">:</span> <!-- --><span class="token constant">PIXI</span><span class="token punctuation">.</span>Application<!-- --><span class="token punctuation">;</span>

  <!-- --><span class="token keyword">public</span> <!-- --><span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">{</span> context <!-- --><span class="token punctuation">}</span><span class="token operator">:</span> EngineConfiguration<!-- --><span class="token punctuation">)</span> <!-- --><span class="token punctuation">{</span>
    <!-- --><span class="token keyword">this</span><span class="token punctuation">.</span>application <!-- --><span class="token operator">=</span> <!-- --><span class="token keyword">new</span> <!-- --><span class="token class-name"><span class="token constant">PIXI</span></span><span class="token punctuation">.</span><span class="token function">Application</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      context<!-- --><span class="token punctuation">,</span>
<!-- --><span class="gatsby-highlight-code-line">      width<!-- --><span class="token operator">:</span> configuration<!-- --><span class="token punctuation">.</span>canvas<!-- --><span class="token punctuation">.</span>width<!-- --><span class="token punctuation">,</span></span><span class="gatsby-highlight-code-line">      height<!-- --><span class="token operator">:</span> configuration<!-- --><span class="token punctuation">.</span>canvas<!-- --><span class="token punctuation">.</span>height<!-- --><span class="token punctuation">,</span></span><span class="gatsby-highlight-code-line">      resolution<!-- --><span class="token operator">:</span> configuration<!-- --><span class="token punctuation">.</span>canvas<!-- --><span class="token punctuation">.</span>scale<!-- --><span class="token punctuation">,</span></span>    <!-- --><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <!-- --><span class="token punctuation">}</span>
<!-- --><span class="token punctuation">}</span></code></pre></div><p><code class="language-text">resolution</code> will stretch the canvas to fit the whole screen while maintaining aspect ratios no matter the resolution. The scene is rendered, then scaled to fit the screen.<!-- --></p><h3 id="state-management">State management</h3><p>I used <!-- --><a href="https://github.com/pmndrs/zustand">zustand</a> for game state management. It is a bearbones state-management solution using simplified flux principles. It&#x27;s really easy to use and framework agnostic (no context providers are necessary), so I can use it in React (UI) and game managers (logic). My game store looks as follows:<!-- --></p><div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">import</span> create <!-- --><span class="token keyword">from</span> <!-- --><span class="token string">&quot;zustand&quot;</span><span class="token punctuation">;</span>
<!-- --><span class="token keyword">import</span> createVanilla <!-- --><span class="token keyword">from</span> <!-- --><span class="token string">&quot;zustand/vanilla&quot;</span><span class="token punctuation">;</span>
<!-- --><span class="token keyword">import</span> <!-- --><span class="token punctuation">{</span> combine <!-- --><span class="token punctuation">}</span> <!-- --><span class="token keyword">from</span> <!-- --><span class="token string">&quot;zustand/middleware&quot;</span><span class="token punctuation">;</span>

<!-- --><span class="token keyword">interface</span> <!-- --><span class="token class-name">State</span> <!-- --><span class="token punctuation">{</span>
  state<!-- --><span class="token operator">:</span> <!-- --><span class="token string">&quot;isIdle&quot;</span> <!-- --><span class="token operator">|</span> <!-- --><span class="token string">&quot;isPlaying&quot;</span> <!-- --><span class="token operator">|</span> <!-- --><span class="token string">&quot;isGameOver&quot;</span><span class="token punctuation">;</span>
  score<!-- --><span class="token operator">:</span> <!-- --><span class="token builtin">number</span><span class="token punctuation">;</span>
  coins<!-- --><span class="token operator">:</span> <!-- --><span class="token builtin">number</span><span class="token punctuation">;</span>
<!-- --><span class="token punctuation">}</span>

<!-- --><span class="token keyword">const</span> initialState<!-- --><span class="token operator">:</span> State <!-- --><span class="token operator">=</span> <!-- --><span class="token punctuation">{</span>
  state<!-- --><span class="token operator">:</span> <!-- --><span class="token string">&quot;isIdle&quot;</span><span class="token punctuation">,</span>
  score<!-- --><span class="token operator">:</span> <!-- --><span class="token number">0</span><span class="token punctuation">,</span>
  coins<!-- --><span class="token operator">:</span> <!-- --><span class="token number">0</span><span class="token punctuation">,</span>
<!-- --><span class="token punctuation">}</span><span class="token punctuation">;</span>

<!-- --><span class="token keyword">export</span> <!-- --><span class="token keyword">const</span> gameStore <!-- --><span class="token operator">=</span> <!-- --><span class="token function">createVanilla</span><span class="token punctuation">(</span>
  <!-- --><span class="token function">combine</span><span class="token punctuation">(</span>initialState<!-- --><span class="token punctuation">,</span> <!-- --><span class="token punctuation">(</span>set<!-- --><span class="token punctuation">)</span> <!-- --><span class="token operator">=&gt;</span> <!-- --><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <!-- --><span class="token function-variable function">reset</span><span class="token operator">:</span> <!-- --><span class="token punctuation">(</span><span class="token punctuation">)</span> <!-- --><span class="token operator">=&gt;</span> <!-- --><span class="token function">set</span><span class="token punctuation">(</span>initialState<!-- --><span class="token punctuation">)</span><span class="token punctuation">,</span>
    setState<!-- --><span class="token operator">:</span> <!-- --><span class="token punctuation">(</span>payload<!-- --><span class="token operator">:</span> State<!-- --><span class="token punctuation">[</span><span class="token string">&quot;state&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <!-- --><span class="token operator">=&gt;</span>
      <!-- --><span class="token function">set</span><span class="token punctuation">(</span><span class="token punctuation">(</span>state<!-- --><span class="token punctuation">)</span> <!-- --><span class="token operator">=&gt;</span> <!-- --><span class="token punctuation">(</span><span class="token punctuation">{</span> state<!-- --><span class="token operator">:</span> payload <!-- --><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <!-- --><span class="token function-variable function">incrementScore</span><span class="token operator">:</span> <!-- --><span class="token punctuation">(</span>payload <!-- --><span class="token operator">=</span> <!-- --><span class="token number">1</span><span class="token punctuation">)</span> <!-- --><span class="token operator">=&gt;</span>
      <!-- --><span class="token function">set</span><span class="token punctuation">(</span><span class="token punctuation">(</span>state<!-- --><span class="token punctuation">)</span> <!-- --><span class="token operator">=&gt;</span> <!-- --><span class="token punctuation">(</span><span class="token punctuation">{</span> score<!-- --><span class="token operator">:</span> Math<!-- --><span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> state<!-- --><span class="token punctuation">.</span>score <!-- --><span class="token operator">+</span> payload<!-- --><span class="token punctuation">)</span> <!-- --><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <!-- --><span class="token function-variable function">incrementCoins</span><span class="token operator">:</span> <!-- --><span class="token punctuation">(</span>payload <!-- --><span class="token operator">=</span> <!-- --><span class="token number">1</span><span class="token punctuation">)</span> <!-- --><span class="token operator">=&gt;</span>
      <!-- --><span class="token function">set</span><span class="token punctuation">(</span><span class="token punctuation">(</span>state<!-- --><span class="token punctuation">)</span> <!-- --><span class="token operator">=&gt;</span> <!-- --><span class="token punctuation">(</span><span class="token punctuation">{</span> coins<!-- --><span class="token operator">:</span> Math<!-- --><span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> state<!-- --><span class="token punctuation">.</span>coins <!-- --><span class="token operator">+</span> payload<!-- --><span class="token punctuation">)</span> <!-- --><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <!-- --><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<!-- --><span class="token punctuation">)</span><span class="token punctuation">;</span>

<!-- --><span class="token keyword">export</span> <!-- --><span class="token keyword">const</span> useGameStore <!-- --><span class="token operator">=</span> <!-- --><span class="token function">create</span><span class="token punctuation">(</span>gameStore<!-- --><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div><h4 id="usage-in-managers">Usage in managers</h4><div class="gatsby-highlight has-highlighted-lines" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">export</span> <!-- --><span class="token keyword">class</span> <!-- --><span class="token class-name">GameManager</span> <!-- --><span class="token punctuation">{</span>
<!-- --><span class="gatsby-highlight-code-line">  <!-- --><span class="token keyword">private</span> <!-- --><span class="token keyword">get</span> <!-- --><span class="token function">store</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <!-- --><span class="token punctuation">{</span></span><span class="gatsby-highlight-code-line">    <!-- --><span class="token keyword">return</span> gameStore<!-- --><span class="token punctuation">.</span><span class="token function">getState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><span class="gatsby-highlight-code-line">  <!-- --><span class="token punctuation">}</span></span>
  <!-- --><span class="token keyword">public</span> <!-- --><span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">{</span> context <!-- --><span class="token punctuation">}</span><span class="token operator">:</span> EngineConfiguration<!-- --><span class="token punctuation">)</span> <!-- --><span class="token punctuation">{</span>
    <!-- --><span class="token keyword">this</span><span class="token punctuation">.</span>ticker<!-- --><span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <!-- --><span class="token operator">=&gt;</span> <!-- --><span class="token punctuation">{</span>
<!-- --><span class="gatsby-highlight-code-line">      <!-- --><span class="token keyword">if</span> <!-- --><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>store<!-- --><span class="token punctuation">.</span>state <!-- --><span class="token operator">===</span> <!-- --><span class="token string">&quot;isPlaying&quot;</span><span class="token punctuation">)</span> <!-- --><span class="token punctuation">{</span></span>        <!-- --><span class="token comment">// Do the updates…</span>
      <!-- --><span class="token punctuation">}</span>
    <!-- --><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <!-- --><span class="token keyword">this</span><span class="token punctuation">.</span>obstaclesManager<!-- --><span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span>ObstaclesManager<!-- --><span class="token punctuation">.</span><span class="token constant">PIPE_PASSED</span><span class="token punctuation">,</span> <!-- --><span class="token punctuation">(</span><span class="token punctuation">)</span> <!-- --><span class="token operator">=&gt;</span> <!-- --><span class="token punctuation">{</span>
<!-- --><span class="gatsby-highlight-code-line">      <!-- --><span class="token keyword">this</span><span class="token punctuation">.</span>store<!-- --><span class="token punctuation">.</span><span class="token function">incrementScore</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>    <!-- --><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <!-- --><span class="token keyword">this</span><span class="token punctuation">.</span>obstaclesManager<!-- --><span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span>ObstaclesManager<!-- --><span class="token punctuation">.</span><span class="token constant">COIN_COLLISION</span><span class="token punctuation">,</span> <!-- --><span class="token punctuation">(</span><span class="token punctuation">)</span> <!-- --><span class="token operator">=&gt;</span> <!-- --><span class="token punctuation">{</span>
<!-- --><span class="gatsby-highlight-code-line">      <!-- --><span class="token keyword">this</span><span class="token punctuation">.</span>store<!-- --><span class="token punctuation">.</span><span class="token function">incrementCoins</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>    <!-- --><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <!-- --><span class="token punctuation">}</span>
<!-- --><span class="token punctuation">}</span></code></pre></div><h4 id="usage-in-react">Usage in React</h4><div class="gatsby-highlight has-highlighted-lines" data-language="tsx"><pre class="language-tsx"><code class="language-tsx"><span class="token keyword">export</span> <!-- --><span class="token keyword">function</span> <!-- --><span class="token function">GameScore</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <!-- --><span class="token punctuation">{</span>
<!-- --><span class="gatsby-highlight-code-line">  <!-- --><span class="token keyword">const</span> score <!-- --><span class="token operator">=</span> <!-- --><span class="token function">useGameStore</span><span class="token punctuation">(</span><span class="token punctuation">(</span>state<!-- --><span class="token punctuation">)</span> <!-- --><span class="token operator">=&gt;</span> state<!-- --><span class="token punctuation">.</span>score<!-- --><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
  <!-- --><span class="token keyword">return</span> <!-- --><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Text</span></span> <!-- --><span class="token attr-name">size</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>lg<!-- --><span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span>score<!-- --><span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Text</span></span><span class="token punctuation">&gt;</span></span><span class="token punctuation">;</span>
<!-- --><span class="token punctuation">}</span></code></pre></div><aside class="index-module--alert--r0Bkf index-module--alert__info--z6D+y"><p>  I used <!-- --><a href="https://redux-toolkit.js.org/">Redux Toolkit</a> for the user state (i.e. purchased items) and <!-- --><a href="https://github.com/rt2zz/redux-persist"><code class="language-text">redux-persist</code></a> for persistence. There are no particular reasons why I used Redux over zustand or any other solution.<!-- --></p></aside><h2 id="challenges">Challenges</h2><h3 id="expo-and-libraries">Expo and libraries</h3><p>There&#x27;s an official library called <!-- --><a href="https://github.com/expo/expo-pixi"><code class="language-text">expo-pixi</code></a> originally developed by Evan Bacon. This is the first search result when looking for pixi.js for Expo/React Native. I tried using this library but quickly abandoned it because of plenty of issues it has. Instead, I created my port with better compatibility. It can be found on <!-- --><a href="https://github.com/Bartozzz/expo-pixi"><code class="language-text">Bartozzz/expo-pixi</code></a>.<!-- --></p><h4 id="issue-1-incompatible-with-expo-43-221">Issue #1: incompatible with Expo 43 (<!-- --><a href="https://github.com/expo/expo-pixi/issues/221">#221</a>)<!-- --></h4><p><code class="language-text">expo-pixi</code> uses <!-- --><a href="https://github.com/expo/expo-asset-utils"><code class="language-text">expo-asset-utils</code></a> which is incompatible with Expo SDK 43 and above. This is because Expo SDK 43 <!-- --><a href="https://blog.expo.dev/whats-new-in-expo-modules-infrastructure-7a7cdda81ebc">deprecated the <!-- --><code class="language-text">react-native-unimodules</code> package<!-- --></a>:<!-- --></p><blockquote><p>The <!-- --><code class="language-text">react-native-unimodules</code> package is deprecated as of SDK 43, and the module system and autolinking implementation now live in the expo package instead.<!-- --></p></blockquote><p>The solution was to migrate from <!-- --><a href="https://github.com/expo/expo-asset-utils"><code class="language-text">expo-asset-utils</code></a> to <!-- --><a href="https://docs.expo.dev/versions/latest/sdk/asset/"><code class="language-text">expo-asset</code></a>:<!-- --></p><div class="gatsby-highlight" data-language="diff"><pre class="language-diff"><code class="language-diff"><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span>import { resolveAsync } from &#x27;expo-asset-utils&#x27;;
<!-- --></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span>import { Asset } from &quot;expo-asset&quot;;
<!-- --></span>
const textureFromExpoAsync = async resource =&gt; {
<!-- --><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span> const asset = await resolveAsync(resource);
<!-- --></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span> const asset = await Asset.fromModule(resource).downloadAsync();
<!-- --></span>
<!-- --><span class="token unchanged"><span class="token prefix unchanged"> </span> return PIXI.Texture.from(asset);
<!-- --></span>}<!-- --></code></pre></div><h4 id="issue-2-invalid-dependencies-156">Issue #2: invalid dependencies (<!-- --><a href="https://github.com/expo/expo-pixi/issues/156">#156</a>)<!-- --></h4><ol><li><code class="language-text">expo-pixi</code> does not have a locked-in version of <!-- --><code class="language-text">pixi-filters</code>. It downloads the latest version which is incompatible with pixi-js V4;<!-- --></li><li><code class="language-text">expo-pixi</code> requires <!-- --><code class="language-text">expo-gl</code> V4, which is incompatible with Expo SDK 40 and above;<!-- --></li></ol><p>To fix those issues, I updated the dependencies as follows:</p><div class="gatsby-highlight" data-language="diff"><pre class="language-diff"><code class="language-diff">{
<!-- --><span class="token unchanged"><span class="token prefix unchanged"> </span> &quot;dependencies&quot;: {
<!-- --></span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span>   &quot;pixi-filters&quot;: &quot;*&quot;,
<!-- --></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span>   &quot;pixi-filters&quot;: &quot;2.7.1&quot;,
<!-- --></span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span>   &quot;pixi.js&quot;: &quot;^4.7.0&quot;
<!-- --></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span>   &quot;pixi.js&quot;: &quot;latest-4.x&quot;
<!-- --></span><span class="token unchanged"><span class="token prefix unchanged"> </span> },
<!-- --><span class="token prefix unchanged"> </span> &quot;peerDependencies&quot;: {
<!-- --></span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span>   &quot;expo-gl&quot;: &quot;~4.0.0&quot;
<!-- --></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span>   &quot;expo-gl&quot;: &quot;*&quot;
<!-- --></span><span class="token unchanged"><span class="token prefix unchanged"> </span> }
<!-- --></span>}<!-- --></code></pre></div><h4 id="issue-3-side-effects-and-library-overwriting-model">Issue #3: side-effects and library overwriting model</h4><p><code class="language-text">expo-pixi</code> overwrites <!-- --><code class="language-text">pixi.js</code> methods in a quite ugly way. It mutates the PIXI instance:<!-- --></p><div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token constant">PIXI</span> <!-- --><span class="token operator">=</span> <!-- --><span class="token punctuation">{</span>
  <!-- --><span class="token operator">...</span><span class="token constant">PIXI</span><span class="token punctuation">,</span>
  Application<!-- --><span class="token operator">:</span> ExpoPIXIApplication<!-- --><span class="token punctuation">,</span>
  Texture<!-- --><span class="token operator">:</span> <!-- --><span class="token punctuation">{</span>
    <!-- --><span class="token operator">...</span><span class="token constant">PIXI</span><span class="token punctuation">.</span>Texture<!-- --><span class="token punctuation">,</span>
    <!-- --><span class="token function-variable function">from</span><span class="token operator">:</span> <!-- --><span class="token punctuation">(</span><span class="token operator">...</span>props<!-- --><span class="token punctuation">)</span> <!-- --><span class="token operator">=&gt;</span> <!-- --><span class="token punctuation">{</span> <!-- --><span class="token comment">/* … */</span> <!-- --><span class="token punctuation">}</span><span class="token punctuation">,</span>
    fromExpoAsync<!-- --><span class="token operator">:</span> textureFromExpoAsync<!-- --><span class="token punctuation">,</span>
  <!-- --><span class="token punctuation">}</span><span class="token punctuation">,</span>
  Sprite<!-- --><span class="token operator">:</span> <!-- --><span class="token punctuation">{</span>
    <!-- --><span class="token operator">...</span><span class="token constant">PIXI</span><span class="token punctuation">.</span>Sprite<!-- --><span class="token punctuation">,</span>
    fromExpoAsync<!-- --><span class="token operator">:</span> spriteFromExpoAsync<!-- --><span class="token punctuation">,</span>
    <!-- --><span class="token function-variable function">from</span><span class="token operator">:</span> <!-- --><span class="token punctuation">(</span><span class="token operator">...</span>props<!-- --><span class="token punctuation">)</span> <!-- --><span class="token operator">=&gt;</span> <!-- --><span class="token punctuation">{</span> <!-- --><span class="token comment">/* … */</span> <!-- --><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <!-- --><span class="token punctuation">}</span>
<!-- --><span class="token punctuation">}</span></code></pre></div><p>There are several issues with this approach:</p><ol><li>This is causing side-effects, as PIXI is declared in the global scope;</li><li>There was a mix of web-only and native-only code in a single file;</li></ol><p>To solve the first issue, my approach was to simply extend PIXI classes and re-export new PIXI objects:</p><div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">import</span> <!-- --><span class="token operator">*</span> <!-- --><span class="token keyword">as</span> filters <!-- --><span class="token keyword">from</span> <!-- --><span class="token string">&quot;pixi-filters&quot;</span><span class="token punctuation">;</span>
<!-- --><span class="token keyword">import</span> <!-- --><span class="token operator">*</span> <!-- --><span class="token keyword">as</span> PIXIInstance <!-- --><span class="token keyword">from</span> <!-- --><span class="token string">&quot;pixi.js&quot;</span><span class="token punctuation">;</span>

<!-- --><span class="token keyword">class</span> <!-- --><span class="token class-name">PIXIApplication</span> <!-- --><span class="token keyword">extends</span> <!-- --><span class="token class-name">PIXIInstance</span><span class="token punctuation">.</span>Application <!-- --><span class="token punctuation">{</span>
  <!-- --><span class="token comment">// …</span>
<!-- --><span class="token punctuation">}</span>

<!-- --><span class="token keyword">class</span> <!-- --><span class="token class-name">PIXISprite</span> <!-- --><span class="token keyword">extends</span> <!-- --><span class="token class-name">PIXIInstance</span><span class="token punctuation">.</span>Sprite <!-- --><span class="token punctuation">{</span>
  <!-- --><span class="token keyword">static</span> <!-- --><span class="token function">from</span><span class="token punctuation">(</span>asset<!-- --><span class="token punctuation">)</span> <!-- --><span class="token punctuation">{</span>
    <!-- --><span class="token comment">// …</span>
  <!-- --><span class="token punctuation">}</span>
<!-- --><span class="token punctuation">}</span>

<!-- --><span class="token keyword">class</span> <!-- --><span class="token class-name">PIXITexture</span> <!-- --><span class="token keyword">extends</span> <!-- --><span class="token class-name">PIXIInstance</span><span class="token punctuation">.</span>Texture <!-- --><span class="token punctuation">{</span>
  <!-- --><span class="token keyword">static</span> <!-- --><span class="token function">from</span><span class="token punctuation">(</span>asset<!-- --><span class="token punctuation">)</span> <!-- --><span class="token punctuation">{</span>
    <!-- --><span class="token comment">// …</span>
  <!-- --><span class="token punctuation">}</span>
<!-- --><span class="token punctuation">}</span>

<!-- --><span class="token keyword">export</span> <!-- --><span class="token keyword">const</span> <!-- --><span class="token constant">PIXI</span> <!-- --><span class="token operator">=</span> <!-- --><span class="token punctuation">{</span>
  <!-- --><span class="token operator">...</span>PIXIInstance<!-- --><span class="token punctuation">,</span>
  filters<!-- --><span class="token operator">:</span> <!-- --><span class="token punctuation">{</span>
    <!-- --><span class="token operator">...</span>PIXIInstance<!-- --><span class="token punctuation">.</span>filters<!-- --><span class="token punctuation">,</span>
    <!-- --><span class="token operator">...</span>filters<!-- --><span class="token punctuation">,</span>
  <!-- --><span class="token punctuation">}</span><span class="token punctuation">,</span>
  Application<!-- --><span class="token operator">:</span> PIXIApplication<!-- --><span class="token punctuation">,</span>
  Texture<!-- --><span class="token operator">:</span> PIXITexture<!-- --><span class="token punctuation">,</span>
  Sprite<!-- --><span class="token operator">:</span> PIXISprite<!-- --><span class="token punctuation">,</span>
<!-- --><span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre></div><p>With this approach, I could safely remove the <!-- --><code class="language-text">sideEffects</code> flag from <!-- --><code class="language-text">package.json</code>:<!-- --></p><div class="gatsby-highlight" data-language="diff"><pre class="language-diff"><code class="language-diff">{
<!-- --><span class="token unchanged"><span class="token prefix unchanged"> </span> &quot;name&quot;: &quot;expo-pixi&quot;,
<!-- --></span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span> &quot;sideEffects&quot;: true,
<!-- --></span>}<!-- --></code></pre></div><p>To solve the second issue, I simply moved the web code to <!-- --><code class="language-text">pixi.ts</code>, and the native code to <!-- --><code class="language-text">pixi.native.ts</code>. This is described in details in <!-- --><a href="https://reactnative.dev/docs/platform-specific-code#platform-specific-extensions">React Native documentation: Platform-specific extensions</a>:<!-- --></p><blockquote><p>You can also use the <!-- --><code class="language-text">.native.js</code> extension when a module needs to be shared between NodeJS/Web and React Native but it has no Android/iOS differences. This is especially useful for projects that have common code shared among React Native and ReactJS.<!-- --></p></blockquote><h4 id="issue-4-assets-were-not-properly-bundled-on-production-build-66-92-103">Issue #4: assets were not properly bundled on production build (<!-- --><a href="https://github.com/expo/expo-pixi/issues/66">#66</a>, <!-- --><a href="https://github.com/expo/expo-pixi/issues/92">#92</a>, <!-- --><a href="https://github.com/expo/expo-pixi/issues/103">#103</a>)<!-- --></h4><aside class="index-module--alert--r0Bkf index-module--alert__warning--W6jhb"><p>  This was particularly hard to debug because it only happens on release (production) Android builds. This issue does not happen on development and Web/iOS platforms.</p></aside><p>There are issues with <!-- --><code class="language-text">expo-gl</code> where <!-- --><code class="language-text">.jpg</code> and <!-- --><code class="language-text">.png</code> textures would not load in Android release variants. This is an issue (actually, several issues) with Expo and thus it was quite hard to fix it in the package itself. The fixes consist of several workarounds described below:<!-- --></p><h5 id="invalid-file-scheme">Invalid file scheme</h5><p>When built as APK, the image asset resolves to something like:</p><div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">file:/data/user/0/…/.expo-internal/some-hash.png</code></pre></div><p>The problem is that <!-- --><a href="https://github.com/expo/expo/blob/master/packages/expo-gl-cpp/cpp/EXGLImageUtils.cpp#L126"><code class="language-text">expo-gl#loadImage</code></a> expects <!-- --><code class="language-text">file://</code> scheme and not <!-- --><code class="language-text">file:</code> (note the missing slashes). To solve this issue, we have to manually add the slashes to <!-- --><code class="language-text">asset.localUri</code>s, as follows:<!-- --></p><div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token comment">// It might happen that an asset uri starts with `file:` and not `file://`.</span>
<!-- --><span class="token comment">// `expo-gl` expect a texture asset to have the slashes. Enforce the slashes.</span>
<!-- --><span class="token keyword">function</span> <!-- --><span class="token function">fixFileUri</span><span class="token punctuation">(</span>uri<!-- --><span class="token operator">:</span> <!-- --><span class="token builtin">string</span><span class="token punctuation">)</span> <!-- --><span class="token punctuation">{</span>
  <!-- --><span class="token comment">// https://github.com/expo/expo/blob/master/packages/expo-gl-cpp/cpp/EXGLImageUtils.cpp#L126</span>
  <!-- --><span class="token keyword">return</span> uri<!-- --><span class="token punctuation">.</span><span class="token function">startsWith</span><span class="token punctuation">(</span><span class="token string">&quot;file:&quot;</span><span class="token punctuation">)</span> <!-- --><span class="token operator">&amp;&amp;</span> <!-- --><span class="token operator">!</span>uri<!-- --><span class="token punctuation">.</span><span class="token function">startsWith</span><span class="token punctuation">(</span><span class="token string">&quot;file://&quot;</span><span class="token punctuation">)</span>
    <!-- --><span class="token operator">?</span> <!-- --><span class="token string">&quot;file://&quot;</span> <!-- --><span class="token operator">+</span> uri<!-- --><span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span>
    <!-- --><span class="token operator">:</span> uri<!-- --><span class="token punctuation">;</span>
<!-- --><span class="token punctuation">}</span>

<!-- --><span class="token keyword">async</span> <!-- --><span class="token keyword">function</span> <!-- --><span class="token function">textureFromAssetAsync</span><span class="token punctuation">(</span>resource<!-- --><span class="token operator">:</span> <!-- --><span class="token builtin">string</span> <!-- --><span class="token operator">|</span> <!-- --><span class="token builtin">number</span><span class="token punctuation">)</span> <!-- --><span class="token punctuation">{</span>
  <!-- --><span class="token keyword">const</span> asset <!-- --><span class="token operator">=</span> <!-- --><span class="token keyword">await</span> Asset<!-- --><span class="token punctuation">.</span><span class="token function">fromModule</span><span class="token punctuation">(</span>resource<!-- --><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">downloadAsync</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  asset<!-- --><span class="token punctuation">.</span>localUri <!-- --><span class="token operator">=</span> <!-- --><span class="token function">fixFileUri</span><span class="token punctuation">(</span>asset<!-- --><span class="token punctuation">.</span>localUri<!-- --><span class="token operator">!</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <!-- --><span class="token keyword">return</span> PIXITexture<!-- --><span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span>asset <!-- --><span class="token keyword">as</span> <!-- --><span class="token builtin">any</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<!-- --><span class="token punctuation">}</span></code></pre></div><h5 id="invalid-path-for-images">Invalid path for images</h5><p>When you <!-- --><a href="https://developer.android.com/guide/topics/resources/providing-resources">bundle assets for your Android APK</a>, the assets go to the <!-- --><code class="language-text">res</code> folder, but the subfolder they end up is dependent on the resource type. Bitmap files (<!-- --><code class="language-text">.png</code>, <!-- --><code class="language-text">.jpg</code>, <!-- --><code class="language-text">.gif</code>, etc.) or XML files that are compiled into drawable resource subtypes go to <!-- --><code class="language-text">res/drawables</code> directory.<!-- --></p><p>The issue is that in production, images are moved to the <!-- --><code class="language-text">res/drawables</code> directory (as you would expect) but <!-- --><code class="language-text">expo-file-system</code> <!-- --><a href="https://github.com/expo/expo/blob/main/packages/expo-file-system/android/src/main/java/expo/modules/filesystem/FileSystemModule.kt#L911="><code class="language-text">FileSystem#downloadAsync</code></a> only checks the <!-- --><code class="language-text">raw</code> directory! Because of that, I was unable to load textures for <!-- --><code class="language-text">expo-pixi</code> on Android.<!-- --></p><p>I don&#x27;t know any viable workaround for this issue. What worked for me was changing the images extensions to <!-- --><code class="language-text">.xjpg</code> and <!-- --><code class="language-text">.xpng</code>. I also had to update the <!-- --><code class="language-text">textureFromAssetAsync</code> to change <!-- --><code class="language-text">asset.type</code> to the correct extension and recalculate <!-- --><code class="language-text">asset.width</code> and <!-- --><code class="language-text">asset.height</code> as follows:<!-- --></p><div class="gatsby-highlight has-highlighted-lines" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token comment">// https://github.com/expo/expo/blob/main/packages/expo-asset/src/ImageAssets.ts</span>
<!-- --><span class="token keyword">function</span> <!-- --><span class="token function">getImageInfo</span><span class="token punctuation">(</span>url<!-- --><span class="token operator">:</span> <!-- --><span class="token builtin">string</span><span class="token punctuation">)</span><span class="token operator">:</span> <!-- --><span class="token builtin">Promise</span><span class="token operator">&lt;</span><span class="token punctuation">{</span>
  width<!-- --><span class="token operator">:</span> <!-- --><span class="token builtin">number</span><span class="token punctuation">;</span>
  height<!-- --><span class="token operator">:</span> <!-- --><span class="token builtin">number</span><span class="token punctuation">;</span>
<!-- --><span class="token punctuation">}</span><span class="token operator">&gt;</span> <!-- --><span class="token punctuation">{</span>
  <!-- --><span class="token keyword">return</span> <!-- --><span class="token keyword">new</span> <!-- --><span class="token class-name"><span class="token builtin">Promise</span></span><span class="token punctuation">(</span><span class="token punctuation">(</span>resolve<!-- --><span class="token punctuation">,</span> reject<!-- --><span class="token punctuation">)</span> <!-- --><span class="token operator">=&gt;</span> <!-- --><span class="token punctuation">{</span>
    <!-- --><span class="token keyword">const</span> img <!-- --><span class="token operator">=</span> <!-- --><span class="token keyword">new</span> <!-- --><span class="token class-name">Image</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    img<!-- --><span class="token punctuation">.</span>onerror <!-- --><span class="token operator">=</span> reject<!-- --><span class="token punctuation">;</span>
    img<!-- --><span class="token punctuation">.</span><span class="token function-variable function">onload</span> <!-- --><span class="token operator">=</span> <!-- --><span class="token punctuation">(</span><span class="token punctuation">)</span> <!-- --><span class="token operator">=&gt;</span> <!-- --><span class="token punctuation">{</span>
      <!-- --><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        width<!-- --><span class="token operator">:</span> img<!-- --><span class="token punctuation">.</span>width<!-- --><span class="token punctuation">,</span>
        height<!-- --><span class="token operator">:</span> img<!-- --><span class="token punctuation">.</span>height<!-- --><span class="token punctuation">,</span>
      <!-- --><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <!-- --><span class="token punctuation">}</span><span class="token punctuation">;</span>
    img<!-- --><span class="token punctuation">.</span>src <!-- --><span class="token operator">=</span> url<!-- --><span class="token punctuation">;</span>
  <!-- --><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<!-- --><span class="token punctuation">}</span>

<!-- --><span class="token keyword">async</span> <!-- --><span class="token keyword">function</span> <!-- --><span class="token function">textureFromAssetAsync</span><span class="token punctuation">(</span>resource<!-- --><span class="token operator">:</span> <!-- --><span class="token builtin">string</span> <!-- --><span class="token operator">|</span> <!-- --><span class="token builtin">number</span><span class="token punctuation">)</span> <!-- --><span class="token punctuation">{</span>
  <!-- --><span class="token keyword">const</span> asset <!-- --><span class="token operator">=</span> <!-- --><span class="token keyword">await</span> Asset<!-- --><span class="token punctuation">.</span><span class="token function">fromModule</span><span class="token punctuation">(</span>resource<!-- --><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">downloadAsync</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  asset<!-- --><span class="token punctuation">.</span>localUri <!-- --><span class="token operator">=</span> <!-- --><span class="token function">fixFileUri</span><span class="token punctuation">(</span>asset<!-- --><span class="token punctuation">.</span>localUri<!-- --><span class="token operator">!</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<!-- --><span class="gatsby-highlight-code-line">  asset<!-- --><span class="token punctuation">.</span>type <!-- --><span class="token operator">=</span> asset<!-- --><span class="token punctuation">.</span>type<!-- --><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">&#x27;x&#x27;</span><span class="token punctuation">,</span> <!-- --><span class="token string">&#x27;&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <!-- --><span class="token comment">// xpng =&gt; png, xjpg =&gt; jpg</span></span>
<!-- --><span class="gatsby-highlight-code-line">  <!-- --><span class="token keyword">const</span> <!-- --><span class="token punctuation">{</span> width<!-- --><span class="token punctuation">,</span> height <!-- --><span class="token punctuation">}</span> <!-- --><span class="token operator">=</span> <!-- --><span class="token keyword">await</span> <!-- --><span class="token function">getImageInfo</span><span class="token punctuation">(</span>asset<!-- --><span class="token punctuation">.</span>localUri<!-- --><span class="token punctuation">)</span><span class="token punctuation">;</span></span><span class="gatsby-highlight-code-line">  asset<!-- --><span class="token punctuation">.</span>width <!-- --><span class="token operator">=</span> width<!-- --><span class="token punctuation">;</span></span><span class="gatsby-highlight-code-line">  asset<!-- --><span class="token punctuation">.</span>height <!-- --><span class="token operator">=</span> height<!-- --><span class="token punctuation">;</span></span>
  <!-- --><span class="token keyword">return</span> PIXITexture<!-- --><span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span>asset <!-- --><span class="token keyword">as</span> <!-- --><span class="token builtin">any</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<!-- --><span class="token punctuation">}</span></code></pre></div><p>I also needed to update <!-- --><code class="language-text">metro.config.js</code> to allow <!-- --><code class="language-text">.xjpg</code> and <!-- --><code class="language-text">.xpng</code> extensions:<!-- --></p><div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">const</span> <!-- --><span class="token punctuation">{</span> getDefaultConfig <!-- --><span class="token punctuation">}</span> <!-- --><span class="token operator">=</span> <!-- --><span class="token keyword">require</span><span class="token punctuation">(</span><span class="token string">&quot;@expo/metro-config&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<!-- --><span class="token keyword">const</span> defaultConfig <!-- --><span class="token operator">=</span> <!-- --><span class="token function">getDefaultConfig</span><span class="token punctuation">(</span>__dirname<!-- --><span class="token punctuation">)</span><span class="token punctuation">;</span>

<!-- --><span class="token comment">// Added .xjpg and .xpng extension for sprites:</span>
defaultConfig<!-- --><span class="token punctuation">.</span>resolver<!-- --><span class="token punctuation">.</span>assetExts<!-- --><span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">&quot;xjpg&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
defaultConfig<!-- --><span class="token punctuation">.</span>resolver<!-- --><span class="token punctuation">.</span>assetExts<!-- --><span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">&quot;xpng&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<!-- --><span class="token punctuation">.</span>exports <!-- --><span class="token operator">=</span> defaultConfig<!-- --><span class="token punctuation">;</span></code></pre></div><h3 id="game-performance">Game performance</h3><p>My aim I always to get at least a stable 60 FPS on all of the devices I have. Here are the results:</p><table><thead><tr><th>Device</th><th>Framerate</th></tr></thead><tbody><tr><td><a href="https://www.gsmchoice.com/en/catalogue/apple/iphonex/">iPhone X</a></td><td>60</td></tr><tr><td><a href="https://www.gsmchoice.com/en/catalogue/apple/iphone13pro/">iPhone 13 Pro</a></td><td>60</td></tr><tr><td><a href="https://www.gsmchoice.com/en/catalogue/samsung/galaxys8/">Samsung S8</a></td><td>50-60</td></tr><tr><td><a href="https://www.gsmchoice.com/en/catalogue/asus/zenfone3maxzc520tl/">Asus ZenFone 3 Max 5.2</a></td><td>40-60</td></tr></tbody></table><p>Android phones have some troubles with garbage collection and there&#x27;s a ~10 FPS performance drop when going back and forth from the menu to the game screen.</p><h3 id="react-native-performance">React Native performance</h3><p>React Native is performant overall and its capabilities are more than enough for standard user interfaces. However, when combined with game rendering and intensive processing in the game loop, you might want to limit React renders.</p><p>I wanted to show the user the distance he flight during the gameplay. The natural place I wanted to put the score was the navigation bar from React Navigation but it resulted in a 10 FPS performance drop. Two options were presented:</p><ol><li>I could render the score in a custom component, or,</li><li>I could render the score on the canvas;</li></ol><p>The second solution was not possible to implement because <!-- --><code class="language-text">expo-pixi</code> has <!-- --><a href="https://github.com/expo/expo-pixi/issues/20">no support for rendering text on the canvas</a>. Moving the score to a custom component had no big impact on the performance, but required some code to support notch on Apple devices. Later on, I decided to display the number of pipes passed instead and I was able to use the React Navigation back.<!-- --></p><h3 id="android-differences">Android differences</h3><aside class="index-module--alert--r0Bkf index-module--alert__warning--W6jhb"><p>  Always test your application on all platforms before release. React Native offers cross-platform compatibility but some native differences have to be overcome manually.</p></aside><p>Some of the deviations were already described in <!-- --><a href="#expo-and-libraries">Expo and libraries</a> but there are more! The main differences between Android and other platforms are:<!-- --></p><ul><li><p><strong>Difference in default UI/UX:</strong> by default the stack navigator is configured to have the familiar iOS and Android look &amp; feel: new screens slide in from the right on iOS and use OS default animation on Android. There are also visual differences that need to be patched to provide similar game UI/UX across platforms;<!-- --></p></li><li><p><strong>No full fonts support:</strong> <!-- --><code class="language-text">font-weight</code> and <!-- --><code class="language-text">font-style</code> <!-- --><a href="https://stackoverflow.com/a/38820631">are not supported</a>. You have to load all the font variants as separate fonts with a different <!-- --><code class="language-text">font-family</code> name;<!-- --></p></li><li><p><strong>No full shadows support:</strong> Android does not have native support for CSS-like shadows. You have to use the <!-- --><a href="https://reactnative.dev/docs/view-style-props#elevation-android"><code class="language-text">elevation</code></a> property or 3rd party libraries like <!-- --><a href="https://www.npmjs.com/package/react-native-shadow-2"><code class="language-text">react-native-shadow</code></a>;<!-- --></p></li><li><p><strong>Poor styling support in general</strong>: for example, when making a text outline using <!-- --><code class="language-text">text-shadow</code>, we have to keep a small blur radius because Android won&#x27;t render it at all when it&#x27;s set to 0 (<!-- --><code class="language-text">text-shadow: 0 2px 0.00001px black</code>);<!-- --></p></li><li><p><strong>Inconsistent API:</strong> on Android devices, the accelerometer data is reversed and we have to normalize it before usage:<!-- --></p><div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">import</span> <!-- --><span class="token punctuation">{</span> Accelerometer <!-- --><span class="token punctuation">}</span> <!-- --><span class="token keyword">from</span> <!-- --><span class="token string">&quot;expo-sensors&quot;</span><span class="token punctuation">;</span>
<!-- --><span class="token keyword">import</span> <!-- --><span class="token punctuation">{</span> Platform <!-- --><span class="token punctuation">}</span> <!-- --><span class="token keyword">from</span> <!-- --><span class="token string">&quot;react-native&quot;</span><span class="token punctuation">;</span>
<!-- --><span class="token keyword">import</span> <!-- --><span class="token punctuation">{</span> PubSub <!-- --><span class="token punctuation">}</span> <!-- --><span class="token keyword">from</span> <!-- --><span class="token string">&quot;../helpers/PubSub&quot;</span><span class="token punctuation">;</span>

<!-- --><span class="token keyword">export</span> <!-- --><span class="token keyword">class</span> <!-- --><span class="token class-name">ControlManager</span> <!-- --><span class="token keyword">extends</span> <!-- --><span class="token class-name">PubSub</span> <!-- --><span class="token punctuation">{</span>
  <!-- --><span class="token keyword">static</span> <!-- --><span class="token constant">MOVE</span> <!-- --><span class="token operator">=</span> <!-- --><span class="token string">&quot;MOVE&quot;</span><span class="token punctuation">;</span>

  <!-- --><span class="token keyword">public</span> <!-- --><span class="token function">register</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <!-- --><span class="token punctuation">{</span>
    Accelerometer<!-- --><span class="token punctuation">.</span><span class="token function">addListener</span><span class="token punctuation">(</span><span class="token punctuation">(</span>accelerometerData<!-- --><span class="token punctuation">)</span> <!-- --><span class="token operator">=&gt;</span> <!-- --><span class="token punctuation">{</span>
      <!-- --><span class="token keyword">const</span> data <!-- --><span class="token operator">=</span>
        <!-- --><span class="token comment">// For some reason on Android the signs are flipped:</span>
        Platform<!-- --><span class="token punctuation">.</span><span class="token constant">OS</span> <!-- --><span class="token operator">===</span> <!-- --><span class="token string">&quot;android&quot;</span>
          <!-- --><span class="token operator">?</span> <!-- --><span class="token operator">-</span>accelerometerData<!-- --><span class="token punctuation">.</span>x
          <!-- --><span class="token operator">:</span> accelerometerData<!-- --><span class="token punctuation">.</span>x<!-- --><span class="token punctuation">;</span>

      <!-- --><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">publish</span><span class="token punctuation">(</span>ControlManager<!-- --><span class="token punctuation">.</span><span class="token constant">MOVE</span><span class="token punctuation">,</span> data<!-- --><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <!-- --><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <!-- --><span class="token punctuation">}</span>

  <!-- --><span class="token keyword">public</span> <!-- --><span class="token function">destroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <!-- --><span class="token punctuation">{</span>
    Accelerometer<!-- --><span class="token punctuation">.</span><span class="token function">removeAllListeners</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <!-- --><span class="token punctuation">}</span>
<!-- --><span class="token punctuation">}</span></code></pre></div></li></ul><h2 id="conclusion">Conclusion</h2><p>Making a simple game was a great way to learn the Expo internals and limitations, but <!-- --><code class="language-text">expo-pixi</code> it&#x27;s not the best tool for the job:<!-- --></p><ul><li>there is a lack of support when it comes to <!-- --><code class="language-text">expo-pixi</code>;<!-- --></li><li>there are plenty of bugs, especially on Android devices;</li><li>the performance is not great overall;</li></ul><p>Because of that, I started working on my game library for React Native that uses <!-- --><a href="https://github.com/Shopify/react-native-skia"><code class="language-text">react-native-skia</code></a>, a high-performance React Native Graphics library under the hood.<!-- --></p></div><div class="comments--null"></div></div></div></article></main><footer class="index-module--footer--cePDb" itemType="http://schema.org/WPFooter" itemscope=""><nav typeof="http://schema.org/ContactPoint" itemscope=""><ul class="index-module--footer__menu--kVtyV list"><li class="index-module--footer__item--6JsIL"><a target="_blank" itemProp="url" rel="noopener noreferrer" href="https://github.com/Bartozzz"><svg class="index-module--footer__item-icon--7dhxi" role="img" viewBox="0 0 24 24"><title>GitHub icon</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"></path></svg><span class="index-module--footer__item-text--NJUmW">GitHub</span></a></li><li class="index-module--footer__item--6JsIL"><a target="_blank" itemProp="url" rel="noopener noreferrer" href="https://linkedin.com/in/bartozzz"><svg class="index-module--footer__item-icon--7dhxi " role="img" viewBox="0 0 24 24"><title>LinkedIn icon</title><path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"></path></svg><span class="index-module--footer__item-text--NJUmW">LinkedIn</span></a></li><li class="index-module--footer__item--6JsIL"><a target="_blank" itemProp="url" rel="noopener noreferrer" href="https://youtube.com/channel/UCIC1vaSJwSJ2sqKWC3wTTmQ"><svg class="index-module--footer__item-icon--7dhxi index-module--footer__item-icon--youtube--iV7DW" role="img" viewBox="0 0 24 24"><title>YouTube icon</title><path d="M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z"></path></svg><span class="index-module--footer__item-text--NJUmW">YouTube</span></a></li><li class="index-module--footer__item--6JsIL index-module--footer__item--right--52KWH"><a href="/rss.xml">RSS</a></li><li class="index-module--footer__item--6JsIL index-module--footer__item--right--52KWH"><a target="_blank" itemProp="email" rel="author noopener noreferrer" href="mailto:hi@laniewski.me">Get in touch</a></li></ul></nav><p class="index-module--footer__source--KGfyF" itemProp="description">Hand-coded using Gatsby, TypeScript and more.<!-- --> <!-- --><a target="_blank" itemProp="url" rel="noopener noreferrer" href="https://github.com/Bartozzz/bartozzz.github.io">See the source.</a></p></footer></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/blog/2022-06-11-case-study-tilt-copters/";window.___webpackCompilationHash="b4dec732c973324d4e08";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-93d1da08cab91abe0ae6.js"],"app":["/app-8c027188e0554d4d2a25.js"],"component---src-pages-404-tsx":["/component---src-pages-404-tsx-029ba9a5769c03555707.js"],"component---src-pages-index-tsx":["/component---src-pages-index-tsx-d2dc5ab723be0b71b799.js"],"component---src-templates-blog-post-tsx":["/component---src-templates-blog-post-tsx-d5a88432af9dc43f7dfa.js"],"component---src-templates-blog-posts-tsx":["/component---src-templates-blog-posts-tsx-bfbb7f19e0501e5972b5.js"]};/*]]>*/</script><script src="/polyfill-93d1da08cab91abe0ae6.js" nomodule=""></script><script src="/app-8c027188e0554d4d2a25.js" async=""></script><script src="/framework-a4d991345f276a94d8bf.js" async=""></script><script src="/webpack-runtime-196dccc940fb8852a5bd.js" async=""></script></body></html>