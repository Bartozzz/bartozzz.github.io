"use strict";(self.webpackChunklaniewski_me=self.webpackChunklaniewski_me||[]).push([[378],{5868:function(n,s,a){a.r(s),a.d(s,{Head:function(){return f},default:function(){return m}});var t=a(7294),e=a(5893),p=a(1151);function o(n){const s=Object.assign({p:"p",em:"em",h2:"h2",strong:"strong",ul:"ul",li:"li",a:"a",h3:"h3",ol:"ol",code:"code",span:"span"},(0,p.ah)(),n.components);return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(s.p,{children:["With JavaScript increasingly gaining popularity, Progressive Web Apps (",(0,e.jsx)(s.em,{children:"PWAs"}),") might replace native mobile & desktops apps in the future. In this post, we will learn how to develop and test offline-first, Vue-based Progressive Web Applications and why it is worth-it."]}),"\n",(0,e.jsx)(s.h2,{id:"introduction-to-progressive-web-apps-pwas",children:"Introduction to Progressive Web Apps (PWAs)"}),"\n",(0,e.jsxs)(s.p,{children:["Progressive Web Apps can be installed on most devices like native apps. They are meant to be ",(0,e.jsx)(s.strong,{children:"reliable"})," (work on each platform, even offline), ",(0,e.jsx)(s.strong,{children:"fast"})," and provide a ",(0,e.jsx)(s.strong,{children:"native-like"})," user experience. These apps combine the best of web and native solutions:"]}),"\n",(0,e.jsxs)(s.ul,{children:["\n",(0,e.jsxs)(s.li,{children:["They are ",(0,e.jsx)(s.strong,{children:"rapid to develop"}),", ",(0,e.jsx)(s.strong,{children:"cross-platform"})," and ",(0,e.jsx)(s.strong,{children:"responsive"})," by nature. JavaScript provides a lot of frameworks (such as ",(0,e.jsx)(s.a,{href:"https://vuejs.org/",children:"Vue"}),", ",(0,e.jsx)(s.a,{href:"https://reactjs.org/",children:"React"}),") and dedicated front-end component libraries to boost productivity (Bootstrap, Material UI). You write your code once and deploy you application on every platform;"]}),"\n",(0,e.jsxs)(s.li,{children:[(0,e.jsx)(s.strong,{children:"Fast load"}),", ",(0,e.jsx)(s.strong,{children:"fast response"}),". Progressive web apps are comparable to native solutions in terms of efficiency. With ",(0,e.jsx)(s.em,{children:"service workers"}),", cache and several optimizations made in engines running JavaScript, Progressive Web Applications' loading and response times are very low."]}),"\n"]}),"\n",(0,e.jsxs)(s.p,{children:["It is important to notice that if you are planning on making your application a PWA, you don’t have to rewrite all the logic. For example, your application should work offline, but it doesn’t mean that you must set-up a background queue or store your data in a persistent storage – a offline message (e.g. “",(0,e.jsx)(s.em,{children:"You're offline, check your network status."}),"”) is enough."]}),"\n",(0,e.jsx)(s.h3,{id:"browser-support",children:"Browser support"}),"\n",(0,e.jsx)(s.p,{children:"Progressive Web Apps are compatible with every mobile device which support one of the following browsers:"}),"\n",(0,e.jsxs)(s.ul,{children:["\n",(0,e.jsxs)(s.li,{children:[(0,e.jsx)(s.strong,{children:"Google Chrome"})," (since v40+);"]}),"\n",(0,e.jsxs)(s.li,{children:[(0,e.jsx)(s.strong,{children:"Firefox"})," (since v44+);"]}),"\n",(0,e.jsxs)(s.li,{children:[(0,e.jsx)(s.strong,{children:"Safari"})," (since v11.1+);"]}),"\n",(0,e.jsxs)(s.li,{children:[(0,e.jsx)(s.strong,{children:"Edge"})," (since v17+);"]}),"\n"]}),"\n",(0,e.jsx)(s.p,{children:"Additionally, Google Chrome recently added support for Progressive Web Apps on desktop platforms, such as:"}),"\n",(0,e.jsxs)(s.ul,{children:["\n",(0,e.jsxs)(s.li,{children:[(0,e.jsx)(s.strong,{children:"Chrome OS"})," (since Chrome 67+);"]}),"\n",(0,e.jsxs)(s.li,{children:[(0,e.jsx)(s.strong,{children:"Linux"})," (since Chrome 70+);"]}),"\n",(0,e.jsxs)(s.li,{children:[(0,e.jsx)(s.strong,{children:"Windows"})," (since Chrome 70+);"]}),"\n",(0,e.jsxs)(s.li,{children:[(0,e.jsx)(s.strong,{children:"macOS"})," (since Chrome 72+);"]}),"\n"]}),"\n",(0,e.jsx)(s.h2,{id:"getting-started",children:"Getting started"}),"\n",(0,e.jsxs)(s.p,{children:["In this article, we will be using ",(0,e.jsx)(s.a,{href:"https://cli.vuejs.org/",children:"Vue-CLI"})," to create a brand-new Vue project. You can follow the instructions on ",(0,e.jsx)(s.a,{href:"https://cli.vuejs.org/guide/creating-a-project.html#vue-create",children:"their website"}),". I encourage you to manually select the following features:"]}),"\n",(0,e.jsxs)(s.ol,{children:["\n",(0,e.jsxs)(s.li,{children:[(0,e.jsx)(s.strong,{children:"Babel"})," (used in this tutorial);"]}),"\n",(0,e.jsxs)(s.li,{children:[(0,e.jsx)(s.strong,{children:"TypeScript"})," (used in this tutorial);"]}),"\n",(0,e.jsxs)(s.li,{children:[(0,e.jsx)(s.strong,{children:"Progressive Web App"})," (PWA) support (required in this tutorial);"]}),"\n"]}),"\n",(0,e.jsx)(s.h3,{id:"setting-up-a-service-worker",children:"Setting up a service worker"}),"\n",(0,e.jsxs)(s.p,{children:[(0,e.jsx)(s.a,{href:"https://developer.mozilla.org/en-US/docs/Web/API/Service_Worker_API",children:"Service workers"})," (not to be confused with ",(0,e.jsx)(s.a,{href:"https://developer.mozilla.org/en-US/docs/Web/API/Worklet",children:(0,e.jsx)(s.em,{children:"Worklets"})})," or raw ",(0,e.jsx)(s.a,{href:"https://developer.mozilla.org/en-US/docs/Web/API/Web_Workers_API/Using_web_workers",children:(0,e.jsx)(s.em,{children:"Workers"})}),") represents a proxy between the browser and the network – they allow you to intercept requests made by your application and handle each one separately enabling offline access, browser-level caching and more."]}),"\n",(0,e.jsxs)(s.p,{children:["Like Workers, service workers are executed on a different thread and communicate with the main one – your web application, via an API: since Workers are on a different thread, they don't have direct access to any of your web app internals. Workers generally offer more functionality than the standard browser API and Service Workers, i.e. to send push notifications, create periodic background tasks, hook into OS internals (",(0,e.jsx)(s.a,{href:"https://developers.google.com/web/updates/2016/09/navigator-share",children:"Share Target API"}),", …)."]}),"\n",(0,e.jsxs)(s.p,{children:["In order to use Workers, your website must be served over HTTPS. Even if service Workers are not compatible with some web browsers, you can safely add them in your application – it will not break the experience for any user (",(0,e.jsx)(s.em,{children:"progressive enhancement"}),")."]}),"\n",(0,e.jsxs)(s.p,{children:[(0,e.jsx)(s.a,{href:"https://github.com/vuejs/vue-cli/tree/dev/packages/@vue/cli-plugin-pwa",children:(0,e.jsx)(s.code,{children:"@vue/cli-plugin-pwa"})})," should take care of creating a Service Worker. The generated Service Worker will cache all builded resources. If you want to create a service worker manually, you can modify this behaviour in the ",(0,e.jsx)(s.code,{children:"vue.config.js"})," file by adding the following lines:"]}),"\n",(0,e.jsx)(s.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="typescript"><pre class="language-typescript"><code class="language-typescript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>\n pwa<span class="token operator">:</span> <span class="token punctuation">{</span>\n   workboxPluginMode<span class="token operator">:</span> <span class="token string">"InjectManifest"</span><span class="token punctuation">,</span>\n   workboxOptions<span class="token operator">:</span> <span class="token punctuation">{</span>\n     swSrc<span class="token operator">:</span> <span class="token string">"public/service-worker.js"</span>\n   <span class="token punctuation">}</span>\n <span class="token punctuation">}</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre></div>'}}),"\n",(0,e.jsxs)(s.p,{children:["It is important that the path in ",(0,e.jsx)(s.code,{children:"swSrc"})," option matches the path specified in ",(0,e.jsx)(s.code,{children:"registerServiceWorker.ts"})," file, otherwise you Service Worker will not be registered. You can then use ",(0,e.jsx)(s.a,{href:"https://developers.google.com/web/tools/workbox/guides/get-started",children:"Workbox"})," to define custom rules for request interceptors. Here's an example:"]}),"\n",(0,e.jsx)(s.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token comment">// public/service-worker.js</span>\nworkbox<span class="token punctuation">.</span><span class="token function">setConfig</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">debug</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\nworkbox<span class="token punctuation">.</span>precaching<span class="token punctuation">.</span><span class="token function">precacheAndRoute</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="token comment">// Cache images:</span>\nworkbox<span class="token punctuation">.</span>routing<span class="token punctuation">.</span><span class="token function">registerRoute</span><span class="token punctuation">(</span>\n <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\\.(?:png|gif|jpg|jpeg|svg)$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>\n workbox<span class="token punctuation">.</span>strategies<span class="token punctuation">.</span><span class="token function">staleWhileRevalidate</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n   <span class="token literal-property property">cacheName</span><span class="token operator">:</span> <span class="token string">"images"</span><span class="token punctuation">,</span>\n   <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>\n     <span class="token keyword">new</span> <span class="token class-name">workbox<span class="token punctuation">.</span>expiration<span class="token punctuation">.</span>Plugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n       <span class="token literal-property property">maxEntries</span><span class="token operator">:</span> <span class="token number">60</span><span class="token punctuation">,</span>\n       <span class="token literal-property property">maxAgeSeconds</span><span class="token operator">:</span> <span class="token number">30</span> <span class="token operator">*</span> <span class="token number">24</span> <span class="token operator">*</span> <span class="token number">60</span> <span class="token operator">*</span> <span class="token number">60</span> <span class="token comment">// 30 days</span>\n     <span class="token punctuation">}</span><span class="token punctuation">)</span>\n   <span class="token punctuation">]</span>\n <span class="token punctuation">}</span><span class="token punctuation">)</span>\n<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="token comment">// Cache Google fonts:</span>\nworkbox<span class="token punctuation">.</span>routing<span class="token punctuation">.</span><span class="token function">registerRoute</span><span class="token punctuation">(</span>\n <span class="token keyword">new</span> <span class="token class-name">RegExp</span><span class="token punctuation">(</span><span class="token string">"https://fonts.(?:googleapis|gstatic).com/(.*)"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n workbox<span class="token punctuation">.</span>strategies<span class="token punctuation">.</span><span class="token function">cacheFirst</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n   <span class="token literal-property property">cacheName</span><span class="token operator">:</span> <span class="token string">"googleapis"</span><span class="token punctuation">,</span>\n   <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>\n     <span class="token keyword">new</span> <span class="token class-name">workbox<span class="token punctuation">.</span>expiration<span class="token punctuation">.</span>Plugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n       <span class="token literal-property property">maxEntries</span><span class="token operator">:</span> <span class="token number">30</span><span class="token punctuation">,</span>\n       <span class="token literal-property property">maxAgeSeconds</span><span class="token operator">:</span> <span class="token number">30</span> <span class="token operator">*</span> <span class="token number">24</span> <span class="token operator">*</span> <span class="token number">60</span> <span class="token operator">*</span> <span class="token number">60</span> <span class="token comment">// 30 days</span>\n     <span class="token punctuation">}</span><span class="token punctuation">)</span>\n   <span class="token punctuation">]</span>\n <span class="token punctuation">}</span><span class="token punctuation">)</span>\n<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>'}}),"\n",(0,e.jsx)(s.h3,{id:"prompting-the-user-to-install",children:"Prompting the user to install"}),"\n",(0,e.jsx)(s.p,{children:"Installing a Progressive Web Application works the same way on both mobile and desktop devices. The website must meet a few requirements before it can be prompted to install:"}),"\n",(0,e.jsxs)(s.ol,{children:["\n",(0,e.jsx)(s.li,{children:"Meet a user engagement heuristic;"}),"\n",(0,e.jsx)(s.li,{children:"Include a web app manifest file;"}),"\n",(0,e.jsx)(s.li,{children:"Have an icon to represent the app on the device;"}),"\n",(0,e.jsx)(s.li,{children:"Have a registered service worker to make the app work offline;"}),"\n",(0,e.jsx)(s.li,{children:"The web app must be served over HTTPS and not being already installed;"}),"\n"]}),"\n",(0,e.jsxs)(s.p,{children:["If those criterias are met, web browser will emit a ",(0,e.jsx)(s.code,{children:"beforeinstallprompt"})," event which you can use to notify the user that your app can be installed. The most common way is by adding a button on the website. It is considered best practice to don't show a full page banner or distracting notifications. Let's add some markup for our ",(0,e.jsx)(s.code,{children:"InstallBanner"})," component:"]}),"\n",(0,e.jsx)(s.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="html"><pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">></span></span>\n <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>banner<span class="token punctuation">"</span></span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>deferredPrompt<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>\n   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>Do you want to install Foo App?<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>\n   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@onClick</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>promptInstall<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Opt for!<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span>\n <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">></span></span></code></pre></div>'}}),"\n",(0,e.jsxs)(s.p,{children:["Instead of dealing with adding and removing event listeners for ",(0,e.jsx)(s.code,{children:"beforeinstallpromptevent"})," manually, we can use ",(0,e.jsx)(s.a,{href:"https://git.milosolutions.com/blaniewski/vue-pwa-install",children:(0,e.jsx)(s.code,{children:"vue-pwa-install"})})," plugin which I wrote for this article. It will emit a ",(0,e.jsx)(s.code,{children:"canInstall"})," in the root event bus – what you need to do is listen for this particular event in one of your components. First, let's install the ",(0,e.jsx)(s.code,{children:"vue-pwa-install"})," plugin with the following command:"]}),"\n",(0,e.jsx)(s.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">$ <span class="token function">npm</span> <span class="token function">install</span> <span class="token parameter variable">--save</span> vue-pwa-install</code></pre></div>'}}),"\n",(0,e.jsx)(s.p,{children:"Then, register this installed plugin in your app entry point:"}),"\n",(0,e.jsx)(s.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="typescript"><pre class="language-typescript"><code class="language-typescript"><span class="token keyword">import</span> Vue <span class="token keyword">from</span> <span class="token string">"vue"</span><span class="token punctuation">;</span>\n<span class="token keyword">import</span> VueInstall <span class="token keyword">from</span> <span class="token string">"vue-pwa-install"</span><span class="token punctuation">;</span>\n\nVue<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>VueInstall<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>'}}),"\n",(0,e.jsxs)(s.p,{children:["Once registered, we can listen for ",(0,e.jsx)(s.code,{children:"canInstall"})," event in any component and handle the event to show the install prompt. Let's add the following code in our ",(0,e.jsx)(s.code,{children:"InstallBanner"})," component:"]}),"\n",(0,e.jsx)(s.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="html"><pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ts<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">\n <span class="token keyword">import</span> <span class="token punctuation">{</span> Component<span class="token punctuation">,</span> Vue <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"vue-property-decorator"</span><span class="token punctuation">;</span>\n <span class="token keyword">import</span> <span class="token punctuation">{</span> BeforeInstallPromptEvent <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"vue-pwa-install"</span><span class="token punctuation">;</span>\n\n @<span class="token function">Component</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>\n <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">InstallBanner</span> <span class="token keyword">extends</span> <span class="token class-name">Vue</span> <span class="token punctuation">{</span>\n   <span class="token literal-property property">deferredPrompt</span><span class="token operator">:</span> BeforeInstallPromptEvent <span class="token operator">|</span> <span class="token keyword">void</span><span class="token punctuation">;</span>\n\n   <span class="token function">promptInstall</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n     <span class="token comment">// Show the prompt:</span>\n     <span class="token keyword">this</span><span class="token punctuation">.</span>deferredPrompt<span class="token punctuation">.</span><span class="token function">prompt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n     <span class="token comment">// Wait for the user to respond to the prompt:</span>\n     <span class="token keyword">this</span><span class="token punctuation">.</span>deferredPrompt<span class="token punctuation">.</span>userChoice<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">choiceResult</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n       <span class="token keyword">if</span> <span class="token punctuation">(</span>choiceResult<span class="token punctuation">.</span>outcome <span class="token operator">===</span> <span class="token string">"accepted"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n         <span class="token comment">// User accepted the install prompt</span>\n       <span class="token punctuation">}</span>\n\n       <span class="token keyword">this</span><span class="token punctuation">.</span>deferredPrompt <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>\n     <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n\n   <span class="token function">created</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n     <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$on</span><span class="token punctuation">(</span><span class="token string">"canInstall"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">event</span><span class="token operator">:</span> BeforeInstallPromptEvent</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n       <span class="token comment">// Prevent Chrome >=67 from automatically showing the prompt:</span>\n       event<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n       <span class="token comment">// Stash the event so it can be triggered later:</span>\n       <span class="token keyword">this</span><span class="token punctuation">.</span>deferredPrompt <span class="token operator">=</span> event<span class="token punctuation">;</span>\n     <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n <span class="token punctuation">}</span>\n</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></code></pre></div>'}}),"\n",(0,e.jsxs)(s.p,{children:["And that's all. The banner should be displayed on the website once the 5 requirements listed above are met, and when the user click on ",(0,e.jsx)(s.em,{children:"Opt for"})," button, he will be asked by the browser if he wants to install the app on his local machine."]}),"\n",(0,e.jsx)(s.h3,{id:"prompting-the-user-to-update",children:"Prompting the user to update"}),"\n",(0,e.jsxs)(s.p,{children:["In ",(0,e.jsx)(s.code,{children:"registerServiceWorker.ts"})," file, you should have a updated handler. This function will be executed each time a new version of your website is available – in order to get the updated version, the user should simply reload the page. It is considered very bad practice to force a page reload, therefore it is advised to create a small banner which will pop-up and inform the user about the update. We can start by creating a banner markup in our ",(0,e.jsx)(s.code,{children:"index.html"})," file, as follows:"]}),"\n",(0,e.jsx)(s.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="html"><pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>update-banner<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>banner<span class="token punctuation">"</span></span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value css language-css"><span class="token property">display</span><span class="token punctuation">:</span> none</span><span class="token punctuation">"</span></span></span><span class="token punctuation">></span></span>\n  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>There\'s a new version of Foo App.<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>\n  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>update-button<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Reload<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></code></pre></div>'}}),"\n",(0,e.jsxs)(s.p,{children:['Next, we need to show this banner when a new update comes in, and add necessary event handlers for the "Reload" button. This can be achieved directly in ',(0,e.jsx)(s.code,{children:"updated"})," function:"]}),"\n",(0,e.jsx)(s.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="typescript"><pre class="language-typescript"><code class="language-typescript"><span class="token function">updated</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n <span class="token comment">// New content is available</span>\n <span class="token keyword">const</span> updateBanner <span class="token operator">=</span> <span class="token operator">&lt;</span>HTMLElement<span class="token operator">></span>document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"update-banner"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n <span class="token keyword">const</span> updateButton <span class="token operator">=</span> <span class="token operator">&lt;</span>HTMLElement<span class="token operator">></span>document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"update-button"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n updateBanner<span class="token punctuation">.</span>style<span class="token punctuation">.</span>display <span class="token operator">=</span> <span class="token string">"block"</span><span class="token punctuation">;</span>\n updateButton<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"click"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n   location<span class="token punctuation">.</span><span class="token function">reload</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code></pre></div>'}}),"\n",(0,e.jsxs)(s.p,{children:["Note that you could create a Vue component instead of a pure HTML-based banner, but then you should store ",(0,e.jsx)(s.code,{children:"updateAvailable"})," state in your App' store (e.g. Vuex) and it will require some more work."]}),"\n",(0,e.jsxs)(s.p,{children:["If possible, configure your production environment to serve ",(0,e.jsx)(s.code,{children:"service-worker.js"})," with HTTP caching disabled. Otherwise if you visit your web app, and then revisit again before ",(0,e.jsx)(s.code,{children:"service-worker.js"})," has expired from cache, you'll continue to get the update banner showing."]}),"\n",(0,e.jsx)(s.h3,{id:"handling-offline-first-forms",children:"Handling offline-first forms"}),"\n",(0,e.jsx)(s.p,{children:"There are 2 ways of handling offline forms: the first one is by intercepting the request when user is offline and sending it again when there's a internet connection. There are a few problems that you must take care of:"}),"\n",(0,e.jsxs)(s.ol,{children:["\n",(0,e.jsxs)(s.li,{children:[(0,e.jsx)(s.strong,{children:"Concurrency:"})," what if the data on remote database has changed when user was offline? Overwriting it might be an unwanted behaviour."]}),"\n",(0,e.jsxs)(s.li,{children:[(0,e.jsx)(s.strong,{children:"False positives:"})," if the user is connected to internet, it doesn't necessary mean that he can send requests yet (i.e. paid hotspots)."]}),"\n",(0,e.jsxs)(s.li,{children:[(0,e.jsx)(s.strong,{children:"Error handling:"})," when the request failed, how should we inform the user that the request he tried to made 3 days ago failed?"]}),"\n",(0,e.jsxs)(s.li,{children:[(0,e.jsx)(s.strong,{children:"Application architecture:"})," this kind of offline-first form handling often requires a more complex architecture."]}),"\n"]}),"\n",(0,e.jsx)(s.p,{children:"The easier approach is to save the form state in local storage and inform the user that he will be able to submit the form once he'll be online again. This solution can be implemented in a few line for each already existing form."}),"\n",(0,e.jsxs)(s.p,{children:["Let's start with creating a local store in ",(0,e.jsx)(s.code,{children:"store/local.ts"}),". We will use ",(0,e.jsx)(s.a,{href:"https://github.com/localForage/localForage",children:(0,e.jsx)(s.code,{children:"LocalForage"})})," library which wraps IndexedDB, WebSQL, or localStorage using a simple but powerful API. It will allow us to store data in the most suitable local storage available on user's device:"]}),"\n",(0,e.jsx)(s.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="typescript"><pre class="language-typescript"><code class="language-typescript"><span class="token keyword">import</span> LocalForage <span class="token keyword">from</span> <span class="token string">"localforage"</span><span class="token punctuation">;</span>\n\n<span class="token comment">// This must be called before any other calls to localForage are made:</span>\nLocalForage<span class="token punctuation">.</span><span class="token function">config</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n  name<span class="token operator">:</span> <span class="token string">"foo-app"</span><span class="token punctuation">,</span>\n  storeName<span class="token operator">:</span> <span class="token string">"foo-app-store"</span><span class="token punctuation">,</span>\n  version<span class="token operator">:</span> <span class="token number">1.0</span>\n<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="token keyword">export</span> <span class="token keyword">default</span> LocalForage<span class="token punctuation">;</span>\n<span class="token keyword">export</span> <span class="token keyword">const</span> formStore <span class="token operator">=</span> LocalForage<span class="token punctuation">.</span><span class="token function">createInstance</span><span class="token punctuation">(</span><span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">"form"</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>'}}),"\n",(0,e.jsxs)(s.p,{children:["Then, we can modify any form to use the local ",(0,e.jsx)(s.code,{children:"formStore"})," when needed, as follows:"]}),"\n",(0,e.jsx)(s.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="html"><pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">></span></span>\n <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">@submit</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>onSubmit<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>\n   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>form.author<span class="token punctuation">"</span></span> <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Your name…<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>\n   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>form.message<span class="token punctuation">"</span></span> <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Message…<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>\n\n   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>submit<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Send<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span>\n <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">></span></span>\n\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ts<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">\n <span class="token keyword">import</span> <span class="token punctuation">{</span> Component<span class="token punctuation">,</span> Vue <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"vue-property-decorator"</span><span class="token punctuation">;</span>\n <span class="token keyword">import</span> <span class="token punctuation">{</span> formStore <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"@/store/local"</span><span class="token punctuation">;</span>\n\n type Nullable<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">></span> <span class="token operator">=</span> <span class="token constant">T</span> <span class="token operator">|</span> <span class="token keyword">null</span><span class="token punctuation">;</span>\n type Optional<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">></span> <span class="token operator">=</span> <span class="token constant">T</span> <span class="token operator">|</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span>\n\n <span class="token keyword">interface</span> <span class="token class-name">FormData</span> <span class="token punctuation">{</span>\n   author<span class="token operator">?</span><span class="token operator">:</span> Nullable<span class="token operator">&lt;</span>string<span class="token operator">></span><span class="token punctuation">;</span>\n   message<span class="token operator">?</span><span class="token operator">:</span> Nullable<span class="token operator">&lt;</span>string<span class="token operator">></span><span class="token punctuation">;</span>\n <span class="token punctuation">}</span>\n\n @<span class="token function">Component</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>\n <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">SomeForm</span> <span class="token keyword">extends</span> <span class="token class-name">Vue</span> <span class="token punctuation">{</span>\n   <span class="token literal-property property">form</span><span class="token operator">:</span> FormData <span class="token operator">=</span> <span class="token punctuation">{</span>\n     <span class="token literal-property property">author</span><span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>\n     <span class="token literal-property property">message</span><span class="token operator">:</span> <span class="token keyword">null</span>\n   <span class="token punctuation">}</span><span class="token punctuation">;</span>\n\n   <span class="token function">resetForm</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n     <span class="token keyword">this</span><span class="token punctuation">.</span>form<span class="token punctuation">.</span>author <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>\n     <span class="token keyword">this</span><span class="token punctuation">.</span>form<span class="token punctuation">.</span>message <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>\n\n     <span class="token comment">// Reset local storage:</span>\n     formStore<span class="token punctuation">.</span><span class="token function">setItem</span><span class="token punctuation">(</span><span class="token string">"some-form-author"</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n     formStore<span class="token punctuation">.</span><span class="token function">setItem</span><span class="token punctuation">(</span><span class="token string">"some-form-message"</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n\n   <span class="token function">storeData</span><span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">data</span><span class="token operator">:</span> FormData</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n     formStore<span class="token punctuation">.</span>setItem<span class="token operator">&lt;</span>Optional<span class="token operator">&lt;</span>Nullable<span class="token operator">&lt;</span>string<span class="token operator">>>></span><span class="token punctuation">(</span><span class="token string">"some-form-author"</span><span class="token punctuation">,</span> data<span class="token punctuation">.</span>author<span class="token punctuation">)</span><span class="token punctuation">;</span>\n     formStore<span class="token punctuation">.</span>setItem<span class="token operator">&lt;</span>Optional<span class="token operator">&lt;</span>Nullable<span class="token operator">&lt;</span>string<span class="token operator">>>></span><span class="token punctuation">(</span><span class="token string">"some-form-message"</span><span class="token punctuation">,</span> data<span class="token punctuation">.</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n\n   <span class="token function">sendData</span><span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">data</span><span class="token operator">:</span> FormData</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n     <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">resetForm</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n     <span class="token comment">// Make a request here…</span>\n   <span class="token punctuation">}</span>\n\n   <span class="token function">onSubmit</span><span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">event</span><span class="token operator">:</span> Event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n     event<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n     event<span class="token punctuation">.</span><span class="token function">stopPropagation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n     <span class="token comment">// Normalize &amp; validate form data:</span>\n     <span class="token keyword">const</span> <span class="token literal-property property">form</span><span class="token operator">:</span> FormData <span class="token operator">=</span> <span class="token punctuation">{</span>\n       <span class="token literal-property property">author</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>form<span class="token punctuation">.</span>author<span class="token punctuation">,</span>\n       <span class="token literal-property property">message</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>form<span class="token punctuation">.</span>message\n     <span class="token punctuation">}</span><span class="token punctuation">;</span>\n\n     <span class="token keyword">if</span> <span class="token punctuation">(</span>navigator<span class="token punctuation">.</span>onLine<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n       <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">sendData</span><span class="token punctuation">(</span>form<span class="token punctuation">)</span><span class="token punctuation">;</span>\n     <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>\n       <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">storeData</span><span class="token punctuation">(</span>form<span class="token punctuation">)</span><span class="token punctuation">;</span>\n     <span class="token punctuation">}</span>\n   <span class="token punctuation">}</span>\n\n   <span class="token function">created</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n     formStore<span class="token punctuation">.</span>getItem<span class="token operator">&lt;</span>Nullable<span class="token operator">&lt;</span>string<span class="token operator">>></span><span class="token punctuation">(</span><span class="token string">"some-form-author"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">value</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n       <span class="token keyword">this</span><span class="token punctuation">.</span>form<span class="token punctuation">.</span>author <span class="token operator">=</span> value<span class="token punctuation">;</span>\n     <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n     formStore<span class="token punctuation">.</span>getItem<span class="token operator">&lt;</span>Nullable<span class="token operator">&lt;</span>string<span class="token operator">>></span><span class="token punctuation">(</span><span class="token string">"some-form-message"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">value</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n       <span class="token keyword">this</span><span class="token punctuation">.</span>form<span class="token punctuation">.</span>message <span class="token operator">=</span> value<span class="token punctuation">;</span>\n     <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n <span class="token punctuation">}</span>\n</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></code></pre></div>'}}),"\n",(0,e.jsx)(s.h3,{id:"showing-offline-information",children:"Showing offline information"}),"\n",(0,e.jsxs)(s.p,{children:["If your application is not fully offline-first (e.g. you don't save the requests in a queue like in the previous section), it is important to notify the users about their connection status. You can use ",(0,e.jsx)(s.code,{children:"navigator.onLine"})," property and ",(0,e.jsx)(s.code,{children:"ononline"}),", ",(0,e.jsx)(s.code,{children:"onoffline"})," events or let the ",(0,e.jsx)(s.a,{href:"https://github.com/filrak/vue-offline",children:(0,e.jsx)(s.code,{children:"vue-offline"})})," plugin take care of all of this."]}),"\n",(0,e.jsx)(s.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">$ <span class="token function">npm</span> <span class="token function">install</span> <span class="token parameter variable">--save</span> vue-offline</code></pre></div>'}}),"\n",(0,e.jsxs)(s.p,{children:["It will add ",(0,e.jsx)(s.code,{children:"isOnline"}),", ",(0,e.jsx)(s.code,{children:"isOffline"})," data properties and ",(0,e.jsx)(s.code,{children:"online"}),", ",(0,e.jsx)(s.code,{children:"offline"})," events via a global mixin. We need to register their plugin in ",(0,e.jsx)(s.code,{children:"main.ts"}),", as follows:"]}),"\n",(0,e.jsx)(s.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="typescript"><pre class="language-typescript"><code class="language-typescript"><span class="token keyword">import</span> Vue <span class="token keyword">from</span> <span class="token string">"vue"</span><span class="token punctuation">;</span>\n<span class="token keyword">import</span> VueOffline <span class="token keyword">from</span> <span class="token string">"vue-offline"</span><span class="token punctuation">;</span>\n\nVue<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>VueOffline<span class="token punctuation">,</span> <span class="token punctuation">{</span> storage<span class="token operator">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>'}}),"\n",(0,e.jsxs)(s.p,{children:["Then we can safely listen for the online and offline events in our ",(0,e.jsx)(s.code,{children:"App.vue"}),":"]}),"\n",(0,e.jsx)(s.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="html"><pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">></span></span>\n <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>app<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>\n   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>section</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>offline<span class="token punctuation">"</span></span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>!isOnline<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>You are offline.<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>section</span><span class="token punctuation">></span></span>\n\n   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-view</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-view</span><span class="token punctuation">></span></span>\n <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">></span></span>\n\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ts<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">\n <span class="token keyword">import</span> <span class="token punctuation">{</span> Component<span class="token punctuation">,</span> Vue <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"vue-property-decorator"</span><span class="token punctuation">;</span>\n\n @<span class="token function">Component</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>\n <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token keyword">extends</span> <span class="token class-name">Vue</span> <span class="token punctuation">{</span>\n   isOnline <span class="token operator">=</span> navigator<span class="token punctuation">.</span>onLine<span class="token punctuation">;</span>\n\n   <span class="token function">created</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n     <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$on</span><span class="token punctuation">(</span><span class="token string">"online"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n       console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"User is now online"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n       <span class="token keyword">this</span><span class="token punctuation">.</span>isOnline <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>\n     <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n     <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$on</span><span class="token punctuation">(</span><span class="token string">"offline"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n       console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"User is now offline"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n       <span class="token keyword">this</span><span class="token punctuation">.</span>isOnline <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>\n     <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n <span class="token punctuation">}</span>\n</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></code></pre></div>'}}),"\n",(0,e.jsx)(s.h3,{id:"making-vuex-state-persistent",children:"Making Vuex state persistent"}),"\n",(0,e.jsxs)(s.p,{children:["If you want some parts of your data persistent, available in offline mode, you’ll need a persistent store, which replicated and retrieve the Vuex store to/from a local storage. In this article, I’ll focus on a Vuex plugin named ",(0,e.jsx)(s.a,{href:"https://github.com/championswimmer/vuex-persist",children:(0,e.jsx)(s.code,{children:"vuex-persist"})}),". You can download it with the following command:"]}),"\n",(0,e.jsx)(s.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">$ <span class="token function">npm</span> <span class="token function">install</span> <span class="token parameter variable">--save</span> vuex-persist</code></pre></div>'}}),"\n",(0,e.jsxs)(s.p,{children:["Since we are already using LocalForage, we’ll use it to store the persistent data. Let’s create a wrapper over the ",(0,e.jsx)(s.code,{children:"vuex-persist"})," plugin:"]}),"\n",(0,e.jsx)(s.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="typescript"><pre class="language-typescript"><code class="language-typescript"><span class="token comment">// src/store/plugins/persistent.ts</span>\n<span class="token keyword">import</span> LocalForage <span class="token keyword">from</span> <span class="token string">"localforage"</span><span class="token punctuation">;</span>\n<span class="token keyword">import</span> VuexPersistence <span class="token keyword">from</span> <span class="token string">"vuex-persist"</span><span class="token punctuation">;</span>\n\n<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">createPersistedState</span><span class="token punctuation">(</span>options <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">return</span> store <span class="token operator">=></span> <span class="token punctuation">{</span>\n    <span class="token keyword">const</span> VuexForage <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">VuexPersistence</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n      <span class="token operator">...</span>options<span class="token punctuation">,</span>\n\n      storage<span class="token operator">:</span> LocalForage<span class="token punctuation">,</span>\n      asyncStorage<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>\n\n      <span class="token comment">// Used to trigger `storageReady` event as soon as the state is loaded</span>\n      <span class="token comment">// from LocalForage:</span>\n      <span class="token function-variable function">restoreState</span><span class="token operator">:</span> <span class="token punctuation">(</span>key<span class="token punctuation">,</span> storage<span class="token punctuation">)</span> <span class="token operator">=></span>\n        <span class="token keyword">new</span> <span class="token class-name"><span class="token builtin">Promise</span></span><span class="token punctuation">(</span>resolve <span class="token operator">=></span> <span class="token punctuation">{</span>\n          storage<span class="token punctuation">.</span><span class="token function">getItem</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>data <span class="token operator">=></span> <span class="token punctuation">{</span>\n            <span class="token function">resolve</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n            store<span class="token punctuation">.</span>_vm<span class="token punctuation">.</span>$root<span class="token punctuation">.</span><span class="token function">$emit</span><span class="token punctuation">(</span><span class="token string">"storageReady"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n          <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token punctuation">}</span><span class="token punctuation">)</span>\n    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    <span class="token keyword">return</span> VuexForage<span class="token punctuation">.</span><span class="token function">plugin</span><span class="token punctuation">(</span>store<span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code></pre></div>'}}),"\n",(0,e.jsx)(s.p,{children:"We must register this plugin in our Vuex Store:"}),"\n",(0,e.jsx)(s.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="typescript"><pre class="language-typescript"><code class="language-typescript"><span class="token comment">// src/store/index.ts</span>\n<span class="token keyword">import</span> Vue <span class="token keyword">from</span> <span class="token string">"vue"</span><span class="token punctuation">;</span>\n<span class="token keyword">import</span> Vuex <span class="token keyword">from</span> <span class="token string">"vuex"</span><span class="token punctuation">;</span>\n<span class="token keyword">import</span> createLogger <span class="token keyword">from</span> <span class="token string">"vuex/dist/logger"</span><span class="token punctuation">;</span>\n<span class="token keyword">import</span> createPersistedState <span class="token keyword">from</span> <span class="token string">"./plugins/persistent"</span><span class="token punctuation">;</span>\n\n<span class="token keyword">import</span> foo <span class="token keyword">from</span> <span class="token string">"./modules/foo"</span><span class="token punctuation">;</span>\n<span class="token keyword">import</span> bar <span class="token keyword">from</span> <span class="token string">"./modules/bar"</span><span class="token punctuation">;</span>\n\nVue<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>Vuex<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="token comment">// Disable logs &amp; strict mode in production:</span>\n<span class="token keyword">const</span> debug <span class="token operator">=</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">NODE_ENV</span> <span class="token operator">!==</span> <span class="token string">"production"</span><span class="token punctuation">;</span>\n\n<span class="token comment">// Plugins for both `development` &amp; `production` modes:</span>\n<span class="token keyword">const</span> plugins <span class="token operator">=</span> <span class="token punctuation">[</span>\n  <span class="token function">createPersistedState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n    strictMode<span class="token operator">:</span> debug<span class="token punctuation">,</span>\n    <span class="token comment">// Specify here which modules should be persistent:</span>\n    modules<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"foo"</span><span class="token punctuation">,</span> <span class="token string">"bar"</span><span class="token punctuation">]</span>\n  <span class="token punctuation">}</span><span class="token punctuation">)</span>\n<span class="token punctuation">]</span><span class="token punctuation">;</span>\n\n<span class="token comment">// Plugins for `development` mode:</span>\n<span class="token keyword">const</span> devPlugins <span class="token operator">=</span> <span class="token punctuation">[</span>\n  <span class="token comment">// Integrates with Vue Devtools:</span>\n  <span class="token function">createLogger</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n<span class="token punctuation">]</span><span class="token punctuation">;</span>\n\n<span class="token comment">// Plugins for `production` mode:</span>\n<span class="token keyword">const</span> prodPlugins <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>\n\n<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">new</span> <span class="token class-name">Vuex</span><span class="token punctuation">.</span><span class="token function">Store</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n  strict<span class="token operator">:</span> debug<span class="token punctuation">,</span>\n  plugins<span class="token operator">:</span> debug\n    <span class="token operator">?</span> <span class="token punctuation">[</span><span class="token operator">...</span>plugins<span class="token punctuation">,</span> <span class="token operator">...</span>devPlugins<span class="token punctuation">]</span>\n    <span class="token operator">:</span> <span class="token punctuation">[</span><span class="token operator">...</span>plugins<span class="token punctuation">,</span> <span class="token operator">...</span>prodPlugins<span class="token punctuation">]</span><span class="token punctuation">,</span>\n\n  modules<span class="token operator">:</span> <span class="token punctuation">{</span>\n    foo<span class="token punctuation">,</span>\n    bar\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>'}}),"\n",(0,e.jsxs)(s.p,{children:["And voila! Data from foo and bar modules will be persistent, automatically stored and retrieved in/from the local storage. The last this we need to do is wait till the store is rehydrated before rendering the main app component, but since we are emitting a ",(0,e.jsx)(s.code,{children:"storageReady"})," event in our ",(0,e.jsx)(s.code,{children:"vuex-persist"})," wrapper, this should be pretty easy:"]}),"\n",(0,e.jsx)(s.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="html"><pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">></span></span>\n  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>transition-group</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>fade<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>app<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Loader</span> <span class="token attr-name">key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>app-loader<span class="token punctuation">"</span></span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>!isStateReady<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Content</span> <span class="token attr-name">key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>app-content<span class="token punctuation">"</span></span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>isStateReady<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>\n  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>transition-group</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">></span></span>\n\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">\n<span class="token keyword">import</span> Loader <span class="token keyword">from</span> <span class="token string">"./components/Loader.vue"</span><span class="token punctuation">;</span>\n<span class="token keyword">import</span> Content <span class="token keyword">from</span> <span class="token string">"./components/Content.vue"</span><span class="token punctuation">;</span>\n\n<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>\n  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">"App"</span><span class="token punctuation">,</span>\n  <span class="token literal-property property">components</span><span class="token operator">:</span> <span class="token punctuation">{</span>\n    Loader<span class="token punctuation">,</span>\n    Content\n  <span class="token punctuation">}</span><span class="token punctuation">,</span>\n\n  <span class="token function-variable function">data</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span><span class="token punctuation">{</span>\n    <span class="token literal-property property">isStateReady</span><span class="token operator">:</span> <span class="token boolean">false</span>\n  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n\n  <span class="token function">created</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token comment">// This event is fired by "persistent" Vuex plugin when state is loaded from</span>\n    <span class="token comment">// local storage (i.e. IndexedDB):</span>\n    <span class="token keyword">this</span><span class="token punctuation">.</span>$store<span class="token punctuation">.</span>_vm<span class="token punctuation">.</span>$root<span class="token punctuation">.</span><span class="token function">$on</span><span class="token punctuation">(</span><span class="token string">"storageReady"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n      <span class="token keyword">this</span><span class="token punctuation">.</span>isStateReady <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span>\n</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></code></pre></div>'}}),"\n",(0,e.jsx)(s.h2,{id:"testing-offline-first-applications",children:"Testing offline-first applications"}),"\n",(0,e.jsx)(s.p,{children:"Google Chrome's DevTools offer a lot of functions test the PWA features of your web application. However, some of them require HTTPS certificates, even on localhost. Let’s see how to properly set-up a testing environment to test our Vue application."}),"\n",(0,e.jsx)(s.h3,{id:"creating-a-development-environment-with-https",children:"Creating a development environment with HTTPS"}),"\n",(0,e.jsxs)(s.p,{children:["In order to test service workers and other features locally, we will need to generate our own, self-signed certificate and add it to our OS’s trust store. This process is described on ",(0,e.jsx)(s.a,{href:"https://letsencrypt.org/docs/certificates-for-localhost/",children:"letsencrypt page"})," – it requires only the following command to generate certificates:"]}),"\n",(0,e.jsx)(s.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">openssl req <span class="token parameter variable">-x509</span> <span class="token parameter variable">-out</span> localhost.crt <span class="token parameter variable">-keyout</span> localhost.key <span class="token punctuation">\\</span>\n  <span class="token parameter variable">-newkey</span> rsa:2048 <span class="token parameter variable">-nodes</span> <span class="token parameter variable">-sha256</span> <span class="token punctuation">\\</span>\n  <span class="token parameter variable">-subj</span> <span class="token string">\'/CN=localhost\'</span> <span class="token parameter variable">-extensions</span> EXT <span class="token parameter variable">-config</span> <span class="token operator">&lt;</span><span class="token punctuation">(</span> <span class="token punctuation">\\</span>\n   <span class="token builtin class-name">printf</span> <span class="token string">"[dn]<span class="token entity" title="\\n">\\n</span>CN=localhost<span class="token entity" title="\\n">\\n</span>[req]<span class="token entity" title="\\n">\\n</span>distinguished_name = dn<span class="token entity" title="\\n">\\n</span>[EXT]<span class="token entity" title="\\n">\\n</span>subjectAltName=DNS:localhost<span class="token entity" title="\\n">\\n</span>keyUsage=digitalSignature<span class="token entity" title="\\n">\\n</span>extendedKeyUsage=serverAuth"</span><span class="token punctuation">)</span></code></pre></div>'}}),"\n",(0,e.jsxs)(s.p,{children:["Once ",(0,e.jsx)(s.code,{children:"localhost.crt"})," installed and trusted on our machine, we can modify ",(0,e.jsx)(s.code,{children:"vue.config.js"})," to use the generated certificates, as follows:"]}),"\n",(0,e.jsx)(s.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="typescript"><pre class="language-typescript"><code class="language-typescript"><span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token keyword">require</span><span class="token punctuation">(</span><span class="token string">"fs"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="token keyword">const</span> config <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>\n\n<span class="token keyword">if</span> <span class="token punctuation">(</span>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">NODE_ENV</span> <span class="token operator">===</span> <span class="token string">"production"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  config<span class="token punctuation">.</span>devServer <span class="token operator">=</span> <span class="token punctuation">{</span>\n    https<span class="token operator">:</span> <span class="token punctuation">{</span>\n      key<span class="token operator">:</span> fs<span class="token punctuation">.</span><span class="token function">readFileSync</span><span class="token punctuation">(</span><span class="token string">"localhost.key"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n      cert<span class="token operator">:</span> fs<span class="token punctuation">.</span><span class="token function">readFileSync</span><span class="token punctuation">(</span><span class="token string">"localhost.crt"</span><span class="token punctuation">)</span>\n    <span class="token punctuation">}</span>\n  <span class="token punctuation">}</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\nmodule<span class="token punctuation">.</span>exports <span class="token operator">=</span> config<span class="token punctuation">;</span></code></pre></div>'}}),"\n",(0,e.jsxs)(s.p,{children:["We can add some utility scripts in our ",(0,e.jsx)(s.code,{children:"package.json"})," to facilitate our work:"]}),"\n",(0,e.jsx)(s.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="json"><pre class="language-json"><code class="language-json"><span class="token punctuation">{</span>\n  <span class="token property">"scripts"</span><span class="token operator">:</span> <span class="token punctuation">{</span>\n    <span class="token property">"serve:prod"</span><span class="token operator">:</span> <span class="token string">"vue-cli-service build --mode=production --watch &amp; node ./serve.js"</span><span class="token punctuation">,</span>\n    <span class="token property">"serve:dev"</span><span class="token operator">:</span> <span class="token string">"vue-cli-service serve --mode=development"</span><span class="token punctuation">,</span>\n    <span class="token property">"serve"</span><span class="token operator">:</span> <span class="token string">"vue-cli-service serve"</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span></code></pre></div>'}}),"\n",(0,e.jsx)(s.p,{children:"Now, we can run:"}),"\n",(0,e.jsx)(s.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">$ <span class="token function">npm</span> run serve:prod</code></pre></div>'}}),"\n",(0,e.jsx)(s.p,{children:"…and test our PWA here."}),"\n",(0,e.jsx)(s.h3,{id:"testing-the-application-in-offline-mode",children:"Testing the application in offline mode"}),"\n",(0,e.jsx)(s.p,{children:"You can test your Progressive Web Applications directly in the browser, without the need to manually disable network connections."}),"\n",(0,e.jsxs)(s.ol,{children:["\n",(0,e.jsxs)(s.li,{children:["Go to ",(0,e.jsx)(s.strong,{children:"Network"})," panel;"]}),"\n",(0,e.jsxs)(s.li,{children:["Click ",(0,e.jsx)(s.strong,{children:"Offline"})," in the bar."]}),"\n"]}),"\n",(0,e.jsx)(s.h3,{id:"testing-the-add-to-home-screen-experience",children:'Testing the "add to home screen" experience'}),"\n",(0,e.jsxs)(s.ol,{children:["\n",(0,e.jsxs)(s.li,{children:["Go to the ",(0,e.jsx)(s.strong,{children:"Application"})," panel;"]}),"\n",(0,e.jsxs)(s.li,{children:["Go to the ",(0,e.jsx)(s.strong,{children:"Manifest"})," tab;"]}),"\n",(0,e.jsxs)(s.li,{children:["Click ",(0,e.jsx)(s.strong,{children:"Add to home screen"}),"."]}),"\n"]}),"\n",(0,e.jsx)(s.h3,{id:"making-a-general-progressive-web-app-audit",children:"Making a general Progressive Web App audit"}),"\n",(0,e.jsxs)(s.ol,{children:["\n",(0,e.jsxs)(s.li,{children:["Go to the ",(0,e.jsx)(s.strong,{children:"Audits"})," panel (Lighthouse);"]}),"\n",(0,e.jsxs)(s.li,{children:["Select ",(0,e.jsx)(s.strong,{children:"Progressive Web App"}),";"]}),"\n",(0,e.jsxs)(s.li,{children:["Click ",(0,e.jsx)(s.strong,{children:"Run audits"}),"."]}),"\n"]}),"\n",(0,e.jsx)(s.h2,{id:"conclusion",children:"Conclusion"}),"\n",(0,e.jsx)(s.p,{children:"In this article, we learned how to create a great base for offline-first, PWAs using Vue, web manifest and other standards. There's a lot more to consider to make a great native-like feeling and keep your user engaged. Here are some points to consider:"}),"\n",(0,e.jsxs)(s.ul,{children:["\n",(0,e.jsx)(s.li,{children:"Keyboard shortcuts;"}),"\n",(0,e.jsx)(s.li,{children:"Notification & icon badges;"}),"\n"]})]})}var c=function(n){void 0===n&&(n={});const{wrapper:s}=Object.assign({},(0,p.ah)(),n.components);return s?(0,e.jsx)(s,Object.assign({},n,{children:(0,e.jsx)(o,n)})):o(n)},l=a(8029),i=a(8875),r=a(180),u=a(317),k=a(5551),d=a(2349),h=a(7123);function g(n){let{pageContext:s,children:a}=n;const t=s.data,{frontmatter:o,tableOfContents:c}=t,{title:d,datePublished:g,language:m,authors:f}=o;return(0,e.jsx)(k.A,{children:(0,e.jsx)(i.V,{children:(0,e.jsxs)("article",{className:"post",itemScope:!0,itemType:"http://schema.org/Article",lang:m,children:[(0,e.jsxs)("header",{className:"post__header",children:[(0,e.jsx)("h1",{itemProp:"headline",children:d}),(0,e.jsx)("time",{dateTime:g,itemProp:"datePublished",children:g}),null!=f&&f.length?(0,e.jsx)("ul",{className:"visually-hidden",children:f.map((n=>(0,e.jsx)("li",{children:(0,e.jsx)("p",{itemProp:"author",children:n})},n)))}):null]}),(0,e.jsxs)("div",{className:"post__wrapper",children:[(0,e.jsx)("div",{className:"post__toc",children:(0,e.jsx)(h.o,{data:c})}),(0,e.jsxs)("div",{className:"post__content",children:[(0,e.jsx)("div",{itemProp:"articleBody",children:(0,e.jsx)(p.Zo,{components:{Alert:l.b,Formula:u.S},children:a})}),(0,e.jsx)(r.$,{lang:m})]})]})]})})})}function m(n){return t.createElement(g,n,t.createElement(c,n))}function f(n){let{pageContext:s}=n;const a=s.data,{excerpt:t}=a,{title:p,description:o}=a.frontmatter;return(0,e.jsx)(d.H,{title:p,description:o||t})}},8029:function(n,s,a){a.d(s,{b:function(){return u}});var t={};a.r(t),a.d(t,{alert:function(){return e},alert__failure:function(){return p},alert__info:function(){return o},alert__success:function(){return c},alert__warning:function(){return l}});var e="index-module--alert--af406",p="index-module--alert__failure--c7bcc",o="index-module--alert__info--cfa0f",c="index-module--alert__success--14443",l="index-module--alert__warning--5ba8e",i=a(7294),r=a(5893);function u(n){let{children:s,as:a="aside",type:p="info",...o}=n;const c=n=>i.createElement(a,n);return(0,r.jsx)(c,{...o,className:`${e} ${t[`alert__${p}`]}`,children:s})}},180:function(n,s,a){a.d(s,{$:function(){return o}});var t=a(7294),e=a(1711),p=a(5893);function o(n){let{lang:s="en"}=n;const a=t.useRef(),[o]=(0,e.F)(),c=null!==o;return t.useLayoutEffect((()=>{const n=a.current;if(!n||!c)return;const t=function(n){let{theme:s,lang:a}=n;const t="undefined"!=typeof window?window.location.origin:"";return`\n    <script src="https://giscus.app/client.js"\n      data-repo="Bartozzz/bartozzz.github.io"\n      data-repo-id="MDEwOlJlcG9zaXRvcnkyNDk1MjY5MQ=="\n      data-category="Discussion"\n      data-category-id="DIC_kwDOAXy_c84CAHzq"\n      data-mapping="pathname"\n      data-reactions-enabled="1"\n      data-emit-metadata="0"\n      data-theme="${"dark"===s?`${t}/discussion-dark.css`:`${t}/discussion-light.css`}"\n      data-lang="${a}"\n      crossorigin="anonymous"\n      async>\n    <\/script>\n  `}({theme:o,lang:s}),e=document.createRange().createContextualFragment(t);return null==n||n.appendChild(e),()=>{n.innerHTML=""}}),[c]),t.useEffect((()=>{const n="undefined"!=typeof window?window.location.origin:"";!function(n){const s=document.querySelector("iframe.giscus-frame");s&&s.contentWindow.postMessage({giscus:n},"https://giscus.app")}({setConfig:{theme:"dark"===o?`${n}/discussion-dark.css`:`${n}/discussion-light.css`,lang:s}})}),[o,s]),(0,p.jsx)(p.Fragment,{children:(0,p.jsx)("div",{className:`comments--${o}`,ref:a})})}},317:function(n,s,a){a.d(s,{S:function(){return o}});var t=a(7294),e=a(1008);function p(){return(p=Object.assign||function(n){for(var s=1;s<arguments.length;s++){var a=arguments[s];for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(n[t]=a[t])}return n}).apply(this,arguments)}const o=(0,t.memo)((function(n){var s=n.children,a=n.math,o=n.block,c=n.errorColor,l=n.renderError,i=n.settings,r=n.as,u=function(n,s){if(null==n)return{};var a,t,e={},p=Object.keys(n);for(t=0;t<p.length;t++)s.indexOf(a=p[t])>=0||(e[a]=n[a]);return e}(n,["children","math","block","errorColor","renderError","settings","as"]),k=r||(o?"div":"span"),d=null!=s?s:a,h=(0,t.useState)({innerHtml:""}),g=h[0],m=h[1];return(0,t.useEffect)((function(){try{var n=e.Z.renderToString(d,p({displayMode:!!o,errorColor:c,throwOnError:!!l},i));m({innerHtml:n})}catch(n){if(!(n instanceof e.Z.ParseError||n instanceof TypeError))throw n;m(l?{errorElement:l(n)}:{innerHtml:n.message})}}),[o,d,c,l,i]),"errorElement"in g?g.errorElement:t.createElement(k,Object.assign({},u,{dangerouslySetInnerHTML:{__html:g.innerHtml}}))}))},7123:function(n,s,a){a.d(s,{o:function(){return h}});var t=a(5785),e="index-module--toc--16eb9",p="index-module--toc__ellipsis--2a1a1",o="index-module--toc__link--1571c",c="index-module--toc__link--active--2b793",l="index-module--toc__list--19652",i="index-module--toc__title--91e5c",r=a(7294),u=a(1883),k=a(5893);function d(n){return n.flatMap((n=>{let{url:s,title:a,items:e}=n;return[{url:s,title:a}].concat((0,t.Z)(e?d(e):[]))}))}function h(n){let{data:s}=n;const[a,t]=r.useState(),p=d(s.items);return console.log({data:s,activeHeadingId:a}),r.useEffect((()=>{const n=new IntersectionObserver((n=>{n.forEach((n=>{n.isIntersecting&&t(`#${n.target.id}`)}))}),{rootMargin:"0% 0% -80% 0%"});return p.forEach((s=>{const a=document.querySelector(s.url);a&&n.observe(a)})),()=>{p.forEach((s=>{const a=document.querySelector(s.url);a&&n.unobserve(a)}))}}),[p]),(0,k.jsxs)("nav",{"aria-label":"On this page",className:e,children:[(0,k.jsx)("p",{className:i,children:"Contents"}),(0,k.jsx)(g,{tree:s,activeSlug:a})]})}function g(n){let{tree:s,activeSlug:a}=n;return(0,k.jsx)("ol",{className:l,children:s.items.map((n=>{var s;return(0,k.jsxs)("li",{children:[(0,k.jsx)(u.Link,{to:n.url,title:n.title,className:`${o} ${a===n.url?c:""}`,children:(0,k.jsx)("span",{className:p,children:n.title})}),(null===(s=n.items)||void 0===s?void 0:s.length)>0&&(0,k.jsx)(g,{tree:n,activeSlug:a})]},n.url)}))})}},1151:function(n,s,a){a.d(s,{Zo:function(){return c},ah:function(){return p}});var t=a(7294);const e=t.createContext({});function p(n){const s=t.useContext(e);return t.useMemo((()=>"function"==typeof n?n(s):{...s,...n}),[s,n])}const o={};function c({components:n,children:s,disableParentContext:a}){let c;return c=a?"function"==typeof n?n({}):n||o:p(n),t.createElement(e.Provider,{value:c},s)}}}]);
//# sourceMappingURL=component---src-templates-blog-post-tsx-content-file-path-content-blog-2019-01-05-creating-offline-first-vue-apps-index-md-1f0e8ae494a4c38acf69.js.map