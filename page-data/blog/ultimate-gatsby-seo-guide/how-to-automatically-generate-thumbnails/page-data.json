{"componentChunkName":"component---src-templates-blog-post-tsx-content-file-path-content-blog-ultimate-gatsby-seo-guide-how-to-automatically-generate-thumbnails-md","path":"/blog/ultimate-gatsby-seo-guide/how-to-automatically-generate-thumbnails/","result":{"data":{"site":{"siteMetadata":{"siteUrl":"https://laniewski.me"}}},"pageContext":{"data":{"id":"e3c6f8f5-1fe5-5588-8f80-d262181f4e77","body":"\nAs a software engineer, I love to automate things. I also love to write blog posts. So I decided to automate the process of generating thumbnails for my Gatsby blog to improve my brand consistency and recognition across social media platforms. In this article, I will show you how to do it.\n\n## Why are thumbnails important?\n\n1. **First Impression Matter**\n\nBlog post thumbnails act as the visual ambassadors of your content, offering a sneak peek into the article. A compelling thumbnail serves as the initial point of contact between your content and potential readers, making it a low-hanging fruit determining whether users will click through or scroll past.\n\n2. **Social Media Optimization**\n\nBlog post thumbnails are important in optimizing content for platforms like Facebook, Twitter, and Instagram. Social media users often scroll through feeds rapidly, and a striking thumbnail can make your content stand out. It acts as a visual anchor, inviting users to pause and delve deeper into your blog.\n\n3. **Increased Click-Through Rates**\n\nA well-crafted thumbnail can significantly boost click-through rates. When users are presented with a visually appealing and relevant image, they are more likely to be enticed into exploring the full article. This not only enhances the visibility of your content but also contributes to the overall success of your blog by increasing engagement metrics.\n\n## Step 1: Prepare HTML image template\n\nOur thumbnails will be created based on a parametrized HTML template. We will then use a library to convert the HTML to an image. The template should contribute to brand consistency and recognition. Here’s a basic template you can use as a starting point:\n\n```html\n<!DOCTYPE html>\n<html>\n  <head>\n    <style>\n      :root {\n        --imgWidth: {{imgWidth}};\n        --imgHeight: {{imgHeight}};\n      }\n\n      html, body {\n        margin: 0;\n      }\n\n      body {\n        width: var(--imgWidth);\n        height: var(--imgHeight);\n      }\n    </style>\n  </head>\n  <body>\n    <p class=\"title\">{{title}}</p>\n    <p class=\"domain\">{{link}}</p>\n  </body>\n</html>\n```\n\n<Alert type=\"info\">\n  `{{title}}`, `{{link}}`, `{{imgWidth}}`, and `{{imgHeight}}` are variables that will be replaced during the image generation phase.\n</Alert>\n\n## Step 2: Create a function to generate thumbnails\n\nThere are plenty of libraries that can be used to convert HTML to an image. I decided to use [`node-html-to-image`](https://www.npmjs.com/package/node-html-to-image) as it provides a simple, easy-to-use API. It also allows us to generate multiple images in one call, which benefits performance.\n\nTo get started, install the library using the following command:\n\n```bash\n$ npm install node-html-to-image\n```\n\nNext, let’s create a function that will accept a list of blog posts and generate thumbnails for each of them:\n\n```js\nimport nodeHtmlToImage from \"node-html-to-image\";\n\nconst html = `<YOUR_HTML_TEMPLATE>`;\n\nfunction mapSlugToImageName(slug) {\n  return slug\n    .replace(/\\/$/, \"\") // Remove trailing slash\n    .replace(\"/\", \"-\"); // Replace slashes with dashes\n}\n\nfunction buildOutputPath(slug) {\n  return `./static/thumbnails/${mapSlugToImageName(slug)}.png`;\n}\n\nfunction buildLinkPath(slug) {\n  return `https://example.com${slug}`;\n}\n\nexport async function createBlogPostThumbnails(posts) {\n  return nodeHtmlToImage({\n    html,\n    content: posts.map((post) => ({\n      output: buildOutputPath(post.slug),\n      // Parameters to be passed to the template:\n      link: buildLinkPath(post.slug),\n      title: post.title,\n      imgWidth: 1600,\n      imgHeight: 900,\n    })),\n  });\n}\n```\n\n## Step 3: Create thumbnails when building pages\n\nThe function will be called in the `gatsby-node.js` file, in the `createPages` hook. First, we need to fetch a list of all blog posts. Then, we can call the `createBlogPostThumbnails` function with the data. The function will return a promise that will resolve once all thumbnails are generated.\n\n```js\nexport const createPages = async ({ graphql }) => {\n  const allPostsResult = await graphql(`\n    query AllPostsQuery {\n      allMdx {\n        nodes {\n          frontmatter {\n            title\n          }\n          fields {\n            slug\n          }\n        }\n      }\n    }\n  `);\n\n  await createBlogPostThumbnails(\n    allPostsResult.allMdx.nodes.map((post) => ({\n      title: post.frontmatter.title,\n      slug: post.fields.slug,\n    })),\n  );\n};\n```\n\n## Step 4: Use images in your SEO component\n\nIf you followed my last article [about creating an SEO component for Gatsby](/blog/ultimate-gatsby-seo-guide/how-to-create-an-seo-component/), you can now use the generated thumbnails for social sharing cards. We simply have to generate a link to the image and pass it to the `image` property of the `SEO` component. Here’s a rough idea of how it could look like:\n\n```tsx\nexport function Head({ data, location }: HeadProps<DataType, PageContextType>) {\n  const slug = location.pathname;\n  const siteUrl = data.site.siteMetadata.siteUrl;\n  const thumbnailUrl = `${siteUrl}/thumbnails/${mapSlugToImageName(slug)}.png`;\n\n  return <SEO {/* other props */} image={thumbnailUrl} />;\n}\n\nexport const query = graphql`\n  {\n    site {\n      siteMetadata {\n        siteUrl\n      }\n    }\n  }\n`;\n```\n\n## Conclusion\n\nIn a world where information competes for attention, blog post thumbnails are a powerful tool in every content creator’s arsenal. By automating thumbnail generation, you can save time and effort and focus on what’s important – creating great content.\n","excerpt":"As a software engineer, I love to automate things. I also love to write blog posts. So I decided to automate the process of generating thumbnails for my…","tableOfContents":{"items":[{"url":"#why-are-thumbnails-important","title":"Why are thumbnails important?"},{"url":"#step-1-prepare-html-image-template","title":"Step 1: Prepare HTML image template"},{"url":"#step-2-create-a-function-to-generate-thumbnails","title":"Step 2: Create a function to generate thumbnails"},{"url":"#step-3-create-thumbnails-when-building-pages","title":"Step 3: Create thumbnails when building pages"},{"url":"#step-4-use-images-in-your-seo-component","title":"Step 4: Use images in your SEO component"},{"url":"#conclusion","title":"Conclusion"}]},"fields":{"slug":"/blog/ultimate-gatsby-seo-guide/how-to-automatically-generate-thumbnails/","timeToRead":{"minutes":3.71,"words":742}},"frontmatter":{"title":"Ultimate Gatsby SEO Guide: How to generate thumbnails?","authors":["Bartosz Łaniewski"],"keywords":["Gatsby","SEO"],"language":"en","description":null,"dateCreated":"December 16, 2023","dateCreatedMeta":"2023-12-16 13:10:00 +0100","dateUpdated":"December 16, 2023","dateUpdatedMeta":"2023-12-16 16:45:00 +0100","datePublished":"December 16, 2023","datePublishedMeta":"2023-12-16 16:45:00 +0100"},"internal":{"contentFilePath":"/home/runner/work/bartozzz.github.io/bartozzz.github.io/content/blog/ultimate-gatsby-seo-guide/how-to-automatically-generate-thumbnails.md"}},"frontmatter":{"title":"Ultimate Gatsby SEO Guide: How to generate thumbnails?","authors":["Bartosz Łaniewski"],"keywords":["Gatsby","SEO"],"language":"en","dateCreated":"2023-12-16 13:10:00 +0100","dateUpdated":"2023-12-16 16:45:00 +0100","datePublished":"2023-12-16 16:45:00 +0100"}}},"staticQueryHashes":["1271460761","3216310583"],"slicesMap":{}}