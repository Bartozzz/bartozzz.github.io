{"componentChunkName":"component---src-templates-blog-post-tsx-content-file-path-content-blog-ultimate-gatsby-seo-guide-how-to-create-a-sitemap-md","path":"/blog/ultimate-gatsby-seo-guide/how-to-create-a-sitemap/","result":{"data":{"site":{"siteMetadata":{"siteUrl":"https://laniewski.me"}}},"pageContext":{"data":{"id":"35de612c-7f7a-55a1-a367-17364698e251","body":"\nCreating a sitemap is an essential step towards enhancing the visibility and SEO performance of your Gatsby website. A sitemap assists search engines in efficiently crawling and indexing your content. In this guide, I’ll walk you through the process of creating a sitemap for your Gatsby project, boosting its search engine optimization.\n\n## The Importance of a Sitemap\n\nA sitemap serves as a guide for search engines, helping them discover and rank your content more effectively. It also ensures that any updates or new pages are recognized. This is crucial for Search Engine Optimization (_SEO_) and ensuring that your website appears in Search Engine Results Pages (_SERPs_).\n\n## Step 1: Install the Gatsby Plugin\n\nGatsby simplifies the process of creating a sitemap by providing an official, dedicated plugin – [`gatsby-plugin-sitemap`](https://www.gatsbyjs.com/plugins/gatsby-plugin-sitemap/). To get started, open your Gatsby project and install the plugin using the following command:\n\n```bash\n$ npm install gatsby-plugin-sitemap\n```\n\nNext, integrate the plugin into your `gatsby-config.js` file:\n\n```javascript\nmodule.exports = {\n  siteMetadata: {\n    siteUrl: \"https://www.example.com\",\n  },\n  plugins: [\n    {\n      resolve: \"gatsby-plugin-sitemap\",\n    },\n  ],\n}\n```\n\nThis step automatically generates a `sitemap-index.xml` file in the root of your Gatsby project and, for every 45000 URLs a new `sitemap-n.xml` file containing all the basic information for search engines:\n\n```xml\n<!-- sitemap-index.xml -->\n<sitemapindex xmlns=\"http://www.sitemaps.org/schemas/sitemap/0.9\">\n  <sitemap>\n    <loc>https://example.com/sitemap-0.xml</loc>\n  </sitemap>\n</sitemapindex>\n```\n\n```xml\n<!-- sitemap-0.xml -->\n<urlset xmlns=\"http://www.sitemaps.org/schemas/sitemap/0.9\" xmlns:news=\"http://www.google.com/schemas/sitemap-news/0.9\" xmlns:xhtml=\"http://www.w3.org/1999/xhtml\" xmlns:image=\"http://www.google.com/schemas/sitemap-image/1.1\" xmlns:video=\"http://www.google.com/schemas/sitemap-video/1.1\">\n  <url>\n    <loc>https://example.com/blog/some-post-slug/</loc>\n    <changefreq>daily</changefreq>\n    <priority>0.7</priority>\n  </url>\n  <url>\n    <loc>https://example.com/blog/</loc>\n    <changefreq>daily</changefreq>\n    <priority>0.7</priority>\n  </url>\n  <url>\n    <loc>https://example.com/</loc>\n    <changefreq>daily</changefreq>\n    <priority>0.7</priority>\n  </url>\n</urlset>\n```\n\n## Step 2: Customize Your Sitemap\n\nWhile the default configuration works well, you may want to customize your sitemap to provide more information. Gatsby allows you to tailor the sitemap by [providing options](https://www.gatsbyjs.com/plugins/gatsby-plugin-sitemap/) in the `gatsby-config.js` file, as follows:\n\n```javascript\nmodule.exports = {\n  plugins: [\n    {\n      resolve: \"gatsby-plugin-sitemap\",\n      options: {\n        query: `\n          {\n            site {\n              siteMetadata {\n                siteUrl\n              }\n            }\n            allSitePage {\n              nodes {\n                path\n              }\n            }\n            allMdx {\n              nodes {\n                fields {\n                  slug\n                }\n                frontmatter {\n                  dateUpdated\n                }\n              }\n            }\n          }\n        `,\n        resolvePages: ({\n          allSitePage: { nodes: allSitePages },\n          allMdx: { nodes: allMdxNodes },\n        }) => {\n          const blogPostsPages = allMdxNodes.reduce(\n            (acc, node) => ({\n              ...acc,\n              [node.fields.slug]: node.frontmatter,\n            }),\n            {},\n          );\n\n          return allSitePages.map((page) => ({\n            ...page,\n            ...blogPostsPages[page.path],\n          }));\n        },\n        serialize: ({ path, dateUpdated }) => {\n          if (dateUpdated) {\n            return {\n              url: path,\n              lastmod: dateUpdated,\n              priority: 0.7,\n              changefreq: \"daily\",\n            };\n          } else {\n            return {\n              url: path,\n              priority: 0.5,\n              changefreq: \"daily\",\n            };\n          }\n        },\n      },\n    },\n  ],\n}\n```\n\nWith the configuration above, the new sitemap should contain the new field `<lastmod>` when the last update date is available for a given page:\n\n```xml\n<!-- sitemap-0.xml -->\n<urlset xmlns=\"http://www.sitemaps.org/schemas/sitemap/0.9\" xmlns:news=\"http://www.google.com/schemas/sitemap-news/0.9\" xmlns:xhtml=\"http://www.w3.org/1999/xhtml\" xmlns:image=\"http://www.google.com/schemas/sitemap-image/1.1\" xmlns:video=\"http://www.google.com/schemas/sitemap-video/1.1\">\n  <url>\n    <loc>https://example.com/blog/some-post-slug/</loc>\n    <lastmod>2023-01-01T00:00:00.000Z</lastmod>\n    <changefreq>daily</changefreq>\n    <priority>0.7</priority>\n  </url>\n  <url>\n    <loc>https://example.com/blog/</loc>\n    <changefreq>daily</changefreq>\n    <priority>0.5</priority>\n  </url>\n  <url>\n    <loc>https://example.com/</loc>\n    <changefreq>daily</changefreq>\n    <priority>0.5</priority>\n  </url>\n</urlset>\n```\n\n<Alert type=\"info\">\n  **Crawlers interpret the sitemap differently.** For instance, [Google ignores `<priority>` and `<changefreq>` values](https://developers.google.com/search/docs/crawling-indexing/sitemaps/build-sitemap?hl=en&visit_id=638379916569097492-3578546875&rd=1#additional-notes-about-xml-sitemaps), but recommends adding a `<lastmod>` value to indicate the last update date for a given page.\n</Alert>\n\n## Step 3: Update your robots.txt file\n\nThe `robots.txt` file is a text file placed in a website’s root directory to instruct web crawlers about which parts of the site should not be crawled or indexed. The `Sitemap` directive in the `robots.txt` file is used to indicate the location of the XML sitemap.\n\nTo generate a `robots.txt` file, you can use the [`gatsby-plugin-robots-txt`](https://www.gatsbyjs.com/plugins/gatsby-plugin-robots-txt/) plugin. For our use case, we won’t overengineer the configuration. Let’s manually create a `robots.txt` file in the `static` folder and simply add a reference to the sitemap file to allow all crawlers to index our website:\n\n```txt\nSitemap: https://example.com/sitemap-index.xml\nUser-agent: *\nDisallow:\n```\n\n<Newsletter />\n\n## Step 4: Test and Deploy\n\nBefore deploying your Gatsby website with the new sitemap, it’s crucial to test it locally. The sitemap is only generated for production mode. To test your sitemap, you should run the following command:\n\n```bash\n$ gatsby build && gatsby serve.\n```\n\n…and head to `localhost:9000/sitemap-index.xml` to see the generated sitemap. Once you’ve confirmed that everything is working as expected, deploy your Gatsby website to your hosting provider.\n\n## Step 5: Submit to search engines\n\nThe next step is to submit it to major search engines. Google Search Console, Bing Webmaster Tools, and other search engine platforms provide tools for submitting and monitoring your sitemap.\n\n### How to submit a sitemap to Google Search Console\n\n1. Sign in to [Google Search Console](https://search.google.com/search-console) and select your website;\n2. In the navigation menu, in the **Indexing** section, click on **Sitemaps**;\n3. Enter a full sitemap URL in the **Add a new sitemap** field and click **Submit**.\n\n### How to submit a sitemap to Bing Webmaster Tools\n\n1. Sign in to [Bing Webmaster Tools](https://www.bing.com/webmasters/about) and select your website.\n2. In the navigation menu, click on **Sitemaps**, then click on **Submit sitemap**;\n4. Enter a full sitemap URL in the **Submit sitemap** field and click **Submit**.\n\n## Conclusion\n\nCreating a sitemap for your Gatsby website is a strategic move towards improving SEO and making your content more accessible to search engines.\n\nThe `gatsby-plugin-sitemap` simplifies this process, allowing you to focus on creating compelling content while ensuring that search engines can easily discover and index your pages.\n\nBy following these steps and customizing your sitemap, you can increase visibility, and ultimately optimize your website’s performance.\n","excerpt":"Creating a sitemap is an essential step towards enhancing the visibility and SEO performance of your Gatsby website. A sitemap assists search engines in…","tableOfContents":{"items":[{"url":"#the-importance-of-a-sitemap","title":"The Importance of a Sitemap"},{"url":"#step-1-install-the-gatsby-plugin","title":"Step 1: Install the Gatsby Plugin"},{"url":"#step-2-customize-your-sitemap","title":"Step 2: Customize Your Sitemap"},{"url":"#step-3-update-your-robotstxt-file","title":"Step 3: Update your robots.txt file"},{"url":"#step-4-test-and-deploy","title":"Step 4: Test and Deploy"},{"url":"#step-5-submit-to-search-engines","title":"Step 5: Submit to search engines","items":[{"url":"#how-to-submit-a-sitemap-to-google-search-console","title":"How to submit a sitemap to Google Search Console"},{"url":"#how-to-submit-a-sitemap-to-bing-webmaster-tools","title":"How to submit a sitemap to Bing Webmaster Tools"}]},{"url":"#conclusion","title":"Conclusion"}]},"fields":{"slug":"/blog/ultimate-gatsby-seo-guide/how-to-create-a-sitemap/","timeToRead":{"minutes":4.37,"words":874}},"frontmatter":{"title":"Ultimate Gatsby SEO Guide: How to create a sitemap?","authors":["Bartosz Łaniewski"],"keywords":["Gatsby","SEO"],"language":"en","description":null,"dateCreated":"December 11, 2023","dateCreatedMeta":"2023-12-12 00:00:00 +0100","dateUpdated":"December 25, 2023","dateUpdatedMeta":"2023-12-26 00:00:00 +0100","datePublished":"December 11, 2023","datePublishedMeta":"2023-12-12 00:00:00 +0100"},"internal":{"contentFilePath":"/home/runner/work/bartozzz.github.io/bartozzz.github.io/content/blog/ultimate-gatsby-seo-guide/how-to-create-a-sitemap.md"}},"frontmatter":{"title":"Ultimate Gatsby SEO Guide: How to create a sitemap?","authors":["Bartosz Łaniewski"],"keywords":["Gatsby","SEO"],"language":"en","dateCreated":"2023-12-12 00:00:00 +0100","dateUpdated":"2023-12-26 00:00:00 +0100","datePublished":"2023-12-12 00:00:00 +0100"}}},"staticQueryHashes":["1271460761","3216310583"],"slicesMap":{}}