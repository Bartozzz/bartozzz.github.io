"use strict";(self.webpackChunklaniewski_me=self.webpackChunklaniewski_me||[]).push([[439],{4361:function(n,s,e){function a(n){return n.replace("/blog/","").replace(/\/$/,"")}e.d(s,{H:function(){return a}})},8727:function(n,s,e){e.r(s),e.d(s,{Head:function(){return g},default:function(){return k}});var a=e(7294),c=e(5893),t=e(1151);function l(n){const s=Object.assign({p:"p",a:"a",h2:"h2",span:"span",em:"em",blockquote:"blockquote",ol:"ol",li:"li",ul:"ul",h3:"h3",code:"code",pre:"pre",h4:"h4",strong:"strong"},(0,t.a)(),n.components),{Formula:e,Alert:a}=s;return a||o("Alert",!0),e||o("Formula",!0),(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)(s.p,{children:[(0,c.jsx)(s.a,{href:"https://filler.laniewski.me/",children:"Filler"})," is the first mobile game I ever created with React Native. It started as an experiment to learn more about algorithms, animations, and the platform itself."]}),"\n",(0,c.jsxs)(s.h2,{id:"introduction",children:[(0,c.jsx)(s.a,{"aria-hidden":"true",tabIndex:"-1",href:"#introduction",children:(0,c.jsx)(s.span,{className:"icon icon-link"})}),"Introduction"]}),"\n",(0,c.jsxs)(s.p,{children:["I initially created Filler when I was ~15 years old. The idea came up as I was thinking of simple projects I could work on to learn more about web development and data structures. It was later on that I learned there was already a similar (and quite popular back in the ’90s) game, called ",(0,c.jsx)(s.em,{children:"“Lights Out”"}),"."]}),"\n",(0,c.jsxs)(s.blockquote,{children:["\n",(0,c.jsxs)(s.p,{children:["Lights Out is an electronic game released by Tiger Electronics in 1995. The game consists of a 5 by 5 grid of lights. When the game starts, a random number or a stored pattern of these lights is switched on. Pressing any of the lights will toggle it and the adjacent lights. The goal of the puzzle is to switch all the lights off, preferably in as few button presses as possible. – ",(0,c.jsx)(s.a,{href:"https://en.wikipedia.org/wiki/Lights_Out_(game)",rel:"nofollow noopener noreferrer",target:"_blank",children:"Wikipedia"})]}),"\n"]}),"\n",(0,c.jsx)(s.p,{children:"There are, however, a few differences between the original and my game. In Filler:"}),"\n",(0,c.jsxs)(s.ol,{children:["\n",(0,c.jsxs)(s.li,{children:["grids can be of any size, not only ",(0,c.jsx)(e,{children:"5 \\times 5"}),";"]}),"\n",(0,c.jsx)(s.li,{children:"the goal is to switch all the lights on, not off;"}),"\n"]}),"\n",(0,c.jsx)(s.p,{children:"The technology stack is pretty standard for the React ecosystem:"}),"\n",(0,c.jsxs)(s.ul,{children:["\n",(0,c.jsx)(s.li,{children:(0,c.jsx)(s.a,{href:"https://expo.dev/",rel:"nofollow noopener noreferrer",target:"_blank",children:"Expo"})}),"\n",(0,c.jsx)(s.li,{children:(0,c.jsx)(s.a,{href:"https://www.typescriptlang.org/",rel:"nofollow noopener noreferrer",target:"_blank",children:"TypeScript"})}),"\n",(0,c.jsx)(s.li,{children:(0,c.jsx)(s.a,{href:"https://reactnavigation.org/",rel:"nofollow noopener noreferrer",target:"_blank",children:"React Navigation"})}),"\n",(0,c.jsx)(s.li,{children:(0,c.jsx)(s.a,{href:"https://styled-components.com/",rel:"nofollow noopener noreferrer",target:"_blank",children:"Styled Components"})}),"\n"]}),"\n",(0,c.jsxs)(s.h2,{id:"development",children:[(0,c.jsx)(s.a,{"aria-hidden":"true",tabIndex:"-1",href:"#development",children:(0,c.jsx)(s.span,{className:"icon icon-link"})}),"Development"]}),"\n",(0,c.jsxs)(s.h3,{id:"internationalization",children:[(0,c.jsx)(s.a,{"aria-hidden":"true",tabIndex:"-1",href:"#internationalization",children:(0,c.jsx)(s.span,{className:"icon icon-link"})}),"Internationalization"]}),"\n",(0,c.jsxs)(s.p,{children:["I used ",(0,c.jsx)(s.a,{href:"https://docs.expo.dev/versions/latest/sdk/localization/",rel:"nofollow noopener noreferrer",target:"_blank",children:(0,c.jsx)(s.code,{children:"expo-localization"})})," and ",(0,c.jsx)(s.a,{href:"https://github.com/fnando/i18n-js",rel:"nofollow noopener noreferrer",target:"_blank",children:(0,c.jsx)(s.code,{children:"i18n-js"})})," to localize my application. The internationalization setup is pretty straightforward:"]}),"\n",(0,c.jsx)(s.pre,{className:"language-ts",children:(0,c.jsxs)(s.code,{className:"language-ts code-highlight",children:[(0,c.jsxs)(s.span,{className:"code-line",children:[(0,c.jsx)(s.span,{className:"token keyword",children:"import"})," ",(0,c.jsx)(s.span,{className:"token operator",children:"*"})," ",(0,c.jsx)(s.span,{className:"token keyword",children:"as"})," Localization ",(0,c.jsx)(s.span,{className:"token keyword",children:"from"})," ",(0,c.jsx)(s.span,{className:"token string",children:'"expo-localization"'}),(0,c.jsx)(s.span,{className:"token punctuation",children:";"}),"\n"]}),(0,c.jsxs)(s.span,{className:"code-line",children:[(0,c.jsx)(s.span,{className:"token keyword",children:"import"})," i18n ",(0,c.jsx)(s.span,{className:"token keyword",children:"from"})," ",(0,c.jsx)(s.span,{className:"token string",children:'"i18n-js"'}),(0,c.jsx)(s.span,{className:"token punctuation",children:";"}),"\n"]}),(0,c.jsx)(s.span,{className:"code-line",children:"\n"}),(0,c.jsxs)(s.span,{className:"code-line",children:[(0,c.jsx)(s.span,{className:"token keyword",children:"import"})," en ",(0,c.jsx)(s.span,{className:"token keyword",children:"from"})," ",(0,c.jsx)(s.span,{className:"token string",children:'"./strings/en.json"'}),(0,c.jsx)(s.span,{className:"token punctuation",children:";"}),"\n"]}),(0,c.jsxs)(s.span,{className:"code-line",children:[(0,c.jsx)(s.span,{className:"token keyword",children:"import"})," fr ",(0,c.jsx)(s.span,{className:"token keyword",children:"from"})," ",(0,c.jsx)(s.span,{className:"token string",children:'"./strings/fr.json"'}),(0,c.jsx)(s.span,{className:"token punctuation",children:";"}),"\n"]}),(0,c.jsxs)(s.span,{className:"code-line",children:[(0,c.jsx)(s.span,{className:"token keyword",children:"import"})," pl ",(0,c.jsx)(s.span,{className:"token keyword",children:"from"})," ",(0,c.jsx)(s.span,{className:"token string",children:'"./strings/pl.json"'}),(0,c.jsx)(s.span,{className:"token punctuation",children:";"}),"\n"]}),(0,c.jsx)(s.span,{className:"code-line",children:"\n"}),(0,c.jsxs)(s.span,{className:"code-line",children:["i18n",(0,c.jsx)(s.span,{className:"token punctuation",children:"."}),"fallbacks ",(0,c.jsx)(s.span,{className:"token operator",children:"="})," ",(0,c.jsx)(s.span,{className:"token boolean",children:"true"}),(0,c.jsx)(s.span,{className:"token punctuation",children:";"}),"\n"]}),(0,c.jsxs)(s.span,{className:"code-line",children:["i18n",(0,c.jsx)(s.span,{className:"token punctuation",children:"."}),"translations ",(0,c.jsx)(s.span,{className:"token operator",children:"="})," ",(0,c.jsx)(s.span,{className:"token punctuation",children:"{"})," en",(0,c.jsx)(s.span,{className:"token punctuation",children:","})," pl",(0,c.jsx)(s.span,{className:"token punctuation",children:","})," fr ",(0,c.jsx)(s.span,{className:"token punctuation",children:"}"}),(0,c.jsx)(s.span,{className:"token punctuation",children:";"}),"\n"]}),(0,c.jsxs)(s.span,{className:"code-line",children:["i18n",(0,c.jsx)(s.span,{className:"token punctuation",children:"."}),"defaultLocale ",(0,c.jsx)(s.span,{className:"token operator",children:"="})," ",(0,c.jsx)(s.span,{className:"token string",children:'"en"'}),(0,c.jsx)(s.span,{className:"token punctuation",children:";"}),"\n"]}),(0,c.jsxs)(s.span,{className:"code-line",children:["i18n",(0,c.jsx)(s.span,{className:"token punctuation",children:"."}),"locale ",(0,c.jsx)(s.span,{className:"token operator",children:"="})," Localization",(0,c.jsx)(s.span,{className:"token punctuation",children:"."}),"locale",(0,c.jsx)(s.span,{className:"token punctuation",children:";"}),"\n"]}),(0,c.jsx)(s.span,{className:"code-line",children:"\n"}),(0,c.jsxs)(s.span,{className:"code-line",children:[(0,c.jsx)(s.span,{className:"token keyword",children:"export"})," ",(0,c.jsx)(s.span,{className:"token punctuation",children:"{"})," i18n ",(0,c.jsx)(s.span,{className:"token punctuation",children:"}"}),(0,c.jsx)(s.span,{className:"token punctuation",children:";"}),"\n"]})]})}),"\n",(0,c.jsxs)(s.p,{children:["…then, I could simply import ",(0,c.jsx)(s.code,{children:"i18n"})," and use it in the application as follows:"]}),"\n",(0,c.jsx)(s.pre,{className:"language-tsx",children:(0,c.jsx)(s.code,{className:"language-tsx code-highlight",children:(0,c.jsxs)(s.span,{className:"code-line",children:[(0,c.jsxs)(s.span,{className:"token tag",children:[(0,c.jsxs)(s.span,{className:"token tag",children:[(0,c.jsx)(s.span,{className:"token punctuation",children:"<"}),(0,c.jsx)(s.span,{className:"token class-name",children:"Button"})]}),(0,c.jsx)(s.span,{className:"token punctuation",children:">"})]}),(0,c.jsx)(s.span,{className:"token punctuation",children:"{"}),"i18n",(0,c.jsx)(s.span,{className:"token punctuation",children:"."}),(0,c.jsx)(s.span,{className:"token method function property-access",children:"t"}),(0,c.jsx)(s.span,{className:"token punctuation",children:"("}),(0,c.jsx)(s.span,{className:"token string",children:'"menu.campaignButton"'}),(0,c.jsx)(s.span,{className:"token punctuation",children:")"}),(0,c.jsx)(s.span,{className:"token punctuation",children:"}"}),(0,c.jsxs)(s.span,{className:"token tag",children:[(0,c.jsxs)(s.span,{className:"token tag",children:[(0,c.jsx)(s.span,{className:"token punctuation",children:"</"}),(0,c.jsx)(s.span,{className:"token class-name",children:"Button"})]}),(0,c.jsx)(s.span,{className:"token punctuation",children:">"})]}),"\n"]})})}),"\n",(0,c.jsxs)(s.p,{children:["To make my tests independent of the translations, I mocked the ",(0,c.jsx)(s.code,{children:"i18n-js"})," library and made the ",(0,c.jsx)(s.code,{children:"i18n.t"})," function return the translation key instead of the translation itself:"]}),"\n",(0,c.jsx)(s.pre,{className:"language-ts",children:(0,c.jsxs)(s.code,{className:"language-ts code-highlight",children:[(0,c.jsxs)(s.span,{className:"code-line",children:["jest",(0,c.jsx)(s.span,{className:"token punctuation",children:"."}),(0,c.jsx)(s.span,{className:"token function",children:"mock"}),(0,c.jsx)(s.span,{className:"token punctuation",children:"("}),(0,c.jsx)(s.span,{className:"token string",children:'"i18n-js"'}),(0,c.jsx)(s.span,{className:"token punctuation",children:","})," ",(0,c.jsx)(s.span,{className:"token punctuation",children:"("}),(0,c.jsx)(s.span,{className:"token punctuation",children:")"})," ",(0,c.jsx)(s.span,{className:"token operator",children:"=>"})," ",(0,c.jsx)(s.span,{className:"token punctuation",children:"{"}),"\n"]}),(0,c.jsxs)(s.span,{className:"code-line",children:["  ",(0,c.jsx)(s.span,{className:"token keyword",children:"return"})," ",(0,c.jsx)(s.span,{className:"token punctuation",children:"{"}),"\n"]}),(0,c.jsxs)(s.span,{className:"code-line",children:["    ",(0,c.jsx)(s.span,{className:"token operator",children:"..."}),"jest",(0,c.jsx)(s.span,{className:"token punctuation",children:"."}),(0,c.jsx)(s.span,{className:"token function",children:"requireActual"}),(0,c.jsx)(s.span,{className:"token punctuation",children:"("}),(0,c.jsx)(s.span,{className:"token string",children:'"i18n-js"'}),(0,c.jsx)(s.span,{className:"token punctuation",children:")"}),(0,c.jsx)(s.span,{className:"token punctuation",children:","}),"\n"]}),(0,c.jsxs)(s.span,{className:"code-line",children:["    t",(0,c.jsx)(s.span,{className:"token operator",children:":"})," jest",(0,c.jsx)(s.span,{className:"token punctuation",children:"."}),(0,c.jsx)(s.span,{className:"token function",children:"fn"}),(0,c.jsx)(s.span,{className:"token punctuation",children:"("}),(0,c.jsx)(s.span,{className:"token punctuation",children:"("}),"key",(0,c.jsx)(s.span,{className:"token punctuation",children:")"})," ",(0,c.jsx)(s.span,{className:"token operator",children:"=>"})," key",(0,c.jsx)(s.span,{className:"token punctuation",children:")"}),(0,c.jsx)(s.span,{className:"token punctuation",children:","}),"\n"]}),(0,c.jsxs)(s.span,{className:"code-line",children:["  ",(0,c.jsx)(s.span,{className:"token punctuation",children:"}"}),(0,c.jsx)(s.span,{className:"token punctuation",children:";"}),"\n"]}),(0,c.jsxs)(s.span,{className:"code-line",children:[(0,c.jsx)(s.span,{className:"token punctuation",children:"}"}),(0,c.jsx)(s.span,{className:"token punctuation",children:")"}),(0,c.jsx)(s.span,{className:"token punctuation",children:";"}),"\n"]})]})}),"\n",(0,c.jsx)(s.p,{children:"…having that, I could safely update the copy without breaking the integration tests:"}),"\n",(0,c.jsx)(s.pre,{className:"language-tsx",children:(0,c.jsxs)(s.code,{className:"language-tsx code-highlight",children:[(0,c.jsxs)(s.span,{className:"code-line",children:[(0,c.jsx)(s.span,{className:"token function",children:"it"}),(0,c.jsx)(s.span,{className:"token punctuation",children:"("}),(0,c.jsx)(s.span,{className:"token string",children:'"should reset the board on ’Reset’ button click"'}),(0,c.jsx)(s.span,{className:"token punctuation",children:","})," ",(0,c.jsx)(s.span,{className:"token punctuation",children:"("}),(0,c.jsx)(s.span,{className:"token punctuation",children:")"})," ",(0,c.jsx)(s.span,{className:"token arrow operator",children:"=>"})," ",(0,c.jsx)(s.span,{className:"token punctuation",children:"{"}),"\n"]}),(0,c.jsxs)(s.span,{className:"code-line",children:["  ",(0,c.jsx)(s.span,{className:"token keyword",children:"const"})," view ",(0,c.jsx)(s.span,{className:"token operator",children:"="})," ",(0,c.jsx)(s.span,{className:"token function",children:"render"}),(0,c.jsx)(s.span,{className:"token punctuation",children:"("}),(0,c.jsxs)(s.span,{className:"token tag",children:[(0,c.jsxs)(s.span,{className:"token tag",children:[(0,c.jsx)(s.span,{className:"token punctuation",children:"<"}),(0,c.jsx)(s.span,{className:"token class-name",children:"Game"})]})," ",(0,c.jsx)(s.span,{className:"token punctuation",children:"/>"})]}),(0,c.jsx)(s.span,{className:"token punctuation",children:")"}),(0,c.jsx)(s.span,{className:"token punctuation",children:";"}),"\n"]}),(0,c.jsx)(s.span,{className:"code-line",children:"\n"}),(0,c.jsxs)(s.span,{className:"code-line",children:["  fireEvent",(0,c.jsx)(s.span,{className:"token punctuation",children:"."}),(0,c.jsx)(s.span,{className:"token method function property-access",children:"press"}),(0,c.jsx)(s.span,{className:"token punctuation",children:"("}),"view",(0,c.jsx)(s.span,{className:"token punctuation",children:"."}),(0,c.jsx)(s.span,{className:"token method function property-access",children:"getByText"}),(0,c.jsx)(s.span,{className:"token punctuation",children:"("}),(0,c.jsx)(s.span,{className:"token string",children:'"header.resetBtn"'}),(0,c.jsx)(s.span,{className:"token punctuation",children:")"}),(0,c.jsx)(s.span,{className:"token punctuation",children:")"}),(0,c.jsx)(s.span,{className:"token punctuation",children:";"}),"\n"]}),(0,c.jsxs)(s.span,{className:"code-line",children:["  ",(0,c.jsx)(s.span,{className:"token comment",children:"// …"}),"\n"]}),(0,c.jsxs)(s.span,{className:"code-line",children:[(0,c.jsx)(s.span,{className:"token punctuation",children:"}"}),(0,c.jsx)(s.span,{className:"token punctuation",children:")"}),(0,c.jsx)(s.span,{className:"token punctuation",children:";"}),"\n"]})]})}),"\n",(0,c.jsx)(s.p,{children:"I was not afraid to break anything in the user interface because my application contains visual regression tests. It allows me to ensure that my application appears to the end-user as it was originally intended to and I can catch visual regressions with ease."}),"\n",(0,c.jsxs)(s.h3,{id:"animations",children:[(0,c.jsx)(s.a,{"aria-hidden":"true",tabIndex:"-1",href:"#animations",children:(0,c.jsx)(s.span,{className:"icon icon-link"})}),"Animations"]}),"\n",(0,c.jsxs)(s.p,{children:["I used ",(0,c.jsx)(s.a,{href:"https://github.com/software-mansion/react-native-reanimated",rel:"nofollow noopener noreferrer",target:"_blank",children:(0,c.jsx)(s.code,{children:"react-native-reanimated"})})," to create all animations in the game. The main reason behind this choice was that the animations run on the native thread – it’s a great animation library performance-wise. It comes with an imperative and a declarative API."]}),"\n",(0,c.jsxs)(s.h4,{id:"imperative-api",children:[(0,c.jsx)(s.a,{"aria-hidden":"true",tabIndex:"-1",href:"#imperative-api",children:(0,c.jsx)(s.span,{className:"icon icon-link"})}),"Imperative API"]}),"\n",(0,c.jsxs)(s.p,{children:["I used the imperative functions and hooks for the ",(0,c.jsx)(s.code,{children:"GridCell"})," component. I wanted to interpolate between two colors based on the ",(0,c.jsx)(s.code,{children:"checked"})," prop. It was possible thanks to the ",(0,c.jsx)(s.code,{children:"interpolateColor"})," helper:"]}),"\n",(0,c.jsx)(s.pre,{className:"language-tsx",children:(0,c.jsxs)(s.code,{className:"language-tsx code-highlight",children:[(0,c.jsxs)(s.span,{className:"code-line",children:[(0,c.jsx)(s.span,{className:"token keyword",children:"function"})," ",(0,c.jsx)(s.span,{className:"token function",children:"GridCell"}),(0,c.jsx)(s.span,{className:"token punctuation",children:"("}),(0,c.jsx)(s.span,{className:"token punctuation",children:"{"})," checked ",(0,c.jsx)(s.span,{className:"token punctuation",children:"}"}),(0,c.jsx)(s.span,{className:"token operator",children:":"})," ",(0,c.jsx)(s.span,{className:"token punctuation",children:"{"})," checked",(0,c.jsx)(s.span,{className:"token operator",children:":"})," ",(0,c.jsx)(s.span,{className:"token builtin",children:"boolean"})," ",(0,c.jsx)(s.span,{className:"token punctuation",children:"}"}),(0,c.jsx)(s.span,{className:"token punctuation",children:")"})," ",(0,c.jsx)(s.span,{className:"token punctuation",children:"{"}),"\n"]}),(0,c.jsxs)(s.span,{className:"code-line highlight-line",children:["  ",(0,c.jsx)(s.span,{className:"token keyword",children:"const"})," colorProgress ",(0,c.jsx)(s.span,{className:"token operator",children:"="})," ",(0,c.jsx)(s.span,{className:"token function",children:"useSharedValue"}),(0,c.jsx)(s.span,{className:"token punctuation",children:"("}),"checked ",(0,c.jsx)(s.span,{className:"token operator",children:"?"})," ",(0,c.jsx)(s.span,{className:"token number",children:"1"})," ",(0,c.jsx)(s.span,{className:"token operator",children:":"})," ",(0,c.jsx)(s.span,{className:"token number",children:"0"}),(0,c.jsx)(s.span,{className:"token punctuation",children:")"}),(0,c.jsx)(s.span,{className:"token punctuation",children:";"}),"\n"]}),(0,c.jsx)(s.span,{className:"code-line",children:"\n"}),(0,c.jsxs)(s.span,{className:"code-line",children:["  ",(0,c.jsx)(s.span,{className:"token comment",children:"// Interpolate between `empty` and `checked` color based on progress:"}),"\n"]}),(0,c.jsxs)(s.span,{className:"code-line highlight-line",children:["  ",(0,c.jsx)(s.span,{className:"token keyword",children:"const"})," animatedStyles ",(0,c.jsx)(s.span,{className:"token operator",children:"="})," ",(0,c.jsx)(s.span,{className:"token function",children:"useAnimatedStyle"}),(0,c.jsx)(s.span,{className:"token punctuation",children:"("}),(0,c.jsx)(s.span,{className:"token punctuation",children:"("}),(0,c.jsx)(s.span,{className:"token punctuation",children:")"})," ",(0,c.jsx)(s.span,{className:"token arrow operator",children:"=>"})," ",(0,c.jsx)(s.span,{className:"token punctuation",children:"("}),(0,c.jsx)(s.span,{className:"token punctuation",children:"{"}),"\n"]}),(0,c.jsxs)(s.span,{className:"code-line highlight-line",children:["    backgroundColor",(0,c.jsx)(s.span,{className:"token operator",children:":"})," ",(0,c.jsx)(s.span,{className:"token function",children:"interpolateColor"}),(0,c.jsx)(s.span,{className:"token punctuation",children:"("}),"\n"]}),(0,c.jsxs)(s.span,{className:"code-line highlight-line",children:["      colorProgress",(0,c.jsx)(s.span,{className:"token punctuation",children:"."}),(0,c.jsx)(s.span,{className:"token property-access",children:"value"}),(0,c.jsx)(s.span,{className:"token punctuation",children:","}),"\n"]}),(0,c.jsxs)(s.span,{className:"code-line highlight-line",children:["      ",(0,c.jsx)(s.span,{className:"token punctuation",children:"["}),(0,c.jsx)(s.span,{className:"token number",children:"0"}),(0,c.jsx)(s.span,{className:"token punctuation",children:","})," ",(0,c.jsx)(s.span,{className:"token number",children:"1"}),(0,c.jsx)(s.span,{className:"token punctuation",children:"]"}),(0,c.jsx)(s.span,{className:"token punctuation",children:","}),"\n"]}),(0,c.jsxs)(s.span,{className:"code-line highlight-line",children:["      ",(0,c.jsx)(s.span,{className:"token punctuation",children:"["}),"theme",(0,c.jsx)(s.span,{className:"token punctuation",children:"."}),(0,c.jsx)(s.span,{className:"token property-access",children:"emptyCellColor"}),(0,c.jsx)(s.span,{className:"token punctuation",children:","})," theme",(0,c.jsx)(s.span,{className:"token punctuation",children:"."}),(0,c.jsx)(s.span,{className:"token property-access",children:"checkedCellColor"}),(0,c.jsx)(s.span,{className:"token punctuation",children:"]"}),"\n"]}),(0,c.jsxs)(s.span,{className:"code-line highlight-line",children:["    ",(0,c.jsx)(s.span,{className:"token punctuation",children:")"}),(0,c.jsx)(s.span,{className:"token punctuation",children:","}),"\n"]}),(0,c.jsxs)(s.span,{className:"code-line highlight-line",children:["  ",(0,c.jsx)(s.span,{className:"token punctuation",children:"}"}),(0,c.jsx)(s.span,{className:"token punctuation",children:")"}),(0,c.jsx)(s.span,{className:"token punctuation",children:","})," ",(0,c.jsx)(s.span,{className:"token punctuation",children:"["}),"theme",(0,c.jsx)(s.span,{className:"token punctuation",children:","})," colorProgress",(0,c.jsx)(s.span,{className:"token punctuation",children:"]"}),(0,c.jsx)(s.span,{className:"token punctuation",children:")"}),(0,c.jsx)(s.span,{className:"token punctuation",children:";"}),"\n"]}),(0,c.jsx)(s.span,{className:"code-line",children:"\n"}),(0,c.jsxs)(s.span,{className:"code-line",children:["  ",(0,c.jsx)(s.span,{className:"token comment",children:"// Change progress to 0-1 on `checked` change:"}),"\n"]}),(0,c.jsxs)(s.span,{className:"code-line",children:["  ",(0,c.jsx)(s.span,{className:"token maybe-class-name",children:"React"}),(0,c.jsx)(s.span,{className:"token punctuation",children:"."}),(0,c.jsx)(s.span,{className:"token method function property-access",children:"useEffect"}),(0,c.jsx)(s.span,{className:"token punctuation",children:"("}),(0,c.jsx)(s.span,{className:"token punctuation",children:"("}),(0,c.jsx)(s.span,{className:"token punctuation",children:")"})," ",(0,c.jsx)(s.span,{className:"token arrow operator",children:"=>"})," ",(0,c.jsx)(s.span,{className:"token punctuation",children:"{"}),"\n"]}),(0,c.jsxs)(s.span,{className:"code-line highlight-line",children:["    colorProgress",(0,c.jsx)(s.span,{className:"token punctuation",children:"."}),(0,c.jsx)(s.span,{className:"token property-access",children:"value"})," ",(0,c.jsx)(s.span,{className:"token operator",children:"="})," ",(0,c.jsx)(s.span,{className:"token function",children:"withTiming"}),(0,c.jsx)(s.span,{className:"token punctuation",children:"("}),"checked ",(0,c.jsx)(s.span,{className:"token operator",children:"?"})," ",(0,c.jsx)(s.span,{className:"token number",children:"1"})," ",(0,c.jsx)(s.span,{className:"token operator",children:":"})," ",(0,c.jsx)(s.span,{className:"token number",children:"0"}),(0,c.jsx)(s.span,{className:"token punctuation",children:")"}),(0,c.jsx)(s.span,{className:"token punctuation",children:";"}),"\n"]}),(0,c.jsxs)(s.span,{className:"code-line",children:["  ",(0,c.jsx)(s.span,{className:"token punctuation",children:"}"}),(0,c.jsx)(s.span,{className:"token punctuation",children:","})," ",(0,c.jsx)(s.span,{className:"token punctuation",children:"["}),"checked",(0,c.jsx)(s.span,{className:"token punctuation",children:","})," colorProgress",(0,c.jsx)(s.span,{className:"token punctuation",children:"]"}),(0,c.jsx)(s.span,{className:"token punctuation",children:")"}),(0,c.jsx)(s.span,{className:"token punctuation",children:";"}),"\n"]}),(0,c.jsx)(s.span,{className:"code-line",children:"\n"}),(0,c.jsxs)(s.span,{className:"code-line",children:["  ",(0,c.jsx)(s.span,{className:"token keyword",children:"return"})," ",(0,c.jsxs)(s.span,{className:"token tag",children:[(0,c.jsxs)(s.span,{className:"token tag",children:[(0,c.jsx)(s.span,{className:"token punctuation",children:"<"}),(0,c.jsx)(s.span,{className:"token class-name",children:"Cell"})]})," ",(0,c.jsx)(s.span,{className:"token attr-name",children:"style"}),(0,c.jsxs)(s.span,{className:"token script language-javascript",children:[(0,c.jsx)(s.span,{className:"token script-punctuation punctuation",children:"="}),(0,c.jsx)(s.span,{className:"token punctuation",children:"{"}),"animatedStyles",(0,c.jsx)(s.span,{className:"token punctuation",children:"}"})]})," ",(0,c.jsx)(s.span,{className:"token punctuation",children:"/>"})]}),"\n"]}),(0,c.jsxs)(s.span,{className:"code-line",children:[(0,c.jsx)(s.span,{className:"token punctuation",children:"}"}),"\n"]})]})}),"\n",(0,c.jsxs)(s.h4,{id:"declarative-api",children:[(0,c.jsx)(s.a,{"aria-hidden":"true",tabIndex:"-1",href:"#declarative-api",children:(0,c.jsx)(s.span,{className:"icon icon-link"})}),"Declarative API"]}),"\n",(0,c.jsx)(s.p,{children:"There’s also a higher-level API that I used to progressively reveal content on the success screen. I didn’t need anything fancy here, just some entering animations with delays and the declarative API does a great job for such things:"}),"\n",(0,c.jsx)(s.pre,{className:"language-tsx",children:(0,c.jsxs)(s.code,{className:"language-tsx code-highlight",children:[(0,c.jsxs)(s.span,{className:"code-line",children:[(0,c.jsx)(s.span,{className:"token keyword",children:"function"})," ",(0,c.jsx)(s.span,{className:"token function",children:"ScoreStars"}),(0,c.jsx)(s.span,{className:"token punctuation",children:"("}),(0,c.jsx)(s.span,{className:"token punctuation",children:"{"})," score ",(0,c.jsx)(s.span,{className:"token punctuation",children:"}"}),(0,c.jsx)(s.span,{className:"token operator",children:":"})," ",(0,c.jsx)(s.span,{className:"token punctuation",children:"{"})," score",(0,c.jsx)(s.span,{className:"token operator",children:":"})," ",(0,c.jsx)(s.span,{className:"token builtin",children:"number"})," ",(0,c.jsx)(s.span,{className:"token punctuation",children:"}"}),(0,c.jsx)(s.span,{className:"token punctuation",children:")"})," ",(0,c.jsx)(s.span,{className:"token punctuation",children:"{"}),"\n"]}),(0,c.jsxs)(s.span,{className:"code-line",children:["  ",(0,c.jsx)(s.span,{className:"token keyword",children:"const"})," delay ",(0,c.jsx)(s.span,{className:"token operator",children:"="})," ",(0,c.jsx)(s.span,{className:"token number",children:"250"}),(0,c.jsx)(s.span,{className:"token punctuation",children:";"}),"\n"]}),(0,c.jsx)(s.span,{className:"code-line",children:"\n"}),(0,c.jsxs)(s.span,{className:"code-line",children:["  ",(0,c.jsx)(s.span,{className:"token keyword",children:"return"})," ",(0,c.jsx)(s.span,{className:"token punctuation",children:"("}),"\n"]}),(0,c.jsxs)(s.span,{className:"code-line",children:["    ",(0,c.jsxs)(s.span,{className:"token tag",children:[(0,c.jsxs)(s.span,{className:"token tag",children:[(0,c.jsx)(s.span,{className:"token punctuation",children:"<"}),(0,c.jsx)(s.span,{className:"token class-name",children:"Stars"})]}),(0,c.jsx)(s.span,{className:"token punctuation",children:">"})]}),(0,c.jsx)(s.span,{className:"token plain-text",children:"\n"})]}),(0,c.jsxs)(s.span,{className:"code-line highlight-line",children:[(0,c.jsx)(s.span,{className:"token plain-text",children:"      "}),(0,c.jsxs)(s.span,{className:"token tag",children:[(0,c.jsxs)(s.span,{className:"token tag",children:[(0,c.jsx)(s.span,{className:"token punctuation",children:"<"}),(0,c.jsx)(s.span,{className:"token class-name",children:"Animated.View"})]})," ",(0,c.jsx)(s.span,{className:"token attr-name",children:"entering"}),(0,c.jsxs)(s.span,{className:"token script language-javascript",children:[(0,c.jsx)(s.span,{className:"token script-punctuation punctuation",children:"="}),(0,c.jsx)(s.span,{className:"token punctuation",children:"{"}),(0,c.jsx)(s.span,{className:"token maybe-class-name",children:"Swing"}),(0,c.jsx)(s.span,{className:"token punctuation",children:"."}),(0,c.jsx)(s.span,{className:"token method function property-access",children:"delay"}),(0,c.jsx)(s.span,{className:"token punctuation",children:"("}),"delay ",(0,c.jsx)(s.span,{className:"token operator",children:"*"})," ",(0,c.jsx)(s.span,{className:"token number",children:"0"}),(0,c.jsx)(s.span,{className:"token punctuation",children:")"}),(0,c.jsx)(s.span,{className:"token punctuation",children:"}"})]}),(0,c.jsx)(s.span,{className:"token punctuation",children:">"})]}),(0,c.jsx)(s.span,{className:"token plain-text",children:"\n"})]}),(0,c.jsxs)(s.span,{className:"code-line",children:[(0,c.jsx)(s.span,{className:"token plain-text",children:"        "}),(0,c.jsx)(s.span,{className:"token punctuation",children:"{"}),"score ",(0,c.jsx)(s.span,{className:"token operator",children:"<"})," ",(0,c.jsx)(s.span,{className:"token number",children:"1"})," ",(0,c.jsx)(s.span,{className:"token operator",children:"?"})," ",(0,c.jsxs)(s.span,{className:"token tag",children:[(0,c.jsxs)(s.span,{className:"token tag",children:[(0,c.jsx)(s.span,{className:"token punctuation",children:"<"}),(0,c.jsx)(s.span,{className:"token class-name",children:"GrayStar"})]})," ",(0,c.jsx)(s.span,{className:"token punctuation",children:"/>"})]})," ",(0,c.jsx)(s.span,{className:"token operator",children:":"})," ",(0,c.jsxs)(s.span,{className:"token tag",children:[(0,c.jsxs)(s.span,{className:"token tag",children:[(0,c.jsx)(s.span,{className:"token punctuation",children:"<"}),(0,c.jsx)(s.span,{className:"token class-name",children:"GoldStar"})]})," ",(0,c.jsx)(s.span,{className:"token punctuation",children:"/>"})]}),(0,c.jsx)(s.span,{className:"token punctuation",children:"}"}),(0,c.jsx)(s.span,{className:"token plain-text",children:"\n"})]}),(0,c.jsxs)(s.span,{className:"code-line",children:[(0,c.jsx)(s.span,{className:"token plain-text",children:"      "}),(0,c.jsxs)(s.span,{className:"token tag",children:[(0,c.jsxs)(s.span,{className:"token tag",children:[(0,c.jsx)(s.span,{className:"token punctuation",children:"</"}),(0,c.jsx)(s.span,{className:"token class-name",children:"Animated.View"})]}),(0,c.jsx)(s.span,{className:"token punctuation",children:">"})]}),(0,c.jsx)(s.span,{className:"token plain-text",children:"\n"})]}),(0,c.jsx)(s.span,{className:"code-line",children:(0,c.jsx)(s.span,{className:"token plain-text",children:"\n"})}),(0,c.jsxs)(s.span,{className:"code-line highlight-line",children:[(0,c.jsx)(s.span,{className:"token plain-text",children:"      "}),(0,c.jsxs)(s.span,{className:"token tag",children:[(0,c.jsxs)(s.span,{className:"token tag",children:[(0,c.jsx)(s.span,{className:"token punctuation",children:"<"}),(0,c.jsx)(s.span,{className:"token class-name",children:"Animated.View"})]})," ",(0,c.jsx)(s.span,{className:"token attr-name",children:"entering"}),(0,c.jsxs)(s.span,{className:"token script language-javascript",children:[(0,c.jsx)(s.span,{className:"token script-punctuation punctuation",children:"="}),(0,c.jsx)(s.span,{className:"token punctuation",children:"{"}),(0,c.jsx)(s.span,{className:"token maybe-class-name",children:"Swing"}),(0,c.jsx)(s.span,{className:"token punctuation",children:"."}),(0,c.jsx)(s.span,{className:"token method function property-access",children:"delay"}),(0,c.jsx)(s.span,{className:"token punctuation",children:"("}),"delay ",(0,c.jsx)(s.span,{className:"token operator",children:"*"})," ",(0,c.jsx)(s.span,{className:"token number",children:"1"}),(0,c.jsx)(s.span,{className:"token punctuation",children:")"}),(0,c.jsx)(s.span,{className:"token punctuation",children:"}"})]}),(0,c.jsx)(s.span,{className:"token punctuation",children:">"})]}),(0,c.jsx)(s.span,{className:"token plain-text",children:"\n"})]}),(0,c.jsxs)(s.span,{className:"code-line",children:[(0,c.jsx)(s.span,{className:"token plain-text",children:"        "}),(0,c.jsx)(s.span,{className:"token punctuation",children:"{"}),"score ",(0,c.jsx)(s.span,{className:"token operator",children:"<"})," ",(0,c.jsx)(s.span,{className:"token number",children:"2"})," ",(0,c.jsx)(s.span,{className:"token operator",children:"?"})," ",(0,c.jsxs)(s.span,{className:"token tag",children:[(0,c.jsxs)(s.span,{className:"token tag",children:[(0,c.jsx)(s.span,{className:"token punctuation",children:"<"}),(0,c.jsx)(s.span,{className:"token class-name",children:"GrayStar"})]})," ",(0,c.jsx)(s.span,{className:"token punctuation",children:"/>"})]})," ",(0,c.jsx)(s.span,{className:"token operator",children:":"})," ",(0,c.jsxs)(s.span,{className:"token tag",children:[(0,c.jsxs)(s.span,{className:"token tag",children:[(0,c.jsx)(s.span,{className:"token punctuation",children:"<"}),(0,c.jsx)(s.span,{className:"token class-name",children:"GoldStar"})]})," ",(0,c.jsx)(s.span,{className:"token punctuation",children:"/>"})]}),(0,c.jsx)(s.span,{className:"token punctuation",children:"}"}),(0,c.jsx)(s.span,{className:"token plain-text",children:"\n"})]}),(0,c.jsxs)(s.span,{className:"code-line",children:[(0,c.jsx)(s.span,{className:"token plain-text",children:"      "}),(0,c.jsxs)(s.span,{className:"token tag",children:[(0,c.jsxs)(s.span,{className:"token tag",children:[(0,c.jsx)(s.span,{className:"token punctuation",children:"</"}),(0,c.jsx)(s.span,{className:"token class-name",children:"Animated.View"})]}),(0,c.jsx)(s.span,{className:"token punctuation",children:">"})]}),(0,c.jsx)(s.span,{className:"token plain-text",children:"\n"})]}),(0,c.jsx)(s.span,{className:"code-line",children:(0,c.jsx)(s.span,{className:"token plain-text",children:"\n"})}),(0,c.jsxs)(s.span,{className:"code-line highlight-line",children:[(0,c.jsx)(s.span,{className:"token plain-text",children:"      "}),(0,c.jsxs)(s.span,{className:"token tag",children:[(0,c.jsxs)(s.span,{className:"token tag",children:[(0,c.jsx)(s.span,{className:"token punctuation",children:"<"}),(0,c.jsx)(s.span,{className:"token class-name",children:"Animated.View"})]})," ",(0,c.jsx)(s.span,{className:"token attr-name",children:"entering"}),(0,c.jsxs)(s.span,{className:"token script language-javascript",children:[(0,c.jsx)(s.span,{className:"token script-punctuation punctuation",children:"="}),(0,c.jsx)(s.span,{className:"token punctuation",children:"{"}),(0,c.jsx)(s.span,{className:"token maybe-class-name",children:"Swing"}),(0,c.jsx)(s.span,{className:"token punctuation",children:"."}),(0,c.jsx)(s.span,{className:"token method function property-access",children:"delay"}),(0,c.jsx)(s.span,{className:"token punctuation",children:"("}),"delay ",(0,c.jsx)(s.span,{className:"token operator",children:"*"})," ",(0,c.jsx)(s.span,{className:"token number",children:"2"}),(0,c.jsx)(s.span,{className:"token punctuation",children:")"}),(0,c.jsx)(s.span,{className:"token punctuation",children:"}"})]}),(0,c.jsx)(s.span,{className:"token punctuation",children:">"})]}),(0,c.jsx)(s.span,{className:"token plain-text",children:"\n"})]}),(0,c.jsxs)(s.span,{className:"code-line",children:[(0,c.jsx)(s.span,{className:"token plain-text",children:"        "}),(0,c.jsx)(s.span,{className:"token punctuation",children:"{"}),"score ",(0,c.jsx)(s.span,{className:"token operator",children:"<"})," ",(0,c.jsx)(s.span,{className:"token number",children:"3"})," ",(0,c.jsx)(s.span,{className:"token operator",children:"?"})," ",(0,c.jsxs)(s.span,{className:"token tag",children:[(0,c.jsxs)(s.span,{className:"token tag",children:[(0,c.jsx)(s.span,{className:"token punctuation",children:"<"}),(0,c.jsx)(s.span,{className:"token class-name",children:"GrayStar"})]})," ",(0,c.jsx)(s.span,{className:"token punctuation",children:"/>"})]})," ",(0,c.jsx)(s.span,{className:"token operator",children:":"})," ",(0,c.jsxs)(s.span,{className:"token tag",children:[(0,c.jsxs)(s.span,{className:"token tag",children:[(0,c.jsx)(s.span,{className:"token punctuation",children:"<"}),(0,c.jsx)(s.span,{className:"token class-name",children:"GoldStar"})]})," ",(0,c.jsx)(s.span,{className:"token punctuation",children:"/>"})]}),(0,c.jsx)(s.span,{className:"token punctuation",children:"}"}),(0,c.jsx)(s.span,{className:"token plain-text",children:"\n"})]}),(0,c.jsxs)(s.span,{className:"code-line",children:[(0,c.jsx)(s.span,{className:"token plain-text",children:"      "}),(0,c.jsxs)(s.span,{className:"token tag",children:[(0,c.jsxs)(s.span,{className:"token tag",children:[(0,c.jsx)(s.span,{className:"token punctuation",children:"</"}),(0,c.jsx)(s.span,{className:"token class-name",children:"Animated.View"})]}),(0,c.jsx)(s.span,{className:"token punctuation",children:">"})]}),(0,c.jsx)(s.span,{className:"token plain-text",children:"\n"})]}),(0,c.jsxs)(s.span,{className:"code-line",children:[(0,c.jsx)(s.span,{className:"token plain-text",children:"    "}),(0,c.jsxs)(s.span,{className:"token tag",children:[(0,c.jsxs)(s.span,{className:"token tag",children:[(0,c.jsx)(s.span,{className:"token punctuation",children:"</"}),(0,c.jsx)(s.span,{className:"token class-name",children:"Stars"})]}),(0,c.jsx)(s.span,{className:"token punctuation",children:">"})]}),"\n"]}),(0,c.jsxs)(s.span,{className:"code-line",children:["  ",(0,c.jsx)(s.span,{className:"token punctuation",children:")"}),(0,c.jsx)(s.span,{className:"token punctuation",children:";"}),"\n"]}),(0,c.jsxs)(s.span,{className:"code-line",children:[(0,c.jsx)(s.span,{className:"token punctuation",children:"}"}),(0,c.jsx)(s.span,{className:"token punctuation",children:";"}),"\n"]})]})}),"\n",(0,c.jsxs)(s.p,{children:["…where ",(0,c.jsx)(s.code,{children:"Swing"})," is a custom ",(0,c.jsx)(s.a,{href:"https://docs.swmansion.com/react-native-reanimated/docs/api/LayoutAnimations/keyframeAnimations/",rel:"nofollow noopener noreferrer",target:"_blank",children:"keyframe"})," I created:"]}),"\n",(0,c.jsx)(s.pre,{className:"language-tsx",children:(0,c.jsxs)(s.code,{className:"language-tsx code-highlight",children:[(0,c.jsxs)(s.span,{className:"code-line",children:[(0,c.jsx)(s.span,{className:"token keyword",children:"const"})," ",(0,c.jsx)(s.span,{className:"token function-variable function",children:"Swing"})," ",(0,c.jsx)(s.span,{className:"token operator",children:"="})," ",(0,c.jsx)(s.span,{className:"token punctuation",children:"("}),(0,c.jsx)(s.span,{className:"token punctuation",children:")"})," ",(0,c.jsx)(s.span,{className:"token arrow operator",children:"=>"}),"\n"]}),(0,c.jsxs)(s.span,{className:"code-line",children:["  ",(0,c.jsx)(s.span,{className:"token keyword",children:"new"})," ",(0,c.jsx)(s.span,{className:"token class-name",children:"Keyframe"}),(0,c.jsx)(s.span,{className:"token punctuation",children:"("}),(0,c.jsx)(s.span,{className:"token punctuation",children:"{"}),"\n"]}),(0,c.jsxs)(s.span,{className:"code-line",children:["    ",(0,c.jsx)(s.span,{className:"token number",children:"0"}),(0,c.jsx)(s.span,{className:"token operator",children:":"})," ",(0,c.jsx)(s.span,{className:"token punctuation",children:"{"})," transform",(0,c.jsx)(s.span,{className:"token operator",children:":"})," ",(0,c.jsx)(s.span,{className:"token punctuation",children:"["}),(0,c.jsx)(s.span,{className:"token punctuation",children:"{"})," rotate",(0,c.jsx)(s.span,{className:"token operator",children:":"})," ",(0,c.jsx)(s.span,{className:"token string",children:'"0deg"'})," ",(0,c.jsx)(s.span,{className:"token punctuation",children:"}"}),(0,c.jsx)(s.span,{className:"token punctuation",children:"]"})," ",(0,c.jsx)(s.span,{className:"token punctuation",children:"}"}),(0,c.jsx)(s.span,{className:"token punctuation",children:","}),"\n"]}),(0,c.jsxs)(s.span,{className:"code-line",children:["    ",(0,c.jsx)(s.span,{className:"token number",children:"20"}),(0,c.jsx)(s.span,{className:"token operator",children:":"})," ",(0,c.jsx)(s.span,{className:"token punctuation",children:"{"})," transform",(0,c.jsx)(s.span,{className:"token operator",children:":"})," ",(0,c.jsx)(s.span,{className:"token punctuation",children:"["}),(0,c.jsx)(s.span,{className:"token punctuation",children:"{"})," rotate",(0,c.jsx)(s.span,{className:"token operator",children:":"})," ",(0,c.jsx)(s.span,{className:"token string",children:'"15deg"'})," ",(0,c.jsx)(s.span,{className:"token punctuation",children:"}"}),(0,c.jsx)(s.span,{className:"token punctuation",children:"]"})," ",(0,c.jsx)(s.span,{className:"token punctuation",children:"}"}),(0,c.jsx)(s.span,{className:"token punctuation",children:","}),"\n"]}),(0,c.jsxs)(s.span,{className:"code-line",children:["    ",(0,c.jsx)(s.span,{className:"token number",children:"40"}),(0,c.jsx)(s.span,{className:"token operator",children:":"})," ",(0,c.jsx)(s.span,{className:"token punctuation",children:"{"})," transform",(0,c.jsx)(s.span,{className:"token operator",children:":"})," ",(0,c.jsx)(s.span,{className:"token punctuation",children:"["}),(0,c.jsx)(s.span,{className:"token punctuation",children:"{"})," rotate",(0,c.jsx)(s.span,{className:"token operator",children:":"})," ",(0,c.jsx)(s.span,{className:"token string",children:'"-10deg"'})," ",(0,c.jsx)(s.span,{className:"token punctuation",children:"}"}),(0,c.jsx)(s.span,{className:"token punctuation",children:"]"})," ",(0,c.jsx)(s.span,{className:"token punctuation",children:"}"}),(0,c.jsx)(s.span,{className:"token punctuation",children:","}),"\n"]}),(0,c.jsxs)(s.span,{className:"code-line",children:["    ",(0,c.jsx)(s.span,{className:"token number",children:"60"}),(0,c.jsx)(s.span,{className:"token operator",children:":"})," ",(0,c.jsx)(s.span,{className:"token punctuation",children:"{"})," transform",(0,c.jsx)(s.span,{className:"token operator",children:":"})," ",(0,c.jsx)(s.span,{className:"token punctuation",children:"["}),(0,c.jsx)(s.span,{className:"token punctuation",children:"{"})," rotate",(0,c.jsx)(s.span,{className:"token operator",children:":"})," ",(0,c.jsx)(s.span,{className:"token string",children:'"5deg"'})," ",(0,c.jsx)(s.span,{className:"token punctuation",children:"}"}),(0,c.jsx)(s.span,{className:"token punctuation",children:"]"})," ",(0,c.jsx)(s.span,{className:"token punctuation",children:"}"}),(0,c.jsx)(s.span,{className:"token punctuation",children:","}),"\n"]}),(0,c.jsxs)(s.span,{className:"code-line",children:["    ",(0,c.jsx)(s.span,{className:"token number",children:"80"}),(0,c.jsx)(s.span,{className:"token operator",children:":"})," ",(0,c.jsx)(s.span,{className:"token punctuation",children:"{"})," transform",(0,c.jsx)(s.span,{className:"token operator",children:":"})," ",(0,c.jsx)(s.span,{className:"token punctuation",children:"["}),(0,c.jsx)(s.span,{className:"token punctuation",children:"{"})," rotate",(0,c.jsx)(s.span,{className:"token operator",children:":"})," ",(0,c.jsx)(s.span,{className:"token string",children:'"-5deg"'})," ",(0,c.jsx)(s.span,{className:"token punctuation",children:"}"}),(0,c.jsx)(s.span,{className:"token punctuation",children:"]"})," ",(0,c.jsx)(s.span,{className:"token punctuation",children:"}"}),(0,c.jsx)(s.span,{className:"token punctuation",children:","}),"\n"]}),(0,c.jsxs)(s.span,{className:"code-line",children:["    ",(0,c.jsx)(s.span,{className:"token number",children:"100"}),(0,c.jsx)(s.span,{className:"token operator",children:":"})," ",(0,c.jsx)(s.span,{className:"token punctuation",children:"{"})," transform",(0,c.jsx)(s.span,{className:"token operator",children:":"})," ",(0,c.jsx)(s.span,{className:"token punctuation",children:"["}),(0,c.jsx)(s.span,{className:"token punctuation",children:"{"})," rotate",(0,c.jsx)(s.span,{className:"token operator",children:":"})," ",(0,c.jsx)(s.span,{className:"token string",children:'"0deg"'})," ",(0,c.jsx)(s.span,{className:"token punctuation",children:"}"}),(0,c.jsx)(s.span,{className:"token punctuation",children:"]"})," ",(0,c.jsx)(s.span,{className:"token punctuation",children:"}"}),(0,c.jsx)(s.span,{className:"token punctuation",children:","}),"\n"]}),(0,c.jsxs)(s.span,{className:"code-line",children:["  ",(0,c.jsx)(s.span,{className:"token punctuation",children:"}"}),(0,c.jsx)(s.span,{className:"token punctuation",children:")"}),(0,c.jsx)(s.span,{className:"token punctuation",children:";"}),"\n"]})]})}),"\n",(0,c.jsxs)(s.h3,{id:"monetization",children:[(0,c.jsx)(s.a,{"aria-hidden":"true",tabIndex:"-1",href:"#monetization",children:(0,c.jsx)(s.span,{className:"icon icon-link"})}),"Monetization"]}),"\n",(0,c.jsx)(s.p,{children:"After the gameplay was implemented, I started working on integrating ads into the application using Google’s AdMob platform. The monetization model is pretty standard in the mobile industry. I decided to show:"}),"\n",(0,c.jsxs)(s.ul,{children:["\n",(0,c.jsx)(s.li,{children:"an Interstitial Ad when the user completes a level (cap at 1 impression every 5 minutes per user);"}),"\n",(0,c.jsx)(s.li,{children:"a Rewarded Ad to unlock the solution w/ solver."}),"\n"]}),"\n",(0,c.jsxs)(s.p,{children:["I used ",(0,c.jsx)(s.a,{href:"https://github.com/invertase/react-native-google-mobile-ads",rel:"nofollow noopener noreferrer",target:"_blank",children:(0,c.jsx)(s.code,{children:"react-native-google-mobile-ads"})})," (and had a chance to contribute a little bit to the library as well!) to implement the advertising."]}),"\n",(0,c.jsxs)(s.h4,{id:"interstitial-ad",children:[(0,c.jsx)(s.a,{"aria-hidden":"true",tabIndex:"-1",href:"#interstitial-ad",children:(0,c.jsx)(s.span,{className:"icon icon-link"})}),"Interstitial Ad"]}),"\n",(0,c.jsx)(s.p,{children:"I created a hook to easily check whether the advertisement has been watched or not."}),"\n",(0,c.jsx)(s.pre,{className:"language-tsx",children:(0,c.jsxs)(s.code,{className:"language-tsx code-highlight",children:[(0,c.jsxs)(s.span,{className:"code-line",children:[(0,c.jsx)(s.span,{className:"token keyword",children:"function"})," ",(0,c.jsx)(s.span,{className:"token function",children:"useInterstitialAd"}),(0,c.jsx)(s.span,{className:"token punctuation",children:"("}),(0,c.jsx)(s.span,{className:"token punctuation",children:")"})," ",(0,c.jsx)(s.span,{className:"token punctuation",children:"{"}),"\n"]}),(0,c.jsxs)(s.span,{className:"code-line",children:["  ",(0,c.jsx)(s.span,{className:"token keyword",children:"const"})," ",(0,c.jsx)(s.span,{className:"token punctuation",children:"{"})," isLoaded",(0,c.jsx)(s.span,{className:"token punctuation",children:","})," isClosed",(0,c.jsx)(s.span,{className:"token punctuation",children:","})," error",(0,c.jsx)(s.span,{className:"token punctuation",children:","})," load",(0,c.jsx)(s.span,{className:"token punctuation",children:","})," show ",(0,c.jsx)(s.span,{className:"token punctuation",children:"}"})," ",(0,c.jsx)(s.span,{className:"token operator",children:"="})," ",(0,c.jsx)(s.span,{className:"token function",children:"nativeUseInterstitialAd"}),(0,c.jsx)(s.span,{className:"token punctuation",children:"("}),"\n"]}),(0,c.jsxs)(s.span,{className:"code-line",children:["    ",(0,c.jsx)(s.span,{className:"token string",children:'"<AD_UNIT_ID>"'}),(0,c.jsx)(s.span,{className:"token punctuation",children:","}),"\n"]}),(0,c.jsxs)(s.span,{className:"code-line",children:["    ",(0,c.jsx)(s.span,{className:"token punctuation",children:"{"}),"\n"]}),(0,c.jsxs)(s.span,{className:"code-line",children:["      requestNonPersonalizedAdsOnly",(0,c.jsx)(s.span,{className:"token operator",children:":"})," ",(0,c.jsx)(s.span,{className:"token boolean",children:"true"}),(0,c.jsx)(s.span,{className:"token punctuation",children:","}),"\n"]}),(0,c.jsxs)(s.span,{className:"code-line",children:["    ",(0,c.jsx)(s.span,{className:"token punctuation",children:"}"}),"\n"]}),(0,c.jsxs)(s.span,{className:"code-line",children:["  ",(0,c.jsx)(s.span,{className:"token punctuation",children:")"}),(0,c.jsx)(s.span,{className:"token punctuation",children:";"}),"\n"]}),(0,c.jsx)(s.span,{className:"code-line",children:"\n"}),(0,c.jsxs)(s.span,{className:"code-line",children:["  ",(0,c.jsx)(s.span,{className:"token keyword",children:"const"})," isError ",(0,c.jsx)(s.span,{className:"token operator",children:"="})," error ",(0,c.jsx)(s.span,{className:"token operator",children:"!=="})," ",(0,c.jsx)(s.span,{className:"token keyword",children:"undefined"}),(0,c.jsx)(s.span,{className:"token punctuation",children:";"}),"\n"]}),(0,c.jsxs)(s.span,{className:"code-line",children:["  ",(0,c.jsx)(s.span,{className:"token keyword",children:"const"})," isAdWatched ",(0,c.jsx)(s.span,{className:"token operator",children:"="})," isClosed ",(0,c.jsx)(s.span,{className:"token operator",children:"||"})," isError",(0,c.jsx)(s.span,{className:"token punctuation",children:";"}),"\n"]}),(0,c.jsx)(s.span,{className:"code-line",children:"\n"}),(0,c.jsxs)(s.span,{className:"code-line",children:["  ",(0,c.jsx)(s.span,{className:"token comment",children:"// Start loading the interstitial straight away:"}),"\n"]}),(0,c.jsxs)(s.span,{className:"code-line",children:["  ",(0,c.jsx)(s.span,{className:"token maybe-class-name",children:"React"}),(0,c.jsx)(s.span,{className:"token punctuation",children:"."}),(0,c.jsx)(s.span,{className:"token method function property-access",children:"useEffect"}),(0,c.jsx)(s.span,{className:"token punctuation",children:"("}),(0,c.jsx)(s.span,{className:"token punctuation",children:"("}),(0,c.jsx)(s.span,{className:"token punctuation",children:")"})," ",(0,c.jsx)(s.span,{className:"token arrow operator",children:"=>"})," ",(0,c.jsx)(s.span,{className:"token punctuation",children:"{"}),"\n"]}),(0,c.jsxs)(s.span,{className:"code-line",children:["    ",(0,c.jsx)(s.span,{className:"token function",children:"load"}),(0,c.jsx)(s.span,{className:"token punctuation",children:"("}),(0,c.jsx)(s.span,{className:"token punctuation",children:")"}),(0,c.jsx)(s.span,{className:"token punctuation",children:";"}),"\n"]}),(0,c.jsxs)(s.span,{className:"code-line",children:["  ",(0,c.jsx)(s.span,{className:"token punctuation",children:"}"}),(0,c.jsx)(s.span,{className:"token punctuation",children:","})," ",(0,c.jsx)(s.span,{className:"token punctuation",children:"["}),"load",(0,c.jsx)(s.span,{className:"token punctuation",children:"]"}),(0,c.jsx)(s.span,{className:"token punctuation",children:")"}),(0,c.jsx)(s.span,{className:"token punctuation",children:";"}),"\n"]}),(0,c.jsx)(s.span,{className:"code-line",children:"\n"}),(0,c.jsxs)(s.span,{className:"code-line",children:["  ",(0,c.jsx)(s.span,{className:"token comment",children:"// Show the interstitial once loaded:"}),"\n"]}),(0,c.jsxs)(s.span,{className:"code-line",children:["  ",(0,c.jsx)(s.span,{className:"token maybe-class-name",children:"React"}),(0,c.jsx)(s.span,{className:"token punctuation",children:"."}),(0,c.jsx)(s.span,{className:"token method function property-access",children:"useEffect"}),(0,c.jsx)(s.span,{className:"token punctuation",children:"("}),(0,c.jsx)(s.span,{className:"token punctuation",children:"("}),(0,c.jsx)(s.span,{className:"token punctuation",children:")"})," ",(0,c.jsx)(s.span,{className:"token arrow operator",children:"=>"})," ",(0,c.jsx)(s.span,{className:"token punctuation",children:"{"}),"\n"]}),(0,c.jsxs)(s.span,{className:"code-line",children:["    ",(0,c.jsx)(s.span,{className:"token keyword",children:"if"})," ",(0,c.jsx)(s.span,{className:"token punctuation",children:"("}),"isLoaded",(0,c.jsx)(s.span,{className:"token punctuation",children:")"})," ",(0,c.jsx)(s.span,{className:"token punctuation",children:"{"}),"\n"]}),(0,c.jsxs)(s.span,{className:"code-line",children:["      ",(0,c.jsx)(s.span,{className:"token function",children:"show"}),(0,c.jsx)(s.span,{className:"token punctuation",children:"("}),(0,c.jsx)(s.span,{className:"token punctuation",children:")"}),(0,c.jsx)(s.span,{className:"token punctuation",children:";"}),"\n"]}),(0,c.jsxs)(s.span,{className:"code-line",children:["    ",(0,c.jsx)(s.span,{className:"token punctuation",children:"}"}),"\n"]}),(0,c.jsxs)(s.span,{className:"code-line",children:["  ",(0,c.jsx)(s.span,{className:"token punctuation",children:"}"}),(0,c.jsx)(s.span,{className:"token punctuation",children:","})," ",(0,c.jsx)(s.span,{className:"token punctuation",children:"["}),"isLoaded",(0,c.jsx)(s.span,{className:"token punctuation",children:","})," show",(0,c.jsx)(s.span,{className:"token punctuation",children:"]"}),(0,c.jsx)(s.span,{className:"token punctuation",children:")"}),(0,c.jsx)(s.span,{className:"token punctuation",children:";"}),"\n"]}),(0,c.jsx)(s.span,{className:"code-line",children:"\n"}),(0,c.jsxs)(s.span,{className:"code-line",children:["  ",(0,c.jsx)(s.span,{className:"token keyword",children:"return"})," ",(0,c.jsx)(s.span,{className:"token punctuation",children:"{"})," isAdWatched ",(0,c.jsx)(s.span,{className:"token punctuation",children:"}"}),(0,c.jsx)(s.span,{className:"token punctuation",children:";"}),"\n"]}),(0,c.jsxs)(s.span,{className:"code-line",children:[(0,c.jsx)(s.span,{className:"token punctuation",children:"}"}),"\n"]})]})}),"\n",(0,c.jsx)(s.p,{children:"…then, I could very simply disable the “Next level” button until the ad has been watched:"}),"\n",(0,c.jsx)(s.pre,{className:"language-tsx",children:(0,c.jsxs)(s.code,{className:"language-tsx code-highlight",children:[(0,c.jsxs)(s.span,{className:"code-line",children:[(0,c.jsx)(s.span,{className:"token keyword",children:"const"})," ",(0,c.jsx)(s.span,{className:"token punctuation",children:"{"})," isAdWatched ",(0,c.jsx)(s.span,{className:"token punctuation",children:"}"})," ",(0,c.jsx)(s.span,{className:"token operator",children:"="})," ",(0,c.jsx)(s.span,{className:"token function",children:"useInterstitialAd"}),(0,c.jsx)(s.span,{className:"token punctuation",children:"("}),(0,c.jsx)(s.span,{className:"token punctuation",children:")"}),(0,c.jsx)(s.span,{className:"token punctuation",children:";"}),"\n"]}),(0,c.jsx)(s.span,{className:"code-line",children:"\n"}),(0,c.jsxs)(s.span,{className:"code-line",children:[(0,c.jsxs)(s.span,{className:"token tag",children:[(0,c.jsxs)(s.span,{className:"token tag",children:[(0,c.jsx)(s.span,{className:"token punctuation",children:"<"}),(0,c.jsx)(s.span,{className:"token class-name",children:"Button"})]})," ",(0,c.jsx)(s.span,{className:"token attr-name",children:"disabled"}),(0,c.jsxs)(s.span,{className:"token script language-javascript",children:[(0,c.jsx)(s.span,{className:"token script-punctuation punctuation",children:"="}),(0,c.jsx)(s.span,{className:"token punctuation",children:"{"}),(0,c.jsx)(s.span,{className:"token operator",children:"!"}),"isAdWatched",(0,c.jsx)(s.span,{className:"token punctuation",children:"}"})]})," ",(0,c.jsx)(s.span,{className:"token attr-name",children:"onPress"}),(0,c.jsxs)(s.span,{className:"token script language-javascript",children:[(0,c.jsx)(s.span,{className:"token script-punctuation punctuation",children:"="}),(0,c.jsx)(s.span,{className:"token punctuation",children:"{"}),"handleExit",(0,c.jsx)(s.span,{className:"token punctuation",children:"}"})]}),(0,c.jsx)(s.span,{className:"token punctuation",children:">"})]}),(0,c.jsx)(s.span,{className:"token plain-text",children:"\n"})]}),(0,c.jsx)(s.span,{className:"code-line",children:(0,c.jsx)(s.span,{className:"token plain-text",children:"  Next level\n"})}),(0,c.jsxs)(s.span,{className:"code-line",children:[(0,c.jsx)(s.span,{className:"token plain-text"}),(0,c.jsxs)(s.span,{className:"token tag",children:[(0,c.jsxs)(s.span,{className:"token tag",children:[(0,c.jsx)(s.span,{className:"token punctuation",children:"</"}),(0,c.jsx)(s.span,{className:"token class-name",children:"Button"})]}),(0,c.jsx)(s.span,{className:"token punctuation",children:">"})]}),"\n"]})]})}),"\n",(0,c.jsxs)(s.h4,{id:"rewarded-ad",children:[(0,c.jsx)(s.a,{"aria-hidden":"true",tabIndex:"-1",href:"#rewarded-ad",children:(0,c.jsx)(s.span,{className:"icon icon-link"})}),"Rewarded Ad"]}),"\n",(0,c.jsx)(s.p,{children:"Rewarded ads need a trigger and an explicit user interaction to show. I decided to go with a React Render Props pattern for a nice DX:"}),"\n",(0,c.jsx)(s.pre,{className:"language-tsx",children:(0,c.jsxs)(s.code,{className:"language-tsx code-highlight",children:[(0,c.jsxs)(s.span,{className:"code-line",children:[(0,c.jsxs)(s.span,{className:"token tag",children:[(0,c.jsxs)(s.span,{className:"token tag",children:[(0,c.jsx)(s.span,{className:"token punctuation",children:"<"}),(0,c.jsx)(s.span,{className:"token class-name",children:"RewardedAd"})]})," ",(0,c.jsx)(s.span,{className:"token attr-name",children:"onSuccess"}),(0,c.jsxs)(s.span,{className:"token script language-javascript",children:[(0,c.jsx)(s.span,{className:"token script-punctuation punctuation",children:"="}),(0,c.jsx)(s.span,{className:"token punctuation",children:"{"}),"showSolution",(0,c.jsx)(s.span,{className:"token punctuation",children:"}"})]}),(0,c.jsx)(s.span,{className:"token punctuation",children:">"})]}),(0,c.jsx)(s.span,{className:"token plain-text",children:"\n"})]}),(0,c.jsxs)(s.span,{className:"code-line",children:[(0,c.jsx)(s.span,{className:"token plain-text",children:"  "}),(0,c.jsx)(s.span,{className:"token punctuation",children:"{"}),(0,c.jsx)(s.span,{className:"token punctuation",children:"("}),(0,c.jsx)(s.span,{className:"token punctuation",children:"{"})," trigger",(0,c.jsx)(s.span,{className:"token punctuation",children:","})," isAdLoading ",(0,c.jsx)(s.span,{className:"token punctuation",children:"}"}),(0,c.jsx)(s.span,{className:"token punctuation",children:")"})," ",(0,c.jsx)(s.span,{className:"token arrow operator",children:"=>"})," ",(0,c.jsx)(s.span,{className:"token punctuation",children:"("}),"\n"]}),(0,c.jsxs)(s.span,{className:"code-line",children:["    ",(0,c.jsxs)(s.span,{className:"token tag",children:[(0,c.jsxs)(s.span,{className:"token tag",children:[(0,c.jsx)(s.span,{className:"token punctuation",children:"<"}),(0,c.jsx)(s.span,{className:"token class-name",children:"ActionButton"})]})," ",(0,c.jsx)(s.span,{className:"token attr-name",children:"onPress"}),(0,c.jsxs)(s.span,{className:"token script language-javascript",children:[(0,c.jsx)(s.span,{className:"token script-punctuation punctuation",children:"="}),(0,c.jsx)(s.span,{className:"token punctuation",children:"{"}),"trigger",(0,c.jsx)(s.span,{className:"token punctuation",children:"}"})]})," ",(0,c.jsx)(s.span,{className:"token attr-name",children:"processing"}),(0,c.jsxs)(s.span,{className:"token script language-javascript",children:[(0,c.jsx)(s.span,{className:"token script-punctuation punctuation",children:"="}),(0,c.jsx)(s.span,{className:"token punctuation",children:"{"}),"isAdLoading",(0,c.jsx)(s.span,{className:"token punctuation",children:"}"})]}),(0,c.jsx)(s.span,{className:"token punctuation",children:">"})]}),(0,c.jsx)(s.span,{className:"token plain-text",children:"\n"})]}),(0,c.jsx)(s.span,{className:"code-line",children:(0,c.jsx)(s.span,{className:"token plain-text",children:"      Show solution\n"})}),(0,c.jsxs)(s.span,{className:"code-line",children:[(0,c.jsx)(s.span,{className:"token plain-text",children:"    "}),(0,c.jsxs)(s.span,{className:"token tag",children:[(0,c.jsxs)(s.span,{className:"token tag",children:[(0,c.jsx)(s.span,{className:"token punctuation",children:"</"}),(0,c.jsx)(s.span,{className:"token class-name",children:"ActionButton"})]}),(0,c.jsx)(s.span,{className:"token punctuation",children:">"})]}),"\n"]}),(0,c.jsxs)(s.span,{className:"code-line",children:["  ",(0,c.jsx)(s.span,{className:"token punctuation",children:")"}),(0,c.jsx)(s.span,{className:"token punctuation",children:"}"}),(0,c.jsx)(s.span,{className:"token plain-text",children:"\n"})]}),(0,c.jsxs)(s.span,{className:"code-line",children:[(0,c.jsx)(s.span,{className:"token plain-text"}),(0,c.jsxs)(s.span,{className:"token tag",children:[(0,c.jsxs)(s.span,{className:"token tag",children:[(0,c.jsx)(s.span,{className:"token punctuation",children:"</"}),(0,c.jsx)(s.span,{className:"token class-name",children:"RewardedAd"})]}),(0,c.jsx)(s.span,{className:"token punctuation",children:">"})]}),"\n"]})]})}),"\n",(0,c.jsxs)(s.p,{children:[(0,c.jsx)(s.code,{children:"RewardedAd"})," hides a lot of boilerplate, but basically, it listens for events and handles the various errors that can occur."]}),"\n",(0,c.jsxs)(s.h2,{id:"challenges",children:[(0,c.jsx)(s.a,{"aria-hidden":"true",tabIndex:"-1",href:"#challenges",children:(0,c.jsx)(s.span,{className:"icon icon-link"})}),"Challenges"]}),"\n",(0,c.jsxs)(s.h3,{id:"permissions",children:[(0,c.jsx)(s.a,{"aria-hidden":"true",tabIndex:"-1",href:"#permissions",children:(0,c.jsx)(s.span,{className:"icon icon-link"})}),"Permissions"]}),"\n",(0,c.jsx)(a,{type:"warning",children:(0,c.jsx)(s.p,{children:"By default, Expo adds a lot of unnecessary permission which can discourage the user from installing your application."})}),"\n",(0,c.jsxs)(s.p,{children:["Once released on Google Play, I noticed that the app had unnecessary permission listed. It required pretty much every permission available but needed none to work. To remove unused permissions, I had to modify ",(0,c.jsx)(s.code,{children:"android/app/src/main/AndroidManifest.xml"})," as follows (note the ",(0,c.jsx)(s.code,{children:'tools:node="remove"'})," on ",(0,c.jsx)(s.code,{children:"uses-permission"}),"):"]}),"\n",(0,c.jsx)(s.pre,{className:"language-xml",children:(0,c.jsxs)(s.code,{className:"language-xml code-highlight",children:[(0,c.jsxs)(s.span,{className:"code-line",children:[(0,c.jsxs)(s.span,{className:"token tag",children:[(0,c.jsxs)(s.span,{className:"token tag",children:[(0,c.jsx)(s.span,{className:"token punctuation",children:"<"}),"manifest"]})," ",(0,c.jsxs)(s.span,{className:"token attr-name",children:[(0,c.jsx)(s.span,{className:"token namespace",children:"xmlns:"}),"tools"]}),(0,c.jsxs)(s.span,{className:"token attr-value",children:[(0,c.jsx)(s.span,{className:"token punctuation attr-equals",children:"="}),(0,c.jsx)(s.span,{className:"token punctuation",children:'"'}),"http://schemas.android.com/tools",(0,c.jsx)(s.span,{className:"token punctuation",children:'"'})]})," ",(0,c.jsxs)(s.span,{className:"token attr-name",children:[(0,c.jsx)(s.span,{className:"token namespace",children:"xmlns:"}),"android"]}),(0,c.jsxs)(s.span,{className:"token attr-value",children:[(0,c.jsx)(s.span,{className:"token punctuation attr-equals",children:"="}),(0,c.jsx)(s.span,{className:"token punctuation",children:'"'}),"http://schemas.android.com/apk/res/android",(0,c.jsx)(s.span,{className:"token punctuation",children:'"'})]}),(0,c.jsx)(s.span,{className:"token punctuation",children:">"})]}),"\n"]}),(0,c.jsxs)(s.span,{className:"code-line",children:["  ",(0,c.jsxs)(s.span,{className:"token tag",children:[(0,c.jsxs)(s.span,{className:"token tag",children:[(0,c.jsx)(s.span,{className:"token punctuation",children:"<"}),"uses-permission"]})," ",(0,c.jsxs)(s.span,{className:"token attr-name",children:[(0,c.jsx)(s.span,{className:"token namespace",children:"android:"}),"name"]}),(0,c.jsxs)(s.span,{className:"token attr-value",children:[(0,c.jsx)(s.span,{className:"token punctuation attr-equals",children:"="}),(0,c.jsx)(s.span,{className:"token punctuation",children:'"'}),"android.permission.VIBRATE",(0,c.jsx)(s.span,{className:"token punctuation",children:'"'})]})," ",(0,c.jsx)(s.span,{className:"token punctuation",children:"/>"})]}),"\n"]}),(0,c.jsxs)(s.span,{className:"code-line",children:["  ",(0,c.jsxs)(s.span,{className:"token tag",children:[(0,c.jsxs)(s.span,{className:"token tag",children:[(0,c.jsx)(s.span,{className:"token punctuation",children:"<"}),"uses-permission"]})," ",(0,c.jsxs)(s.span,{className:"token attr-name",children:[(0,c.jsx)(s.span,{className:"token namespace",children:"android:"}),"name"]}),(0,c.jsxs)(s.span,{className:"token attr-value",children:[(0,c.jsx)(s.span,{className:"token punctuation attr-equals",children:"="}),(0,c.jsx)(s.span,{className:"token punctuation",children:'"'}),"android.permission.INTERNET",(0,c.jsx)(s.span,{className:"token punctuation",children:'"'})]})," ",(0,c.jsx)(s.span,{className:"token punctuation",children:"/>"})]}),"\n"]}),(0,c.jsxs)(s.span,{className:"code-line",children:["  ",(0,c.jsxs)(s.span,{className:"token tag",children:[(0,c.jsxs)(s.span,{className:"token tag",children:[(0,c.jsx)(s.span,{className:"token punctuation",children:"<"}),"uses-permission"]})," ",(0,c.jsxs)(s.span,{className:"token attr-name",children:[(0,c.jsx)(s.span,{className:"token namespace",children:"tools:"}),"node"]}),(0,c.jsxs)(s.span,{className:"token attr-value",children:[(0,c.jsx)(s.span,{className:"token punctuation attr-equals",children:"="}),(0,c.jsx)(s.span,{className:"token punctuation",children:'"'}),"remove",(0,c.jsx)(s.span,{className:"token punctuation",children:'"'})]})," ",(0,c.jsxs)(s.span,{className:"token attr-name",children:[(0,c.jsx)(s.span,{className:"token namespace",children:"android:"}),"name"]}),(0,c.jsxs)(s.span,{className:"token attr-value",children:[(0,c.jsx)(s.span,{className:"token punctuation attr-equals",children:"="}),(0,c.jsx)(s.span,{className:"token punctuation",children:'"'}),"android.permission.MODIFY_AUDIO_SETTINGS",(0,c.jsx)(s.span,{className:"token punctuation",children:'"'})]})," ",(0,c.jsx)(s.span,{className:"token punctuation",children:"/>"})]}),"\n"]}),(0,c.jsxs)(s.span,{className:"code-line",children:["  ",(0,c.jsxs)(s.span,{className:"token tag",children:[(0,c.jsxs)(s.span,{className:"token tag",children:[(0,c.jsx)(s.span,{className:"token punctuation",children:"<"}),"uses-permission"]})," ",(0,c.jsxs)(s.span,{className:"token attr-name",children:[(0,c.jsx)(s.span,{className:"token namespace",children:"tools:"}),"node"]}),(0,c.jsxs)(s.span,{className:"token attr-value",children:[(0,c.jsx)(s.span,{className:"token punctuation attr-equals",children:"="}),(0,c.jsx)(s.span,{className:"token punctuation",children:'"'}),"remove",(0,c.jsx)(s.span,{className:"token punctuation",children:'"'})]})," ",(0,c.jsxs)(s.span,{className:"token attr-name",children:[(0,c.jsx)(s.span,{className:"token namespace",children:"android:"}),"name"]}),(0,c.jsxs)(s.span,{className:"token attr-value",children:[(0,c.jsx)(s.span,{className:"token punctuation attr-equals",children:"="}),(0,c.jsx)(s.span,{className:"token punctuation",children:'"'}),"android.permission.READ_EXTERNAL_STORAGE",(0,c.jsx)(s.span,{className:"token punctuation",children:'"'})]})," ",(0,c.jsx)(s.span,{className:"token punctuation",children:"/>"})]}),"\n"]}),(0,c.jsxs)(s.span,{className:"code-line",children:["  ",(0,c.jsxs)(s.span,{className:"token tag",children:[(0,c.jsxs)(s.span,{className:"token tag",children:[(0,c.jsx)(s.span,{className:"token punctuation",children:"<"}),"uses-permission"]})," ",(0,c.jsxs)(s.span,{className:"token attr-name",children:[(0,c.jsx)(s.span,{className:"token namespace",children:"tools:"}),"node"]}),(0,c.jsxs)(s.span,{className:"token attr-value",children:[(0,c.jsx)(s.span,{className:"token punctuation attr-equals",children:"="}),(0,c.jsx)(s.span,{className:"token punctuation",children:'"'}),"remove",(0,c.jsx)(s.span,{className:"token punctuation",children:'"'})]})," ",(0,c.jsxs)(s.span,{className:"token attr-name",children:[(0,c.jsx)(s.span,{className:"token namespace",children:"android:"}),"name"]}),(0,c.jsxs)(s.span,{className:"token attr-value",children:[(0,c.jsx)(s.span,{className:"token punctuation attr-equals",children:"="}),(0,c.jsx)(s.span,{className:"token punctuation",children:'"'}),"android.permission.READ_PHONE_STATE",(0,c.jsx)(s.span,{className:"token punctuation",children:'"'})]})," ",(0,c.jsx)(s.span,{className:"token punctuation",children:"/>"})]}),"\n"]}),(0,c.jsxs)(s.span,{className:"code-line",children:["  ",(0,c.jsxs)(s.span,{className:"token tag",children:[(0,c.jsxs)(s.span,{className:"token tag",children:[(0,c.jsx)(s.span,{className:"token punctuation",children:"<"}),"uses-permission"]})," ",(0,c.jsxs)(s.span,{className:"token attr-name",children:[(0,c.jsx)(s.span,{className:"token namespace",children:"tools:"}),"node"]}),(0,c.jsxs)(s.span,{className:"token attr-value",children:[(0,c.jsx)(s.span,{className:"token punctuation attr-equals",children:"="}),(0,c.jsx)(s.span,{className:"token punctuation",children:'"'}),"remove",(0,c.jsx)(s.span,{className:"token punctuation",children:'"'})]})," ",(0,c.jsxs)(s.span,{className:"token attr-name",children:[(0,c.jsx)(s.span,{className:"token namespace",children:"android:"}),"name"]}),(0,c.jsxs)(s.span,{className:"token attr-value",children:[(0,c.jsx)(s.span,{className:"token punctuation attr-equals",children:"="}),(0,c.jsx)(s.span,{className:"token punctuation",children:'"'}),"android.permission.RECORD_AUDIO",(0,c.jsx)(s.span,{className:"token punctuation",children:'"'})]})," ",(0,c.jsx)(s.span,{className:"token punctuation",children:"/>"})]}),"\n"]}),(0,c.jsxs)(s.span,{className:"code-line",children:["  ",(0,c.jsxs)(s.span,{className:"token tag",children:[(0,c.jsxs)(s.span,{className:"token tag",children:[(0,c.jsx)(s.span,{className:"token punctuation",children:"<"}),"uses-permission"]})," ",(0,c.jsxs)(s.span,{className:"token attr-name",children:[(0,c.jsx)(s.span,{className:"token namespace",children:"tools:"}),"node"]}),(0,c.jsxs)(s.span,{className:"token attr-value",children:[(0,c.jsx)(s.span,{className:"token punctuation attr-equals",children:"="}),(0,c.jsx)(s.span,{className:"token punctuation",children:'"'}),"remove",(0,c.jsx)(s.span,{className:"token punctuation",children:'"'})]})," ",(0,c.jsxs)(s.span,{className:"token attr-name",children:[(0,c.jsx)(s.span,{className:"token namespace",children:"android:"}),"name"]}),(0,c.jsxs)(s.span,{className:"token attr-value",children:[(0,c.jsx)(s.span,{className:"token punctuation attr-equals",children:"="}),(0,c.jsx)(s.span,{className:"token punctuation",children:'"'}),"android.permission.SYSTEM_ALERT_WINDOW",(0,c.jsx)(s.span,{className:"token punctuation",children:'"'})]})," ",(0,c.jsx)(s.span,{className:"token punctuation",children:"/>"})]}),"\n"]}),(0,c.jsxs)(s.span,{className:"code-line",children:["  ",(0,c.jsxs)(s.span,{className:"token tag",children:[(0,c.jsxs)(s.span,{className:"token tag",children:[(0,c.jsx)(s.span,{className:"token punctuation",children:"<"}),"uses-permission"]})," ",(0,c.jsxs)(s.span,{className:"token attr-name",children:[(0,c.jsx)(s.span,{className:"token namespace",children:"tools:"}),"node"]}),(0,c.jsxs)(s.span,{className:"token attr-value",children:[(0,c.jsx)(s.span,{className:"token punctuation attr-equals",children:"="}),(0,c.jsx)(s.span,{className:"token punctuation",children:'"'}),"remove",(0,c.jsx)(s.span,{className:"token punctuation",children:'"'})]})," ",(0,c.jsxs)(s.span,{className:"token attr-name",children:[(0,c.jsx)(s.span,{className:"token namespace",children:"android:"}),"name"]}),(0,c.jsxs)(s.span,{className:"token attr-value",children:[(0,c.jsx)(s.span,{className:"token punctuation attr-equals",children:"="}),(0,c.jsx)(s.span,{className:"token punctuation",children:'"'}),"android.permission.WRITE_EXTERNAL_STORAGE",(0,c.jsx)(s.span,{className:"token punctuation",children:'"'})]})," ",(0,c.jsx)(s.span,{className:"token punctuation",children:"/>"})]}),"\n"]}),(0,c.jsxs)(s.span,{className:"code-line",children:[(0,c.jsxs)(s.span,{className:"token tag",children:[(0,c.jsxs)(s.span,{className:"token tag",children:[(0,c.jsx)(s.span,{className:"token punctuation",children:"</"}),"manifest"]}),(0,c.jsx)(s.span,{className:"token punctuation",children:">"})]}),"\n"]})]})}),"\n",(0,c.jsxs)(s.h3,{id:"performance",children:[(0,c.jsx)(s.a,{"aria-hidden":"true",tabIndex:"-1",href:"#performance",children:(0,c.jsx)(s.span,{className:"icon icon-link"})}),"Performance"]}),"\n",(0,c.jsxs)(s.p,{children:["I use my old ",(0,c.jsx)(s.a,{href:"https://www.gsmchoice.com/en/catalogue/asus/zenfone3maxzc520tl/",rel:"nofollow noopener noreferrer",target:"_blank",children:"Asus ZenFone 3 Max 5.2"})," as a benchmark – if a game works nicely on this device, I can sleep soundly because it means it will run on pretty much anything. My aim I always to get a stable 60 FPS for a nice user experience."]}),"\n",(0,c.jsx)(s.p,{children:"It was quite hard to achieve at first for several reasons:"}),"\n",(0,c.jsxs)(s.ol,{children:["\n",(0,c.jsxs)(s.li,{children:[(0,c.jsxs)(s.strong,{children:["Initially, I used ",(0,c.jsx)(s.a,{href:"https://github.com/oblador/react-native-animatable",rel:"nofollow noopener noreferrer",target:"_blank",children:(0,c.jsx)(s.code,{children:"react-native-animatable"})})," for animations:"]})," it had noticeably worse performance than ",(0,c.jsx)(s.code,{children:"react-native-reanimated"}),";"]}),"\n",(0,c.jsxs)(s.li,{children:[(0,c.jsx)(s.strong,{children:"There were some redundant re-renders:"})," once I memorized some expensive components and calculation results, it improved the performance;"]}),"\n",(0,c.jsxs)(s.li,{children:[(0,c.jsxs)(s.strong,{children:["I was using JSC instead of ",(0,c.jsx)(s.a,{href:"https://engineering.fb.com/2019/07/12/android/hermes/",rel:"nofollow noopener noreferrer",target:"_blank",children:"Hermes"}),":"]})," once I migrated to Hermes, the performance improved greatly. Also, ",(0,c.jsx)("abbr",{title:"Time to Interaction",children:"TTI"}),", application size and memory utilization decreased a lot;"]}),"\n"]}),"\n",(0,c.jsx)(s.p,{children:"It turned out that React Native with Hermes can perform well enough to provide a nice UX, even on my old phone."}),"\n",(0,c.jsxs)(s.h3,{id:"sounds",children:[(0,c.jsx)(s.a,{"aria-hidden":"true",tabIndex:"-1",href:"#sounds",children:(0,c.jsx)(s.span,{className:"icon icon-link"})}),"Sounds"]}),"\n",(0,c.jsxs)(s.p,{children:["There’s an issue with playing the same ",(0,c.jsx)(s.a,{href:"https://docs.expo.dev/versions/latest/sdk/audio/",rel:"nofollow noopener noreferrer",target:"_blank",children:(0,c.jsx)(s.code,{children:"Audio"})})," multiple times: the sound works well the first time, but the other times it seems that the sound isn’t playing from the start but has a shift of some milliseconds."]}),"\n",(0,c.jsxs)(s.p,{children:["The solution I use is to preload multiple copies of ",(0,c.jsx)(s.a,{href:"https://docs.expo.dev/versions/latest/sdk/audio/",rel:"nofollow noopener noreferrer",target:"_blank",children:(0,c.jsx)(s.code,{children:"Audio"})})," and play the next sample when needed. My implementation looks as follows:"]}),"\n",(0,c.jsx)(s.pre,{className:"language-ts",children:(0,c.jsxs)(s.code,{className:"language-ts code-highlight",children:[(0,c.jsxs)(s.span,{className:"code-line",children:[(0,c.jsx)(s.span,{className:"token keyword",children:"import"})," ",(0,c.jsx)(s.span,{className:"token punctuation",children:"{"})," Audio ",(0,c.jsx)(s.span,{className:"token punctuation",children:"}"})," ",(0,c.jsx)(s.span,{className:"token keyword",children:"from"})," ",(0,c.jsx)(s.span,{className:"token string",children:'"expo-av"'}),(0,c.jsx)(s.span,{className:"token punctuation",children:";"}),"\n"]}),(0,c.jsxs)(s.span,{className:"code-line",children:[(0,c.jsx)(s.span,{className:"token keyword",children:"import"})," ",(0,c.jsx)(s.span,{className:"token punctuation",children:"{"})," AVPlaybackSource ",(0,c.jsx)(s.span,{className:"token punctuation",children:"}"})," ",(0,c.jsx)(s.span,{className:"token keyword",children:"from"})," ",(0,c.jsx)(s.span,{className:"token string",children:'"expo-av/build/AV"'}),(0,c.jsx)(s.span,{className:"token punctuation",children:";"}),"\n"]}),(0,c.jsx)(s.span,{className:"code-line",children:"\n"}),(0,c.jsxs)(s.span,{className:"code-line",children:[(0,c.jsx)(s.span,{className:"token keyword",children:"class"})," ",(0,c.jsx)(s.span,{className:"token class-name",children:"Sound"})," ",(0,c.jsx)(s.span,{className:"token punctuation",children:"{"}),"\n"]}),(0,c.jsxs)(s.span,{className:"code-line",children:["  ",(0,c.jsx)(s.span,{className:"token keyword",children:"static"})," ",(0,c.jsx)(s.span,{className:"token constant",children:"COPIES"})," ",(0,c.jsx)(s.span,{className:"token operator",children:"="})," ",(0,c.jsx)(s.span,{className:"token number",children:"3"}),(0,c.jsx)(s.span,{className:"token punctuation",children:";"}),"\n"]}),(0,c.jsxs)(s.span,{className:"code-line",children:["  ",(0,c.jsx)(s.span,{className:"token keyword",children:"static"})," ",(0,c.jsx)(s.span,{className:"token constant",children:"INDEX"})," ",(0,c.jsx)(s.span,{className:"token operator",children:"="})," ",(0,c.jsx)(s.span,{className:"token number",children:"0"}),(0,c.jsx)(s.span,{className:"token punctuation",children:";"}),"\n"]}),(0,c.jsxs)(s.span,{className:"code-line",children:["  ",(0,c.jsx)(s.span,{className:"token keyword",children:"static"})," assets",(0,c.jsx)(s.span,{className:"token operator",children:":"})," Record",(0,c.jsx)(s.span,{className:"token operator",children:"<"}),(0,c.jsx)(s.span,{className:"token builtin",children:"string"}),(0,c.jsx)(s.span,{className:"token punctuation",children:","})," Audio",(0,c.jsx)(s.span,{className:"token punctuation",children:"."}),"Sound",(0,c.jsx)(s.span,{className:"token operator",children:">"})," ",(0,c.jsx)(s.span,{className:"token operator",children:"="})," ",(0,c.jsx)(s.span,{className:"token punctuation",children:"{"}),(0,c.jsx)(s.span,{className:"token punctuation",children:"}"}),(0,c.jsx)(s.span,{className:"token punctuation",children:";"}),"\n"]}),(0,c.jsx)(s.span,{className:"code-line",children:"\n"}),(0,c.jsxs)(s.span,{className:"code-line",children:["  ",(0,c.jsx)(s.span,{className:"token keyword",children:"static"})," ",(0,c.jsx)(s.span,{className:"token function",children:"loadAsync"}),(0,c.jsx)(s.span,{className:"token punctuation",children:"("}),"library",(0,c.jsx)(s.span,{className:"token operator",children:":"})," Record",(0,c.jsx)(s.span,{className:"token operator",children:"<"}),(0,c.jsx)(s.span,{className:"token builtin",children:"string"}),(0,c.jsx)(s.span,{className:"token punctuation",children:","})," AVPlaybackSource",(0,c.jsx)(s.span,{className:"token operator",children:">"}),(0,c.jsx)(s.span,{className:"token punctuation",children:")"})," ",(0,c.jsx)(s.span,{className:"token punctuation",children:"{"}),"\n"]}),(0,c.jsxs)(s.span,{className:"code-line",children:["    ",(0,c.jsx)(s.span,{className:"token keyword",children:"const"})," promisesForCopies ",(0,c.jsx)(s.span,{className:"token operator",children:"="})," Object",(0,c.jsx)(s.span,{className:"token punctuation",children:"."}),(0,c.jsx)(s.span,{className:"token function",children:"entries"}),(0,c.jsx)(s.span,{className:"token punctuation",children:"("}),"library",(0,c.jsx)(s.span,{className:"token punctuation",children:")"}),(0,c.jsx)(s.span,{className:"token punctuation",children:"."}),(0,c.jsx)(s.span,{className:"token function",children:"flatMap"}),(0,c.jsx)(s.span,{className:"token punctuation",children:"("}),"\n"]}),(0,c.jsxs)(s.span,{className:"code-line",children:["      ",(0,c.jsx)(s.span,{className:"token punctuation",children:"("}),(0,c.jsx)(s.span,{className:"token punctuation",children:"["}),"name",(0,c.jsx)(s.span,{className:"token punctuation",children:","})," path",(0,c.jsx)(s.span,{className:"token punctuation",children:"]"}),(0,c.jsx)(s.span,{className:"token operator",children:":"})," ",(0,c.jsx)(s.span,{className:"token punctuation",children:"["}),(0,c.jsx)(s.span,{className:"token builtin",children:"string"}),(0,c.jsx)(s.span,{className:"token punctuation",children:","})," AVPlaybackSource",(0,c.jsx)(s.span,{className:"token punctuation",children:"]"}),(0,c.jsx)(s.span,{className:"token punctuation",children:")"})," ",(0,c.jsx)(s.span,{className:"token operator",children:"=>"})," ",(0,c.jsx)(s.span,{className:"token punctuation",children:"{"}),"\n"]}),(0,c.jsxs)(s.span,{className:"code-line",children:["        ",(0,c.jsx)(s.span,{className:"token comment",children:"// Make n = Sound.COPIES copies:"}),"\n"]}),(0,c.jsxs)(s.span,{className:"code-line",children:["        ",(0,c.jsx)(s.span,{className:"token keyword",children:"return"})," ",(0,c.jsx)(s.span,{className:"token builtin",children:"Array"}),(0,c.jsx)(s.span,{className:"token punctuation",children:"."}),(0,c.jsx)(s.span,{className:"token function",children:"from"}),(0,c.jsx)(s.span,{className:"token punctuation",children:"("}),(0,c.jsx)(s.span,{className:"token function",children:"Array"}),(0,c.jsx)(s.span,{className:"token punctuation",children:"("}),"Sound",(0,c.jsx)(s.span,{className:"token punctuation",children:"."}),(0,c.jsx)(s.span,{className:"token constant",children:"COPIES"}),(0,c.jsx)(s.span,{className:"token punctuation",children:")"}),(0,c.jsx)(s.span,{className:"token punctuation",children:")"}),(0,c.jsx)(s.span,{className:"token punctuation",children:"."}),(0,c.jsx)(s.span,{className:"token function",children:"map"}),(0,c.jsx)(s.span,{className:"token punctuation",children:"("}),(0,c.jsx)(s.span,{className:"token punctuation",children:"("}),"_",(0,c.jsx)(s.span,{className:"token punctuation",children:","})," i",(0,c.jsx)(s.span,{className:"token punctuation",children:")"})," ",(0,c.jsx)(s.span,{className:"token operator",children:"=>"})," ",(0,c.jsx)(s.span,{className:"token punctuation",children:"{"}),"\n"]}),(0,c.jsxs)(s.span,{className:"code-line",children:["          ",(0,c.jsx)(s.span,{className:"token keyword",children:"const"})," soundNameWithIndex ",(0,c.jsx)(s.span,{className:"token operator",children:"="})," ",(0,c.jsxs)(s.span,{className:"token template-string",children:[(0,c.jsx)(s.span,{className:"token template-punctuation string",children:"`"}),(0,c.jsxs)(s.span,{className:"token interpolation",children:[(0,c.jsx)(s.span,{className:"token interpolation-punctuation punctuation",children:"${"}),"name",(0,c.jsx)(s.span,{className:"token interpolation-punctuation punctuation",children:"}"})]}),(0,c.jsx)(s.span,{className:"token string",children:"-"}),(0,c.jsxs)(s.span,{className:"token interpolation",children:[(0,c.jsx)(s.span,{className:"token interpolation-punctuation punctuation",children:"${"}),"i",(0,c.jsx)(s.span,{className:"token interpolation-punctuation punctuation",children:"}"})]}),(0,c.jsx)(s.span,{className:"token template-punctuation string",children:"`"})]}),(0,c.jsx)(s.span,{className:"token punctuation",children:";"}),"\n"]}),(0,c.jsx)(s.span,{className:"code-line",children:"\n"}),(0,c.jsxs)(s.span,{className:"code-line",children:["          Sound",(0,c.jsx)(s.span,{className:"token punctuation",children:"."}),"assets",(0,c.jsx)(s.span,{className:"token punctuation",children:"["}),"soundNameWithIndex",(0,c.jsx)(s.span,{className:"token punctuation",children:"]"})," ",(0,c.jsx)(s.span,{className:"token operator",children:"="})," ",(0,c.jsx)(s.span,{className:"token keyword",children:"new"})," ",(0,c.jsx)(s.span,{className:"token class-name",children:"Audio"}),(0,c.jsx)(s.span,{className:"token punctuation",children:"."}),(0,c.jsx)(s.span,{className:"token function",children:"Sound"}),(0,c.jsx)(s.span,{className:"token punctuation",children:"("}),(0,c.jsx)(s.span,{className:"token punctuation",children:")"}),(0,c.jsx)(s.span,{className:"token punctuation",children:";"}),"\n"]}),(0,c.jsxs)(s.span,{className:"code-line",children:["          ",(0,c.jsx)(s.span,{className:"token keyword",children:"return"})," Sound",(0,c.jsx)(s.span,{className:"token punctuation",children:"."}),"assets",(0,c.jsx)(s.span,{className:"token punctuation",children:"["}),"soundNameWithIndex",(0,c.jsx)(s.span,{className:"token punctuation",children:"]"}),(0,c.jsx)(s.span,{className:"token punctuation",children:"."}),(0,c.jsx)(s.span,{className:"token function",children:"loadAsync"}),(0,c.jsx)(s.span,{className:"token punctuation",children:"("}),"path",(0,c.jsx)(s.span,{className:"token punctuation",children:")"}),(0,c.jsx)(s.span,{className:"token punctuation",children:";"}),"\n"]}),(0,c.jsxs)(s.span,{className:"code-line",children:["        ",(0,c.jsx)(s.span,{className:"token punctuation",children:"}"}),(0,c.jsx)(s.span,{className:"token punctuation",children:")"}),(0,c.jsx)(s.span,{className:"token punctuation",children:";"}),"\n"]}),(0,c.jsxs)(s.span,{className:"code-line",children:["      ",(0,c.jsx)(s.span,{className:"token punctuation",children:"}"}),"\n"]}),(0,c.jsxs)(s.span,{className:"code-line",children:["    ",(0,c.jsx)(s.span,{className:"token punctuation",children:")"}),(0,c.jsx)(s.span,{className:"token punctuation",children:";"}),"\n"]}),(0,c.jsx)(s.span,{className:"code-line",children:"\n"}),(0,c.jsxs)(s.span,{className:"code-line",children:["    ",(0,c.jsx)(s.span,{className:"token keyword",children:"return"})," ",(0,c.jsx)(s.span,{className:"token builtin",children:"Promise"}),(0,c.jsx)(s.span,{className:"token punctuation",children:"."}),(0,c.jsx)(s.span,{className:"token function",children:"all"}),(0,c.jsx)(s.span,{className:"token punctuation",children:"("}),"promisesForCopies",(0,c.jsx)(s.span,{className:"token punctuation",children:")"}),(0,c.jsx)(s.span,{className:"token punctuation",children:";"}),"\n"]}),(0,c.jsxs)(s.span,{className:"code-line",children:["  ",(0,c.jsx)(s.span,{className:"token punctuation",children:"}"}),"\n"]}),(0,c.jsx)(s.span,{className:"code-line",children:"\n"}),(0,c.jsxs)(s.span,{className:"code-line",children:["  ",(0,c.jsx)(s.span,{className:"token keyword",children:"static"})," ",(0,c.jsx)(s.span,{className:"token keyword",children:"async"})," ",(0,c.jsx)(s.span,{className:"token function",children:"play"}),(0,c.jsx)(s.span,{className:"token punctuation",children:"("}),"name",(0,c.jsx)(s.span,{className:"token operator",children:":"})," ",(0,c.jsx)(s.span,{className:"token builtin",children:"string"}),(0,c.jsx)(s.span,{className:"token punctuation",children:","})," volume ",(0,c.jsx)(s.span,{className:"token operator",children:"="})," ",(0,c.jsx)(s.span,{className:"token number",children:"1"}),(0,c.jsx)(s.span,{className:"token punctuation",children:")"})," ",(0,c.jsx)(s.span,{className:"token punctuation",children:"{"}),"\n"]}),(0,c.jsxs)(s.span,{className:"code-line",children:["    ",(0,c.jsx)(s.span,{className:"token keyword",children:"try"})," ",(0,c.jsx)(s.span,{className:"token punctuation",children:"{"}),"\n"]}),(0,c.jsxs)(s.span,{className:"code-line",children:["      Sound",(0,c.jsx)(s.span,{className:"token punctuation",children:"."}),(0,c.jsx)(s.span,{className:"token constant",children:"INDEX"})," ",(0,c.jsx)(s.span,{className:"token operator",children:"="})," ",(0,c.jsx)(s.span,{className:"token punctuation",children:"("}),"Sound",(0,c.jsx)(s.span,{className:"token punctuation",children:"."}),(0,c.jsx)(s.span,{className:"token constant",children:"INDEX"})," ",(0,c.jsx)(s.span,{className:"token operator",children:"+"})," ",(0,c.jsx)(s.span,{className:"token number",children:"1"}),(0,c.jsx)(s.span,{className:"token punctuation",children:")"})," ",(0,c.jsx)(s.span,{className:"token operator",children:"%"})," Sound",(0,c.jsx)(s.span,{className:"token punctuation",children:"."}),(0,c.jsx)(s.span,{className:"token constant",children:"COPIES"}),(0,c.jsx)(s.span,{className:"token punctuation",children:";"}),"\n"]}),(0,c.jsx)(s.span,{className:"code-line",children:"\n"}),(0,c.jsxs)(s.span,{className:"code-line",children:["      ",(0,c.jsx)(s.span,{className:"token keyword",children:"const"})," soundNameWithIndex ",(0,c.jsx)(s.span,{className:"token operator",children:"="})," ",(0,c.jsxs)(s.span,{className:"token template-string",children:[(0,c.jsx)(s.span,{className:"token template-punctuation string",children:"`"}),(0,c.jsxs)(s.span,{className:"token interpolation",children:[(0,c.jsx)(s.span,{className:"token interpolation-punctuation punctuation",children:"${"}),"name",(0,c.jsx)(s.span,{className:"token interpolation-punctuation punctuation",children:"}"})]}),(0,c.jsx)(s.span,{className:"token string",children:"-"}),(0,c.jsxs)(s.span,{className:"token interpolation",children:[(0,c.jsx)(s.span,{className:"token interpolation-punctuation punctuation",children:"${"}),"Sound",(0,c.jsx)(s.span,{className:"token punctuation",children:"."}),(0,c.jsx)(s.span,{className:"token constant",children:"INDEX"}),(0,c.jsx)(s.span,{className:"token interpolation-punctuation punctuation",children:"}"})]}),(0,c.jsx)(s.span,{className:"token template-punctuation string",children:"`"})]}),(0,c.jsx)(s.span,{className:"token punctuation",children:";"}),"\n"]}),(0,c.jsxs)(s.span,{className:"code-line",children:["      ",(0,c.jsx)(s.span,{className:"token keyword",children:"const"})," soundSample ",(0,c.jsx)(s.span,{className:"token operator",children:"="})," Sound",(0,c.jsx)(s.span,{className:"token punctuation",children:"."}),"assets",(0,c.jsx)(s.span,{className:"token punctuation",children:"["}),"soundNameWithIndex",(0,c.jsx)(s.span,{className:"token punctuation",children:"]"}),(0,c.jsx)(s.span,{className:"token punctuation",children:";"}),"\n"]}),(0,c.jsx)(s.span,{className:"code-line",children:"\n"}),(0,c.jsxs)(s.span,{className:"code-line",children:["      ",(0,c.jsx)(s.span,{className:"token keyword",children:"if"})," ",(0,c.jsx)(s.span,{className:"token punctuation",children:"("}),"soundSample",(0,c.jsx)(s.span,{className:"token punctuation",children:")"})," ",(0,c.jsx)(s.span,{className:"token punctuation",children:"{"}),"\n"]}),(0,c.jsxs)(s.span,{className:"code-line",children:["        ",(0,c.jsx)(s.span,{className:"token keyword",children:"await"})," soundSample",(0,c.jsx)(s.span,{className:"token punctuation",children:"."}),(0,c.jsx)(s.span,{className:"token function",children:"setVolumeAsync"}),(0,c.jsx)(s.span,{className:"token punctuation",children:"("}),"volume",(0,c.jsx)(s.span,{className:"token punctuation",children:")"}),(0,c.jsx)(s.span,{className:"token punctuation",children:";"}),"\n"]}),(0,c.jsxs)(s.span,{className:"code-line",children:["        ",(0,c.jsx)(s.span,{className:"token keyword",children:"await"})," soundSample",(0,c.jsx)(s.span,{className:"token punctuation",children:"."}),(0,c.jsx)(s.span,{className:"token function",children:"playFromPositionAsync"}),(0,c.jsx)(s.span,{className:"token punctuation",children:"("}),(0,c.jsx)(s.span,{className:"token number",children:"0"}),(0,c.jsx)(s.span,{className:"token punctuation",children:")"}),(0,c.jsx)(s.span,{className:"token punctuation",children:";"}),"\n"]}),(0,c.jsxs)(s.span,{className:"code-line",children:["      ",(0,c.jsx)(s.span,{className:"token punctuation",children:"}"})," ",(0,c.jsx)(s.span,{className:"token keyword",children:"else"})," ",(0,c.jsx)(s.span,{className:"token punctuation",children:"{"}),"\n"]}),(0,c.jsxs)(s.span,{className:"code-line",children:["        ",(0,c.jsx)(s.span,{className:"token keyword",children:"throw"})," ",(0,c.jsx)(s.span,{className:"token keyword",children:"new"})," ",(0,c.jsx)(s.span,{className:"token class-name",children:"Error"}),(0,c.jsx)(s.span,{className:"token punctuation",children:"("}),(0,c.jsxs)(s.span,{className:"token template-string",children:[(0,c.jsx)(s.span,{className:"token template-punctuation string",children:"`"}),(0,c.jsx)(s.span,{className:"token string",children:"Sound "}),(0,c.jsxs)(s.span,{className:"token interpolation",children:[(0,c.jsx)(s.span,{className:"token interpolation-punctuation punctuation",children:"${"}),"name",(0,c.jsx)(s.span,{className:"token interpolation-punctuation punctuation",children:"}"})]}),(0,c.jsx)(s.span,{className:"token string",children:" does not exist"}),(0,c.jsx)(s.span,{className:"token template-punctuation string",children:"`"})]}),(0,c.jsx)(s.span,{className:"token punctuation",children:")"}),(0,c.jsx)(s.span,{className:"token punctuation",children:";"}),"\n"]}),(0,c.jsxs)(s.span,{className:"code-line",children:["      ",(0,c.jsx)(s.span,{className:"token punctuation",children:"}"}),"\n"]}),(0,c.jsxs)(s.span,{className:"code-line",children:["    ",(0,c.jsx)(s.span,{className:"token punctuation",children:"}"})," ",(0,c.jsx)(s.span,{className:"token keyword",children:"catch"})," ",(0,c.jsx)(s.span,{className:"token punctuation",children:"("}),"error",(0,c.jsx)(s.span,{className:"token punctuation",children:")"})," ",(0,c.jsx)(s.span,{className:"token punctuation",children:"{"}),"\n"]}),(0,c.jsxs)(s.span,{className:"code-line",children:["      ",(0,c.jsx)(s.span,{className:"token comment",children:"// Silent error…"}),"\n"]}),(0,c.jsxs)(s.span,{className:"code-line",children:["    ",(0,c.jsx)(s.span,{className:"token punctuation",children:"}"}),"\n"]}),(0,c.jsxs)(s.span,{className:"code-line",children:["  ",(0,c.jsx)(s.span,{className:"token punctuation",children:"}"}),"\n"]}),(0,c.jsxs)(s.span,{className:"code-line",children:[(0,c.jsx)(s.span,{className:"token punctuation",children:"}"}),"\n"]})]})}),"\n",(0,c.jsxs)(s.h3,{id:"solver",children:[(0,c.jsx)(s.a,{"aria-hidden":"true",tabIndex:"-1",href:"#solver",children:(0,c.jsx)(s.span,{className:"icon icon-link"})}),"Solver"]}),"\n",(0,c.jsx)(s.p,{children:"I wanted to create a solver to monetize the game. It turned out to be quite a popular problem with a lot of resources online, so I won’t go into much detail. It just required a bit of linear algebra."}),"\n",(0,c.jsxs)(s.p,{children:["A board can be modeled mathematically as a vector over ",(0,c.jsx)(e,{children:"\\mathbb{F}_2"}),", a ",(0,c.jsx)(s.a,{href:"https://en.wikipedia.org/wiki/GF(2)",rel:"nofollow noopener noreferrer",target:"_blank",children:"field"})," containing only the elements 0 and 1 (for light on and off respectively). We can write each possible board position and each possible move as a vector over ",(0,c.jsx)(e,{children:"\\mathbb{F}_2"}),". That means that:"]}),"\n",(0,c.jsxs)(s.ul,{children:["\n",(0,c.jsx)(s.li,{children:"pressing a cell an even number of times has no effect;"}),"\n",(0,c.jsx)(s.li,{children:"the order in which we press the cells does not matter;"}),"\n"]}),"\n",(0,c.jsxs)(s.p,{children:["To solve the board, we need to find a combination of these move vectors which adds up to give the current board, since that will cancel with the board, turning all of the lights on. There is a systematic way of solving this kind of vector problem called ",(0,c.jsx)(s.a,{href:"https://en.wikipedia.org/wiki/Gaussian_elimination",rel:"nofollow noopener noreferrer",target:"_blank",children:"Gaussian Elimination"}),"."]}),"\n",(0,c.jsx)(s.pre,{className:"language-ts",children:(0,c.jsxs)(s.code,{className:"language-ts code-highlight",children:[(0,c.jsxs)(s.span,{className:"code-line",children:[(0,c.jsx)(s.span,{className:"token keyword",children:"function"})," ",(0,c.jsx)(s.span,{className:"token function",children:"solve"}),(0,c.jsx)(s.span,{className:"token punctuation",children:"("}),"width",(0,c.jsx)(s.span,{className:"token operator",children:":"})," ",(0,c.jsx)(s.span,{className:"token builtin",children:"number"}),(0,c.jsx)(s.span,{className:"token punctuation",children:","})," height",(0,c.jsx)(s.span,{className:"token operator",children:":"})," ",(0,c.jsx)(s.span,{className:"token builtin",children:"number"}),(0,c.jsx)(s.span,{className:"token punctuation",children:","})," state",(0,c.jsx)(s.span,{className:"token operator",children:":"})," ",(0,c.jsx)(s.span,{className:"token builtin",children:"boolean"}),(0,c.jsx)(s.span,{className:"token punctuation",children:"["}),(0,c.jsx)(s.span,{className:"token punctuation",children:"]"}),(0,c.jsx)(s.span,{className:"token punctuation",children:")"}),(0,c.jsx)(s.span,{className:"token operator",children:":"})," ",(0,c.jsx)(s.span,{className:"token builtin",children:"number"}),(0,c.jsx)(s.span,{className:"token punctuation",children:"["}),(0,c.jsx)(s.span,{className:"token punctuation",children:"]"})," ",(0,c.jsx)(s.span,{className:"token punctuation",children:"{"}),"\n"]}),(0,c.jsxs)(s.span,{className:"code-line",children:["  ",(0,c.jsx)(s.span,{className:"token keyword",children:"const"})," moveVector ",(0,c.jsx)(s.span,{className:"token operator",children:"="})," ",(0,c.jsx)(s.span,{className:"token function",children:"buildMoveVector"}),(0,c.jsx)(s.span,{className:"token punctuation",children:"("}),"width",(0,c.jsx)(s.span,{className:"token punctuation",children:","})," height",(0,c.jsx)(s.span,{className:"token punctuation",children:")"}),(0,c.jsx)(s.span,{className:"token punctuation",children:";"}),"\n"]}),(0,c.jsxs)(s.span,{className:"code-line",children:["  ",(0,c.jsx)(s.span,{className:"token keyword",children:"const"})," moveMatrix ",(0,c.jsx)(s.span,{className:"token operator",children:"="})," ",(0,c.jsx)(s.span,{className:"token function",children:"buildMoveMatrix"}),(0,c.jsx)(s.span,{className:"token punctuation",children:"("}),"moveVector",(0,c.jsx)(s.span,{className:"token punctuation",children:","})," state",(0,c.jsx)(s.span,{className:"token punctuation",children:")"}),(0,c.jsx)(s.span,{className:"token punctuation",children:";"}),"\n"]}),(0,c.jsxs)(s.span,{className:"code-line",children:["  ",(0,c.jsx)(s.span,{className:"token keyword",children:"const"})," solution ",(0,c.jsx)(s.span,{className:"token operator",children:"="})," ",(0,c.jsx)(s.span,{className:"token function",children:"getLastRow"}),(0,c.jsx)(s.span,{className:"token punctuation",children:"("}),(0,c.jsx)(s.span,{className:"token function",children:"rref"}),(0,c.jsx)(s.span,{className:"token punctuation",children:"("}),"moveMatrix",(0,c.jsx)(s.span,{className:"token punctuation",children:")"}),(0,c.jsx)(s.span,{className:"token punctuation",children:")"}),(0,c.jsx)(s.span,{className:"token punctuation",children:";"}),"\n"]}),(0,c.jsx)(s.span,{className:"code-line",children:"\n"}),(0,c.jsxs)(s.span,{className:"code-line",children:["  ",(0,c.jsx)(s.span,{className:"token keyword",children:"return"})," solution",(0,c.jsx)(s.span,{className:"token punctuation",children:";"}),"\n"]}),(0,c.jsxs)(s.span,{className:"code-line",children:[(0,c.jsx)(s.span,{className:"token punctuation",children:"}"}),"\n"]})]})}),"\n",(0,c.jsxs)(s.p,{children:["A nice video explaining this in detail can be found ",(0,c.jsx)(s.a,{href:"https://www.youtube.com/watch?v=oCHCD_-nhg4",rel:"nofollow noopener noreferrer",target:"_blank",children:"here"}),"."]}),"\n",(0,c.jsxs)(s.h2,{id:"conclusion",children:[(0,c.jsx)(s.a,{"aria-hidden":"true",tabIndex:"-1",href:"#conclusion",children:(0,c.jsx)(s.span,{className:"icon icon-link"})}),"Conclusion"]}),"\n",(0,c.jsx)(s.p,{children:"It was a fun experience to rebuild the same game several years later after gathering all of my commercial experience and still being able to learn new things along the journey. So far, I’ve got 200+ downloads and generated $0.20 in ad revenue, but hey, the learnings are priceless!"})]})}var i=function(n){void 0===n&&(n={});const{wrapper:s}=Object.assign({},(0,t.a)(),n.components);return s?(0,c.jsx)(s,Object.assign({},n,{children:(0,c.jsx)(l,n)})):l(n)};function o(n,s){throw new Error("Expected "+(s?"component":"object")+" `"+n+"` to be defined: you likely forgot to import, pass, or provide it.")}var r=e(4361),p=e(8029),d=e(8875),h=e(180),m=e(317),u=e(5551),x=e(2349),j=e(7123);function N(n){let{pageContext:s,children:e}=n;const a=s.data,{frontmatter:l,tableOfContents:i}=a,{title:o,datePublished:r,language:x,authors:N}=l;return(0,c.jsx)(u.A,{children:(0,c.jsx)(d.V,{children:(0,c.jsxs)("article",{className:"post",itemScope:!0,itemType:"http://schema.org/Article",lang:x,children:[(0,c.jsxs)("header",{className:"post__header",children:[(0,c.jsx)("h1",{itemProp:"headline",children:o}),(0,c.jsx)("time",{dateTime:r,itemProp:"datePublished",children:r}),null!=N&&N.length?(0,c.jsx)("ul",{className:"visually-hidden",children:N.map((n=>(0,c.jsx)("li",{children:(0,c.jsx)("p",{itemProp:"author",children:n})},n)))}):null]}),(0,c.jsxs)("div",{className:"post__wrapper",children:[(0,c.jsx)("div",{className:"post__toc",children:(0,c.jsx)(j.o,{data:i})}),(0,c.jsxs)("div",{className:"post__content",children:[(0,c.jsx)("div",{itemProp:"articleBody",children:(0,c.jsx)(t.Z,{components:{Alert:p.b,Formula:m.S},children:e})}),(0,c.jsx)(h.$,{lang:x})]})]})]})})})}function k(n){return a.createElement(N,n,a.createElement(i,n))}function g(n){let{data:s,pageContext:e,location:a}=n;const t=e.data,l=s.site.siteMetadata.siteUrl,i=a.pathname,{excerpt:o}=t,{title:p,description:d}=t.frontmatter;return(0,c.jsxs)(x.H,{url:`${l}${i}`,title:p,image:`${l}/thumbnails/${(0,r.H)(i)}.png`,description:d||o,children:[(0,c.jsx)("link",{rel:"canonical",href:`${l}${i}`}),(0,c.jsx)("html",{className:"smooth-scroll"})]})}},8029:function(n,s,e){e.d(s,{b:function(){return d}});var a={};e.r(a),e.d(a,{alert:function(){return c},alert__failure:function(){return t},alert__info:function(){return l},alert__success:function(){return i},alert__warning:function(){return o}});var c="index-module--alert--af406",t="index-module--alert__failure--c7bcc",l="index-module--alert__info--cfa0f",i="index-module--alert__success--14443",o="index-module--alert__warning--5ba8e",r=e(7294),p=e(5893);function d(n){let{children:s,as:e="aside",type:t="info",...l}=n;const i=n=>r.createElement(e,n);return(0,p.jsx)(i,{...l,className:`${c} ${a[`alert__${t}`]}`,children:s})}},180:function(n,s,e){e.d(s,{$:function(){return l}});var a=e(7294),c=e(1711),t=e(5893);function l(n){let{lang:s="en"}=n;const e=a.useRef(),[l]=(0,c.F)(),i=null!==l;return a.useLayoutEffect((()=>{const n=e.current;if(!n||!i)return;const a=function(n){let{theme:s,lang:e}=n;const a="undefined"!=typeof window?window.location.origin:"";return`\n    <script src="https://giscus.app/client.js"\n      data-repo="Bartozzz/bartozzz.github.io"\n      data-repo-id="MDEwOlJlcG9zaXRvcnkyNDk1MjY5MQ=="\n      data-category="Discussion"\n      data-category-id="DIC_kwDOAXy_c84CAHzq"\n      data-mapping="pathname"\n      data-reactions-enabled="1"\n      data-emit-metadata="0"\n      data-theme="${"dark"===s?`${a}/discussion-dark.css`:`${a}/discussion-light.css`}"\n      data-lang="${e}"\n      crossorigin="anonymous"\n      async>\n    <\/script>\n  `}({theme:l,lang:s}),c=document.createRange().createContextualFragment(a);return null==n||n.appendChild(c),()=>{n.innerHTML=""}}),[i]),a.useEffect((()=>{const n="undefined"!=typeof window?window.location.origin:"";!function(n){const s=document.querySelector("iframe.giscus-frame");s&&s.contentWindow.postMessage({giscus:n},"https://giscus.app")}({setConfig:{theme:"dark"===l?`${n}/discussion-dark.css`:`${n}/discussion-light.css`,lang:s}})}),[l,s]),(0,t.jsx)(t.Fragment,{children:(0,t.jsx)("div",{className:`comments--${l}`,ref:e})})}},317:function(n,s,e){e.d(s,{S:function(){return l}});var a=e(7294),c=e(1008);function t(){return(t=Object.assign||function(n){for(var s=1;s<arguments.length;s++){var e=arguments[s];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(n[a]=e[a])}return n}).apply(this,arguments)}const l=(0,a.memo)((function(n){var s=n.children,e=n.math,l=n.block,i=n.errorColor,o=n.renderError,r=n.settings,p=n.as,d=function(n,s){if(null==n)return{};var e,a,c={},t=Object.keys(n);for(a=0;a<t.length;a++)s.indexOf(e=t[a])>=0||(c[e]=n[e]);return c}(n,["children","math","block","errorColor","renderError","settings","as"]),h=p||(l?"div":"span"),m=null!=s?s:e,u=(0,a.useState)({innerHtml:""}),x=u[0],j=u[1];return(0,a.useEffect)((function(){try{var n=c.Z.renderToString(m,t({displayMode:!!l,errorColor:i,throwOnError:!!o},r));j({innerHtml:n})}catch(n){if(!(n instanceof c.Z.ParseError||n instanceof TypeError))throw n;j(o?{errorElement:o(n)}:{innerHtml:n.message})}}),[l,m,i,o,r]),"errorElement"in x?x.errorElement:a.createElement(h,Object.assign({},d,{dangerouslySetInnerHTML:{__html:x.innerHtml}}))}))},7123:function(n,s,e){e.d(s,{o:function(){return u}});var a=e(5785),c="index-module--toc--16eb9",t="index-module--toc__ellipsis--2a1a1",l="index-module--toc__link--1571c",i="index-module--toc__link--active--2b793",o="index-module--toc__list--19652",r="index-module--toc__title--91e5c",p=e(7294),d=e(1883),h=e(5893);function m(n){return n.flatMap((n=>{let{url:s,title:e,items:c}=n;return[{url:s,title:e}].concat((0,a.Z)(c?m(c):[]))}))}function u(n){let{data:s}=n;const[e,a]=p.useState(),t=m(s.items);return p.useEffect((()=>{const n=new IntersectionObserver((n=>{n.forEach((n=>{n.isIntersecting&&a(`#${n.target.id}`)}))}),{rootMargin:"0% 0% -80% 0%"});return t.forEach((s=>{const e=document.querySelector(s.url);e&&n.observe(e)})),()=>{t.forEach((s=>{const e=document.querySelector(s.url);e&&n.unobserve(e)}))}}),[t]),(0,h.jsxs)("nav",{"aria-label":"On this page",className:c,children:[(0,h.jsx)("p",{className:r,children:"Contents"}),(0,h.jsx)(x,{tree:s,activeSlug:e})]})}function x(n){let{tree:s,activeSlug:e}=n;return(0,h.jsx)("ol",{className:o,children:s.items.map((n=>{var s;return(0,h.jsxs)("li",{children:[(0,h.jsx)(d.Link,{to:n.url,title:n.title,className:`${l} ${e===n.url?i:""}`,children:(0,h.jsx)("span",{className:t,children:n.title})}),(null===(s=n.items)||void 0===s?void 0:s.length)>0&&(0,h.jsx)(x,{tree:n,activeSlug:e})]},n.url)}))})}},1151:function(n,s,e){e.d(s,{Z:function(){return i},a:function(){return l}});var a=e(7294);const c={},t=a.createContext(c);function l(n){const s=a.useContext(t);return a.useMemo((function(){return"function"==typeof n?n(s):{...s,...n}}),[s,n])}function i(n){let s;return s=n.disableParentContext?"function"==typeof n.components?n.components(c):n.components||c:l(n.components),a.createElement(t.Provider,{value:s},n.children)}}}]);
//# sourceMappingURL=component---src-templates-blog-post-tsx-content-file-path-content-blog-2022-06-27-case-study-filler-index-md-18c0bdfc80d5ffe4239a.js.map