"use strict";(self.webpackChunklaniewski_me=self.webpackChunklaniewski_me||[]).push([[659],{1452:function(n,s,e){e.r(s),e.d(s,{Head:function(){return f},default:function(){return g}});var a=e(7294),c=e(5893),t=e(1151);function l(n){const s=Object.assign({p:"p",h2:"h2",a:"a",span:"span",pre:"pre",code:"code",ul:"ul",li:"li",strong:"strong"},(0,t.a)(),n.components),{Newsletter:e}=s;return e||function(n,s){throw new Error("Expected "+(s?"component":"object")+" `"+n+"` to be defined: you likely forgot to import, pass, or provide it.")}("Newsletter",!0),(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(s.p,{children:"When implementing applications, we often need to communicate with external services via APIs. In such cases, it’s crucial to ensure that the data received from these APIs is valid and conforms to the expected format. It’s essential for maintaining the integrity and functionality of various systems."}),"\n",(0,c.jsxs)(s.h2,{id:"what-is-zod",children:[(0,c.jsx)(s.a,{"aria-hidden":"true",tabIndex:"-1",href:"#what-is-zod",children:(0,c.jsx)(s.span,{className:"icon icon-link"})}),"What is Zod"]}),"\n",(0,c.jsxs)(s.p,{children:[(0,c.jsx)(s.a,{href:"https://github.com/colinhacks/zod",rel:"nofollow noopener noreferrer",target:"_blank",children:"Zod"})," is a TypeScript-first schema declaration and validation library. It provides an elegant and expressive syntax for defining data schemas and validating data against those schemas in the runtime. Here’s a simple example using TypeScript:"]}),"\n",(0,c.jsx)(s.pre,{className:"language-ts",children:(0,c.jsxs)(s.code,{className:"language-ts code-highlight",children:[(0,c.jsxs)(s.span,{className:"code-line",children:[(0,c.jsx)(s.span,{className:"token keyword",children:"import"})," ",(0,c.jsx)(s.span,{className:"token punctuation",children:"{"})," z ",(0,c.jsx)(s.span,{className:"token punctuation",children:"}"})," ",(0,c.jsx)(s.span,{className:"token keyword",children:"from"})," ",(0,c.jsx)(s.span,{className:"token string",children:'"zod"'}),(0,c.jsx)(s.span,{className:"token punctuation",children:";"}),"\n"]}),(0,c.jsx)(s.span,{className:"code-line",children:"\n"}),(0,c.jsxs)(s.span,{className:"code-line",children:[(0,c.jsx)(s.span,{className:"token keyword",children:"const"})," userSchema ",(0,c.jsx)(s.span,{className:"token operator",children:"="})," z",(0,c.jsx)(s.span,{className:"token punctuation",children:"."}),(0,c.jsx)(s.span,{className:"token function",children:"object"}),(0,c.jsx)(s.span,{className:"token punctuation",children:"("}),(0,c.jsx)(s.span,{className:"token punctuation",children:"{"}),"\n"]}),(0,c.jsxs)(s.span,{className:"code-line",children:["  id",(0,c.jsx)(s.span,{className:"token operator",children:":"})," z",(0,c.jsx)(s.span,{className:"token punctuation",children:"."}),(0,c.jsx)(s.span,{className:"token function",children:"string"}),(0,c.jsx)(s.span,{className:"token punctuation",children:"("}),(0,c.jsx)(s.span,{className:"token punctuation",children:")"}),(0,c.jsx)(s.span,{className:"token punctuation",children:"."}),(0,c.jsx)(s.span,{className:"token function",children:"uuid"}),(0,c.jsx)(s.span,{className:"token punctuation",children:"("}),(0,c.jsx)(s.span,{className:"token punctuation",children:")"}),(0,c.jsx)(s.span,{className:"token punctuation",children:","}),"\n"]}),(0,c.jsxs)(s.span,{className:"code-line",children:["  email",(0,c.jsx)(s.span,{className:"token operator",children:":"})," z",(0,c.jsx)(s.span,{className:"token punctuation",children:"."}),(0,c.jsx)(s.span,{className:"token function",children:"string"}),(0,c.jsx)(s.span,{className:"token punctuation",children:"("}),(0,c.jsx)(s.span,{className:"token punctuation",children:")"}),(0,c.jsx)(s.span,{className:"token punctuation",children:"."}),(0,c.jsx)(s.span,{className:"token function",children:"email"}),(0,c.jsx)(s.span,{className:"token punctuation",children:"("}),(0,c.jsx)(s.span,{className:"token punctuation",children:")"}),(0,c.jsx)(s.span,{className:"token punctuation",children:","}),"\n"]}),(0,c.jsxs)(s.span,{className:"code-line",children:["  login",(0,c.jsx)(s.span,{className:"token operator",children:":"})," z",(0,c.jsx)(s.span,{className:"token punctuation",children:"."}),(0,c.jsx)(s.span,{className:"token function",children:"string"}),(0,c.jsx)(s.span,{className:"token punctuation",children:"("}),(0,c.jsx)(s.span,{className:"token punctuation",children:")"}),(0,c.jsx)(s.span,{className:"token punctuation",children:","}),"\n"]}),(0,c.jsxs)(s.span,{className:"code-line",children:["  createdAt",(0,c.jsx)(s.span,{className:"token operator",children:":"})," z",(0,c.jsx)(s.span,{className:"token punctuation",children:"."}),(0,c.jsx)(s.span,{className:"token function",children:"string"}),(0,c.jsx)(s.span,{className:"token punctuation",children:"("}),(0,c.jsx)(s.span,{className:"token punctuation",children:")"}),(0,c.jsx)(s.span,{className:"token punctuation",children:"."}),(0,c.jsx)(s.span,{className:"token function",children:"datetime"}),(0,c.jsx)(s.span,{className:"token punctuation",children:"("}),(0,c.jsx)(s.span,{className:"token punctuation",children:")"}),(0,c.jsx)(s.span,{className:"token punctuation",children:","}),"\n"]}),(0,c.jsxs)(s.span,{className:"code-line",children:["  deletedAt",(0,c.jsx)(s.span,{className:"token operator",children:":"})," z",(0,c.jsx)(s.span,{className:"token punctuation",children:"."}),(0,c.jsx)(s.span,{className:"token function",children:"string"}),(0,c.jsx)(s.span,{className:"token punctuation",children:"("}),(0,c.jsx)(s.span,{className:"token punctuation",children:")"}),(0,c.jsx)(s.span,{className:"token punctuation",children:"."}),(0,c.jsx)(s.span,{className:"token function",children:"datetime"}),(0,c.jsx)(s.span,{className:"token punctuation",children:"("}),(0,c.jsx)(s.span,{className:"token punctuation",children:")"}),(0,c.jsx)(s.span,{className:"token punctuation",children:"."}),(0,c.jsx)(s.span,{className:"token function",children:"nullable"}),(0,c.jsx)(s.span,{className:"token punctuation",children:"("}),(0,c.jsx)(s.span,{className:"token punctuation",children:")"}),(0,c.jsx)(s.span,{className:"token punctuation",children:","}),"\n"]}),(0,c.jsxs)(s.span,{className:"code-line",children:[(0,c.jsx)(s.span,{className:"token punctuation",children:"}"}),(0,c.jsx)(s.span,{className:"token punctuation",children:")"}),(0,c.jsx)(s.span,{className:"token punctuation",children:";"}),"\n"]}),(0,c.jsx)(s.span,{className:"code-line",children:"\n"}),(0,c.jsxs)(s.span,{className:"code-line",children:[(0,c.jsx)(s.span,{className:"token keyword",children:"const"})," userData ",(0,c.jsx)(s.span,{className:"token operator",children:"="})," ",(0,c.jsx)(s.span,{className:"token punctuation",children:"{"}),"\n"]}),(0,c.jsxs)(s.span,{className:"code-line",children:["  id",(0,c.jsx)(s.span,{className:"token operator",children:":"})," ",(0,c.jsx)(s.span,{className:"token string",children:'"3f740a80-0af0-4976-9bad-db83b15c7bf7"'}),(0,c.jsx)(s.span,{className:"token punctuation",children:","}),"\n"]}),(0,c.jsxs)(s.span,{className:"code-line",children:["  email",(0,c.jsx)(s.span,{className:"token operator",children:":"})," ",(0,c.jsx)(s.span,{className:"token string",children:'"jan.kowalski@example.com"'}),(0,c.jsx)(s.span,{className:"token punctuation",children:","}),"\n"]}),(0,c.jsxs)(s.span,{className:"code-line",children:["  login",(0,c.jsx)(s.span,{className:"token operator",children:":"})," ",(0,c.jsx)(s.span,{className:"token string",children:'"jan.kowalski"'}),(0,c.jsx)(s.span,{className:"token punctuation",children:","}),"\n"]}),(0,c.jsxs)(s.span,{className:"code-line",children:["  createdAt",(0,c.jsx)(s.span,{className:"token operator",children:":"})," ",(0,c.jsx)(s.span,{className:"token string",children:'"2020-01-01T00:00:00Z"'}),(0,c.jsx)(s.span,{className:"token punctuation",children:","}),"\n"]}),(0,c.jsxs)(s.span,{className:"code-line",children:["  deletedAt",(0,c.jsx)(s.span,{className:"token operator",children:":"})," ",(0,c.jsx)(s.span,{className:"token keyword",children:"null"}),(0,c.jsx)(s.span,{className:"token punctuation",children:","}),"\n"]}),(0,c.jsxs)(s.span,{className:"code-line",children:[(0,c.jsx)(s.span,{className:"token punctuation",children:"}"}),(0,c.jsx)(s.span,{className:"token punctuation",children:";"}),"\n"]}),(0,c.jsx)(s.span,{className:"code-line",children:"\n"}),(0,c.jsxs)(s.span,{className:"code-line",children:[(0,c.jsx)(s.span,{className:"token keyword",children:"try"})," ",(0,c.jsx)(s.span,{className:"token punctuation",children:"{"}),"\n"]}),(0,c.jsxs)(s.span,{className:"code-line",children:["  ",(0,c.jsx)(s.span,{className:"token keyword",children:"const"})," validatedUser ",(0,c.jsx)(s.span,{className:"token operator",children:"="})," userSchema",(0,c.jsx)(s.span,{className:"token punctuation",children:"."}),(0,c.jsx)(s.span,{className:"token function",children:"parse"}),(0,c.jsx)(s.span,{className:"token punctuation",children:"("}),"userData",(0,c.jsx)(s.span,{className:"token punctuation",children:")"}),(0,c.jsx)(s.span,{className:"token punctuation",children:";"}),"\n"]}),(0,c.jsx)(s.span,{className:"code-line",children:"\n"}),(0,c.jsxs)(s.span,{className:"code-line",children:["  ",(0,c.jsx)(s.span,{className:"token builtin",children:"console"}),(0,c.jsx)(s.span,{className:"token punctuation",children:"."}),(0,c.jsx)(s.span,{className:"token function",children:"log"}),(0,c.jsx)(s.span,{className:"token punctuation",children:"("}),"validatedUser",(0,c.jsx)(s.span,{className:"token punctuation",children:")"}),(0,c.jsx)(s.span,{className:"token punctuation",children:";"}),"\n"]}),(0,c.jsxs)(s.span,{className:"code-line",children:[(0,c.jsx)(s.span,{className:"token punctuation",children:"}"})," ",(0,c.jsx)(s.span,{className:"token keyword",children:"catch"})," ",(0,c.jsx)(s.span,{className:"token punctuation",children:"("}),"error",(0,c.jsx)(s.span,{className:"token punctuation",children:")"})," ",(0,c.jsx)(s.span,{className:"token punctuation",children:"{"}),"\n"]}),(0,c.jsxs)(s.span,{className:"code-line",children:["  ",(0,c.jsx)(s.span,{className:"token builtin",children:"console"}),(0,c.jsx)(s.span,{className:"token punctuation",children:"."}),(0,c.jsx)(s.span,{className:"token function",children:"error"}),(0,c.jsx)(s.span,{className:"token punctuation",children:"("}),"error",(0,c.jsx)(s.span,{className:"token punctuation",children:"."}),"errors",(0,c.jsx)(s.span,{className:"token punctuation",children:")"}),(0,c.jsx)(s.span,{className:"token punctuation",children:";"}),"\n"]}),(0,c.jsxs)(s.span,{className:"code-line",children:[(0,c.jsx)(s.span,{className:"token punctuation",children:"}"}),"\n"]})]})}),"\n",(0,c.jsxs)(s.p,{children:["In this example, ",(0,c.jsx)(s.code,{children:"userSchema"})," defines a schema for user data, specifying the expected types and constraints for each field. The ",(0,c.jsx)(s.code,{children:"parse"})," method is then used to validate the ",(0,c.jsx)(s.code,{children:"userData"})," object against the schema. If validation fails, an error is thrown with details about the validation errors."]}),"\n",(0,c.jsxs)(s.h2,{id:"why-use-zod",children:[(0,c.jsx)(s.a,{"aria-hidden":"true",tabIndex:"-1",href:"#why-use-zod",children:(0,c.jsx)(s.span,{className:"icon icon-link"})}),"Why use Zod"]}),"\n",(0,c.jsxs)(s.ul,{children:["\n",(0,c.jsxs)(s.li,{children:["\n",(0,c.jsxs)(s.p,{children:[(0,c.jsx)(s.strong,{children:"Type Safety:"})," Zod integrates seamlessly with TypeScript, providing strong type checking at compile-time. This helps to catch potential issues early in the development process."]}),"\n"]}),"\n",(0,c.jsxs)(s.li,{children:["\n",(0,c.jsxs)(s.p,{children:[(0,c.jsx)(s.strong,{children:"Error Reporting:"})," When validation fails in the run-time, Zod provides detailed error messages, including information about the specific fields that didn’t pass validation. This aids in diagnosing and fixing issues efficiently."]}),"\n"]}),"\n",(0,c.jsxs)(s.li,{children:["\n",(0,c.jsxs)(s.p,{children:[(0,c.jsx)(s.strong,{children:"Readability and Expressiveness:"})," Zod’s syntax is clean and expressive, making it easy to define and understand complex data structures. This enhances code readability and maintainability."]}),"\n"]}),"\n",(0,c.jsxs)(s.li,{children:["\n",(0,c.jsxs)(s.p,{children:[(0,c.jsx)(s.strong,{children:"Flexibility:"})," Zod allows you to create sophisticated validation rules, including custom validation functions, conditional validation, and more. This flexibility is valuable when dealing with diverse and evolving data structures."]}),"\n"]}),"\n"]}),"\n",(0,c.jsx)(e,{}),"\n",(0,c.jsxs)(s.h2,{id:"how-to-use-zod",children:[(0,c.jsx)(s.a,{"aria-hidden":"true",tabIndex:"-1",href:"#how-to-use-zod",children:(0,c.jsx)(s.span,{className:"icon icon-link"})}),"How to use Zod"]}),"\n",(0,c.jsx)(s.p,{children:"In a real application, I’d encourage encapsulating the utilization of Zod within a generic helper function. Let’s examine a refined implementation:"}),"\n",(0,c.jsx)(s.pre,{className:"language-ts",children:(0,c.jsxs)(s.code,{className:"language-ts code-highlight",children:[(0,c.jsxs)(s.span,{className:"code-line",children:[(0,c.jsx)(s.span,{className:"token comment",children:"// api/validator.ts"}),"\n"]}),(0,c.jsxs)(s.span,{className:"code-line",children:[(0,c.jsx)(s.span,{className:"token keyword",children:"import"})," ",(0,c.jsx)(s.span,{className:"token punctuation",children:"{"})," z",(0,c.jsx)(s.span,{className:"token punctuation",children:","})," ZodIssue ",(0,c.jsx)(s.span,{className:"token punctuation",children:"}"})," ",(0,c.jsx)(s.span,{className:"token keyword",children:"from"})," ",(0,c.jsx)(s.span,{className:"token string",children:'"zod"'}),(0,c.jsx)(s.span,{className:"token punctuation",children:";"}),"\n"]}),(0,c.jsx)(s.span,{className:"code-line",children:"\n"}),(0,c.jsxs)(s.span,{className:"code-line",children:[(0,c.jsx)(s.span,{className:"token keyword",children:"interface"})," ",(0,c.jsxs)(s.span,{className:"token class-name",children:["ValidateConfig",(0,c.jsx)(s.span,{className:"token operator",children:"<"}),(0,c.jsx)(s.span,{className:"token constant",children:"T"})," ",(0,c.jsx)(s.span,{className:"token keyword",children:"extends"})," z",(0,c.jsx)(s.span,{className:"token punctuation",children:"."}),"ZodTypeAny",(0,c.jsx)(s.span,{className:"token operator",children:">"})]})," ",(0,c.jsx)(s.span,{className:"token punctuation",children:"{"}),"\n"]}),(0,c.jsxs)(s.span,{className:"code-line",children:["  dto",(0,c.jsx)(s.span,{className:"token operator",children:":"})," ",(0,c.jsx)(s.span,{className:"token builtin",children:"unknown"}),(0,c.jsx)(s.span,{className:"token punctuation",children:";"}),"\n"]}),(0,c.jsxs)(s.span,{className:"code-line",children:["  schema",(0,c.jsx)(s.span,{className:"token operator",children:":"})," ",(0,c.jsx)(s.span,{className:"token constant",children:"T"}),(0,c.jsx)(s.span,{className:"token punctuation",children:";"}),"\n"]}),(0,c.jsxs)(s.span,{className:"code-line",children:["  schemaName",(0,c.jsx)(s.span,{className:"token operator",children:":"})," ",(0,c.jsx)(s.span,{className:"token builtin",children:"string"}),(0,c.jsx)(s.span,{className:"token punctuation",children:";"}),"\n"]}),(0,c.jsxs)(s.span,{className:"code-line",children:[(0,c.jsx)(s.span,{className:"token punctuation",children:"}"}),"\n"]}),(0,c.jsx)(s.span,{className:"code-line",children:"\n"}),(0,c.jsxs)(s.span,{className:"code-line",children:[(0,c.jsx)(s.span,{className:"token keyword",children:"export"})," ",(0,c.jsx)(s.span,{className:"token keyword",children:"function"})," ",(0,c.jsxs)(s.span,{className:"token generic-function",children:[(0,c.jsx)(s.span,{className:"token function",children:"validateSchema"}),(0,c.jsxs)(s.span,{className:"token generic class-name",children:[(0,c.jsx)(s.span,{className:"token operator",children:"<"}),(0,c.jsx)(s.span,{className:"token constant",children:"T"})," ",(0,c.jsx)(s.span,{className:"token keyword",children:"extends"})," z",(0,c.jsx)(s.span,{className:"token punctuation",children:"."}),"ZodTypeAny",(0,c.jsx)(s.span,{className:"token operator",children:">"})]})]}),(0,c.jsx)(s.span,{className:"token punctuation",children:"("}),"\n"]}),(0,c.jsxs)(s.span,{className:"code-line",children:["  config",(0,c.jsx)(s.span,{className:"token operator",children:":"})," ValidateConfig",(0,c.jsx)(s.span,{className:"token operator",children:"<"}),(0,c.jsx)(s.span,{className:"token constant",children:"T"}),(0,c.jsx)(s.span,{className:"token operator",children:">"}),"\n"]}),(0,c.jsxs)(s.span,{className:"code-line",children:[(0,c.jsx)(s.span,{className:"token punctuation",children:")"}),(0,c.jsx)(s.span,{className:"token operator",children:":"})," z",(0,c.jsx)(s.span,{className:"token punctuation",children:"."}),"infer",(0,c.jsx)(s.span,{className:"token operator",children:"<"}),(0,c.jsx)(s.span,{className:"token constant",children:"T"}),(0,c.jsx)(s.span,{className:"token operator",children:">"})," ",(0,c.jsx)(s.span,{className:"token punctuation",children:"{"}),"\n"]}),(0,c.jsxs)(s.span,{className:"code-line",children:["  ",(0,c.jsx)(s.span,{className:"token keyword",children:"const"})," ",(0,c.jsx)(s.span,{className:"token punctuation",children:"{"})," data",(0,c.jsx)(s.span,{className:"token punctuation",children:","})," success",(0,c.jsx)(s.span,{className:"token punctuation",children:","})," error ",(0,c.jsx)(s.span,{className:"token punctuation",children:"}"})," ",(0,c.jsx)(s.span,{className:"token operator",children:"="})," config",(0,c.jsx)(s.span,{className:"token punctuation",children:"."}),"schema",(0,c.jsx)(s.span,{className:"token punctuation",children:"."}),(0,c.jsx)(s.span,{className:"token function",children:"safeParse"}),(0,c.jsx)(s.span,{className:"token punctuation",children:"("}),"config",(0,c.jsx)(s.span,{className:"token punctuation",children:"."}),"dto",(0,c.jsx)(s.span,{className:"token punctuation",children:")"}),(0,c.jsx)(s.span,{className:"token punctuation",children:";"}),"\n"]}),(0,c.jsx)(s.span,{className:"code-line",children:"\n"}),(0,c.jsxs)(s.span,{className:"code-line",children:["  ",(0,c.jsx)(s.span,{className:"token keyword",children:"if"})," ",(0,c.jsx)(s.span,{className:"token punctuation",children:"("}),"success",(0,c.jsx)(s.span,{className:"token punctuation",children:")"})," ",(0,c.jsx)(s.span,{className:"token punctuation",children:"{"}),"\n"]}),(0,c.jsxs)(s.span,{className:"code-line",children:["    ",(0,c.jsx)(s.span,{className:"token keyword",children:"return"})," data",(0,c.jsx)(s.span,{className:"token punctuation",children:";"}),"\n"]}),(0,c.jsxs)(s.span,{className:"code-line",children:["  ",(0,c.jsx)(s.span,{className:"token punctuation",children:"}"})," ",(0,c.jsx)(s.span,{className:"token keyword",children:"else"})," ",(0,c.jsx)(s.span,{className:"token punctuation",children:"{"}),"\n"]}),(0,c.jsxs)(s.span,{className:"code-line",children:["    ",(0,c.jsx)(s.span,{className:"token function",children:"captureError"}),(0,c.jsx)(s.span,{className:"token punctuation",children:"("}),(0,c.jsxs)(s.span,{className:"token template-string",children:[(0,c.jsx)(s.span,{className:"token template-punctuation string",children:"`"}),(0,c.jsx)(s.span,{className:"token string",children:"API Validation Error: "}),(0,c.jsxs)(s.span,{className:"token interpolation",children:[(0,c.jsx)(s.span,{className:"token interpolation-punctuation punctuation",children:"${"}),"config",(0,c.jsx)(s.span,{className:"token punctuation",children:"."}),"schemaName",(0,c.jsx)(s.span,{className:"token interpolation-punctuation punctuation",children:"}"})]}),(0,c.jsx)(s.span,{className:"token template-punctuation string",children:"`"})]}),(0,c.jsx)(s.span,{className:"token punctuation",children:","})," ",(0,c.jsx)(s.span,{className:"token punctuation",children:"{"}),"\n"]}),(0,c.jsxs)(s.span,{className:"code-line",children:["      dto",(0,c.jsx)(s.span,{className:"token operator",children:":"})," config",(0,c.jsx)(s.span,{className:"token punctuation",children:"."}),"dto",(0,c.jsx)(s.span,{className:"token punctuation",children:","}),"\n"]}),(0,c.jsxs)(s.span,{className:"code-line",children:["      error",(0,c.jsx)(s.span,{className:"token operator",children:":"})," error",(0,c.jsx)(s.span,{className:"token punctuation",children:"."}),"message",(0,c.jsx)(s.span,{className:"token punctuation",children:","}),"\n"]}),(0,c.jsxs)(s.span,{className:"code-line",children:["      issues",(0,c.jsx)(s.span,{className:"token operator",children:":"})," error",(0,c.jsx)(s.span,{className:"token punctuation",children:"."}),"issues",(0,c.jsx)(s.span,{className:"token punctuation",children:","}),"\n"]}),(0,c.jsxs)(s.span,{className:"code-line",children:["    ",(0,c.jsx)(s.span,{className:"token punctuation",children:"}"}),(0,c.jsx)(s.span,{className:"token punctuation",children:")"}),(0,c.jsx)(s.span,{className:"token punctuation",children:";"}),"\n"]}),(0,c.jsx)(s.span,{className:"code-line",children:"\n"}),(0,c.jsxs)(s.span,{className:"code-line",children:["    ",(0,c.jsx)(s.span,{className:"token keyword",children:"throw"})," error",(0,c.jsx)(s.span,{className:"token punctuation",children:";"}),"\n"]}),(0,c.jsxs)(s.span,{className:"code-line",children:["  ",(0,c.jsx)(s.span,{className:"token punctuation",children:"}"}),"\n"]}),(0,c.jsxs)(s.span,{className:"code-line",children:[(0,c.jsx)(s.span,{className:"token punctuation",children:"}"}),"\n"]}),(0,c.jsx)(s.span,{className:"code-line",children:"\n"}),(0,c.jsxs)(s.span,{className:"code-line",children:[(0,c.jsx)(s.span,{className:"token keyword",children:"function"})," ",(0,c.jsx)(s.span,{className:"token function",children:"captureError"}),(0,c.jsx)(s.span,{className:"token punctuation",children:"("}),"message",(0,c.jsx)(s.span,{className:"token operator",children:":"})," ",(0,c.jsx)(s.span,{className:"token builtin",children:"string"}),(0,c.jsx)(s.span,{className:"token punctuation",children:","})," extra ",(0,c.jsx)(s.span,{className:"token operator",children:"="})," ",(0,c.jsx)(s.span,{className:"token punctuation",children:"{"}),(0,c.jsx)(s.span,{className:"token punctuation",children:"}"}),(0,c.jsx)(s.span,{className:"token punctuation",children:")"}),(0,c.jsx)(s.span,{className:"token operator",children:":"})," ",(0,c.jsx)(s.span,{className:"token keyword",children:"void"})," ",(0,c.jsx)(s.span,{className:"token punctuation",children:"{"}),"\n"]}),(0,c.jsxs)(s.span,{className:"code-line",children:["  ",(0,c.jsx)(s.span,{className:"token keyword",children:"if"})," ",(0,c.jsx)(s.span,{className:"token punctuation",children:"("}),"__DEV__",(0,c.jsx)(s.span,{className:"token punctuation",children:")"})," ",(0,c.jsx)(s.span,{className:"token punctuation",children:"{"}),"\n"]}),(0,c.jsxs)(s.span,{className:"code-line",children:["    ",(0,c.jsx)(s.span,{className:"token builtin",children:"console"}),(0,c.jsx)(s.span,{className:"token punctuation",children:"."}),(0,c.jsx)(s.span,{className:"token function",children:"error"}),(0,c.jsx)(s.span,{className:"token punctuation",children:"("}),"message",(0,c.jsx)(s.span,{className:"token punctuation",children:","})," extra",(0,c.jsx)(s.span,{className:"token punctuation",children:")"}),(0,c.jsx)(s.span,{className:"token punctuation",children:";"}),"\n"]}),(0,c.jsxs)(s.span,{className:"code-line",children:["  ",(0,c.jsx)(s.span,{className:"token punctuation",children:"}"})," ",(0,c.jsx)(s.span,{className:"token keyword",children:"else"})," ",(0,c.jsx)(s.span,{className:"token punctuation",children:"{"}),"\n"]}),(0,c.jsxs)(s.span,{className:"code-line",children:["    ",(0,c.jsx)(s.span,{className:"token comment",children:"// TODO: report to Sentry/something else"}),"\n"]}),(0,c.jsxs)(s.span,{className:"code-line",children:["  ",(0,c.jsx)(s.span,{className:"token punctuation",children:"}"}),"\n"]}),(0,c.jsxs)(s.span,{className:"code-line",children:[(0,c.jsx)(s.span,{className:"token punctuation",children:"}"}),"\n"]})]})}),"\n",(0,c.jsx)(s.p,{children:"This helper function takes a data transfer object (DTO), a Zod schema, and a schema name as arguments. It then validates the DTO against the schema and returns the validated data if validation succeeds. If validation fails, it logs an error message and throws an error."}),"\n",(0,c.jsx)(s.p,{children:"With such a function ready, we only have to define a schema for each API response and use the helper function to validate the response data. Here’s an example of how that could look like:"}),"\n",(0,c.jsx)(s.pre,{className:"language-ts",children:(0,c.jsxs)(s.code,{className:"language-ts code-highlight",children:[(0,c.jsxs)(s.span,{className:"code-line",children:[(0,c.jsx)(s.span,{className:"token comment",children:"// api/requests/v1/accountDetails/schema.ts"}),"\n"]}),(0,c.jsxs)(s.span,{className:"code-line",children:[(0,c.jsx)(s.span,{className:"token keyword",children:"import"})," ",(0,c.jsx)(s.span,{className:"token punctuation",children:"{"})," z ",(0,c.jsx)(s.span,{className:"token punctuation",children:"}"})," ",(0,c.jsx)(s.span,{className:"token keyword",children:"from"})," ",(0,c.jsx)(s.span,{className:"token string",children:'"zod"'}),(0,c.jsx)(s.span,{className:"token punctuation",children:";"}),"\n"]}),(0,c.jsx)(s.span,{className:"code-line",children:"\n"}),(0,c.jsxs)(s.span,{className:"code-line",children:[(0,c.jsx)(s.span,{className:"token keyword",children:"export"})," ",(0,c.jsx)(s.span,{className:"token keyword",children:"const"})," schema ",(0,c.jsx)(s.span,{className:"token operator",children:"="})," z",(0,c.jsx)(s.span,{className:"token punctuation",children:"."}),(0,c.jsx)(s.span,{className:"token function",children:"object"}),(0,c.jsx)(s.span,{className:"token punctuation",children:"("}),(0,c.jsx)(s.span,{className:"token punctuation",children:"{"}),"\n"]}),(0,c.jsxs)(s.span,{className:"code-line",children:["  id",(0,c.jsx)(s.span,{className:"token operator",children:":"})," z",(0,c.jsx)(s.span,{className:"token punctuation",children:"."}),(0,c.jsx)(s.span,{className:"token function",children:"string"}),(0,c.jsx)(s.span,{className:"token punctuation",children:"("}),(0,c.jsx)(s.span,{className:"token punctuation",children:")"}),(0,c.jsx)(s.span,{className:"token punctuation",children:"."}),(0,c.jsx)(s.span,{className:"token function",children:"uuid"}),(0,c.jsx)(s.span,{className:"token punctuation",children:"("}),(0,c.jsx)(s.span,{className:"token punctuation",children:")"}),(0,c.jsx)(s.span,{className:"token punctuation",children:","}),"\n"]}),(0,c.jsxs)(s.span,{className:"code-line",children:["  email",(0,c.jsx)(s.span,{className:"token operator",children:":"})," z",(0,c.jsx)(s.span,{className:"token punctuation",children:"."}),(0,c.jsx)(s.span,{className:"token function",children:"string"}),(0,c.jsx)(s.span,{className:"token punctuation",children:"("}),(0,c.jsx)(s.span,{className:"token punctuation",children:")"}),(0,c.jsx)(s.span,{className:"token punctuation",children:"."}),(0,c.jsx)(s.span,{className:"token function",children:"email"}),(0,c.jsx)(s.span,{className:"token punctuation",children:"("}),(0,c.jsx)(s.span,{className:"token punctuation",children:")"}),(0,c.jsx)(s.span,{className:"token punctuation",children:","}),"\n"]}),(0,c.jsxs)(s.span,{className:"code-line",children:["  login",(0,c.jsx)(s.span,{className:"token operator",children:":"})," z",(0,c.jsx)(s.span,{className:"token punctuation",children:"."}),(0,c.jsx)(s.span,{className:"token function",children:"string"}),(0,c.jsx)(s.span,{className:"token punctuation",children:"("}),(0,c.jsx)(s.span,{className:"token punctuation",children:")"}),(0,c.jsx)(s.span,{className:"token punctuation",children:","}),"\n"]}),(0,c.jsxs)(s.span,{className:"code-line",children:["  createdAt",(0,c.jsx)(s.span,{className:"token operator",children:":"})," z",(0,c.jsx)(s.span,{className:"token punctuation",children:"."}),(0,c.jsx)(s.span,{className:"token function",children:"string"}),(0,c.jsx)(s.span,{className:"token punctuation",children:"("}),(0,c.jsx)(s.span,{className:"token punctuation",children:")"}),(0,c.jsx)(s.span,{className:"token punctuation",children:"."}),(0,c.jsx)(s.span,{className:"token function",children:"datetime"}),(0,c.jsx)(s.span,{className:"token punctuation",children:"("}),(0,c.jsx)(s.span,{className:"token punctuation",children:")"}),(0,c.jsx)(s.span,{className:"token punctuation",children:","}),"\n"]}),(0,c.jsxs)(s.span,{className:"code-line",children:["  deletedAt",(0,c.jsx)(s.span,{className:"token operator",children:":"})," z",(0,c.jsx)(s.span,{className:"token punctuation",children:"."}),(0,c.jsx)(s.span,{className:"token function",children:"string"}),(0,c.jsx)(s.span,{className:"token punctuation",children:"("}),(0,c.jsx)(s.span,{className:"token punctuation",children:")"}),(0,c.jsx)(s.span,{className:"token punctuation",children:"."}),(0,c.jsx)(s.span,{className:"token function",children:"datetime"}),(0,c.jsx)(s.span,{className:"token punctuation",children:"("}),(0,c.jsx)(s.span,{className:"token punctuation",children:")"}),(0,c.jsx)(s.span,{className:"token punctuation",children:"."}),(0,c.jsx)(s.span,{className:"token function",children:"nullable"}),(0,c.jsx)(s.span,{className:"token punctuation",children:"("}),(0,c.jsx)(s.span,{className:"token punctuation",children:")"}),(0,c.jsx)(s.span,{className:"token punctuation",children:","}),"\n"]}),(0,c.jsxs)(s.span,{className:"code-line",children:[(0,c.jsx)(s.span,{className:"token punctuation",children:"}"}),(0,c.jsx)(s.span,{className:"token punctuation",children:")"}),(0,c.jsx)(s.span,{className:"token punctuation",children:";"}),"\n"]})]})}),"\n",(0,c.jsx)(s.pre,{className:"language-ts",children:(0,c.jsxs)(s.code,{className:"language-ts code-highlight",children:[(0,c.jsxs)(s.span,{className:"code-line",children:[(0,c.jsx)(s.span,{className:"token comment",children:"// api/requests/v1/accountDetails/types.ts"}),"\n"]}),(0,c.jsxs)(s.span,{className:"code-line",children:[(0,c.jsx)(s.span,{className:"token keyword",children:"import"})," ",(0,c.jsx)(s.span,{className:"token punctuation",children:"{"})," z ",(0,c.jsx)(s.span,{className:"token punctuation",children:"}"})," ",(0,c.jsx)(s.span,{className:"token keyword",children:"from"})," ",(0,c.jsx)(s.span,{className:"token string",children:'"zod"'}),(0,c.jsx)(s.span,{className:"token punctuation",children:";"}),"\n"]}),(0,c.jsxs)(s.span,{className:"code-line",children:[(0,c.jsx)(s.span,{className:"token keyword",children:"import"})," ",(0,c.jsx)(s.span,{className:"token punctuation",children:"{"})," schema ",(0,c.jsx)(s.span,{className:"token punctuation",children:"}"})," ",(0,c.jsx)(s.span,{className:"token keyword",children:"from"})," ",(0,c.jsx)(s.span,{className:"token string",children:'"./schema"'}),(0,c.jsx)(s.span,{className:"token punctuation",children:";"}),"\n"]}),(0,c.jsx)(s.span,{className:"code-line",children:"\n"}),(0,c.jsxs)(s.span,{className:"code-line",children:[(0,c.jsx)(s.span,{className:"token keyword",children:"export"})," ",(0,c.jsx)(s.span,{className:"token keyword",children:"type"})," ",(0,c.jsx)(s.span,{className:"token class-name",children:"AccountDetailsResponse"})," ",(0,c.jsx)(s.span,{className:"token operator",children:"="})," z",(0,c.jsx)(s.span,{className:"token punctuation",children:"."}),"infer",(0,c.jsx)(s.span,{className:"token operator",children:"<"}),(0,c.jsx)(s.span,{className:"token keyword",children:"typeof"})," schema",(0,c.jsx)(s.span,{className:"token operator",children:">"}),(0,c.jsx)(s.span,{className:"token punctuation",children:";"}),"\n"]}),(0,c.jsxs)(s.span,{className:"code-line",children:[(0,c.jsx)(s.span,{className:"token keyword",children:"export"})," ",(0,c.jsx)(s.span,{className:"token keyword",children:"type"})," ",(0,c.jsx)(s.span,{className:"token class-name",children:"AccountDetailsErrorResponse"})," ",(0,c.jsx)(s.span,{className:"token operator",children:"="})," Record",(0,c.jsx)(s.span,{className:"token operator",children:"<"}),(0,c.jsx)(s.span,{className:"token builtin",children:"string"}),(0,c.jsx)(s.span,{className:"token punctuation",children:","})," ",(0,c.jsx)(s.span,{className:"token builtin",children:"unknown"}),(0,c.jsx)(s.span,{className:"token operator",children:">"}),(0,c.jsx)(s.span,{className:"token punctuation",children:";"}),"\n"]})]})}),"\n",(0,c.jsx)(s.pre,{className:"language-ts",children:(0,c.jsxs)(s.code,{className:"language-ts code-highlight",children:[(0,c.jsxs)(s.span,{className:"code-line",children:[(0,c.jsx)(s.span,{className:"token comment",children:"// api/requests/v1/accountDetails/request.ts"}),"\n"]}),(0,c.jsxs)(s.span,{className:"code-line",children:[(0,c.jsx)(s.span,{className:"token keyword",children:"import"})," ",(0,c.jsx)(s.span,{className:"token punctuation",children:"{"})," apiClient ",(0,c.jsx)(s.span,{className:"token punctuation",children:"}"})," ",(0,c.jsx)(s.span,{className:"token keyword",children:"from"})," ",(0,c.jsx)(s.span,{className:"token string",children:'"@/api/client"'}),(0,c.jsx)(s.span,{className:"token punctuation",children:";"}),"\n"]}),(0,c.jsxs)(s.span,{className:"code-line",children:[(0,c.jsx)(s.span,{className:"token keyword",children:"import"})," ",(0,c.jsx)(s.span,{className:"token punctuation",children:"{"})," validateSchema ",(0,c.jsx)(s.span,{className:"token punctuation",children:"}"})," ",(0,c.jsx)(s.span,{className:"token keyword",children:"from"})," ",(0,c.jsx)(s.span,{className:"token string",children:'"@/api/validator"'}),(0,c.jsx)(s.span,{className:"token punctuation",children:";"}),"\n"]}),(0,c.jsx)(s.span,{className:"code-line",children:"\n"}),(0,c.jsxs)(s.span,{className:"code-line",children:[(0,c.jsx)(s.span,{className:"token keyword",children:"import"})," ",(0,c.jsx)(s.span,{className:"token punctuation",children:"{"})," schema ",(0,c.jsx)(s.span,{className:"token punctuation",children:"}"})," ",(0,c.jsx)(s.span,{className:"token keyword",children:"from"})," ",(0,c.jsx)(s.span,{className:"token string",children:'"./schema"'}),(0,c.jsx)(s.span,{className:"token punctuation",children:";"}),"\n"]}),(0,c.jsxs)(s.span,{className:"code-line",children:[(0,c.jsx)(s.span,{className:"token keyword",children:"import"})," ",(0,c.jsx)(s.span,{className:"token punctuation",children:"{"})," AccountDetailsResponse ",(0,c.jsx)(s.span,{className:"token punctuation",children:"}"})," ",(0,c.jsx)(s.span,{className:"token keyword",children:"from"})," ",(0,c.jsx)(s.span,{className:"token string",children:'"./types"'}),(0,c.jsx)(s.span,{className:"token punctuation",children:";"}),"\n"]}),(0,c.jsx)(s.span,{className:"code-line",children:"\n"}),(0,c.jsxs)(s.span,{className:"code-line highlight-line",children:[(0,c.jsx)(s.span,{className:"token keyword",children:"function"})," ",(0,c.jsx)(s.span,{className:"token function",children:"validate"}),(0,c.jsx)(s.span,{className:"token punctuation",children:"("}),"dto",(0,c.jsx)(s.span,{className:"token operator",children:":"})," ",(0,c.jsx)(s.span,{className:"token builtin",children:"unknown"}),(0,c.jsx)(s.span,{className:"token punctuation",children:")"}),(0,c.jsx)(s.span,{className:"token operator",children:":"})," AccountDetailsResponse ",(0,c.jsx)(s.span,{className:"token punctuation",children:"{"}),"\n"]}),(0,c.jsxs)(s.span,{className:"code-line highlight-line",children:["  ",(0,c.jsx)(s.span,{className:"token keyword",children:"return"})," ",(0,c.jsx)(s.span,{className:"token function",children:"validateSchema"}),(0,c.jsx)(s.span,{className:"token punctuation",children:"("}),(0,c.jsx)(s.span,{className:"token punctuation",children:"{"})," dto",(0,c.jsx)(s.span,{className:"token punctuation",children:","})," schema",(0,c.jsx)(s.span,{className:"token punctuation",children:","})," schemaName",(0,c.jsx)(s.span,{className:"token operator",children:":"})," ",(0,c.jsx)(s.span,{className:"token string",children:'"v1/account/details"'})," ",(0,c.jsx)(s.span,{className:"token punctuation",children:"}"}),(0,c.jsx)(s.span,{className:"token punctuation",children:")"}),(0,c.jsx)(s.span,{className:"token punctuation",children:";"}),"\n"]}),(0,c.jsxs)(s.span,{className:"code-line highlight-line",children:[(0,c.jsx)(s.span,{className:"token punctuation",children:"}"}),"\n"]}),(0,c.jsx)(s.span,{className:"code-line",children:"\n"}),(0,c.jsxs)(s.span,{className:"code-line",children:[(0,c.jsx)(s.span,{className:"token keyword",children:"export"})," ",(0,c.jsx)(s.span,{className:"token keyword",children:"async"})," ",(0,c.jsx)(s.span,{className:"token keyword",children:"function"})," ",(0,c.jsx)(s.span,{className:"token function",children:"getAccountDetails"}),(0,c.jsx)(s.span,{className:"token punctuation",children:"("}),(0,c.jsx)(s.span,{className:"token punctuation",children:")"}),(0,c.jsx)(s.span,{className:"token operator",children:":"})," ",(0,c.jsx)(s.span,{className:"token builtin",children:"Promise"}),(0,c.jsx)(s.span,{className:"token operator",children:"<"}),"AccountDetailsResponse",(0,c.jsx)(s.span,{className:"token operator",children:">"})," ",(0,c.jsx)(s.span,{className:"token punctuation",children:"{"}),"\n"]}),(0,c.jsxs)(s.span,{className:"code-line",children:["  ",(0,c.jsx)(s.span,{className:"token keyword",children:"const"})," response ",(0,c.jsx)(s.span,{className:"token operator",children:"="})," ",(0,c.jsx)(s.span,{className:"token keyword",children:"await"})," apiClient",(0,c.jsx)(s.span,{className:"token punctuation",children:"."}),(0,c.jsx)(s.span,{className:"token function",children:"get"}),(0,c.jsx)(s.span,{className:"token punctuation",children:"("}),(0,c.jsx)(s.span,{className:"token string",children:'"/api/v1/account/details"'}),(0,c.jsx)(s.span,{className:"token punctuation",children:")"}),(0,c.jsx)(s.span,{className:"token punctuation",children:";"}),"\n"]}),(0,c.jsx)(s.span,{className:"code-line",children:"\n"}),(0,c.jsxs)(s.span,{className:"code-line",children:["  ",(0,c.jsx)(s.span,{className:"token keyword",children:"return"})," ",(0,c.jsx)(s.span,{className:"token function",children:"validate"}),(0,c.jsx)(s.span,{className:"token punctuation",children:"("}),"response",(0,c.jsx)(s.span,{className:"token punctuation",children:"."}),"data",(0,c.jsx)(s.span,{className:"token punctuation",children:")"}),(0,c.jsx)(s.span,{className:"token punctuation",children:";"}),"\n"]}),(0,c.jsxs)(s.span,{className:"code-line",children:[(0,c.jsx)(s.span,{className:"token punctuation",children:"}"}),"\n"]})]})}),"\n",(0,c.jsxs)(s.h2,{id:"conclusion",children:[(0,c.jsx)(s.a,{"aria-hidden":"true",tabIndex:"-1",href:"#conclusion",children:(0,c.jsx)(s.span,{className:"icon icon-link"})}),"Conclusion"]}),"\n",(0,c.jsx)(s.p,{children:"API response validation is a critical aspect of building reliable and robust applications. Zod, with its TypeScript-first approach and expressive syntax, simplifies the process of defining and enforcing data schemas."}),"\n",(0,c.jsx)(s.p,{children:"By incorporating Zod into your workflow, you can enhance the integrity of your APIs, catch potential issues early, and ensure that your application communicates seamlessly with external services."})]})}var i=function(n){void 0===n&&(n={});const{wrapper:s}=Object.assign({},(0,t.a)(),n.components);return s?(0,c.jsx)(s,Object.assign({},n,{children:(0,c.jsx)(l,n)})):l(n)};var o=e(4361),r=e(8029),p=e(8875),d=e(180),h=e(5551),m=e(9213),u=e(3120),x=e(6026),j=e(2349),N=e(7123);function k(n){let{data:s,pageContext:e,children:a}=n;const l=e.data,{frontmatter:i,tableOfContents:j}=l,{slug:k,timeToRead:g}=l.fields,{title:f,language:y,authors:w,datePublished:v,datePublishedMeta:b,dateUpdated:z,dateUpdatedMeta:T}=i,A=`${s.site.siteMetadata.siteUrl}/thumbnails/${(0,o.H)(k)}.png`;return(0,c.jsx)(h.A,{children:(0,c.jsx)(p.V,{children:(0,c.jsxs)("article",{className:"post",itemScope:!0,itemType:"http://schema.org/Article",lang:y,children:[(0,c.jsx)("meta",{itemProp:"image",content:A}),(0,c.jsx)("meta",{itemProp:"dateModified",content:T}),(0,c.jsx)("meta",{itemProp:"wordCount",content:`${g.words}`}),(0,c.jsxs)("header",{className:"post__header",children:[(0,c.jsx)("h1",{itemProp:"headline",children:f}),(0,c.jsxs)("p",{className:"post__header--metadata",children:[(0,c.jsx)(u.X,{data:w})," on ",(0,c.jsx)("time",{dateTime:b,itemProp:"datePublished",title:`Last modified on ${z}`,className:"post__header--date",children:v})," • ",(0,c.jsx)(x.t,{value:g.minutes})]})]}),(0,c.jsxs)("div",{className:"post__wrapper",children:[j.items?(0,c.jsx)("div",{className:"post__toc",children:(0,c.jsx)(N.o,{data:j})}):null,(0,c.jsxs)("div",{className:"post__content",children:[(0,c.jsx)("div",{itemProp:"articleBody",children:(0,c.jsx)(t.Z,{components:{Alert:r.b,Newsletter:m.m},children:a})}),(0,c.jsx)(d.$,{lang:y})]})]})]})})})}function g(n){return a.createElement(k,n,a.createElement(i,n))}function f(n){let{data:s,pageContext:e}=n;const a=e.data,t=a.fields.slug,{excerpt:l}=a,{title:i,description:r}=a.frontmatter,p=s.site.siteMetadata.siteUrl,d=`${p}/thumbnails/${(0,o.H)(t)}.png`;return(0,c.jsx)(j.H,{url:`${p}${t}`,title:i,image:d,description:r||l,children:(0,c.jsx)("html",{className:"smooth-scroll"})})}}}]);
//# sourceMappingURL=component---src-templates-blog-post-tsx-content-file-path-content-blog-2023-11-19-api-response-validation-with-zod-index-md-9b51f93e0b98ea3603e1.js.map