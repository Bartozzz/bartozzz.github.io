"use strict";(self.webpackChunklaniewski_me=self.webpackChunklaniewski_me||[]).push([[418],{4428:function(s,e,n){var a=n(5893),c=n(1151);function l(s){const e=Object.assign({p:"p",em:"em",h2:"h2",a:"a",span:"span",strong:"strong",ul:"ul",li:"li",h3:"h3",ol:"ol",code:"code",pre:"pre"},(0,c.a)(),s.components);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(e.p,{children:["With JavaScript increasingly gaining popularity, Progressive Web Apps (",(0,a.jsx)(e.em,{children:"PWAs"}),") might replace native mobile & desktop apps in the future. In this post, we will learn how to develop and test offline-first, Vue-based Progressive Web Applications and why it is worth it."]}),"\n",(0,a.jsxs)(e.h2,{id:"introduction-to-progressive-web-apps-pwas",children:[(0,a.jsx)(e.a,{"aria-hidden":"true",tabIndex:"-1",href:"#introduction-to-progressive-web-apps-pwas",children:(0,a.jsx)(e.span,{className:"icon icon-link"})}),"Introduction to Progressive Web Apps (PWAs)"]}),"\n",(0,a.jsxs)(e.p,{children:["Progressive Web Apps can be installed on most devices like native apps. They are meant to be ",(0,a.jsx)(e.strong,{children:"reliable"})," (work on each platform, even offline), ",(0,a.jsx)(e.strong,{children:"fast"}),", and provide a ",(0,a.jsx)(e.strong,{children:"native-like"})," user experience. These apps combine the best of web and native solutions:"]}),"\n",(0,a.jsxs)(e.ul,{children:["\n",(0,a.jsxs)(e.li,{children:["They are ",(0,a.jsx)(e.strong,{children:"rapid to develop"}),", ",(0,a.jsx)(e.strong,{children:"cross-platform"})," and ",(0,a.jsx)(e.strong,{children:"responsive"})," by nature. JavaScript provides a lot of frameworks (such as ",(0,a.jsx)(e.a,{href:"https://vuejs.org/",rel:"nofollow noopener noreferrer",target:"_blank",children:"Vue"}),", ",(0,a.jsx)(e.a,{href:"https://react.dev/",rel:"nofollow noopener noreferrer",target:"_blank",children:"React"}),") and dedicated front-end component libraries to boost productivity (Bootstrap, Material UI). You write your code once and deploy your application on every platform;"]}),"\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.strong,{children:"Fast load"}),", ",(0,a.jsx)(e.strong,{children:"fast response"}),". Progressive web apps are comparable to native solutions in terms of efficiency. With ",(0,a.jsx)(e.em,{children:"service workers"}),", cache, and several optimizations made in engines running JavaScript, Progressive Web Applications’ loading and response times are very low."]}),"\n"]}),"\n",(0,a.jsxs)(e.p,{children:["It is important to notice that if you are planning on making your application a PWA, you don’t have to rewrite all the logic. For example, your application should work offline, but it doesn’t mean that you must set up a background queue or store your data in a persistent storage – an offline message (e.g. “",(0,a.jsx)(e.em,{children:"You’re offline, check your network status."}),"”) is enough."]}),"\n",(0,a.jsxs)(e.h3,{id:"browser-support",children:[(0,a.jsx)(e.a,{"aria-hidden":"true",tabIndex:"-1",href:"#browser-support",children:(0,a.jsx)(e.span,{className:"icon icon-link"})}),"Browser support"]}),"\n",(0,a.jsx)(e.p,{children:"Progressive Web Apps are compatible with every mobile device that supports one of the following browsers:"}),"\n",(0,a.jsxs)(e.ul,{children:["\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.strong,{children:"Google Chrome"})," (since v40+);"]}),"\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.strong,{children:"Firefox"})," (since v44+);"]}),"\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.strong,{children:"Safari"})," (since v11.1+);"]}),"\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.strong,{children:"Edge"})," (since v17+);"]}),"\n"]}),"\n",(0,a.jsx)(e.p,{children:"Additionally, Google Chrome recently added support for Progressive Web Apps on desktop platforms, such as:"}),"\n",(0,a.jsxs)(e.ul,{children:["\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.strong,{children:"Chrome OS"})," (since Chrome 67+);"]}),"\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.strong,{children:"Linux"})," (since Chrome 70+);"]}),"\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.strong,{children:"Windows"})," (since Chrome 70+);"]}),"\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.strong,{children:"macOS"})," (since Chrome 72+);"]}),"\n"]}),"\n",(0,a.jsxs)(e.h2,{id:"getting-started",children:[(0,a.jsx)(e.a,{"aria-hidden":"true",tabIndex:"-1",href:"#getting-started",children:(0,a.jsx)(e.span,{className:"icon icon-link"})}),"Getting started"]}),"\n",(0,a.jsxs)(e.p,{children:["In this article, we will be using ",(0,a.jsx)(e.a,{href:"https://cli.vuejs.org/",rel:"nofollow noopener noreferrer",target:"_blank",children:"Vue-CLI"})," to create a brand-new Vue project. You can follow the instructions on ",(0,a.jsx)(e.a,{href:"https://cli.vuejs.org/guide/creating-a-project.html#vue-create",rel:"nofollow noopener noreferrer",target:"_blank",children:"their website"}),". I encourage you to manually select the following features:"]}),"\n",(0,a.jsxs)(e.ol,{children:["\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.strong,{children:"Babel"})," (used in this tutorial);"]}),"\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.strong,{children:"TypeScript"})," (used in this tutorial);"]}),"\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.strong,{children:"Progressive Web App"})," (PWA) support (required in this tutorial);"]}),"\n"]}),"\n",(0,a.jsxs)(e.h3,{id:"setting-up-a-service-worker",children:[(0,a.jsx)(e.a,{"aria-hidden":"true",tabIndex:"-1",href:"#setting-up-a-service-worker",children:(0,a.jsx)(e.span,{className:"icon icon-link"})}),"Setting up a service worker"]}),"\n",(0,a.jsxs)(e.p,{children:[(0,a.jsx)(e.a,{href:"https://developer.mozilla.org/en-US/docs/Web/API/Service_Worker_API",rel:"nofollow noopener noreferrer",target:"_blank",children:"Service workers"})," (not to be confused with ",(0,a.jsx)(e.a,{href:"https://developer.mozilla.org/en-US/docs/Web/API/Worklet",rel:"nofollow noopener noreferrer",target:"_blank",children:(0,a.jsx)(e.em,{children:"Worklets"})})," or raw ",(0,a.jsx)(e.a,{href:"https://developer.mozilla.org/en-US/docs/Web/API/Web_Workers_API/Using_web_workers",rel:"nofollow noopener noreferrer",target:"_blank",children:(0,a.jsx)(e.em,{children:"Workers"})}),") represents a proxy between the browser and the network – they allow you to intercept requests made by your application and handle each one separately enabling offline access, browser-level caching and more."]}),"\n",(0,a.jsxs)(e.p,{children:["Like Workers, service workers are executed on a different thread and communicate with the main one – your web application, via an API: since Workers are on a different thread, they don’t have direct access to any of your web app internals. Workers generally offer more functionality than the standard browser API and Service Workers, i.e. to send push notifications, create periodic background tasks, hook into OS internals (",(0,a.jsx)(e.a,{href:"https://developers.google.com/web/updates/2016/09/navigator-share",rel:"nofollow noopener noreferrer",target:"_blank",children:"Share Target API"}),", …)."]}),"\n",(0,a.jsxs)(e.p,{children:["To use Workers, your website must be served over HTTPS. Even if service Workers are not compatible with some web browsers, you can safely add them to your application – it will not break the experience for any user (",(0,a.jsx)(e.em,{children:"progressive enhancement"}),")."]}),"\n",(0,a.jsxs)(e.p,{children:[(0,a.jsx)(e.a,{href:"https://github.com/vuejs/vue-cli/tree/dev/packages/@vue/cli-plugin-pwa",rel:"nofollow noopener noreferrer",target:"_blank",children:(0,a.jsx)(e.code,{children:"@vue/cli-plugin-pwa"})})," should take care of creating a Service Worker. The generated Service Worker will cache all built resources. If you want to create a service worker manually, you can modify this behavior in the ",(0,a.jsx)(e.code,{children:"vue.config.js"})," file by adding the following lines:"]}),"\n",(0,a.jsx)(e.pre,{className:"language-typescript",children:(0,a.jsxs)(e.code,{className:"language-typescript code-highlight",children:[(0,a.jsxs)(e.span,{className:"code-line",children:["module",(0,a.jsx)(e.span,{className:"token punctuation",children:"."}),"exports ",(0,a.jsx)(e.span,{className:"token operator",children:"="})," ",(0,a.jsx)(e.span,{className:"token punctuation",children:"{"}),"\n"]}),(0,a.jsxs)(e.span,{className:"code-line",children:[" pwa",(0,a.jsx)(e.span,{className:"token operator",children:":"})," ",(0,a.jsx)(e.span,{className:"token punctuation",children:"{"}),"\n"]}),(0,a.jsxs)(e.span,{className:"code-line",children:["   workboxPluginMode",(0,a.jsx)(e.span,{className:"token operator",children:":"})," ",(0,a.jsx)(e.span,{className:"token string",children:'"InjectManifest"'}),(0,a.jsx)(e.span,{className:"token punctuation",children:","}),"\n"]}),(0,a.jsxs)(e.span,{className:"code-line",children:["   workboxOptions",(0,a.jsx)(e.span,{className:"token operator",children:":"})," ",(0,a.jsx)(e.span,{className:"token punctuation",children:"{"}),"\n"]}),(0,a.jsxs)(e.span,{className:"code-line",children:["     swSrc",(0,a.jsx)(e.span,{className:"token operator",children:":"})," ",(0,a.jsx)(e.span,{className:"token string",children:'"public/service-worker.js"'}),"\n"]}),(0,a.jsxs)(e.span,{className:"code-line",children:["   ",(0,a.jsx)(e.span,{className:"token punctuation",children:"}"}),"\n"]}),(0,a.jsxs)(e.span,{className:"code-line",children:[" ",(0,a.jsx)(e.span,{className:"token punctuation",children:"}"}),"\n"]}),(0,a.jsxs)(e.span,{className:"code-line",children:[(0,a.jsx)(e.span,{className:"token punctuation",children:"}"}),(0,a.jsx)(e.span,{className:"token punctuation",children:";"}),"\n"]})]})}),"\n",(0,a.jsxs)(e.p,{children:["The path in ",(0,a.jsx)(e.code,{children:"swSrc"})," option must match the path specified in the ",(0,a.jsx)(e.code,{children:"registerServiceWorker.ts"})," file, otherwise, your Service Worker will not be registered. You can then use ",(0,a.jsx)(e.a,{href:"https://developers.google.com/web/tools/workbox/guides/get-started",rel:"nofollow noopener noreferrer",target:"_blank",children:"Workbox"})," to define custom rules for request interceptors. Here’s an example:"]}),"\n",(0,a.jsx)(e.pre,{className:"language-javascript",children:(0,a.jsxs)(e.code,{className:"language-javascript code-highlight",children:[(0,a.jsxs)(e.span,{className:"code-line",children:[(0,a.jsx)(e.span,{className:"token comment",children:"// public/service-worker.js"}),"\n"]}),(0,a.jsxs)(e.span,{className:"code-line",children:["workbox",(0,a.jsx)(e.span,{className:"token punctuation",children:"."}),(0,a.jsx)(e.span,{className:"token method function property-access",children:"setConfig"}),(0,a.jsx)(e.span,{className:"token punctuation",children:"("}),(0,a.jsx)(e.span,{className:"token punctuation",children:"{"})," ",(0,a.jsx)(e.span,{className:"token literal-property property",children:"debug"}),(0,a.jsx)(e.span,{className:"token operator",children:":"})," ",(0,a.jsx)(e.span,{className:"token boolean",children:"true"})," ",(0,a.jsx)(e.span,{className:"token punctuation",children:"}"}),(0,a.jsx)(e.span,{className:"token punctuation",children:")"}),(0,a.jsx)(e.span,{className:"token punctuation",children:";"}),"\n"]}),(0,a.jsxs)(e.span,{className:"code-line",children:["workbox",(0,a.jsx)(e.span,{className:"token punctuation",children:"."}),(0,a.jsx)(e.span,{className:"token property-access",children:"precaching"}),(0,a.jsx)(e.span,{className:"token punctuation",children:"."}),(0,a.jsx)(e.span,{className:"token method function property-access",children:"precacheAndRoute"}),(0,a.jsx)(e.span,{className:"token punctuation",children:"("}),(0,a.jsx)(e.span,{className:"token punctuation",children:"["}),(0,a.jsx)(e.span,{className:"token punctuation",children:"]"}),(0,a.jsx)(e.span,{className:"token punctuation",children:")"}),(0,a.jsx)(e.span,{className:"token punctuation",children:";"}),"\n"]}),(0,a.jsx)(e.span,{className:"code-line",children:"\n"}),(0,a.jsxs)(e.span,{className:"code-line",children:[(0,a.jsx)(e.span,{className:"token comment",children:"// Cache images:"}),"\n"]}),(0,a.jsxs)(e.span,{className:"code-line",children:["workbox",(0,a.jsx)(e.span,{className:"token punctuation",children:"."}),(0,a.jsx)(e.span,{className:"token property-access",children:"routing"}),(0,a.jsx)(e.span,{className:"token punctuation",children:"."}),(0,a.jsx)(e.span,{className:"token method function property-access",children:"registerRoute"}),(0,a.jsx)(e.span,{className:"token punctuation",children:"("}),"\n"]}),(0,a.jsxs)(e.span,{className:"code-line",children:[" ",(0,a.jsxs)(e.span,{className:"token regex",children:[(0,a.jsx)(e.span,{className:"token regex-delimiter",children:"/"}),(0,a.jsxs)(e.span,{className:"token regex-source language-regex",children:[(0,a.jsx)(e.span,{className:"token special-escape escape",children:"\\."}),(0,a.jsx)(e.span,{className:"token group punctuation",children:"(?:"}),"png",(0,a.jsx)(e.span,{className:"token alternation keyword",children:"|"}),"gif",(0,a.jsx)(e.span,{className:"token alternation keyword",children:"|"}),"jpg",(0,a.jsx)(e.span,{className:"token alternation keyword",children:"|"}),"jpeg",(0,a.jsx)(e.span,{className:"token alternation keyword",children:"|"}),"svg",(0,a.jsx)(e.span,{className:"token group punctuation",children:")"}),(0,a.jsx)(e.span,{className:"token anchor function",children:"$"})]}),(0,a.jsx)(e.span,{className:"token regex-delimiter",children:"/"})]}),(0,a.jsx)(e.span,{className:"token punctuation",children:","}),"\n"]}),(0,a.jsxs)(e.span,{className:"code-line",children:[" workbox",(0,a.jsx)(e.span,{className:"token punctuation",children:"."}),(0,a.jsx)(e.span,{className:"token property-access",children:"strategies"}),(0,a.jsx)(e.span,{className:"token punctuation",children:"."}),(0,a.jsx)(e.span,{className:"token method function property-access",children:"staleWhileRevalidate"}),(0,a.jsx)(e.span,{className:"token punctuation",children:"("}),(0,a.jsx)(e.span,{className:"token punctuation",children:"{"}),"\n"]}),(0,a.jsxs)(e.span,{className:"code-line",children:["   ",(0,a.jsx)(e.span,{className:"token literal-property property",children:"cacheName"}),(0,a.jsx)(e.span,{className:"token operator",children:":"})," ",(0,a.jsx)(e.span,{className:"token string",children:'"images"'}),(0,a.jsx)(e.span,{className:"token punctuation",children:","}),"\n"]}),(0,a.jsxs)(e.span,{className:"code-line",children:["   ",(0,a.jsx)(e.span,{className:"token literal-property property",children:"plugins"}),(0,a.jsx)(e.span,{className:"token operator",children:":"})," ",(0,a.jsx)(e.span,{className:"token punctuation",children:"["}),"\n"]}),(0,a.jsxs)(e.span,{className:"code-line",children:["     ",(0,a.jsx)(e.span,{className:"token keyword",children:"new"})," ",(0,a.jsxs)(e.span,{className:"token class-name",children:["workbox",(0,a.jsx)(e.span,{className:"token punctuation",children:"."}),"expiration",(0,a.jsx)(e.span,{className:"token punctuation",children:"."}),"Plugin"]}),(0,a.jsx)(e.span,{className:"token punctuation",children:"("}),(0,a.jsx)(e.span,{className:"token punctuation",children:"{"}),"\n"]}),(0,a.jsxs)(e.span,{className:"code-line",children:["       ",(0,a.jsx)(e.span,{className:"token literal-property property",children:"maxEntries"}),(0,a.jsx)(e.span,{className:"token operator",children:":"})," ",(0,a.jsx)(e.span,{className:"token number",children:"60"}),(0,a.jsx)(e.span,{className:"token punctuation",children:","}),"\n"]}),(0,a.jsxs)(e.span,{className:"code-line",children:["       ",(0,a.jsx)(e.span,{className:"token literal-property property",children:"maxAgeSeconds"}),(0,a.jsx)(e.span,{className:"token operator",children:":"})," ",(0,a.jsx)(e.span,{className:"token number",children:"30"})," ",(0,a.jsx)(e.span,{className:"token operator",children:"*"})," ",(0,a.jsx)(e.span,{className:"token number",children:"24"})," ",(0,a.jsx)(e.span,{className:"token operator",children:"*"})," ",(0,a.jsx)(e.span,{className:"token number",children:"60"})," ",(0,a.jsx)(e.span,{className:"token operator",children:"*"})," ",(0,a.jsx)(e.span,{className:"token number",children:"60"})," ",(0,a.jsx)(e.span,{className:"token comment",children:"// 30 days"}),"\n"]}),(0,a.jsxs)(e.span,{className:"code-line",children:["     ",(0,a.jsx)(e.span,{className:"token punctuation",children:"}"}),(0,a.jsx)(e.span,{className:"token punctuation",children:")"}),"\n"]}),(0,a.jsxs)(e.span,{className:"code-line",children:["   ",(0,a.jsx)(e.span,{className:"token punctuation",children:"]"}),"\n"]}),(0,a.jsxs)(e.span,{className:"code-line",children:[" ",(0,a.jsx)(e.span,{className:"token punctuation",children:"}"}),(0,a.jsx)(e.span,{className:"token punctuation",children:")"}),"\n"]}),(0,a.jsxs)(e.span,{className:"code-line",children:[(0,a.jsx)(e.span,{className:"token punctuation",children:")"}),(0,a.jsx)(e.span,{className:"token punctuation",children:";"}),"\n"]}),(0,a.jsx)(e.span,{className:"code-line",children:"\n"}),(0,a.jsxs)(e.span,{className:"code-line",children:[(0,a.jsx)(e.span,{className:"token comment",children:"// Cache Google fonts:"}),"\n"]}),(0,a.jsxs)(e.span,{className:"code-line",children:["workbox",(0,a.jsx)(e.span,{className:"token punctuation",children:"."}),(0,a.jsx)(e.span,{className:"token property-access",children:"routing"}),(0,a.jsx)(e.span,{className:"token punctuation",children:"."}),(0,a.jsx)(e.span,{className:"token method function property-access",children:"registerRoute"}),(0,a.jsx)(e.span,{className:"token punctuation",children:"("}),"\n"]}),(0,a.jsxs)(e.span,{className:"code-line",children:[" ",(0,a.jsx)(e.span,{className:"token keyword",children:"new"})," ",(0,a.jsx)(e.span,{className:"token class-name",children:"RegExp"}),(0,a.jsx)(e.span,{className:"token punctuation",children:"("}),(0,a.jsx)(e.span,{className:"token string",children:'"https://fonts.(?:googleapis|gstatic).com/(.*)"'}),(0,a.jsx)(e.span,{className:"token punctuation",children:")"}),(0,a.jsx)(e.span,{className:"token punctuation",children:","}),"\n"]}),(0,a.jsxs)(e.span,{className:"code-line",children:[" workbox",(0,a.jsx)(e.span,{className:"token punctuation",children:"."}),(0,a.jsx)(e.span,{className:"token property-access",children:"strategies"}),(0,a.jsx)(e.span,{className:"token punctuation",children:"."}),(0,a.jsx)(e.span,{className:"token method function property-access",children:"cacheFirst"}),(0,a.jsx)(e.span,{className:"token punctuation",children:"("}),(0,a.jsx)(e.span,{className:"token punctuation",children:"{"}),"\n"]}),(0,a.jsxs)(e.span,{className:"code-line",children:["   ",(0,a.jsx)(e.span,{className:"token literal-property property",children:"cacheName"}),(0,a.jsx)(e.span,{className:"token operator",children:":"})," ",(0,a.jsx)(e.span,{className:"token string",children:'"googleapis"'}),(0,a.jsx)(e.span,{className:"token punctuation",children:","}),"\n"]}),(0,a.jsxs)(e.span,{className:"code-line",children:["   ",(0,a.jsx)(e.span,{className:"token literal-property property",children:"plugins"}),(0,a.jsx)(e.span,{className:"token operator",children:":"})," ",(0,a.jsx)(e.span,{className:"token punctuation",children:"["}),"\n"]}),(0,a.jsxs)(e.span,{className:"code-line",children:["     ",(0,a.jsx)(e.span,{className:"token keyword",children:"new"})," ",(0,a.jsxs)(e.span,{className:"token class-name",children:["workbox",(0,a.jsx)(e.span,{className:"token punctuation",children:"."}),"expiration",(0,a.jsx)(e.span,{className:"token punctuation",children:"."}),"Plugin"]}),(0,a.jsx)(e.span,{className:"token punctuation",children:"("}),(0,a.jsx)(e.span,{className:"token punctuation",children:"{"}),"\n"]}),(0,a.jsxs)(e.span,{className:"code-line",children:["       ",(0,a.jsx)(e.span,{className:"token literal-property property",children:"maxEntries"}),(0,a.jsx)(e.span,{className:"token operator",children:":"})," ",(0,a.jsx)(e.span,{className:"token number",children:"30"}),(0,a.jsx)(e.span,{className:"token punctuation",children:","}),"\n"]}),(0,a.jsxs)(e.span,{className:"code-line",children:["       ",(0,a.jsx)(e.span,{className:"token literal-property property",children:"maxAgeSeconds"}),(0,a.jsx)(e.span,{className:"token operator",children:":"})," ",(0,a.jsx)(e.span,{className:"token number",children:"30"})," ",(0,a.jsx)(e.span,{className:"token operator",children:"*"})," ",(0,a.jsx)(e.span,{className:"token number",children:"24"})," ",(0,a.jsx)(e.span,{className:"token operator",children:"*"})," ",(0,a.jsx)(e.span,{className:"token number",children:"60"})," ",(0,a.jsx)(e.span,{className:"token operator",children:"*"})," ",(0,a.jsx)(e.span,{className:"token number",children:"60"})," ",(0,a.jsx)(e.span,{className:"token comment",children:"// 30 days"}),"\n"]}),(0,a.jsxs)(e.span,{className:"code-line",children:["     ",(0,a.jsx)(e.span,{className:"token punctuation",children:"}"}),(0,a.jsx)(e.span,{className:"token punctuation",children:")"}),"\n"]}),(0,a.jsxs)(e.span,{className:"code-line",children:["   ",(0,a.jsx)(e.span,{className:"token punctuation",children:"]"}),"\n"]}),(0,a.jsxs)(e.span,{className:"code-line",children:[" ",(0,a.jsx)(e.span,{className:"token punctuation",children:"}"}),(0,a.jsx)(e.span,{className:"token punctuation",children:")"}),"\n"]}),(0,a.jsxs)(e.span,{className:"code-line",children:[(0,a.jsx)(e.span,{className:"token punctuation",children:")"}),(0,a.jsx)(e.span,{className:"token punctuation",children:";"}),"\n"]})]})}),"\n",(0,a.jsxs)(e.h3,{id:"prompting-the-user-to-install",children:[(0,a.jsx)(e.a,{"aria-hidden":"true",tabIndex:"-1",href:"#prompting-the-user-to-install",children:(0,a.jsx)(e.span,{className:"icon icon-link"})}),"Prompting the user to install"]}),"\n",(0,a.jsx)(e.p,{children:"Installing a Progressive Web Application works the same way on both mobile and desktop devices. The website must meet a few requirements before it can be prompted to install:"}),"\n",(0,a.jsxs)(e.ol,{children:["\n",(0,a.jsx)(e.li,{children:"Meet a user engagement heuristic;"}),"\n",(0,a.jsx)(e.li,{children:"Include a web app manifest file;"}),"\n",(0,a.jsx)(e.li,{children:"Have an icon to represent the app on the device;"}),"\n",(0,a.jsx)(e.li,{children:"Have a registered service worker to make the app work offline;"}),"\n",(0,a.jsx)(e.li,{children:"The web app must be served over HTTPS and not already installed;"}),"\n"]}),"\n",(0,a.jsxs)(e.p,{children:["If those criteria are met, the web browser will emit a ",(0,a.jsx)(e.code,{children:"beforeinstallprompt"})," event which you can use to notify the user that your app can be installed. The most common way is by adding a button on the website. It is considered best practice to not show a full-page banner or distracting notifications. Let’s add some markup for our ",(0,a.jsx)(e.code,{children:"InstallBanner"})," component:"]}),"\n",(0,a.jsx)(e.pre,{className:"language-html",children:(0,a.jsxs)(e.code,{className:"language-html code-highlight",children:[(0,a.jsxs)(e.span,{className:"code-line",children:[(0,a.jsxs)(e.span,{className:"token tag",children:[(0,a.jsxs)(e.span,{className:"token tag",children:[(0,a.jsx)(e.span,{className:"token punctuation",children:"<"}),"template"]}),(0,a.jsx)(e.span,{className:"token punctuation",children:">"})]}),"\n"]}),(0,a.jsxs)(e.span,{className:"code-line",children:[" ",(0,a.jsxs)(e.span,{className:"token tag",children:[(0,a.jsxs)(e.span,{className:"token tag",children:[(0,a.jsx)(e.span,{className:"token punctuation",children:"<"}),"div"]})," ",(0,a.jsx)(e.span,{className:"token attr-name",children:"class"}),(0,a.jsxs)(e.span,{className:"token attr-value",children:[(0,a.jsx)(e.span,{className:"token punctuation attr-equals",children:"="}),(0,a.jsx)(e.span,{className:"token punctuation",children:'"'}),"banner",(0,a.jsx)(e.span,{className:"token punctuation",children:'"'})]})," ",(0,a.jsx)(e.span,{className:"token attr-name",children:"v-if"}),(0,a.jsxs)(e.span,{className:"token attr-value",children:[(0,a.jsx)(e.span,{className:"token punctuation attr-equals",children:"="}),(0,a.jsx)(e.span,{className:"token punctuation",children:'"'}),"deferredPrompt",(0,a.jsx)(e.span,{className:"token punctuation",children:'"'})]}),(0,a.jsx)(e.span,{className:"token punctuation",children:">"})]}),"\n"]}),(0,a.jsxs)(e.span,{className:"code-line",children:["   ",(0,a.jsxs)(e.span,{className:"token tag",children:[(0,a.jsxs)(e.span,{className:"token tag",children:[(0,a.jsx)(e.span,{className:"token punctuation",children:"<"}),"p"]}),(0,a.jsx)(e.span,{className:"token punctuation",children:">"})]}),"Do you want to install Foo App?",(0,a.jsxs)(e.span,{className:"token tag",children:[(0,a.jsxs)(e.span,{className:"token tag",children:[(0,a.jsx)(e.span,{className:"token punctuation",children:"</"}),"p"]}),(0,a.jsx)(e.span,{className:"token punctuation",children:">"})]}),"\n"]}),(0,a.jsxs)(e.span,{className:"code-line",children:["   ",(0,a.jsxs)(e.span,{className:"token tag",children:[(0,a.jsxs)(e.span,{className:"token tag",children:[(0,a.jsx)(e.span,{className:"token punctuation",children:"<"}),"button"]})," ",(0,a.jsx)(e.span,{className:"token attr-name",children:"@onClick"}),(0,a.jsxs)(e.span,{className:"token attr-value",children:[(0,a.jsx)(e.span,{className:"token punctuation attr-equals",children:"="}),(0,a.jsx)(e.span,{className:"token punctuation",children:'"'}),"promptInstall",(0,a.jsx)(e.span,{className:"token punctuation",children:'"'})]}),(0,a.jsx)(e.span,{className:"token punctuation",children:">"})]}),"Opt for!",(0,a.jsxs)(e.span,{className:"token tag",children:[(0,a.jsxs)(e.span,{className:"token tag",children:[(0,a.jsx)(e.span,{className:"token punctuation",children:"</"}),"button"]}),(0,a.jsx)(e.span,{className:"token punctuation",children:">"})]}),"\n"]}),(0,a.jsxs)(e.span,{className:"code-line",children:[" ",(0,a.jsxs)(e.span,{className:"token tag",children:[(0,a.jsxs)(e.span,{className:"token tag",children:[(0,a.jsx)(e.span,{className:"token punctuation",children:"</"}),"div"]}),(0,a.jsx)(e.span,{className:"token punctuation",children:">"})]}),"\n"]}),(0,a.jsxs)(e.span,{className:"code-line",children:[(0,a.jsxs)(e.span,{className:"token tag",children:[(0,a.jsxs)(e.span,{className:"token tag",children:[(0,a.jsx)(e.span,{className:"token punctuation",children:"</"}),"template"]}),(0,a.jsx)(e.span,{className:"token punctuation",children:">"})]}),"\n"]})]})}),"\n",(0,a.jsxs)(e.p,{children:["Instead of dealing with adding and removing event listeners for the ",(0,a.jsx)(e.code,{children:"beforeinstallprompt"})," event manually, we can use the ",(0,a.jsx)(e.a,{href:"https://github.com/Bartozzz/vue-pwa-install",rel:"nofollow noopener noreferrer",target:"_blank",children:(0,a.jsx)(e.code,{children:"vue-pwa-install"})})," plugin which I wrote for this article. It will emit a ",(0,a.jsx)(e.code,{children:"canInstall"})," in the root event bus – what you need to do is listen for this particular event in one of your components. First, let’s install the ",(0,a.jsx)(e.code,{children:"vue-pwa-install"})," plugin with the following command:"]}),"\n",(0,a.jsx)(e.pre,{className:"language-bash",children:(0,a.jsx)(e.code,{className:"language-bash code-highlight",children:(0,a.jsxs)(e.span,{className:"code-line",children:["$ ",(0,a.jsx)(e.span,{className:"token function",children:"npm"})," ",(0,a.jsx)(e.span,{className:"token function",children:"install"})," ",(0,a.jsx)(e.span,{className:"token parameter variable",children:"--save"})," vue-pwa-install\n"]})})}),"\n",(0,a.jsx)(e.p,{children:"Then, register this installed plugin in your app entry point:"}),"\n",(0,a.jsx)(e.pre,{className:"language-typescript",children:(0,a.jsxs)(e.code,{className:"language-typescript code-highlight",children:[(0,a.jsxs)(e.span,{className:"code-line",children:[(0,a.jsx)(e.span,{className:"token keyword",children:"import"})," Vue ",(0,a.jsx)(e.span,{className:"token keyword",children:"from"})," ",(0,a.jsx)(e.span,{className:"token string",children:'"vue"'}),(0,a.jsx)(e.span,{className:"token punctuation",children:";"}),"\n"]}),(0,a.jsxs)(e.span,{className:"code-line",children:[(0,a.jsx)(e.span,{className:"token keyword",children:"import"})," VueInstall ",(0,a.jsx)(e.span,{className:"token keyword",children:"from"})," ",(0,a.jsx)(e.span,{className:"token string",children:'"vue-pwa-install"'}),(0,a.jsx)(e.span,{className:"token punctuation",children:";"}),"\n"]}),(0,a.jsx)(e.span,{className:"code-line",children:"\n"}),(0,a.jsxs)(e.span,{className:"code-line",children:["Vue",(0,a.jsx)(e.span,{className:"token punctuation",children:"."}),(0,a.jsx)(e.span,{className:"token function",children:"use"}),(0,a.jsx)(e.span,{className:"token punctuation",children:"("}),"VueInstall",(0,a.jsx)(e.span,{className:"token punctuation",children:")"}),(0,a.jsx)(e.span,{className:"token punctuation",children:";"}),"\n"]})]})}),"\n",(0,a.jsxs)(e.p,{children:["Once registered, we can listen for the ",(0,a.jsx)(e.code,{children:"canInstall"})," event in any component and handle the event to show the install prompt. Let’s add the following code in our ",(0,a.jsx)(e.code,{children:"InstallBanner"})," component:"]}),"\n",(0,a.jsx)(e.pre,{className:"language-html",children:(0,a.jsxs)(e.code,{className:"language-html code-highlight",children:[(0,a.jsxs)(e.span,{className:"code-line",children:[(0,a.jsxs)(e.span,{className:"token tag",children:[(0,a.jsxs)(e.span,{className:"token tag",children:[(0,a.jsx)(e.span,{className:"token punctuation",children:"<"}),"script"]})," ",(0,a.jsx)(e.span,{className:"token attr-name",children:"lang"}),(0,a.jsxs)(e.span,{className:"token attr-value",children:[(0,a.jsx)(e.span,{className:"token punctuation attr-equals",children:"="}),(0,a.jsx)(e.span,{className:"token punctuation",children:'"'}),"ts",(0,a.jsx)(e.span,{className:"token punctuation",children:'"'})]}),(0,a.jsx)(e.span,{className:"token punctuation",children:">"})]}),(0,a.jsx)(e.span,{className:"token script",children:(0,a.jsx)(e.span,{className:"token language-javascript",children:"\n"})})]}),(0,a.jsx)(e.span,{className:"code-line",children:(0,a.jsx)(e.span,{className:"token script",children:(0,a.jsxs)(e.span,{className:"token language-javascript",children:[" ",(0,a.jsx)(e.span,{className:"token keyword module",children:"import"})," ",(0,a.jsxs)(e.span,{className:"token imports",children:[(0,a.jsx)(e.span,{className:"token punctuation",children:"{"})," ",(0,a.jsx)(e.span,{className:"token maybe-class-name",children:"Component"}),(0,a.jsx)(e.span,{className:"token punctuation",children:","})," ",(0,a.jsx)(e.span,{className:"token maybe-class-name",children:"Vue"})," ",(0,a.jsx)(e.span,{className:"token punctuation",children:"}"})]})," ",(0,a.jsx)(e.span,{className:"token keyword module",children:"from"})," ",(0,a.jsx)(e.span,{className:"token string",children:'"vue-property-decorator"'}),(0,a.jsx)(e.span,{className:"token punctuation",children:";"}),"\n"]})})}),(0,a.jsx)(e.span,{className:"code-line",children:(0,a.jsx)(e.span,{className:"token script",children:(0,a.jsxs)(e.span,{className:"token language-javascript",children:[" ",(0,a.jsx)(e.span,{className:"token keyword module",children:"import"})," ",(0,a.jsxs)(e.span,{className:"token imports",children:[(0,a.jsx)(e.span,{className:"token punctuation",children:"{"})," ",(0,a.jsx)(e.span,{className:"token maybe-class-name",children:"BeforeInstallPromptEvent"})," ",(0,a.jsx)(e.span,{className:"token punctuation",children:"}"})]})," ",(0,a.jsx)(e.span,{className:"token keyword module",children:"from"})," ",(0,a.jsx)(e.span,{className:"token string",children:'"vue-pwa-install"'}),(0,a.jsx)(e.span,{className:"token punctuation",children:";"}),"\n"]})})}),(0,a.jsx)(e.span,{className:"code-line",children:(0,a.jsx)(e.span,{className:"token script",children:(0,a.jsx)(e.span,{className:"token language-javascript",children:"\n"})})}),(0,a.jsx)(e.span,{className:"code-line",children:(0,a.jsx)(e.span,{className:"token script",children:(0,a.jsxs)(e.span,{className:"token language-javascript",children:[" @",(0,a.jsx)(e.span,{className:"token function",children:(0,a.jsx)(e.span,{className:"token maybe-class-name",children:"Component"})}),(0,a.jsx)(e.span,{className:"token punctuation",children:"("}),(0,a.jsx)(e.span,{className:"token punctuation",children:"{"}),(0,a.jsx)(e.span,{className:"token punctuation",children:"}"}),(0,a.jsx)(e.span,{className:"token punctuation",children:")"}),"\n"]})})}),(0,a.jsx)(e.span,{className:"code-line",children:(0,a.jsx)(e.span,{className:"token script",children:(0,a.jsxs)(e.span,{className:"token language-javascript",children:[" ",(0,a.jsx)(e.span,{className:"token keyword module",children:"export"})," ",(0,a.jsx)(e.span,{className:"token keyword module",children:"default"})," ",(0,a.jsx)(e.span,{className:"token keyword",children:"class"})," ",(0,a.jsx)(e.span,{className:"token class-name",children:"InstallBanner"})," ",(0,a.jsx)(e.span,{className:"token keyword",children:"extends"})," ",(0,a.jsx)(e.span,{className:"token class-name",children:"Vue"})," ",(0,a.jsx)(e.span,{className:"token punctuation",children:"{"}),"\n"]})})}),(0,a.jsx)(e.span,{className:"code-line",children:(0,a.jsx)(e.span,{className:"token script",children:(0,a.jsxs)(e.span,{className:"token language-javascript",children:["   ",(0,a.jsx)(e.span,{className:"token literal-property property",children:"deferredPrompt"}),(0,a.jsx)(e.span,{className:"token operator",children:":"})," ",(0,a.jsx)(e.span,{className:"token maybe-class-name",children:"BeforeInstallPromptEvent"})," ",(0,a.jsx)(e.span,{className:"token operator",children:"|"})," ",(0,a.jsx)(e.span,{className:"token keyword",children:"void"}),(0,a.jsx)(e.span,{className:"token punctuation",children:";"}),"\n"]})})}),(0,a.jsx)(e.span,{className:"code-line",children:(0,a.jsx)(e.span,{className:"token script",children:(0,a.jsx)(e.span,{className:"token language-javascript",children:"\n"})})}),(0,a.jsx)(e.span,{className:"code-line",children:(0,a.jsx)(e.span,{className:"token script",children:(0,a.jsxs)(e.span,{className:"token language-javascript",children:["   ",(0,a.jsx)(e.span,{className:"token function",children:"promptInstall"}),(0,a.jsx)(e.span,{className:"token punctuation",children:"("}),(0,a.jsx)(e.span,{className:"token punctuation",children:")"})," ",(0,a.jsx)(e.span,{className:"token punctuation",children:"{"}),"\n"]})})}),(0,a.jsx)(e.span,{className:"code-line",children:(0,a.jsx)(e.span,{className:"token script",children:(0,a.jsxs)(e.span,{className:"token language-javascript",children:["     ",(0,a.jsx)(e.span,{className:"token comment",children:"// Show the prompt:"}),"\n"]})})}),(0,a.jsx)(e.span,{className:"code-line",children:(0,a.jsx)(e.span,{className:"token script",children:(0,a.jsxs)(e.span,{className:"token language-javascript",children:["     ",(0,a.jsx)(e.span,{className:"token keyword",children:"this"}),(0,a.jsx)(e.span,{className:"token punctuation",children:"."}),(0,a.jsx)(e.span,{className:"token property-access",children:"deferredPrompt"}),(0,a.jsx)(e.span,{className:"token punctuation",children:"."}),(0,a.jsx)(e.span,{className:"token method function property-access",children:"prompt"}),(0,a.jsx)(e.span,{className:"token punctuation",children:"("}),(0,a.jsx)(e.span,{className:"token punctuation",children:")"}),(0,a.jsx)(e.span,{className:"token punctuation",children:";"}),"\n"]})})}),(0,a.jsx)(e.span,{className:"code-line",children:(0,a.jsx)(e.span,{className:"token script",children:(0,a.jsx)(e.span,{className:"token language-javascript",children:"\n"})})}),(0,a.jsx)(e.span,{className:"code-line",children:(0,a.jsx)(e.span,{className:"token script",children:(0,a.jsxs)(e.span,{className:"token language-javascript",children:["     ",(0,a.jsx)(e.span,{className:"token comment",children:"// Wait for the user to respond to the prompt:"}),"\n"]})})}),(0,a.jsx)(e.span,{className:"code-line",children:(0,a.jsx)(e.span,{className:"token script",children:(0,a.jsxs)(e.span,{className:"token language-javascript",children:["     ",(0,a.jsx)(e.span,{className:"token keyword",children:"this"}),(0,a.jsx)(e.span,{className:"token punctuation",children:"."}),(0,a.jsx)(e.span,{className:"token property-access",children:"deferredPrompt"}),(0,a.jsx)(e.span,{className:"token punctuation",children:"."}),(0,a.jsx)(e.span,{className:"token property-access",children:"userChoice"}),(0,a.jsx)(e.span,{className:"token punctuation",children:"."}),(0,a.jsx)(e.span,{className:"token method function property-access",children:"then"}),(0,a.jsx)(e.span,{className:"token punctuation",children:"("}),(0,a.jsx)(e.span,{className:"token parameter",children:"choiceResult"})," ",(0,a.jsx)(e.span,{className:"token arrow operator",children:"=>"})," ",(0,a.jsx)(e.span,{className:"token punctuation",children:"{"}),"\n"]})})}),(0,a.jsx)(e.span,{className:"code-line",children:(0,a.jsx)(e.span,{className:"token script",children:(0,a.jsxs)(e.span,{className:"token language-javascript",children:["       ",(0,a.jsx)(e.span,{className:"token keyword control-flow",children:"if"})," ",(0,a.jsx)(e.span,{className:"token punctuation",children:"("}),"choiceResult",(0,a.jsx)(e.span,{className:"token punctuation",children:"."}),(0,a.jsx)(e.span,{className:"token property-access",children:"outcome"})," ",(0,a.jsx)(e.span,{className:"token operator",children:"==="})," ",(0,a.jsx)(e.span,{className:"token string",children:'"accepted"'}),(0,a.jsx)(e.span,{className:"token punctuation",children:")"})," ",(0,a.jsx)(e.span,{className:"token punctuation",children:"{"}),"\n"]})})}),(0,a.jsx)(e.span,{className:"code-line",children:(0,a.jsx)(e.span,{className:"token script",children:(0,a.jsxs)(e.span,{className:"token language-javascript",children:["         ",(0,a.jsx)(e.span,{className:"token comment",children:"// User accepted the install prompt"}),"\n"]})})}),(0,a.jsx)(e.span,{className:"code-line",children:(0,a.jsx)(e.span,{className:"token script",children:(0,a.jsxs)(e.span,{className:"token language-javascript",children:["       ",(0,a.jsx)(e.span,{className:"token punctuation",children:"}"}),"\n"]})})}),(0,a.jsx)(e.span,{className:"code-line",children:(0,a.jsx)(e.span,{className:"token script",children:(0,a.jsx)(e.span,{className:"token language-javascript",children:"\n"})})}),(0,a.jsx)(e.span,{className:"code-line",children:(0,a.jsx)(e.span,{className:"token script",children:(0,a.jsxs)(e.span,{className:"token language-javascript",children:["       ",(0,a.jsx)(e.span,{className:"token keyword",children:"this"}),(0,a.jsx)(e.span,{className:"token punctuation",children:"."}),(0,a.jsx)(e.span,{className:"token property-access",children:"deferredPrompt"})," ",(0,a.jsx)(e.span,{className:"token operator",children:"="})," ",(0,a.jsx)(e.span,{className:"token keyword null nil",children:"null"}),(0,a.jsx)(e.span,{className:"token punctuation",children:";"}),"\n"]})})}),(0,a.jsx)(e.span,{className:"code-line",children:(0,a.jsx)(e.span,{className:"token script",children:(0,a.jsxs)(e.span,{className:"token language-javascript",children:["     ",(0,a.jsx)(e.span,{className:"token punctuation",children:"}"}),(0,a.jsx)(e.span,{className:"token punctuation",children:")"}),(0,a.jsx)(e.span,{className:"token punctuation",children:";"}),"\n"]})})}),(0,a.jsx)(e.span,{className:"code-line",children:(0,a.jsx)(e.span,{className:"token script",children:(0,a.jsxs)(e.span,{className:"token language-javascript",children:["   ",(0,a.jsx)(e.span,{className:"token punctuation",children:"}"}),"\n"]})})}),(0,a.jsx)(e.span,{className:"code-line",children:(0,a.jsx)(e.span,{className:"token script",children:(0,a.jsx)(e.span,{className:"token language-javascript",children:"\n"})})}),(0,a.jsx)(e.span,{className:"code-line",children:(0,a.jsx)(e.span,{className:"token script",children:(0,a.jsxs)(e.span,{className:"token language-javascript",children:["   ",(0,a.jsx)(e.span,{className:"token function",children:"created"}),(0,a.jsx)(e.span,{className:"token punctuation",children:"("}),(0,a.jsx)(e.span,{className:"token punctuation",children:")"})," ",(0,a.jsx)(e.span,{className:"token punctuation",children:"{"}),"\n"]})})}),(0,a.jsx)(e.span,{className:"code-line",children:(0,a.jsx)(e.span,{className:"token script",children:(0,a.jsxs)(e.span,{className:"token language-javascript",children:["     ",(0,a.jsx)(e.span,{className:"token keyword",children:"this"}),(0,a.jsx)(e.span,{className:"token punctuation",children:"."}),(0,a.jsx)(e.span,{className:"token method function property-access",children:"$on"}),(0,a.jsx)(e.span,{className:"token punctuation",children:"("}),(0,a.jsx)(e.span,{className:"token string",children:'"canInstall"'}),(0,a.jsx)(e.span,{className:"token punctuation",children:","})," ",(0,a.jsx)(e.span,{className:"token punctuation",children:"("}),(0,a.jsxs)(e.span,{className:"token parameter",children:[(0,a.jsx)(e.span,{className:"token literal-property property",children:"event"}),(0,a.jsx)(e.span,{className:"token operator",children:":"})," ",(0,a.jsx)(e.span,{className:"token maybe-class-name",children:"BeforeInstallPromptEvent"})]}),(0,a.jsx)(e.span,{className:"token punctuation",children:")"})," ",(0,a.jsx)(e.span,{className:"token arrow operator",children:"=>"})," ",(0,a.jsx)(e.span,{className:"token punctuation",children:"{"}),"\n"]})})}),(0,a.jsx)(e.span,{className:"code-line",children:(0,a.jsx)(e.span,{className:"token script",children:(0,a.jsxs)(e.span,{className:"token language-javascript",children:["       ",(0,a.jsx)(e.span,{className:"token comment",children:"// Prevent Chrome >=67 from automatically showing the prompt:"}),"\n"]})})}),(0,a.jsx)(e.span,{className:"code-line",children:(0,a.jsx)(e.span,{className:"token script",children:(0,a.jsxs)(e.span,{className:"token language-javascript",children:["       event",(0,a.jsx)(e.span,{className:"token punctuation",children:"."}),(0,a.jsx)(e.span,{className:"token method function property-access",children:"preventDefault"}),(0,a.jsx)(e.span,{className:"token punctuation",children:"("}),(0,a.jsx)(e.span,{className:"token punctuation",children:")"}),(0,a.jsx)(e.span,{className:"token punctuation",children:";"}),"\n"]})})}),(0,a.jsx)(e.span,{className:"code-line",children:(0,a.jsx)(e.span,{className:"token script",children:(0,a.jsx)(e.span,{className:"token language-javascript",children:"\n"})})}),(0,a.jsx)(e.span,{className:"code-line",children:(0,a.jsx)(e.span,{className:"token script",children:(0,a.jsxs)(e.span,{className:"token language-javascript",children:["       ",(0,a.jsx)(e.span,{className:"token comment",children:"// Stash the event so it can be triggered later:"}),"\n"]})})}),(0,a.jsx)(e.span,{className:"code-line",children:(0,a.jsx)(e.span,{className:"token script",children:(0,a.jsxs)(e.span,{className:"token language-javascript",children:["       ",(0,a.jsx)(e.span,{className:"token keyword",children:"this"}),(0,a.jsx)(e.span,{className:"token punctuation",children:"."}),(0,a.jsx)(e.span,{className:"token property-access",children:"deferredPrompt"})," ",(0,a.jsx)(e.span,{className:"token operator",children:"="})," event",(0,a.jsx)(e.span,{className:"token punctuation",children:";"}),"\n"]})})}),(0,a.jsx)(e.span,{className:"code-line",children:(0,a.jsx)(e.span,{className:"token script",children:(0,a.jsxs)(e.span,{className:"token language-javascript",children:["     ",(0,a.jsx)(e.span,{className:"token punctuation",children:"}"}),(0,a.jsx)(e.span,{className:"token punctuation",children:")"}),(0,a.jsx)(e.span,{className:"token punctuation",children:";"}),"\n"]})})}),(0,a.jsx)(e.span,{className:"code-line",children:(0,a.jsx)(e.span,{className:"token script",children:(0,a.jsxs)(e.span,{className:"token language-javascript",children:["   ",(0,a.jsx)(e.span,{className:"token punctuation",children:"}"}),"\n"]})})}),(0,a.jsx)(e.span,{className:"code-line",children:(0,a.jsx)(e.span,{className:"token script",children:(0,a.jsxs)(e.span,{className:"token language-javascript",children:[" ",(0,a.jsx)(e.span,{className:"token punctuation",children:"}"}),"\n"]})})}),(0,a.jsxs)(e.span,{className:"code-line",children:[(0,a.jsx)(e.span,{className:"token script",children:(0,a.jsx)(e.span,{className:"token language-javascript"})}),(0,a.jsxs)(e.span,{className:"token tag",children:[(0,a.jsxs)(e.span,{className:"token tag",children:[(0,a.jsx)(e.span,{className:"token punctuation",children:"</"}),"script"]}),(0,a.jsx)(e.span,{className:"token punctuation",children:">"})]}),"\n"]})]})}),"\n",(0,a.jsxs)(e.p,{children:["And that’s all. The banner should be displayed on the website once the 5 requirements listed above are met, and when the user clicks on ",(0,a.jsx)(e.em,{children:"Opt for"})," button, he will be asked by the browser if he wants to install the app on his local machine."]}),"\n",(0,a.jsxs)(e.h3,{id:"prompting-the-user-to-update",children:[(0,a.jsx)(e.a,{"aria-hidden":"true",tabIndex:"-1",href:"#prompting-the-user-to-update",children:(0,a.jsx)(e.span,{className:"icon icon-link"})}),"Prompting the user to update"]}),"\n",(0,a.jsxs)(e.p,{children:["In the ",(0,a.jsx)(e.code,{children:"registerServiceWorker.ts"})," file, you should have an updated handler. This function will be executed each time a new version of your website is available – to get the updated version, the user should simply reload the page. It is considered very bad practice to force a page reload, therefore it is advised to create a small banner that will pop up and inform the user about the update. We can start by creating a banner markup in our ",(0,a.jsx)(e.code,{children:"index.html"})," file, as follows:"]}),"\n",(0,a.jsx)(e.pre,{className:"language-html",children:(0,a.jsxs)(e.code,{className:"language-html code-highlight",children:[(0,a.jsxs)(e.span,{className:"code-line",children:[(0,a.jsxs)(e.span,{className:"token tag",children:[(0,a.jsxs)(e.span,{className:"token tag",children:[(0,a.jsx)(e.span,{className:"token punctuation",children:"<"}),"div"]})," ",(0,a.jsx)(e.span,{className:"token attr-name",children:"id"}),(0,a.jsxs)(e.span,{className:"token attr-value",children:[(0,a.jsx)(e.span,{className:"token punctuation attr-equals",children:"="}),(0,a.jsx)(e.span,{className:"token punctuation",children:'"'}),"update-banner",(0,a.jsx)(e.span,{className:"token punctuation",children:'"'})]})," ",(0,a.jsx)(e.span,{className:"token attr-name",children:"class"}),(0,a.jsxs)(e.span,{className:"token attr-value",children:[(0,a.jsx)(e.span,{className:"token punctuation attr-equals",children:"="}),(0,a.jsx)(e.span,{className:"token punctuation",children:'"'}),"banner",(0,a.jsx)(e.span,{className:"token punctuation",children:'"'})]})," ",(0,a.jsxs)(e.span,{className:"token special-attr",children:[(0,a.jsx)(e.span,{className:"token attr-name",children:"style"}),(0,a.jsxs)(e.span,{className:"token attr-value",children:[(0,a.jsx)(e.span,{className:"token punctuation attr-equals",children:"="}),(0,a.jsx)(e.span,{className:"token punctuation",children:'"'}),(0,a.jsxs)(e.span,{className:"token value css language-css",children:[(0,a.jsx)(e.span,{className:"token property",children:"display"}),(0,a.jsx)(e.span,{className:"token punctuation",children:":"})," none"]}),(0,a.jsx)(e.span,{className:"token punctuation",children:'"'})]})]}),(0,a.jsx)(e.span,{className:"token punctuation",children:">"})]}),"\n"]}),(0,a.jsxs)(e.span,{className:"code-line",children:["  ",(0,a.jsxs)(e.span,{className:"token tag",children:[(0,a.jsxs)(e.span,{className:"token tag",children:[(0,a.jsx)(e.span,{className:"token punctuation",children:"<"}),"p"]}),(0,a.jsx)(e.span,{className:"token punctuation",children:">"})]}),"There’s a new version of Foo App.",(0,a.jsxs)(e.span,{className:"token tag",children:[(0,a.jsxs)(e.span,{className:"token tag",children:[(0,a.jsx)(e.span,{className:"token punctuation",children:"</"}),"p"]}),(0,a.jsx)(e.span,{className:"token punctuation",children:">"})]}),"\n"]}),(0,a.jsxs)(e.span,{className:"code-line",children:["  ",(0,a.jsxs)(e.span,{className:"token tag",children:[(0,a.jsxs)(e.span,{className:"token tag",children:[(0,a.jsx)(e.span,{className:"token punctuation",children:"<"}),"button"]})," ",(0,a.jsx)(e.span,{className:"token attr-name",children:"id"}),(0,a.jsxs)(e.span,{className:"token attr-value",children:[(0,a.jsx)(e.span,{className:"token punctuation attr-equals",children:"="}),(0,a.jsx)(e.span,{className:"token punctuation",children:'"'}),"update-button",(0,a.jsx)(e.span,{className:"token punctuation",children:'"'})]}),(0,a.jsx)(e.span,{className:"token punctuation",children:">"})]}),"Reload",(0,a.jsxs)(e.span,{className:"token tag",children:[(0,a.jsxs)(e.span,{className:"token tag",children:[(0,a.jsx)(e.span,{className:"token punctuation",children:"</"}),"button"]}),(0,a.jsx)(e.span,{className:"token punctuation",children:">"})]}),"\n"]}),(0,a.jsxs)(e.span,{className:"code-line",children:[(0,a.jsxs)(e.span,{className:"token tag",children:[(0,a.jsxs)(e.span,{className:"token tag",children:[(0,a.jsx)(e.span,{className:"token punctuation",children:"</"}),"div"]}),(0,a.jsx)(e.span,{className:"token punctuation",children:">"})]}),"\n"]})]})}),"\n",(0,a.jsxs)(e.p,{children:["Next, we need to show this banner when a new update comes in and add necessary event handlers for the “Reload” button. This can be achieved directly in the ",(0,a.jsx)(e.code,{children:"updated"})," function:"]}),"\n",(0,a.jsx)(e.pre,{className:"language-typescript",children:(0,a.jsxs)(e.code,{className:"language-typescript code-highlight",children:[(0,a.jsxs)(e.span,{className:"code-line",children:[(0,a.jsx)(e.span,{className:"token function",children:"updated"}),(0,a.jsx)(e.span,{className:"token punctuation",children:"("}),(0,a.jsx)(e.span,{className:"token punctuation",children:")"})," ",(0,a.jsx)(e.span,{className:"token punctuation",children:"{"}),"\n"]}),(0,a.jsxs)(e.span,{className:"code-line",children:[" ",(0,a.jsx)(e.span,{className:"token comment",children:"// New content is available"}),"\n"]}),(0,a.jsxs)(e.span,{className:"code-line",children:[" ",(0,a.jsx)(e.span,{className:"token keyword",children:"const"})," updateBanner ",(0,a.jsx)(e.span,{className:"token operator",children:"="})," ",(0,a.jsx)(e.span,{className:"token operator",children:"<"}),"HTMLElement",(0,a.jsx)(e.span,{className:"token operator",children:">"}),"document",(0,a.jsx)(e.span,{className:"token punctuation",children:"."}),(0,a.jsx)(e.span,{className:"token function",children:"getElementById"}),(0,a.jsx)(e.span,{className:"token punctuation",children:"("}),(0,a.jsx)(e.span,{className:"token string",children:'"update-banner"'}),(0,a.jsx)(e.span,{className:"token punctuation",children:")"}),(0,a.jsx)(e.span,{className:"token punctuation",children:";"}),"\n"]}),(0,a.jsxs)(e.span,{className:"code-line",children:[" ",(0,a.jsx)(e.span,{className:"token keyword",children:"const"})," updateButton ",(0,a.jsx)(e.span,{className:"token operator",children:"="})," ",(0,a.jsx)(e.span,{className:"token operator",children:"<"}),"HTMLElement",(0,a.jsx)(e.span,{className:"token operator",children:">"}),"document",(0,a.jsx)(e.span,{className:"token punctuation",children:"."}),(0,a.jsx)(e.span,{className:"token function",children:"getElementById"}),(0,a.jsx)(e.span,{className:"token punctuation",children:"("}),(0,a.jsx)(e.span,{className:"token string",children:'"update-button"'}),(0,a.jsx)(e.span,{className:"token punctuation",children:")"}),(0,a.jsx)(e.span,{className:"token punctuation",children:";"}),"\n"]}),(0,a.jsx)(e.span,{className:"code-line",children:"\n"}),(0,a.jsxs)(e.span,{className:"code-line",children:[" updateBanner",(0,a.jsx)(e.span,{className:"token punctuation",children:"."}),"style",(0,a.jsx)(e.span,{className:"token punctuation",children:"."}),"display ",(0,a.jsx)(e.span,{className:"token operator",children:"="})," ",(0,a.jsx)(e.span,{className:"token string",children:'"block"'}),(0,a.jsx)(e.span,{className:"token punctuation",children:";"}),"\n"]}),(0,a.jsxs)(e.span,{className:"code-line",children:[" updateButton",(0,a.jsx)(e.span,{className:"token punctuation",children:"."}),(0,a.jsx)(e.span,{className:"token function",children:"addEventListener"}),(0,a.jsx)(e.span,{className:"token punctuation",children:"("}),(0,a.jsx)(e.span,{className:"token string",children:'"click"'}),(0,a.jsx)(e.span,{className:"token punctuation",children:","})," ",(0,a.jsx)(e.span,{className:"token punctuation",children:"("}),(0,a.jsx)(e.span,{className:"token punctuation",children:")"})," ",(0,a.jsx)(e.span,{className:"token operator",children:"=>"})," ",(0,a.jsx)(e.span,{className:"token punctuation",children:"{"}),"\n"]}),(0,a.jsxs)(e.span,{className:"code-line",children:["   location",(0,a.jsx)(e.span,{className:"token punctuation",children:"."}),(0,a.jsx)(e.span,{className:"token function",children:"reload"}),(0,a.jsx)(e.span,{className:"token punctuation",children:"("}),(0,a.jsx)(e.span,{className:"token punctuation",children:")"}),(0,a.jsx)(e.span,{className:"token punctuation",children:";"}),"\n"]}),(0,a.jsxs)(e.span,{className:"code-line",children:[" ",(0,a.jsx)(e.span,{className:"token punctuation",children:"}"}),(0,a.jsx)(e.span,{className:"token punctuation",children:")"}),(0,a.jsx)(e.span,{className:"token punctuation",children:";"}),"\n"]}),(0,a.jsxs)(e.span,{className:"code-line",children:[(0,a.jsx)(e.span,{className:"token punctuation",children:"}"}),"\n"]})]})}),"\n",(0,a.jsxs)(e.p,{children:["Note that you could create a Vue component instead of a pure HTML-based banner, but then you should store the ",(0,a.jsx)(e.code,{children:"updateAvailable"})," state in your App’ store (e.g. Vuex) and it will require some more work."]}),"\n",(0,a.jsxs)(e.p,{children:["If possible, configure your production environment to serve ",(0,a.jsx)(e.code,{children:"service-worker.js"})," with HTTP caching disabled. Otherwise, if you visit your web app, and then revisit before ",(0,a.jsx)(e.code,{children:"service-worker.js"})," has expired from the cache, you’ll continue to get the update banner showing."]}),"\n",(0,a.jsxs)(e.h3,{id:"handling-offline-first-forms",children:[(0,a.jsx)(e.a,{"aria-hidden":"true",tabIndex:"-1",href:"#handling-offline-first-forms",children:(0,a.jsx)(e.span,{className:"icon icon-link"})}),"Handling offline-first forms"]}),"\n",(0,a.jsx)(e.p,{children:"There are 2 ways of handling offline forms: the first one is by intercepting the request when the user is offline and sending it again when there’s an internet connection. There are a few problems that you must take care of:"}),"\n",(0,a.jsxs)(e.ol,{children:["\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.strong,{children:"Concurrency:"})," what if the data on the remote database has changed when the user was offline? Overwriting it might be an unwanted behavior."]}),"\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.strong,{children:"False positives:"})," if the user is connected to the internet, it doesn’t necessarily mean that he can send requests yet (i.e. paid hotspots)."]}),"\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.strong,{children:"Error handling:"})," when the request fails, how should we inform the user that the request he tried to make 3 days ago failed?"]}),"\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.strong,{children:"Application architecture:"})," this kind of offline-first form handling often requires a more complex architecture."]}),"\n"]}),"\n",(0,a.jsx)(e.p,{children:"The easier approach is to save the form state in local storage and inform the user that he will be able to submit the form once he is online again. This solution can be implemented in a few lines for each already existing form."}),"\n",(0,a.jsxs)(e.p,{children:["Let’s start with creating a local store in ",(0,a.jsx)(e.code,{children:"store/local.ts"}),". We will use ",(0,a.jsx)(e.a,{href:"https://github.com/localForage/localForage",rel:"nofollow noopener noreferrer",target:"_blank",children:(0,a.jsx)(e.code,{children:"LocalForage"})})," library which wraps IndexedDB, WebSQL, or localStorage using a simple but powerful API. It will allow us to store data in the most suitable local storage available on the user’s device:"]}),"\n",(0,a.jsx)(e.pre,{className:"language-typescript",children:(0,a.jsxs)(e.code,{className:"language-typescript code-highlight",children:[(0,a.jsxs)(e.span,{className:"code-line",children:[(0,a.jsx)(e.span,{className:"token keyword",children:"import"})," LocalForage ",(0,a.jsx)(e.span,{className:"token keyword",children:"from"})," ",(0,a.jsx)(e.span,{className:"token string",children:'"localforage"'}),(0,a.jsx)(e.span,{className:"token punctuation",children:";"}),"\n"]}),(0,a.jsx)(e.span,{className:"code-line",children:"\n"}),(0,a.jsxs)(e.span,{className:"code-line",children:[(0,a.jsx)(e.span,{className:"token comment",children:"// This must be called before any other calls to localForage are made:"}),"\n"]}),(0,a.jsxs)(e.span,{className:"code-line",children:["LocalForage",(0,a.jsx)(e.span,{className:"token punctuation",children:"."}),(0,a.jsx)(e.span,{className:"token function",children:"config"}),(0,a.jsx)(e.span,{className:"token punctuation",children:"("}),(0,a.jsx)(e.span,{className:"token punctuation",children:"{"}),"\n"]}),(0,a.jsxs)(e.span,{className:"code-line",children:["  name",(0,a.jsx)(e.span,{className:"token operator",children:":"})," ",(0,a.jsx)(e.span,{className:"token string",children:'"foo-app"'}),(0,a.jsx)(e.span,{className:"token punctuation",children:","}),"\n"]}),(0,a.jsxs)(e.span,{className:"code-line",children:["  storeName",(0,a.jsx)(e.span,{className:"token operator",children:":"})," ",(0,a.jsx)(e.span,{className:"token string",children:'"foo-app-store"'}),(0,a.jsx)(e.span,{className:"token punctuation",children:","}),"\n"]}),(0,a.jsxs)(e.span,{className:"code-line",children:["  version",(0,a.jsx)(e.span,{className:"token operator",children:":"})," ",(0,a.jsx)(e.span,{className:"token number",children:"1.0"}),"\n"]}),(0,a.jsxs)(e.span,{className:"code-line",children:[(0,a.jsx)(e.span,{className:"token punctuation",children:"}"}),(0,a.jsx)(e.span,{className:"token punctuation",children:")"}),(0,a.jsx)(e.span,{className:"token punctuation",children:";"}),"\n"]}),(0,a.jsx)(e.span,{className:"code-line",children:"\n"}),(0,a.jsxs)(e.span,{className:"code-line",children:[(0,a.jsx)(e.span,{className:"token keyword",children:"export"})," ",(0,a.jsx)(e.span,{className:"token keyword",children:"default"})," LocalForage",(0,a.jsx)(e.span,{className:"token punctuation",children:";"}),"\n"]}),(0,a.jsxs)(e.span,{className:"code-line",children:[(0,a.jsx)(e.span,{className:"token keyword",children:"export"})," ",(0,a.jsx)(e.span,{className:"token keyword",children:"const"})," formStore ",(0,a.jsx)(e.span,{className:"token operator",children:"="})," LocalForage",(0,a.jsx)(e.span,{className:"token punctuation",children:"."}),(0,a.jsx)(e.span,{className:"token function",children:"createInstance"}),(0,a.jsx)(e.span,{className:"token punctuation",children:"("}),(0,a.jsx)(e.span,{className:"token punctuation",children:"{"})," name",(0,a.jsx)(e.span,{className:"token operator",children:":"})," ",(0,a.jsx)(e.span,{className:"token string",children:'"form"'})," ",(0,a.jsx)(e.span,{className:"token punctuation",children:"}"}),(0,a.jsx)(e.span,{className:"token punctuation",children:")"}),(0,a.jsx)(e.span,{className:"token punctuation",children:";"}),"\n"]})]})}),"\n",(0,a.jsxs)(e.p,{children:["Then, we can modify any form to use the local ",(0,a.jsx)(e.code,{children:"formStore"})," when needed, as follows:"]}),"\n",(0,a.jsx)(e.pre,{className:"language-html",children:(0,a.jsxs)(e.code,{className:"language-html code-highlight",children:[(0,a.jsxs)(e.span,{className:"code-line",children:[(0,a.jsxs)(e.span,{className:"token tag",children:[(0,a.jsxs)(e.span,{className:"token tag",children:[(0,a.jsx)(e.span,{className:"token punctuation",children:"<"}),"template"]}),(0,a.jsx)(e.span,{className:"token punctuation",children:">"})]}),"\n"]}),(0,a.jsxs)(e.span,{className:"code-line",children:[" ",(0,a.jsxs)(e.span,{className:"token tag",children:[(0,a.jsxs)(e.span,{className:"token tag",children:[(0,a.jsx)(e.span,{className:"token punctuation",children:"<"}),"form"]})," ",(0,a.jsx)(e.span,{className:"token attr-name",children:"@submit"}),(0,a.jsxs)(e.span,{className:"token attr-value",children:[(0,a.jsx)(e.span,{className:"token punctuation attr-equals",children:"="}),(0,a.jsx)(e.span,{className:"token punctuation",children:'"'}),"onSubmit",(0,a.jsx)(e.span,{className:"token punctuation",children:'"'})]}),(0,a.jsx)(e.span,{className:"token punctuation",children:">"})]}),"\n"]}),(0,a.jsxs)(e.span,{className:"code-line",children:["   ",(0,a.jsxs)(e.span,{className:"token tag",children:[(0,a.jsxs)(e.span,{className:"token tag",children:[(0,a.jsx)(e.span,{className:"token punctuation",children:"<"}),"input"]})," ",(0,a.jsx)(e.span,{className:"token attr-name",children:"type"}),(0,a.jsxs)(e.span,{className:"token attr-value",children:[(0,a.jsx)(e.span,{className:"token punctuation attr-equals",children:"="}),(0,a.jsx)(e.span,{className:"token punctuation",children:'"'}),"text",(0,a.jsx)(e.span,{className:"token punctuation",children:'"'})]})," ",(0,a.jsx)(e.span,{className:"token attr-name",children:"v-model"}),(0,a.jsxs)(e.span,{className:"token attr-value",children:[(0,a.jsx)(e.span,{className:"token punctuation attr-equals",children:"="}),(0,a.jsx)(e.span,{className:"token punctuation",children:'"'}),"form.author",(0,a.jsx)(e.span,{className:"token punctuation",children:'"'})]})," ",(0,a.jsx)(e.span,{className:"token attr-name",children:"placeholder"}),(0,a.jsxs)(e.span,{className:"token attr-value",children:[(0,a.jsx)(e.span,{className:"token punctuation attr-equals",children:"="}),(0,a.jsx)(e.span,{className:"token punctuation",children:'"'}),"Your name…",(0,a.jsx)(e.span,{className:"token punctuation",children:'"'})]})," ",(0,a.jsx)(e.span,{className:"token punctuation",children:"/>"})]}),"\n"]}),(0,a.jsxs)(e.span,{className:"code-line",children:["   ",(0,a.jsxs)(e.span,{className:"token tag",children:[(0,a.jsxs)(e.span,{className:"token tag",children:[(0,a.jsx)(e.span,{className:"token punctuation",children:"<"}),"input"]})," ",(0,a.jsx)(e.span,{className:"token attr-name",children:"type"}),(0,a.jsxs)(e.span,{className:"token attr-value",children:[(0,a.jsx)(e.span,{className:"token punctuation attr-equals",children:"="}),(0,a.jsx)(e.span,{className:"token punctuation",children:'"'}),"text",(0,a.jsx)(e.span,{className:"token punctuation",children:'"'})]})," ",(0,a.jsx)(e.span,{className:"token attr-name",children:"v-model"}),(0,a.jsxs)(e.span,{className:"token attr-value",children:[(0,a.jsx)(e.span,{className:"token punctuation attr-equals",children:"="}),(0,a.jsx)(e.span,{className:"token punctuation",children:'"'}),"form.message",(0,a.jsx)(e.span,{className:"token punctuation",children:'"'})]})," ",(0,a.jsx)(e.span,{className:"token attr-name",children:"placeholder"}),(0,a.jsxs)(e.span,{className:"token attr-value",children:[(0,a.jsx)(e.span,{className:"token punctuation attr-equals",children:"="}),(0,a.jsx)(e.span,{className:"token punctuation",children:'"'}),"Message…",(0,a.jsx)(e.span,{className:"token punctuation",children:'"'})]})," ",(0,a.jsx)(e.span,{className:"token punctuation",children:"/>"})]}),"\n"]}),(0,a.jsx)(e.span,{className:"code-line",children:"\n"}),(0,a.jsxs)(e.span,{className:"code-line",children:["   ",(0,a.jsxs)(e.span,{className:"token tag",children:[(0,a.jsxs)(e.span,{className:"token tag",children:[(0,a.jsx)(e.span,{className:"token punctuation",children:"<"}),"button"]})," ",(0,a.jsx)(e.span,{className:"token attr-name",children:"type"}),(0,a.jsxs)(e.span,{className:"token attr-value",children:[(0,a.jsx)(e.span,{className:"token punctuation attr-equals",children:"="}),(0,a.jsx)(e.span,{className:"token punctuation",children:'"'}),"submit",(0,a.jsx)(e.span,{className:"token punctuation",children:'"'})]}),(0,a.jsx)(e.span,{className:"token punctuation",children:">"})]}),"Send",(0,a.jsxs)(e.span,{className:"token tag",children:[(0,a.jsxs)(e.span,{className:"token tag",children:[(0,a.jsx)(e.span,{className:"token punctuation",children:"</"}),"button"]}),(0,a.jsx)(e.span,{className:"token punctuation",children:">"})]}),"\n"]}),(0,a.jsxs)(e.span,{className:"code-line",children:[" ",(0,a.jsxs)(e.span,{className:"token tag",children:[(0,a.jsxs)(e.span,{className:"token tag",children:[(0,a.jsx)(e.span,{className:"token punctuation",children:"</"}),"form"]}),(0,a.jsx)(e.span,{className:"token punctuation",children:">"})]}),"\n"]}),(0,a.jsxs)(e.span,{className:"code-line",children:[(0,a.jsxs)(e.span,{className:"token tag",children:[(0,a.jsxs)(e.span,{className:"token tag",children:[(0,a.jsx)(e.span,{className:"token punctuation",children:"</"}),"template"]}),(0,a.jsx)(e.span,{className:"token punctuation",children:">"})]}),"\n"]}),(0,a.jsx)(e.span,{className:"code-line",children:"\n"}),(0,a.jsxs)(e.span,{className:"code-line",children:[(0,a.jsxs)(e.span,{className:"token tag",children:[(0,a.jsxs)(e.span,{className:"token tag",children:[(0,a.jsx)(e.span,{className:"token punctuation",children:"<"}),"script"]})," ",(0,a.jsx)(e.span,{className:"token attr-name",children:"lang"}),(0,a.jsxs)(e.span,{className:"token attr-value",children:[(0,a.jsx)(e.span,{className:"token punctuation attr-equals",children:"="}),(0,a.jsx)(e.span,{className:"token punctuation",children:'"'}),"ts",(0,a.jsx)(e.span,{className:"token punctuation",children:'"'})]}),(0,a.jsx)(e.span,{className:"token punctuation",children:">"})]}),(0,a.jsx)(e.span,{className:"token script",children:(0,a.jsx)(e.span,{className:"token language-javascript",children:"\n"})})]}),(0,a.jsx)(e.span,{className:"code-line",children:(0,a.jsx)(e.span,{className:"token script",children:(0,a.jsxs)(e.span,{className:"token language-javascript",children:[" ",(0,a.jsx)(e.span,{className:"token keyword module",children:"import"})," ",(0,a.jsxs)(e.span,{className:"token imports",children:[(0,a.jsx)(e.span,{className:"token punctuation",children:"{"})," ",(0,a.jsx)(e.span,{className:"token maybe-class-name",children:"Component"}),(0,a.jsx)(e.span,{className:"token punctuation",children:","})," ",(0,a.jsx)(e.span,{className:"token maybe-class-name",children:"Vue"})," ",(0,a.jsx)(e.span,{className:"token punctuation",children:"}"})]})," ",(0,a.jsx)(e.span,{className:"token keyword module",children:"from"})," ",(0,a.jsx)(e.span,{className:"token string",children:'"vue-property-decorator"'}),(0,a.jsx)(e.span,{className:"token punctuation",children:";"}),"\n"]})})}),(0,a.jsx)(e.span,{className:"code-line",children:(0,a.jsx)(e.span,{className:"token script",children:(0,a.jsxs)(e.span,{className:"token language-javascript",children:[" ",(0,a.jsx)(e.span,{className:"token keyword module",children:"import"})," ",(0,a.jsxs)(e.span,{className:"token imports",children:[(0,a.jsx)(e.span,{className:"token punctuation",children:"{"})," formStore ",(0,a.jsx)(e.span,{className:"token punctuation",children:"}"})]})," ",(0,a.jsx)(e.span,{className:"token keyword module",children:"from"})," ",(0,a.jsx)(e.span,{className:"token string",children:'"@/store/local"'}),(0,a.jsx)(e.span,{className:"token punctuation",children:";"}),"\n"]})})}),(0,a.jsx)(e.span,{className:"code-line",children:(0,a.jsx)(e.span,{className:"token script",children:(0,a.jsx)(e.span,{className:"token language-javascript",children:"\n"})})}),(0,a.jsx)(e.span,{className:"code-line",children:(0,a.jsx)(e.span,{className:"token script",children:(0,a.jsxs)(e.span,{className:"token language-javascript",children:[" type ",(0,a.jsx)(e.span,{className:"token maybe-class-name",children:"Nullable"}),(0,a.jsx)(e.span,{className:"token operator",children:"<"}),(0,a.jsx)(e.span,{className:"token constant",children:"T"}),(0,a.jsx)(e.span,{className:"token operator",children:">"})," ",(0,a.jsx)(e.span,{className:"token operator",children:"="})," ",(0,a.jsx)(e.span,{className:"token constant",children:"T"})," ",(0,a.jsx)(e.span,{className:"token operator",children:"|"})," ",(0,a.jsx)(e.span,{className:"token keyword null nil",children:"null"}),(0,a.jsx)(e.span,{className:"token punctuation",children:";"}),"\n"]})})}),(0,a.jsx)(e.span,{className:"code-line",children:(0,a.jsx)(e.span,{className:"token script",children:(0,a.jsxs)(e.span,{className:"token language-javascript",children:[" type ",(0,a.jsx)(e.span,{className:"token maybe-class-name",children:"Optional"}),(0,a.jsx)(e.span,{className:"token operator",children:"<"}),(0,a.jsx)(e.span,{className:"token constant",children:"T"}),(0,a.jsx)(e.span,{className:"token operator",children:">"})," ",(0,a.jsx)(e.span,{className:"token operator",children:"="})," ",(0,a.jsx)(e.span,{className:"token constant",children:"T"})," ",(0,a.jsx)(e.span,{className:"token operator",children:"|"})," ",(0,a.jsx)(e.span,{className:"token keyword nil",children:"undefined"}),(0,a.jsx)(e.span,{className:"token punctuation",children:";"}),"\n"]})})}),(0,a.jsx)(e.span,{className:"code-line",children:(0,a.jsx)(e.span,{className:"token script",children:(0,a.jsx)(e.span,{className:"token language-javascript",children:"\n"})})}),(0,a.jsx)(e.span,{className:"code-line",children:(0,a.jsx)(e.span,{className:"token script",children:(0,a.jsxs)(e.span,{className:"token language-javascript",children:[" ",(0,a.jsx)(e.span,{className:"token keyword",children:"interface"})," ",(0,a.jsx)(e.span,{className:"token class-name",children:"FormData"})," ",(0,a.jsx)(e.span,{className:"token punctuation",children:"{"}),"\n"]})})}),(0,a.jsx)(e.span,{className:"code-line",children:(0,a.jsx)(e.span,{className:"token script",children:(0,a.jsxs)(e.span,{className:"token language-javascript",children:["   author",(0,a.jsx)(e.span,{className:"token operator",children:"?"}),(0,a.jsx)(e.span,{className:"token operator",children:":"})," ",(0,a.jsx)(e.span,{className:"token maybe-class-name",children:"Nullable"}),(0,a.jsx)(e.span,{className:"token operator",children:"<"}),"string",(0,a.jsx)(e.span,{className:"token operator",children:">"}),(0,a.jsx)(e.span,{className:"token punctuation",children:";"}),"\n"]})})}),(0,a.jsx)(e.span,{className:"code-line",children:(0,a.jsx)(e.span,{className:"token script",children:(0,a.jsxs)(e.span,{className:"token language-javascript",children:["   message",(0,a.jsx)(e.span,{className:"token operator",children:"?"}),(0,a.jsx)(e.span,{className:"token operator",children:":"})," ",(0,a.jsx)(e.span,{className:"token maybe-class-name",children:"Nullable"}),(0,a.jsx)(e.span,{className:"token operator",children:"<"}),"string",(0,a.jsx)(e.span,{className:"token operator",children:">"}),(0,a.jsx)(e.span,{className:"token punctuation",children:";"}),"\n"]})})}),(0,a.jsx)(e.span,{className:"code-line",children:(0,a.jsx)(e.span,{className:"token script",children:(0,a.jsxs)(e.span,{className:"token language-javascript",children:[" ",(0,a.jsx)(e.span,{className:"token punctuation",children:"}"}),"\n"]})})}),(0,a.jsx)(e.span,{className:"code-line",children:(0,a.jsx)(e.span,{className:"token script",children:(0,a.jsx)(e.span,{className:"token language-javascript",children:"\n"})})}),(0,a.jsx)(e.span,{className:"code-line",children:(0,a.jsx)(e.span,{className:"token script",children:(0,a.jsxs)(e.span,{className:"token language-javascript",children:[" @",(0,a.jsx)(e.span,{className:"token function",children:(0,a.jsx)(e.span,{className:"token maybe-class-name",children:"Component"})}),(0,a.jsx)(e.span,{className:"token punctuation",children:"("}),(0,a.jsx)(e.span,{className:"token punctuation",children:"{"}),(0,a.jsx)(e.span,{className:"token punctuation",children:"}"}),(0,a.jsx)(e.span,{className:"token punctuation",children:")"}),"\n"]})})}),(0,a.jsx)(e.span,{className:"code-line",children:(0,a.jsx)(e.span,{className:"token script",children:(0,a.jsxs)(e.span,{className:"token language-javascript",children:[" ",(0,a.jsx)(e.span,{className:"token keyword module",children:"export"})," ",(0,a.jsx)(e.span,{className:"token keyword module",children:"default"})," ",(0,a.jsx)(e.span,{className:"token keyword",children:"class"})," ",(0,a.jsx)(e.span,{className:"token class-name",children:"SomeForm"})," ",(0,a.jsx)(e.span,{className:"token keyword",children:"extends"})," ",(0,a.jsx)(e.span,{className:"token class-name",children:"Vue"})," ",(0,a.jsx)(e.span,{className:"token punctuation",children:"{"}),"\n"]})})}),(0,a.jsx)(e.span,{className:"code-line",children:(0,a.jsx)(e.span,{className:"token script",children:(0,a.jsxs)(e.span,{className:"token language-javascript",children:["   ",(0,a.jsx)(e.span,{className:"token literal-property property",children:"form"}),(0,a.jsx)(e.span,{className:"token operator",children:":"})," ",(0,a.jsx)(e.span,{className:"token maybe-class-name",children:"FormData"})," ",(0,a.jsx)(e.span,{className:"token operator",children:"="})," ",(0,a.jsx)(e.span,{className:"token punctuation",children:"{"}),"\n"]})})}),(0,a.jsx)(e.span,{className:"code-line",children:(0,a.jsx)(e.span,{className:"token script",children:(0,a.jsxs)(e.span,{className:"token language-javascript",children:["     ",(0,a.jsx)(e.span,{className:"token literal-property property",children:"author"}),(0,a.jsx)(e.span,{className:"token operator",children:":"})," ",(0,a.jsx)(e.span,{className:"token keyword null nil",children:"null"}),(0,a.jsx)(e.span,{className:"token punctuation",children:","}),"\n"]})})}),(0,a.jsx)(e.span,{className:"code-line",children:(0,a.jsx)(e.span,{className:"token script",children:(0,a.jsxs)(e.span,{className:"token language-javascript",children:["     ",(0,a.jsx)(e.span,{className:"token literal-property property",children:"message"}),(0,a.jsx)(e.span,{className:"token operator",children:":"})," ",(0,a.jsx)(e.span,{className:"token keyword null nil",children:"null"}),"\n"]})})}),(0,a.jsx)(e.span,{className:"code-line",children:(0,a.jsx)(e.span,{className:"token script",children:(0,a.jsxs)(e.span,{className:"token language-javascript",children:["   ",(0,a.jsx)(e.span,{className:"token punctuation",children:"}"}),(0,a.jsx)(e.span,{className:"token punctuation",children:";"}),"\n"]})})}),(0,a.jsx)(e.span,{className:"code-line",children:(0,a.jsx)(e.span,{className:"token script",children:(0,a.jsx)(e.span,{className:"token language-javascript",children:"\n"})})}),(0,a.jsx)(e.span,{className:"code-line",children:(0,a.jsx)(e.span,{className:"token script",children:(0,a.jsxs)(e.span,{className:"token language-javascript",children:["   ",(0,a.jsx)(e.span,{className:"token function",children:"resetForm"}),(0,a.jsx)(e.span,{className:"token punctuation",children:"("}),(0,a.jsx)(e.span,{className:"token punctuation",children:")"})," ",(0,a.jsx)(e.span,{className:"token punctuation",children:"{"}),"\n"]})})}),(0,a.jsx)(e.span,{className:"code-line",children:(0,a.jsx)(e.span,{className:"token script",children:(0,a.jsxs)(e.span,{className:"token language-javascript",children:["     ",(0,a.jsx)(e.span,{className:"token keyword",children:"this"}),(0,a.jsx)(e.span,{className:"token punctuation",children:"."}),(0,a.jsx)(e.span,{className:"token property-access",children:"form"}),(0,a.jsx)(e.span,{className:"token punctuation",children:"."}),(0,a.jsx)(e.span,{className:"token property-access",children:"author"})," ",(0,a.jsx)(e.span,{className:"token operator",children:"="})," ",(0,a.jsx)(e.span,{className:"token keyword null nil",children:"null"}),(0,a.jsx)(e.span,{className:"token punctuation",children:";"}),"\n"]})})}),(0,a.jsx)(e.span,{className:"code-line",children:(0,a.jsx)(e.span,{className:"token script",children:(0,a.jsxs)(e.span,{className:"token language-javascript",children:["     ",(0,a.jsx)(e.span,{className:"token keyword",children:"this"}),(0,a.jsx)(e.span,{className:"token punctuation",children:"."}),(0,a.jsx)(e.span,{className:"token property-access",children:"form"}),(0,a.jsx)(e.span,{className:"token punctuation",children:"."}),(0,a.jsx)(e.span,{className:"token property-access",children:"message"})," ",(0,a.jsx)(e.span,{className:"token operator",children:"="})," ",(0,a.jsx)(e.span,{className:"token keyword null nil",children:"null"}),(0,a.jsx)(e.span,{className:"token punctuation",children:";"}),"\n"]})})}),(0,a.jsx)(e.span,{className:"code-line",children:(0,a.jsx)(e.span,{className:"token script",children:(0,a.jsx)(e.span,{className:"token language-javascript",children:"\n"})})}),(0,a.jsx)(e.span,{className:"code-line",children:(0,a.jsx)(e.span,{className:"token script",children:(0,a.jsxs)(e.span,{className:"token language-javascript",children:["     ",(0,a.jsx)(e.span,{className:"token comment",children:"// Reset local storage:"}),"\n"]})})}),(0,a.jsx)(e.span,{className:"code-line",children:(0,a.jsx)(e.span,{className:"token script",children:(0,a.jsxs)(e.span,{className:"token language-javascript",children:["     formStore",(0,a.jsx)(e.span,{className:"token punctuation",children:"."}),(0,a.jsx)(e.span,{className:"token method function property-access",children:"setItem"}),(0,a.jsx)(e.span,{className:"token punctuation",children:"("}),(0,a.jsx)(e.span,{className:"token string",children:'"some-form-author"'}),(0,a.jsx)(e.span,{className:"token punctuation",children:","})," ",(0,a.jsx)(e.span,{className:"token keyword null nil",children:"null"}),(0,a.jsx)(e.span,{className:"token punctuation",children:")"}),(0,a.jsx)(e.span,{className:"token punctuation",children:";"}),"\n"]})})}),(0,a.jsx)(e.span,{className:"code-line",children:(0,a.jsx)(e.span,{className:"token script",children:(0,a.jsxs)(e.span,{className:"token language-javascript",children:["     formStore",(0,a.jsx)(e.span,{className:"token punctuation",children:"."}),(0,a.jsx)(e.span,{className:"token method function property-access",children:"setItem"}),(0,a.jsx)(e.span,{className:"token punctuation",children:"("}),(0,a.jsx)(e.span,{className:"token string",children:'"some-form-message"'}),(0,a.jsx)(e.span,{className:"token punctuation",children:","})," ",(0,a.jsx)(e.span,{className:"token keyword null nil",children:"null"}),(0,a.jsx)(e.span,{className:"token punctuation",children:")"}),(0,a.jsx)(e.span,{className:"token punctuation",children:";"}),"\n"]})})}),(0,a.jsx)(e.span,{className:"code-line",children:(0,a.jsx)(e.span,{className:"token script",children:(0,a.jsxs)(e.span,{className:"token language-javascript",children:["   ",(0,a.jsx)(e.span,{className:"token punctuation",children:"}"}),"\n"]})})}),(0,a.jsx)(e.span,{className:"code-line",children:(0,a.jsx)(e.span,{className:"token script",children:(0,a.jsx)(e.span,{className:"token language-javascript",children:"\n"})})}),(0,a.jsx)(e.span,{className:"code-line",children:(0,a.jsx)(e.span,{className:"token script",children:(0,a.jsxs)(e.span,{className:"token language-javascript",children:["   ",(0,a.jsx)(e.span,{className:"token function",children:"storeData"}),(0,a.jsx)(e.span,{className:"token punctuation",children:"("}),(0,a.jsxs)(e.span,{className:"token parameter",children:[(0,a.jsx)(e.span,{className:"token literal-property property",children:"data"}),(0,a.jsx)(e.span,{className:"token operator",children:":"})," ",(0,a.jsx)(e.span,{className:"token maybe-class-name",children:"FormData"})]}),(0,a.jsx)(e.span,{className:"token punctuation",children:")"})," ",(0,a.jsx)(e.span,{className:"token punctuation",children:"{"}),"\n"]})})}),(0,a.jsx)(e.span,{className:"code-line",children:(0,a.jsx)(e.span,{className:"token script",children:(0,a.jsxs)(e.span,{className:"token language-javascript",children:["     formStore",(0,a.jsx)(e.span,{className:"token punctuation",children:"."}),(0,a.jsx)(e.span,{className:"token property-access",children:"setItem"}),(0,a.jsx)(e.span,{className:"token operator",children:"<"}),(0,a.jsx)(e.span,{className:"token maybe-class-name",children:"Optional"}),(0,a.jsx)(e.span,{className:"token operator",children:"<"}),(0,a.jsx)(e.span,{className:"token maybe-class-name",children:"Nullable"}),(0,a.jsx)(e.span,{className:"token operator",children:"<"}),"string",(0,a.jsx)(e.span,{className:"token operator",children:">>>"}),(0,a.jsx)(e.span,{className:"token punctuation",children:"("}),(0,a.jsx)(e.span,{className:"token string",children:'"some-form-author"'}),(0,a.jsx)(e.span,{className:"token punctuation",children:","})," data",(0,a.jsx)(e.span,{className:"token punctuation",children:"."}),(0,a.jsx)(e.span,{className:"token property-access",children:"author"}),(0,a.jsx)(e.span,{className:"token punctuation",children:")"}),(0,a.jsx)(e.span,{className:"token punctuation",children:";"}),"\n"]})})}),(0,a.jsx)(e.span,{className:"code-line",children:(0,a.jsx)(e.span,{className:"token script",children:(0,a.jsxs)(e.span,{className:"token language-javascript",children:["     formStore",(0,a.jsx)(e.span,{className:"token punctuation",children:"."}),(0,a.jsx)(e.span,{className:"token property-access",children:"setItem"}),(0,a.jsx)(e.span,{className:"token operator",children:"<"}),(0,a.jsx)(e.span,{className:"token maybe-class-name",children:"Optional"}),(0,a.jsx)(e.span,{className:"token operator",children:"<"}),(0,a.jsx)(e.span,{className:"token maybe-class-name",children:"Nullable"}),(0,a.jsx)(e.span,{className:"token operator",children:"<"}),"string",(0,a.jsx)(e.span,{className:"token operator",children:">>>"}),(0,a.jsx)(e.span,{className:"token punctuation",children:"("}),(0,a.jsx)(e.span,{className:"token string",children:'"some-form-message"'}),(0,a.jsx)(e.span,{className:"token punctuation",children:","})," data",(0,a.jsx)(e.span,{className:"token punctuation",children:"."}),(0,a.jsx)(e.span,{className:"token property-access",children:"message"}),(0,a.jsx)(e.span,{className:"token punctuation",children:")"}),(0,a.jsx)(e.span,{className:"token punctuation",children:";"}),"\n"]})})}),(0,a.jsx)(e.span,{className:"code-line",children:(0,a.jsx)(e.span,{className:"token script",children:(0,a.jsxs)(e.span,{className:"token language-javascript",children:["   ",(0,a.jsx)(e.span,{className:"token punctuation",children:"}"}),"\n"]})})}),(0,a.jsx)(e.span,{className:"code-line",children:(0,a.jsx)(e.span,{className:"token script",children:(0,a.jsx)(e.span,{className:"token language-javascript",children:"\n"})})}),(0,a.jsx)(e.span,{className:"code-line",children:(0,a.jsx)(e.span,{className:"token script",children:(0,a.jsxs)(e.span,{className:"token language-javascript",children:["   ",(0,a.jsx)(e.span,{className:"token function",children:"sendData"}),(0,a.jsx)(e.span,{className:"token punctuation",children:"("}),(0,a.jsxs)(e.span,{className:"token parameter",children:[(0,a.jsx)(e.span,{className:"token literal-property property",children:"data"}),(0,a.jsx)(e.span,{className:"token operator",children:":"})," ",(0,a.jsx)(e.span,{className:"token maybe-class-name",children:"FormData"})]}),(0,a.jsx)(e.span,{className:"token punctuation",children:")"})," ",(0,a.jsx)(e.span,{className:"token punctuation",children:"{"}),"\n"]})})}),(0,a.jsx)(e.span,{className:"code-line",children:(0,a.jsx)(e.span,{className:"token script",children:(0,a.jsxs)(e.span,{className:"token language-javascript",children:["     ",(0,a.jsx)(e.span,{className:"token keyword",children:"this"}),(0,a.jsx)(e.span,{className:"token punctuation",children:"."}),(0,a.jsx)(e.span,{className:"token method function property-access",children:"resetForm"}),(0,a.jsx)(e.span,{className:"token punctuation",children:"("}),(0,a.jsx)(e.span,{className:"token punctuation",children:")"}),(0,a.jsx)(e.span,{className:"token punctuation",children:";"}),"\n"]})})}),(0,a.jsx)(e.span,{className:"code-line",children:(0,a.jsx)(e.span,{className:"token script",children:(0,a.jsx)(e.span,{className:"token language-javascript",children:"\n"})})}),(0,a.jsx)(e.span,{className:"code-line",children:(0,a.jsx)(e.span,{className:"token script",children:(0,a.jsxs)(e.span,{className:"token language-javascript",children:["     ",(0,a.jsx)(e.span,{className:"token comment",children:"// Make a request here…"}),"\n"]})})}),(0,a.jsx)(e.span,{className:"code-line",children:(0,a.jsx)(e.span,{className:"token script",children:(0,a.jsxs)(e.span,{className:"token language-javascript",children:["   ",(0,a.jsx)(e.span,{className:"token punctuation",children:"}"}),"\n"]})})}),(0,a.jsx)(e.span,{className:"code-line",children:(0,a.jsx)(e.span,{className:"token script",children:(0,a.jsx)(e.span,{className:"token language-javascript",children:"\n"})})}),(0,a.jsx)(e.span,{className:"code-line",children:(0,a.jsx)(e.span,{className:"token script",children:(0,a.jsxs)(e.span,{className:"token language-javascript",children:["   ",(0,a.jsx)(e.span,{className:"token function",children:"onSubmit"}),(0,a.jsx)(e.span,{className:"token punctuation",children:"("}),(0,a.jsxs)(e.span,{className:"token parameter",children:[(0,a.jsx)(e.span,{className:"token literal-property property",children:"event"}),(0,a.jsx)(e.span,{className:"token operator",children:":"})," ",(0,a.jsx)(e.span,{className:"token maybe-class-name",children:"Event"})]}),(0,a.jsx)(e.span,{className:"token punctuation",children:")"})," ",(0,a.jsx)(e.span,{className:"token punctuation",children:"{"}),"\n"]})})}),(0,a.jsx)(e.span,{className:"code-line",children:(0,a.jsx)(e.span,{className:"token script",children:(0,a.jsxs)(e.span,{className:"token language-javascript",children:["     event",(0,a.jsx)(e.span,{className:"token punctuation",children:"."}),(0,a.jsx)(e.span,{className:"token method function property-access",children:"preventDefault"}),(0,a.jsx)(e.span,{className:"token punctuation",children:"("}),(0,a.jsx)(e.span,{className:"token punctuation",children:")"}),(0,a.jsx)(e.span,{className:"token punctuation",children:";"}),"\n"]})})}),(0,a.jsx)(e.span,{className:"code-line",children:(0,a.jsx)(e.span,{className:"token script",children:(0,a.jsxs)(e.span,{className:"token language-javascript",children:["     event",(0,a.jsx)(e.span,{className:"token punctuation",children:"."}),(0,a.jsx)(e.span,{className:"token method function property-access",children:"stopPropagation"}),(0,a.jsx)(e.span,{className:"token punctuation",children:"("}),(0,a.jsx)(e.span,{className:"token punctuation",children:")"}),(0,a.jsx)(e.span,{className:"token punctuation",children:";"}),"\n"]})})}),(0,a.jsx)(e.span,{className:"code-line",children:(0,a.jsx)(e.span,{className:"token script",children:(0,a.jsx)(e.span,{className:"token language-javascript",children:"\n"})})}),(0,a.jsx)(e.span,{className:"code-line",children:(0,a.jsx)(e.span,{className:"token script",children:(0,a.jsxs)(e.span,{className:"token language-javascript",children:["     ",(0,a.jsx)(e.span,{className:"token comment",children:"// Normalize & validate form data:"}),"\n"]})})}),(0,a.jsx)(e.span,{className:"code-line",children:(0,a.jsx)(e.span,{className:"token script",children:(0,a.jsxs)(e.span,{className:"token language-javascript",children:["     ",(0,a.jsx)(e.span,{className:"token keyword",children:"const"})," ",(0,a.jsx)(e.span,{className:"token literal-property property",children:"form"}),(0,a.jsx)(e.span,{className:"token operator",children:":"})," ",(0,a.jsx)(e.span,{className:"token maybe-class-name",children:"FormData"})," ",(0,a.jsx)(e.span,{className:"token operator",children:"="})," ",(0,a.jsx)(e.span,{className:"token punctuation",children:"{"}),"\n"]})})}),(0,a.jsx)(e.span,{className:"code-line",children:(0,a.jsx)(e.span,{className:"token script",children:(0,a.jsxs)(e.span,{className:"token language-javascript",children:["       ",(0,a.jsx)(e.span,{className:"token literal-property property",children:"author"}),(0,a.jsx)(e.span,{className:"token operator",children:":"})," ",(0,a.jsx)(e.span,{className:"token keyword",children:"this"}),(0,a.jsx)(e.span,{className:"token punctuation",children:"."}),(0,a.jsx)(e.span,{className:"token property-access",children:"form"}),(0,a.jsx)(e.span,{className:"token punctuation",children:"."}),(0,a.jsx)(e.span,{className:"token property-access",children:"author"}),(0,a.jsx)(e.span,{className:"token punctuation",children:","}),"\n"]})})}),(0,a.jsx)(e.span,{className:"code-line",children:(0,a.jsx)(e.span,{className:"token script",children:(0,a.jsxs)(e.span,{className:"token language-javascript",children:["       ",(0,a.jsx)(e.span,{className:"token literal-property property",children:"message"}),(0,a.jsx)(e.span,{className:"token operator",children:":"})," ",(0,a.jsx)(e.span,{className:"token keyword",children:"this"}),(0,a.jsx)(e.span,{className:"token punctuation",children:"."}),(0,a.jsx)(e.span,{className:"token property-access",children:"form"}),(0,a.jsx)(e.span,{className:"token punctuation",children:"."}),(0,a.jsx)(e.span,{className:"token property-access",children:"message"}),"\n"]})})}),(0,a.jsx)(e.span,{className:"code-line",children:(0,a.jsx)(e.span,{className:"token script",children:(0,a.jsxs)(e.span,{className:"token language-javascript",children:["     ",(0,a.jsx)(e.span,{className:"token punctuation",children:"}"}),(0,a.jsx)(e.span,{className:"token punctuation",children:";"}),"\n"]})})}),(0,a.jsx)(e.span,{className:"code-line",children:(0,a.jsx)(e.span,{className:"token script",children:(0,a.jsx)(e.span,{className:"token language-javascript",children:"\n"})})}),(0,a.jsx)(e.span,{className:"code-line",children:(0,a.jsx)(e.span,{className:"token script",children:(0,a.jsxs)(e.span,{className:"token language-javascript",children:["     ",(0,a.jsx)(e.span,{className:"token keyword control-flow",children:"if"})," ",(0,a.jsx)(e.span,{className:"token punctuation",children:"("}),(0,a.jsx)(e.span,{className:"token dom variable",children:"navigator"}),(0,a.jsx)(e.span,{className:"token punctuation",children:"."}),(0,a.jsx)(e.span,{className:"token property-access",children:"onLine"}),(0,a.jsx)(e.span,{className:"token punctuation",children:")"})," ",(0,a.jsx)(e.span,{className:"token punctuation",children:"{"}),"\n"]})})}),(0,a.jsx)(e.span,{className:"code-line",children:(0,a.jsx)(e.span,{className:"token script",children:(0,a.jsxs)(e.span,{className:"token language-javascript",children:["       ",(0,a.jsx)(e.span,{className:"token keyword",children:"this"}),(0,a.jsx)(e.span,{className:"token punctuation",children:"."}),(0,a.jsx)(e.span,{className:"token method function property-access",children:"sendData"}),(0,a.jsx)(e.span,{className:"token punctuation",children:"("}),"form",(0,a.jsx)(e.span,{className:"token punctuation",children:")"}),(0,a.jsx)(e.span,{className:"token punctuation",children:";"}),"\n"]})})}),(0,a.jsx)(e.span,{className:"code-line",children:(0,a.jsx)(e.span,{className:"token script",children:(0,a.jsxs)(e.span,{className:"token language-javascript",children:["     ",(0,a.jsx)(e.span,{className:"token punctuation",children:"}"})," ",(0,a.jsx)(e.span,{className:"token keyword control-flow",children:"else"})," ",(0,a.jsx)(e.span,{className:"token punctuation",children:"{"}),"\n"]})})}),(0,a.jsx)(e.span,{className:"code-line",children:(0,a.jsx)(e.span,{className:"token script",children:(0,a.jsxs)(e.span,{className:"token language-javascript",children:["       ",(0,a.jsx)(e.span,{className:"token keyword",children:"this"}),(0,a.jsx)(e.span,{className:"token punctuation",children:"."}),(0,a.jsx)(e.span,{className:"token method function property-access",children:"storeData"}),(0,a.jsx)(e.span,{className:"token punctuation",children:"("}),"form",(0,a.jsx)(e.span,{className:"token punctuation",children:")"}),(0,a.jsx)(e.span,{className:"token punctuation",children:";"}),"\n"]})})}),(0,a.jsx)(e.span,{className:"code-line",children:(0,a.jsx)(e.span,{className:"token script",children:(0,a.jsxs)(e.span,{className:"token language-javascript",children:["     ",(0,a.jsx)(e.span,{className:"token punctuation",children:"}"}),"\n"]})})}),(0,a.jsx)(e.span,{className:"code-line",children:(0,a.jsx)(e.span,{className:"token script",children:(0,a.jsxs)(e.span,{className:"token language-javascript",children:["   ",(0,a.jsx)(e.span,{className:"token punctuation",children:"}"}),"\n"]})})}),(0,a.jsx)(e.span,{className:"code-line",children:(0,a.jsx)(e.span,{className:"token script",children:(0,a.jsx)(e.span,{className:"token language-javascript",children:"\n"})})}),(0,a.jsx)(e.span,{className:"code-line",children:(0,a.jsx)(e.span,{className:"token script",children:(0,a.jsxs)(e.span,{className:"token language-javascript",children:["   ",(0,a.jsx)(e.span,{className:"token function",children:"created"}),(0,a.jsx)(e.span,{className:"token punctuation",children:"("}),(0,a.jsx)(e.span,{className:"token punctuation",children:")"})," ",(0,a.jsx)(e.span,{className:"token punctuation",children:"{"}),"\n"]})})}),(0,a.jsx)(e.span,{className:"code-line",children:(0,a.jsx)(e.span,{className:"token script",children:(0,a.jsxs)(e.span,{className:"token language-javascript",children:["     formStore",(0,a.jsx)(e.span,{className:"token punctuation",children:"."}),(0,a.jsx)(e.span,{className:"token property-access",children:"getItem"}),(0,a.jsx)(e.span,{className:"token operator",children:"<"}),(0,a.jsx)(e.span,{className:"token maybe-class-name",children:"Nullable"}),(0,a.jsx)(e.span,{className:"token operator",children:"<"}),"string",(0,a.jsx)(e.span,{className:"token operator",children:">>"}),(0,a.jsx)(e.span,{className:"token punctuation",children:"("}),(0,a.jsx)(e.span,{className:"token string",children:'"some-form-author"'}),(0,a.jsx)(e.span,{className:"token punctuation",children:")"}),(0,a.jsx)(e.span,{className:"token punctuation",children:"."}),(0,a.jsx)(e.span,{className:"token method function property-access",children:"then"}),(0,a.jsx)(e.span,{className:"token punctuation",children:"("}),(0,a.jsx)(e.span,{className:"token parameter",children:"value"})," ",(0,a.jsx)(e.span,{className:"token arrow operator",children:"=>"})," ",(0,a.jsx)(e.span,{className:"token punctuation",children:"{"}),"\n"]})})}),(0,a.jsx)(e.span,{className:"code-line",children:(0,a.jsx)(e.span,{className:"token script",children:(0,a.jsxs)(e.span,{className:"token language-javascript",children:["       ",(0,a.jsx)(e.span,{className:"token keyword",children:"this"}),(0,a.jsx)(e.span,{className:"token punctuation",children:"."}),(0,a.jsx)(e.span,{className:"token property-access",children:"form"}),(0,a.jsx)(e.span,{className:"token punctuation",children:"."}),(0,a.jsx)(e.span,{className:"token property-access",children:"author"})," ",(0,a.jsx)(e.span,{className:"token operator",children:"="})," value",(0,a.jsx)(e.span,{className:"token punctuation",children:";"}),"\n"]})})}),(0,a.jsx)(e.span,{className:"code-line",children:(0,a.jsx)(e.span,{className:"token script",children:(0,a.jsxs)(e.span,{className:"token language-javascript",children:["     ",(0,a.jsx)(e.span,{className:"token punctuation",children:"}"}),(0,a.jsx)(e.span,{className:"token punctuation",children:")"}),(0,a.jsx)(e.span,{className:"token punctuation",children:";"}),"\n"]})})}),(0,a.jsx)(e.span,{className:"code-line",children:(0,a.jsx)(e.span,{className:"token script",children:(0,a.jsx)(e.span,{className:"token language-javascript",children:"\n"})})}),(0,a.jsx)(e.span,{className:"code-line",children:(0,a.jsx)(e.span,{className:"token script",children:(0,a.jsxs)(e.span,{className:"token language-javascript",children:["     formStore",(0,a.jsx)(e.span,{className:"token punctuation",children:"."}),(0,a.jsx)(e.span,{className:"token property-access",children:"getItem"}),(0,a.jsx)(e.span,{className:"token operator",children:"<"}),(0,a.jsx)(e.span,{className:"token maybe-class-name",children:"Nullable"}),(0,a.jsx)(e.span,{className:"token operator",children:"<"}),"string",(0,a.jsx)(e.span,{className:"token operator",children:">>"}),(0,a.jsx)(e.span,{className:"token punctuation",children:"("}),(0,a.jsx)(e.span,{className:"token string",children:'"some-form-message"'}),(0,a.jsx)(e.span,{className:"token punctuation",children:")"}),(0,a.jsx)(e.span,{className:"token punctuation",children:"."}),(0,a.jsx)(e.span,{className:"token method function property-access",children:"then"}),(0,a.jsx)(e.span,{className:"token punctuation",children:"("}),(0,a.jsx)(e.span,{className:"token parameter",children:"value"})," ",(0,a.jsx)(e.span,{className:"token arrow operator",children:"=>"})," ",(0,a.jsx)(e.span,{className:"token punctuation",children:"{"}),"\n"]})})}),(0,a.jsx)(e.span,{className:"code-line",children:(0,a.jsx)(e.span,{className:"token script",children:(0,a.jsxs)(e.span,{className:"token language-javascript",children:["       ",(0,a.jsx)(e.span,{className:"token keyword",children:"this"}),(0,a.jsx)(e.span,{className:"token punctuation",children:"."}),(0,a.jsx)(e.span,{className:"token property-access",children:"form"}),(0,a.jsx)(e.span,{className:"token punctuation",children:"."}),(0,a.jsx)(e.span,{className:"token property-access",children:"message"})," ",(0,a.jsx)(e.span,{className:"token operator",children:"="})," value",(0,a.jsx)(e.span,{className:"token punctuation",children:";"}),"\n"]})})}),(0,a.jsx)(e.span,{className:"code-line",children:(0,a.jsx)(e.span,{className:"token script",children:(0,a.jsxs)(e.span,{className:"token language-javascript",children:["     ",(0,a.jsx)(e.span,{className:"token punctuation",children:"}"}),(0,a.jsx)(e.span,{className:"token punctuation",children:")"}),(0,a.jsx)(e.span,{className:"token punctuation",children:";"}),"\n"]})})}),(0,a.jsx)(e.span,{className:"code-line",children:(0,a.jsx)(e.span,{className:"token script",children:(0,a.jsxs)(e.span,{className:"token language-javascript",children:["   ",(0,a.jsx)(e.span,{className:"token punctuation",children:"}"}),"\n"]})})}),(0,a.jsx)(e.span,{className:"code-line",children:(0,a.jsx)(e.span,{className:"token script",children:(0,a.jsxs)(e.span,{className:"token language-javascript",children:[" ",(0,a.jsx)(e.span,{className:"token punctuation",children:"}"}),"\n"]})})}),(0,a.jsxs)(e.span,{className:"code-line",children:[(0,a.jsx)(e.span,{className:"token script",children:(0,a.jsx)(e.span,{className:"token language-javascript"})}),(0,a.jsxs)(e.span,{className:"token tag",children:[(0,a.jsxs)(e.span,{className:"token tag",children:[(0,a.jsx)(e.span,{className:"token punctuation",children:"</"}),"script"]}),(0,a.jsx)(e.span,{className:"token punctuation",children:">"})]}),"\n"]})]})}),"\n",(0,a.jsxs)(e.h3,{id:"showing-offline-information",children:[(0,a.jsx)(e.a,{"aria-hidden":"true",tabIndex:"-1",href:"#showing-offline-information",children:(0,a.jsx)(e.span,{className:"icon icon-link"})}),"Showing offline information"]}),"\n",(0,a.jsxs)(e.p,{children:["If your application is not fully offline first (e.g. you don’t save the requests in a queue like in the previous section), it is important to notify the users about their connection status. You can use the ",(0,a.jsx)(e.code,{children:"navigator.onLine"})," property and ",(0,a.jsx)(e.code,{children:"ononline"}),", and ",(0,a.jsx)(e.code,{children:"onoffline"})," events or let the ",(0,a.jsx)(e.a,{href:"https://github.com/filrak/vue-offline",rel:"nofollow noopener noreferrer",target:"_blank",children:(0,a.jsx)(e.code,{children:"vue-offline"})})," plugin take care of all of this."]}),"\n",(0,a.jsx)(e.pre,{className:"language-bash",children:(0,a.jsx)(e.code,{className:"language-bash code-highlight",children:(0,a.jsxs)(e.span,{className:"code-line",children:["$ ",(0,a.jsx)(e.span,{className:"token function",children:"npm"})," ",(0,a.jsx)(e.span,{className:"token function",children:"install"})," ",(0,a.jsx)(e.span,{className:"token parameter variable",children:"--save"})," vue-offline\n"]})})}),"\n",(0,a.jsxs)(e.p,{children:["It will add ",(0,a.jsx)(e.code,{children:"isOnline"}),", and ",(0,a.jsx)(e.code,{children:"isOffline"})," data properties and ",(0,a.jsx)(e.code,{children:"online"}),", and ",(0,a.jsx)(e.code,{children:"offline"})," events via a global mixin. We need to register their plugin in ",(0,a.jsx)(e.code,{children:"main.ts"}),", as follows:"]}),"\n",(0,a.jsx)(e.pre,{className:"language-ts",children:(0,a.jsxs)(e.code,{className:"language-ts code-highlight",children:[(0,a.jsxs)(e.span,{className:"code-line",children:[(0,a.jsx)(e.span,{className:"token keyword",children:"import"})," Vue ",(0,a.jsx)(e.span,{className:"token keyword",children:"from"})," ",(0,a.jsx)(e.span,{className:"token string",children:'"vue"'}),(0,a.jsx)(e.span,{className:"token punctuation",children:";"}),"\n"]}),(0,a.jsxs)(e.span,{className:"code-line",children:[(0,a.jsx)(e.span,{className:"token keyword",children:"import"})," VueOffline ",(0,a.jsx)(e.span,{className:"token keyword",children:"from"})," ",(0,a.jsx)(e.span,{className:"token string",children:'"vue-offline"'}),(0,a.jsx)(e.span,{className:"token punctuation",children:";"}),"\n"]}),(0,a.jsx)(e.span,{className:"code-line",children:"\n"}),(0,a.jsxs)(e.span,{className:"code-line",children:["Vue",(0,a.jsx)(e.span,{className:"token punctuation",children:"."}),(0,a.jsx)(e.span,{className:"token function",children:"use"}),(0,a.jsx)(e.span,{className:"token punctuation",children:"("}),"VueOffline",(0,a.jsx)(e.span,{className:"token punctuation",children:","})," ",(0,a.jsx)(e.span,{className:"token punctuation",children:"{"})," storage",(0,a.jsx)(e.span,{className:"token operator",children:":"})," ",(0,a.jsx)(e.span,{className:"token boolean",children:"false"})," ",(0,a.jsx)(e.span,{className:"token punctuation",children:"}"}),(0,a.jsx)(e.span,{className:"token punctuation",children:")"}),(0,a.jsx)(e.span,{className:"token punctuation",children:";"}),"\n"]})]})}),"\n",(0,a.jsxs)(e.p,{children:["Then we can safely listen for the online and offline events in our ",(0,a.jsx)(e.code,{children:"App.vue"}),":"]}),"\n",(0,a.jsx)(e.pre,{className:"language-html",children:(0,a.jsxs)(e.code,{className:"language-html code-highlight",children:[(0,a.jsxs)(e.span,{className:"code-line",children:[(0,a.jsxs)(e.span,{className:"token tag",children:[(0,a.jsxs)(e.span,{className:"token tag",children:[(0,a.jsx)(e.span,{className:"token punctuation",children:"<"}),"template"]}),(0,a.jsx)(e.span,{className:"token punctuation",children:">"})]}),"\n"]}),(0,a.jsxs)(e.span,{className:"code-line",children:[" ",(0,a.jsxs)(e.span,{className:"token tag",children:[(0,a.jsxs)(e.span,{className:"token tag",children:[(0,a.jsx)(e.span,{className:"token punctuation",children:"<"}),"div"]})," ",(0,a.jsx)(e.span,{className:"token attr-name",children:"id"}),(0,a.jsxs)(e.span,{className:"token attr-value",children:[(0,a.jsx)(e.span,{className:"token punctuation attr-equals",children:"="}),(0,a.jsx)(e.span,{className:"token punctuation",children:'"'}),"app",(0,a.jsx)(e.span,{className:"token punctuation",children:'"'})]}),(0,a.jsx)(e.span,{className:"token punctuation",children:">"})]}),"\n"]}),(0,a.jsxs)(e.span,{className:"code-line",children:["   ",(0,a.jsxs)(e.span,{className:"token tag",children:[(0,a.jsxs)(e.span,{className:"token tag",children:[(0,a.jsx)(e.span,{className:"token punctuation",children:"<"}),"section"]})," ",(0,a.jsx)(e.span,{className:"token attr-name",children:"class"}),(0,a.jsxs)(e.span,{className:"token attr-value",children:[(0,a.jsx)(e.span,{className:"token punctuation attr-equals",children:"="}),(0,a.jsx)(e.span,{className:"token punctuation",children:'"'}),"offline",(0,a.jsx)(e.span,{className:"token punctuation",children:'"'})]})," ",(0,a.jsx)(e.span,{className:"token attr-name",children:"v-if"}),(0,a.jsxs)(e.span,{className:"token attr-value",children:[(0,a.jsx)(e.span,{className:"token punctuation attr-equals",children:"="}),(0,a.jsx)(e.span,{className:"token punctuation",children:'"'}),"!isOnline",(0,a.jsx)(e.span,{className:"token punctuation",children:'"'})]}),(0,a.jsx)(e.span,{className:"token punctuation",children:">"})]}),"You are offline.",(0,a.jsxs)(e.span,{className:"token tag",children:[(0,a.jsxs)(e.span,{className:"token tag",children:[(0,a.jsx)(e.span,{className:"token punctuation",children:"</"}),"section"]}),(0,a.jsx)(e.span,{className:"token punctuation",children:">"})]}),"\n"]}),(0,a.jsx)(e.span,{className:"code-line",children:"\n"}),(0,a.jsxs)(e.span,{className:"code-line",children:["   ",(0,a.jsxs)(e.span,{className:"token tag",children:[(0,a.jsxs)(e.span,{className:"token tag",children:[(0,a.jsx)(e.span,{className:"token punctuation",children:"<"}),"router-view"]}),(0,a.jsx)(e.span,{className:"token punctuation",children:">"})]}),(0,a.jsxs)(e.span,{className:"token tag",children:[(0,a.jsxs)(e.span,{className:"token tag",children:[(0,a.jsx)(e.span,{className:"token punctuation",children:"</"}),"router-view"]}),(0,a.jsx)(e.span,{className:"token punctuation",children:">"})]}),"\n"]}),(0,a.jsxs)(e.span,{className:"code-line",children:[" ",(0,a.jsxs)(e.span,{className:"token tag",children:[(0,a.jsxs)(e.span,{className:"token tag",children:[(0,a.jsx)(e.span,{className:"token punctuation",children:"</"}),"div"]}),(0,a.jsx)(e.span,{className:"token punctuation",children:">"})]}),"\n"]}),(0,a.jsxs)(e.span,{className:"code-line",children:[(0,a.jsxs)(e.span,{className:"token tag",children:[(0,a.jsxs)(e.span,{className:"token tag",children:[(0,a.jsx)(e.span,{className:"token punctuation",children:"</"}),"template"]}),(0,a.jsx)(e.span,{className:"token punctuation",children:">"})]}),"\n"]}),(0,a.jsx)(e.span,{className:"code-line",children:"\n"}),(0,a.jsxs)(e.span,{className:"code-line",children:[(0,a.jsxs)(e.span,{className:"token tag",children:[(0,a.jsxs)(e.span,{className:"token tag",children:[(0,a.jsx)(e.span,{className:"token punctuation",children:"<"}),"script"]})," ",(0,a.jsx)(e.span,{className:"token attr-name",children:"lang"}),(0,a.jsxs)(e.span,{className:"token attr-value",children:[(0,a.jsx)(e.span,{className:"token punctuation attr-equals",children:"="}),(0,a.jsx)(e.span,{className:"token punctuation",children:'"'}),"ts",(0,a.jsx)(e.span,{className:"token punctuation",children:'"'})]}),(0,a.jsx)(e.span,{className:"token punctuation",children:">"})]}),(0,a.jsx)(e.span,{className:"token script",children:(0,a.jsx)(e.span,{className:"token language-javascript",children:"\n"})})]}),(0,a.jsx)(e.span,{className:"code-line",children:(0,a.jsx)(e.span,{className:"token script",children:(0,a.jsxs)(e.span,{className:"token language-javascript",children:[" ",(0,a.jsx)(e.span,{className:"token keyword module",children:"import"})," ",(0,a.jsxs)(e.span,{className:"token imports",children:[(0,a.jsx)(e.span,{className:"token punctuation",children:"{"})," ",(0,a.jsx)(e.span,{className:"token maybe-class-name",children:"Component"}),(0,a.jsx)(e.span,{className:"token punctuation",children:","})," ",(0,a.jsx)(e.span,{className:"token maybe-class-name",children:"Vue"})," ",(0,a.jsx)(e.span,{className:"token punctuation",children:"}"})]})," ",(0,a.jsx)(e.span,{className:"token keyword module",children:"from"})," ",(0,a.jsx)(e.span,{className:"token string",children:'"vue-property-decorator"'}),(0,a.jsx)(e.span,{className:"token punctuation",children:";"}),"\n"]})})}),(0,a.jsx)(e.span,{className:"code-line",children:(0,a.jsx)(e.span,{className:"token script",children:(0,a.jsx)(e.span,{className:"token language-javascript",children:"\n"})})}),(0,a.jsx)(e.span,{className:"code-line",children:(0,a.jsx)(e.span,{className:"token script",children:(0,a.jsxs)(e.span,{className:"token language-javascript",children:[" @",(0,a.jsx)(e.span,{className:"token function",children:(0,a.jsx)(e.span,{className:"token maybe-class-name",children:"Component"})}),(0,a.jsx)(e.span,{className:"token punctuation",children:"("}),(0,a.jsx)(e.span,{className:"token punctuation",children:"{"}),(0,a.jsx)(e.span,{className:"token punctuation",children:"}"}),(0,a.jsx)(e.span,{className:"token punctuation",children:")"}),"\n"]})})}),(0,a.jsx)(e.span,{className:"code-line",children:(0,a.jsx)(e.span,{className:"token script",children:(0,a.jsxs)(e.span,{className:"token language-javascript",children:[" ",(0,a.jsx)(e.span,{className:"token keyword module",children:"export"})," ",(0,a.jsx)(e.span,{className:"token keyword module",children:"default"})," ",(0,a.jsx)(e.span,{className:"token keyword",children:"class"})," ",(0,a.jsx)(e.span,{className:"token class-name",children:"App"})," ",(0,a.jsx)(e.span,{className:"token keyword",children:"extends"})," ",(0,a.jsx)(e.span,{className:"token class-name",children:"Vue"})," ",(0,a.jsx)(e.span,{className:"token punctuation",children:"{"}),"\n"]})})}),(0,a.jsx)(e.span,{className:"code-line",children:(0,a.jsx)(e.span,{className:"token script",children:(0,a.jsxs)(e.span,{className:"token language-javascript",children:["   isOnline ",(0,a.jsx)(e.span,{className:"token operator",children:"="})," ",(0,a.jsx)(e.span,{className:"token dom variable",children:"navigator"}),(0,a.jsx)(e.span,{className:"token punctuation",children:"."}),(0,a.jsx)(e.span,{className:"token property-access",children:"onLine"}),(0,a.jsx)(e.span,{className:"token punctuation",children:";"}),"\n"]})})}),(0,a.jsx)(e.span,{className:"code-line",children:(0,a.jsx)(e.span,{className:"token script",children:(0,a.jsx)(e.span,{className:"token language-javascript",children:"\n"})})}),(0,a.jsx)(e.span,{className:"code-line",children:(0,a.jsx)(e.span,{className:"token script",children:(0,a.jsxs)(e.span,{className:"token language-javascript",children:["   ",(0,a.jsx)(e.span,{className:"token function",children:"created"}),(0,a.jsx)(e.span,{className:"token punctuation",children:"("}),(0,a.jsx)(e.span,{className:"token punctuation",children:")"})," ",(0,a.jsx)(e.span,{className:"token punctuation",children:"{"}),"\n"]})})}),(0,a.jsx)(e.span,{className:"code-line",children:(0,a.jsx)(e.span,{className:"token script",children:(0,a.jsxs)(e.span,{className:"token language-javascript",children:["     ",(0,a.jsx)(e.span,{className:"token keyword",children:"this"}),(0,a.jsx)(e.span,{className:"token punctuation",children:"."}),(0,a.jsx)(e.span,{className:"token method function property-access",children:"$on"}),(0,a.jsx)(e.span,{className:"token punctuation",children:"("}),(0,a.jsx)(e.span,{className:"token string",children:'"online"'}),(0,a.jsx)(e.span,{className:"token punctuation",children:","})," ",(0,a.jsx)(e.span,{className:"token punctuation",children:"("}),(0,a.jsx)(e.span,{className:"token punctuation",children:")"})," ",(0,a.jsx)(e.span,{className:"token arrow operator",children:"=>"})," ",(0,a.jsx)(e.span,{className:"token punctuation",children:"{"}),"\n"]})})}),(0,a.jsx)(e.span,{className:"code-line",children:(0,a.jsx)(e.span,{className:"token script",children:(0,a.jsxs)(e.span,{className:"token language-javascript",children:["       ",(0,a.jsx)(e.span,{className:"token console class-name",children:"console"}),(0,a.jsx)(e.span,{className:"token punctuation",children:"."}),(0,a.jsx)(e.span,{className:"token method function property-access",children:"log"}),(0,a.jsx)(e.span,{className:"token punctuation",children:"("}),(0,a.jsx)(e.span,{className:"token string",children:'"User is now online"'}),(0,a.jsx)(e.span,{className:"token punctuation",children:")"}),(0,a.jsx)(e.span,{className:"token punctuation",children:";"}),"\n"]})})}),(0,a.jsx)(e.span,{className:"code-line",children:(0,a.jsx)(e.span,{className:"token script",children:(0,a.jsxs)(e.span,{className:"token language-javascript",children:["       ",(0,a.jsx)(e.span,{className:"token keyword",children:"this"}),(0,a.jsx)(e.span,{className:"token punctuation",children:"."}),(0,a.jsx)(e.span,{className:"token property-access",children:"isOnline"})," ",(0,a.jsx)(e.span,{className:"token operator",children:"="})," ",(0,a.jsx)(e.span,{className:"token boolean",children:"true"}),(0,a.jsx)(e.span,{className:"token punctuation",children:";"}),"\n"]})})}),(0,a.jsx)(e.span,{className:"code-line",children:(0,a.jsx)(e.span,{className:"token script",children:(0,a.jsxs)(e.span,{className:"token language-javascript",children:["     ",(0,a.jsx)(e.span,{className:"token punctuation",children:"}"}),(0,a.jsx)(e.span,{className:"token punctuation",children:")"}),(0,a.jsx)(e.span,{className:"token punctuation",children:";"}),"\n"]})})}),(0,a.jsx)(e.span,{className:"code-line",children:(0,a.jsx)(e.span,{className:"token script",children:(0,a.jsx)(e.span,{className:"token language-javascript",children:"\n"})})}),(0,a.jsx)(e.span,{className:"code-line",children:(0,a.jsx)(e.span,{className:"token script",children:(0,a.jsxs)(e.span,{className:"token language-javascript",children:["     ",(0,a.jsx)(e.span,{className:"token keyword",children:"this"}),(0,a.jsx)(e.span,{className:"token punctuation",children:"."}),(0,a.jsx)(e.span,{className:"token method function property-access",children:"$on"}),(0,a.jsx)(e.span,{className:"token punctuation",children:"("}),(0,a.jsx)(e.span,{className:"token string",children:'"offline"'}),(0,a.jsx)(e.span,{className:"token punctuation",children:","})," ",(0,a.jsx)(e.span,{className:"token punctuation",children:"("}),(0,a.jsx)(e.span,{className:"token punctuation",children:")"})," ",(0,a.jsx)(e.span,{className:"token arrow operator",children:"=>"})," ",(0,a.jsx)(e.span,{className:"token punctuation",children:"{"}),"\n"]})})}),(0,a.jsx)(e.span,{className:"code-line",children:(0,a.jsx)(e.span,{className:"token script",children:(0,a.jsxs)(e.span,{className:"token language-javascript",children:["       ",(0,a.jsx)(e.span,{className:"token console class-name",children:"console"}),(0,a.jsx)(e.span,{className:"token punctuation",children:"."}),(0,a.jsx)(e.span,{className:"token method function property-access",children:"log"}),(0,a.jsx)(e.span,{className:"token punctuation",children:"("}),(0,a.jsx)(e.span,{className:"token string",children:'"User is now offline"'}),(0,a.jsx)(e.span,{className:"token punctuation",children:")"}),(0,a.jsx)(e.span,{className:"token punctuation",children:";"}),"\n"]})})}),(0,a.jsx)(e.span,{className:"code-line",children:(0,a.jsx)(e.span,{className:"token script",children:(0,a.jsxs)(e.span,{className:"token language-javascript",children:["       ",(0,a.jsx)(e.span,{className:"token keyword",children:"this"}),(0,a.jsx)(e.span,{className:"token punctuation",children:"."}),(0,a.jsx)(e.span,{className:"token property-access",children:"isOnline"})," ",(0,a.jsx)(e.span,{className:"token operator",children:"="})," ",(0,a.jsx)(e.span,{className:"token boolean",children:"false"}),(0,a.jsx)(e.span,{className:"token punctuation",children:";"}),"\n"]})})}),(0,a.jsx)(e.span,{className:"code-line",children:(0,a.jsx)(e.span,{className:"token script",children:(0,a.jsxs)(e.span,{className:"token language-javascript",children:["     ",(0,a.jsx)(e.span,{className:"token punctuation",children:"}"}),(0,a.jsx)(e.span,{className:"token punctuation",children:")"}),(0,a.jsx)(e.span,{className:"token punctuation",children:";"}),"\n"]})})}),(0,a.jsx)(e.span,{className:"code-line",children:(0,a.jsx)(e.span,{className:"token script",children:(0,a.jsxs)(e.span,{className:"token language-javascript",children:["   ",(0,a.jsx)(e.span,{className:"token punctuation",children:"}"}),"\n"]})})}),(0,a.jsx)(e.span,{className:"code-line",children:(0,a.jsx)(e.span,{className:"token script",children:(0,a.jsxs)(e.span,{className:"token language-javascript",children:[" ",(0,a.jsx)(e.span,{className:"token punctuation",children:"}"}),"\n"]})})}),(0,a.jsxs)(e.span,{className:"code-line",children:[(0,a.jsx)(e.span,{className:"token script",children:(0,a.jsx)(e.span,{className:"token language-javascript"})}),(0,a.jsxs)(e.span,{className:"token tag",children:[(0,a.jsxs)(e.span,{className:"token tag",children:[(0,a.jsx)(e.span,{className:"token punctuation",children:"</"}),"script"]}),(0,a.jsx)(e.span,{className:"token punctuation",children:">"})]}),"\n"]})]})}),"\n",(0,a.jsxs)(e.h3,{id:"making-vuex-state-persistent",children:[(0,a.jsx)(e.a,{"aria-hidden":"true",tabIndex:"-1",href:"#making-vuex-state-persistent",children:(0,a.jsx)(e.span,{className:"icon icon-link"})}),"Making Vuex state persistent"]}),"\n",(0,a.jsxs)(e.p,{children:["If you want some parts of your data persistent, available in offline mode, you’ll need a persistent store, which replicates and retrieves the Vuex store to/from local storage. In this article, I’ll focus on a Vuex plugin named ",(0,a.jsx)(e.a,{href:"https://github.com/championswimmer/vuex-persist",rel:"nofollow noopener noreferrer",target:"_blank",children:(0,a.jsx)(e.code,{children:"vuex-persist"})}),". You can download it with the following command:"]}),"\n",(0,a.jsx)(e.pre,{className:"language-bash",children:(0,a.jsx)(e.code,{className:"language-bash code-highlight",children:(0,a.jsxs)(e.span,{className:"code-line",children:["$ ",(0,a.jsx)(e.span,{className:"token function",children:"npm"})," ",(0,a.jsx)(e.span,{className:"token function",children:"install"})," ",(0,a.jsx)(e.span,{className:"token parameter variable",children:"--save"})," vuex-persist\n"]})})}),"\n",(0,a.jsxs)(e.p,{children:["Since we are already using LocalForage, we’ll use it to store the persistent data. Let’s create a wrapper over the ",(0,a.jsx)(e.code,{children:"vuex-persist"})," plugin:"]}),"\n",(0,a.jsx)(e.pre,{className:"language-typescript",children:(0,a.jsxs)(e.code,{className:"language-typescript code-highlight",children:[(0,a.jsxs)(e.span,{className:"code-line",children:[(0,a.jsx)(e.span,{className:"token comment",children:"// src/store/plugins/persistent.ts"}),"\n"]}),(0,a.jsxs)(e.span,{className:"code-line",children:[(0,a.jsx)(e.span,{className:"token keyword",children:"import"})," LocalForage ",(0,a.jsx)(e.span,{className:"token keyword",children:"from"})," ",(0,a.jsx)(e.span,{className:"token string",children:'"localforage"'}),(0,a.jsx)(e.span,{className:"token punctuation",children:";"}),"\n"]}),(0,a.jsxs)(e.span,{className:"code-line",children:[(0,a.jsx)(e.span,{className:"token keyword",children:"import"})," VuexPersistence ",(0,a.jsx)(e.span,{className:"token keyword",children:"from"})," ",(0,a.jsx)(e.span,{className:"token string",children:'"vuex-persist"'}),(0,a.jsx)(e.span,{className:"token punctuation",children:";"}),"\n"]}),(0,a.jsx)(e.span,{className:"code-line",children:"\n"}),(0,a.jsxs)(e.span,{className:"code-line",children:[(0,a.jsx)(e.span,{className:"token keyword",children:"export"})," ",(0,a.jsx)(e.span,{className:"token keyword",children:"default"})," ",(0,a.jsx)(e.span,{className:"token keyword",children:"function"})," ",(0,a.jsx)(e.span,{className:"token function",children:"createPersistedState"}),(0,a.jsx)(e.span,{className:"token punctuation",children:"("}),"options ",(0,a.jsx)(e.span,{className:"token operator",children:"="})," ",(0,a.jsx)(e.span,{className:"token punctuation",children:"{"}),(0,a.jsx)(e.span,{className:"token punctuation",children:"}"}),(0,a.jsx)(e.span,{className:"token punctuation",children:")"})," ",(0,a.jsx)(e.span,{className:"token punctuation",children:"{"}),"\n"]}),(0,a.jsxs)(e.span,{className:"code-line",children:["  ",(0,a.jsx)(e.span,{className:"token keyword",children:"return"})," store ",(0,a.jsx)(e.span,{className:"token operator",children:"=>"})," ",(0,a.jsx)(e.span,{className:"token punctuation",children:"{"}),"\n"]}),(0,a.jsxs)(e.span,{className:"code-line",children:["    ",(0,a.jsx)(e.span,{className:"token keyword",children:"const"})," VuexForage ",(0,a.jsx)(e.span,{className:"token operator",children:"="})," ",(0,a.jsx)(e.span,{className:"token keyword",children:"new"})," ",(0,a.jsx)(e.span,{className:"token class-name",children:"VuexPersistence"}),(0,a.jsx)(e.span,{className:"token punctuation",children:"("}),(0,a.jsx)(e.span,{className:"token punctuation",children:"{"}),"\n"]}),(0,a.jsxs)(e.span,{className:"code-line",children:["      ",(0,a.jsx)(e.span,{className:"token operator",children:"..."}),"options",(0,a.jsx)(e.span,{className:"token punctuation",children:","}),"\n"]}),(0,a.jsx)(e.span,{className:"code-line",children:"\n"}),(0,a.jsxs)(e.span,{className:"code-line",children:["      storage",(0,a.jsx)(e.span,{className:"token operator",children:":"})," LocalForage",(0,a.jsx)(e.span,{className:"token punctuation",children:","}),"\n"]}),(0,a.jsxs)(e.span,{className:"code-line",children:["      asyncStorage",(0,a.jsx)(e.span,{className:"token operator",children:":"})," ",(0,a.jsx)(e.span,{className:"token boolean",children:"true"}),(0,a.jsx)(e.span,{className:"token punctuation",children:","}),"\n"]}),(0,a.jsx)(e.span,{className:"code-line",children:"\n"}),(0,a.jsxs)(e.span,{className:"code-line",children:["      ",(0,a.jsx)(e.span,{className:"token comment",children:"// Used to trigger the `storageReady` event as soon as the state is loaded"}),"\n"]}),(0,a.jsxs)(e.span,{className:"code-line",children:["      ",(0,a.jsx)(e.span,{className:"token comment",children:"// from LocalForage:"}),"\n"]}),(0,a.jsxs)(e.span,{className:"code-line",children:["      ",(0,a.jsx)(e.span,{className:"token function-variable function",children:"restoreState"}),(0,a.jsx)(e.span,{className:"token operator",children:":"})," ",(0,a.jsx)(e.span,{className:"token punctuation",children:"("}),"key",(0,a.jsx)(e.span,{className:"token punctuation",children:","})," storage",(0,a.jsx)(e.span,{className:"token punctuation",children:")"})," ",(0,a.jsx)(e.span,{className:"token operator",children:"=>"}),"\n"]}),(0,a.jsxs)(e.span,{className:"code-line",children:["        ",(0,a.jsx)(e.span,{className:"token keyword",children:"new"})," ",(0,a.jsx)(e.span,{className:"token class-name",children:(0,a.jsx)(e.span,{className:"token builtin",children:"Promise"})}),(0,a.jsx)(e.span,{className:"token punctuation",children:"("}),"resolve ",(0,a.jsx)(e.span,{className:"token operator",children:"=>"})," ",(0,a.jsx)(e.span,{className:"token punctuation",children:"{"}),"\n"]}),(0,a.jsxs)(e.span,{className:"code-line",children:["          storage",(0,a.jsx)(e.span,{className:"token punctuation",children:"."}),(0,a.jsx)(e.span,{className:"token function",children:"getItem"}),(0,a.jsx)(e.span,{className:"token punctuation",children:"("}),"key",(0,a.jsx)(e.span,{className:"token punctuation",children:")"}),(0,a.jsx)(e.span,{className:"token punctuation",children:"."}),(0,a.jsx)(e.span,{className:"token function",children:"then"}),(0,a.jsx)(e.span,{className:"token punctuation",children:"("}),"data ",(0,a.jsx)(e.span,{className:"token operator",children:"=>"})," ",(0,a.jsx)(e.span,{className:"token punctuation",children:"{"}),"\n"]}),(0,a.jsxs)(e.span,{className:"code-line",children:["            ",(0,a.jsx)(e.span,{className:"token function",children:"resolve"}),(0,a.jsx)(e.span,{className:"token punctuation",children:"("}),"data",(0,a.jsx)(e.span,{className:"token punctuation",children:")"}),(0,a.jsx)(e.span,{className:"token punctuation",children:";"}),"\n"]}),(0,a.jsx)(e.span,{className:"code-line",children:"\n"}),(0,a.jsxs)(e.span,{className:"code-line",children:["            store",(0,a.jsx)(e.span,{className:"token punctuation",children:"."}),"_vm",(0,a.jsx)(e.span,{className:"token punctuation",children:"."}),"$root",(0,a.jsx)(e.span,{className:"token punctuation",children:"."}),(0,a.jsx)(e.span,{className:"token function",children:"$emit"}),(0,a.jsx)(e.span,{className:"token punctuation",children:"("}),(0,a.jsx)(e.span,{className:"token string",children:'"storageReady"'}),(0,a.jsx)(e.span,{className:"token punctuation",children:")"}),(0,a.jsx)(e.span,{className:"token punctuation",children:";"}),"\n"]}),(0,a.jsxs)(e.span,{className:"code-line",children:["          ",(0,a.jsx)(e.span,{className:"token punctuation",children:"}"}),(0,a.jsx)(e.span,{className:"token punctuation",children:")"}),(0,a.jsx)(e.span,{className:"token punctuation",children:";"}),"\n"]}),(0,a.jsxs)(e.span,{className:"code-line",children:["        ",(0,a.jsx)(e.span,{className:"token punctuation",children:"}"}),(0,a.jsx)(e.span,{className:"token punctuation",children:")"}),"\n"]}),(0,a.jsxs)(e.span,{className:"code-line",children:["    ",(0,a.jsx)(e.span,{className:"token punctuation",children:"}"}),(0,a.jsx)(e.span,{className:"token punctuation",children:")"}),(0,a.jsx)(e.span,{className:"token punctuation",children:";"}),"\n"]}),(0,a.jsx)(e.span,{className:"code-line",children:"\n"}),(0,a.jsxs)(e.span,{className:"code-line",children:["    ",(0,a.jsx)(e.span,{className:"token keyword",children:"return"})," VuexForage",(0,a.jsx)(e.span,{className:"token punctuation",children:"."}),(0,a.jsx)(e.span,{className:"token function",children:"plugin"}),(0,a.jsx)(e.span,{className:"token punctuation",children:"("}),"store",(0,a.jsx)(e.span,{className:"token punctuation",children:")"}),(0,a.jsx)(e.span,{className:"token punctuation",children:";"}),"\n"]}),(0,a.jsxs)(e.span,{className:"code-line",children:["  ",(0,a.jsx)(e.span,{className:"token punctuation",children:"}"}),(0,a.jsx)(e.span,{className:"token punctuation",children:";"}),"\n"]}),(0,a.jsxs)(e.span,{className:"code-line",children:[(0,a.jsx)(e.span,{className:"token punctuation",children:"}"}),"\n"]})]})}),"\n",(0,a.jsx)(e.p,{children:"We must register this plugin in our Vuex Store:"}),"\n",(0,a.jsx)(e.pre,{className:"language-typescript",children:(0,a.jsxs)(e.code,{className:"language-typescript code-highlight",children:[(0,a.jsxs)(e.span,{className:"code-line",children:[(0,a.jsx)(e.span,{className:"token comment",children:"// src/store/index.ts"}),"\n"]}),(0,a.jsxs)(e.span,{className:"code-line",children:[(0,a.jsx)(e.span,{className:"token keyword",children:"import"})," Vue ",(0,a.jsx)(e.span,{className:"token keyword",children:"from"})," ",(0,a.jsx)(e.span,{className:"token string",children:'"vue"'}),(0,a.jsx)(e.span,{className:"token punctuation",children:";"}),"\n"]}),(0,a.jsxs)(e.span,{className:"code-line",children:[(0,a.jsx)(e.span,{className:"token keyword",children:"import"})," Vuex ",(0,a.jsx)(e.span,{className:"token keyword",children:"from"})," ",(0,a.jsx)(e.span,{className:"token string",children:'"vuex"'}),(0,a.jsx)(e.span,{className:"token punctuation",children:";"}),"\n"]}),(0,a.jsxs)(e.span,{className:"code-line",children:[(0,a.jsx)(e.span,{className:"token keyword",children:"import"})," createLogger ",(0,a.jsx)(e.span,{className:"token keyword",children:"from"})," ",(0,a.jsx)(e.span,{className:"token string",children:'"vuex/dist/logger"'}),(0,a.jsx)(e.span,{className:"token punctuation",children:";"}),"\n"]}),(0,a.jsxs)(e.span,{className:"code-line",children:[(0,a.jsx)(e.span,{className:"token keyword",children:"import"})," createPersistedState ",(0,a.jsx)(e.span,{className:"token keyword",children:"from"})," ",(0,a.jsx)(e.span,{className:"token string",children:'"./plugins/persistent"'}),(0,a.jsx)(e.span,{className:"token punctuation",children:";"}),"\n"]}),(0,a.jsx)(e.span,{className:"code-line",children:"\n"}),(0,a.jsxs)(e.span,{className:"code-line",children:[(0,a.jsx)(e.span,{className:"token keyword",children:"import"})," foo ",(0,a.jsx)(e.span,{className:"token keyword",children:"from"})," ",(0,a.jsx)(e.span,{className:"token string",children:'"./modules/foo"'}),(0,a.jsx)(e.span,{className:"token punctuation",children:";"}),"\n"]}),(0,a.jsxs)(e.span,{className:"code-line",children:[(0,a.jsx)(e.span,{className:"token keyword",children:"import"})," bar ",(0,a.jsx)(e.span,{className:"token keyword",children:"from"})," ",(0,a.jsx)(e.span,{className:"token string",children:'"./modules/bar"'}),(0,a.jsx)(e.span,{className:"token punctuation",children:";"}),"\n"]}),(0,a.jsx)(e.span,{className:"code-line",children:"\n"}),(0,a.jsxs)(e.span,{className:"code-line",children:["Vue",(0,a.jsx)(e.span,{className:"token punctuation",children:"."}),(0,a.jsx)(e.span,{className:"token function",children:"use"}),(0,a.jsx)(e.span,{className:"token punctuation",children:"("}),"Vuex",(0,a.jsx)(e.span,{className:"token punctuation",children:")"}),(0,a.jsx)(e.span,{className:"token punctuation",children:";"}),"\n"]}),(0,a.jsx)(e.span,{className:"code-line",children:"\n"}),(0,a.jsxs)(e.span,{className:"code-line",children:[(0,a.jsx)(e.span,{className:"token comment",children:"// Disable logs & strict mode in production:"}),"\n"]}),(0,a.jsxs)(e.span,{className:"code-line",children:[(0,a.jsx)(e.span,{className:"token keyword",children:"const"})," debug ",(0,a.jsx)(e.span,{className:"token operator",children:"="})," process",(0,a.jsx)(e.span,{className:"token punctuation",children:"."}),"env",(0,a.jsx)(e.span,{className:"token punctuation",children:"."}),(0,a.jsx)(e.span,{className:"token constant",children:"NODE_ENV"})," ",(0,a.jsx)(e.span,{className:"token operator",children:"!=="})," ",(0,a.jsx)(e.span,{className:"token string",children:'"production"'}),(0,a.jsx)(e.span,{className:"token punctuation",children:";"}),"\n"]}),(0,a.jsx)(e.span,{className:"code-line",children:"\n"}),(0,a.jsxs)(e.span,{className:"code-line",children:[(0,a.jsx)(e.span,{className:"token comment",children:"// Plugins for both `development` & `production` modes:"}),"\n"]}),(0,a.jsxs)(e.span,{className:"code-line",children:[(0,a.jsx)(e.span,{className:"token keyword",children:"const"})," plugins ",(0,a.jsx)(e.span,{className:"token operator",children:"="})," ",(0,a.jsx)(e.span,{className:"token punctuation",children:"["}),"\n"]}),(0,a.jsxs)(e.span,{className:"code-line",children:["  ",(0,a.jsx)(e.span,{className:"token function",children:"createPersistedState"}),(0,a.jsx)(e.span,{className:"token punctuation",children:"("}),(0,a.jsx)(e.span,{className:"token punctuation",children:"{"}),"\n"]}),(0,a.jsxs)(e.span,{className:"code-line",children:["    strictMode",(0,a.jsx)(e.span,{className:"token operator",children:":"})," debug",(0,a.jsx)(e.span,{className:"token punctuation",children:","}),"\n"]}),(0,a.jsxs)(e.span,{className:"code-line",children:["    ",(0,a.jsx)(e.span,{className:"token comment",children:"// Specify here which modules should be persistent:"}),"\n"]}),(0,a.jsxs)(e.span,{className:"code-line",children:["    modules",(0,a.jsx)(e.span,{className:"token operator",children:":"})," ",(0,a.jsx)(e.span,{className:"token punctuation",children:"["}),(0,a.jsx)(e.span,{className:"token string",children:'"foo"'}),(0,a.jsx)(e.span,{className:"token punctuation",children:","})," ",(0,a.jsx)(e.span,{className:"token string",children:'"bar"'}),(0,a.jsx)(e.span,{className:"token punctuation",children:"]"}),"\n"]}),(0,a.jsxs)(e.span,{className:"code-line",children:["  ",(0,a.jsx)(e.span,{className:"token punctuation",children:"}"}),(0,a.jsx)(e.span,{className:"token punctuation",children:")"}),"\n"]}),(0,a.jsxs)(e.span,{className:"code-line",children:[(0,a.jsx)(e.span,{className:"token punctuation",children:"]"}),(0,a.jsx)(e.span,{className:"token punctuation",children:";"}),"\n"]}),(0,a.jsx)(e.span,{className:"code-line",children:"\n"}),(0,a.jsxs)(e.span,{className:"code-line",children:[(0,a.jsx)(e.span,{className:"token comment",children:"// Plugins for `development` mode:"}),"\n"]}),(0,a.jsxs)(e.span,{className:"code-line",children:[(0,a.jsx)(e.span,{className:"token keyword",children:"const"})," devPlugins ",(0,a.jsx)(e.span,{className:"token operator",children:"="})," ",(0,a.jsx)(e.span,{className:"token punctuation",children:"["}),"\n"]}),(0,a.jsxs)(e.span,{className:"code-line",children:["  ",(0,a.jsx)(e.span,{className:"token comment",children:"// Integrates with Vue Devtools:"}),"\n"]}),(0,a.jsxs)(e.span,{className:"code-line",children:["  ",(0,a.jsx)(e.span,{className:"token function",children:"createLogger"}),(0,a.jsx)(e.span,{className:"token punctuation",children:"("}),(0,a.jsx)(e.span,{className:"token punctuation",children:")"}),"\n"]}),(0,a.jsxs)(e.span,{className:"code-line",children:[(0,a.jsx)(e.span,{className:"token punctuation",children:"]"}),(0,a.jsx)(e.span,{className:"token punctuation",children:";"}),"\n"]}),(0,a.jsx)(e.span,{className:"code-line",children:"\n"}),(0,a.jsxs)(e.span,{className:"code-line",children:[(0,a.jsx)(e.span,{className:"token comment",children:"// Plugins for `production` mode:"}),"\n"]}),(0,a.jsxs)(e.span,{className:"code-line",children:[(0,a.jsx)(e.span,{className:"token keyword",children:"const"})," prodPlugins ",(0,a.jsx)(e.span,{className:"token operator",children:"="})," ",(0,a.jsx)(e.span,{className:"token punctuation",children:"["}),(0,a.jsx)(e.span,{className:"token punctuation",children:"]"}),(0,a.jsx)(e.span,{className:"token punctuation",children:";"}),"\n"]}),(0,a.jsx)(e.span,{className:"code-line",children:"\n"}),(0,a.jsxs)(e.span,{className:"code-line",children:[(0,a.jsx)(e.span,{className:"token keyword",children:"export"})," ",(0,a.jsx)(e.span,{className:"token keyword",children:"default"})," ",(0,a.jsx)(e.span,{className:"token keyword",children:"new"})," ",(0,a.jsx)(e.span,{className:"token class-name",children:"Vuex"}),(0,a.jsx)(e.span,{className:"token punctuation",children:"."}),(0,a.jsx)(e.span,{className:"token function",children:"Store"}),(0,a.jsx)(e.span,{className:"token punctuation",children:"("}),(0,a.jsx)(e.span,{className:"token punctuation",children:"{"}),"\n"]}),(0,a.jsxs)(e.span,{className:"code-line",children:["  strict",(0,a.jsx)(e.span,{className:"token operator",children:":"})," debug",(0,a.jsx)(e.span,{className:"token punctuation",children:","}),"\n"]}),(0,a.jsxs)(e.span,{className:"code-line",children:["  plugins",(0,a.jsx)(e.span,{className:"token operator",children:":"})," debug\n"]}),(0,a.jsxs)(e.span,{className:"code-line",children:["    ",(0,a.jsx)(e.span,{className:"token operator",children:"?"})," ",(0,a.jsx)(e.span,{className:"token punctuation",children:"["}),(0,a.jsx)(e.span,{className:"token operator",children:"..."}),"plugins",(0,a.jsx)(e.span,{className:"token punctuation",children:","})," ",(0,a.jsx)(e.span,{className:"token operator",children:"..."}),"devPlugins",(0,a.jsx)(e.span,{className:"token punctuation",children:"]"}),"\n"]}),(0,a.jsxs)(e.span,{className:"code-line",children:["    ",(0,a.jsx)(e.span,{className:"token operator",children:":"})," ",(0,a.jsx)(e.span,{className:"token punctuation",children:"["}),(0,a.jsx)(e.span,{className:"token operator",children:"..."}),"plugins",(0,a.jsx)(e.span,{className:"token punctuation",children:","})," ",(0,a.jsx)(e.span,{className:"token operator",children:"..."}),"prodPlugins",(0,a.jsx)(e.span,{className:"token punctuation",children:"]"}),(0,a.jsx)(e.span,{className:"token punctuation",children:","}),"\n"]}),(0,a.jsx)(e.span,{className:"code-line",children:"\n"}),(0,a.jsxs)(e.span,{className:"code-line",children:["  modules",(0,a.jsx)(e.span,{className:"token operator",children:":"})," ",(0,a.jsx)(e.span,{className:"token punctuation",children:"{"}),"\n"]}),(0,a.jsxs)(e.span,{className:"code-line",children:["    foo",(0,a.jsx)(e.span,{className:"token punctuation",children:","}),"\n"]}),(0,a.jsx)(e.span,{className:"code-line",children:"    bar\n"}),(0,a.jsxs)(e.span,{className:"code-line",children:["  ",(0,a.jsx)(e.span,{className:"token punctuation",children:"}"}),"\n"]}),(0,a.jsxs)(e.span,{className:"code-line",children:[(0,a.jsx)(e.span,{className:"token punctuation",children:"}"}),(0,a.jsx)(e.span,{className:"token punctuation",children:")"}),(0,a.jsx)(e.span,{className:"token punctuation",children:";"}),"\n"]})]})}),"\n",(0,a.jsxs)(e.p,{children:["And voila! Data from foo and bar modules will be persistent, automatically stored, and retrieved in/from the local storage. The last thing we need to do is wait till the store is rehydrated before rendering the main app component, but since we are emitting a ",(0,a.jsx)(e.code,{children:"storageReady"})," event in our ",(0,a.jsx)(e.code,{children:"vuex-persist"})," wrapper, this should be pretty easy:"]}),"\n",(0,a.jsx)(e.pre,{className:"language-html",children:(0,a.jsxs)(e.code,{className:"language-html code-highlight",children:[(0,a.jsxs)(e.span,{className:"code-line",children:[(0,a.jsxs)(e.span,{className:"token tag",children:[(0,a.jsxs)(e.span,{className:"token tag",children:[(0,a.jsx)(e.span,{className:"token punctuation",children:"<"}),"template"]}),(0,a.jsx)(e.span,{className:"token punctuation",children:">"})]}),"\n"]}),(0,a.jsxs)(e.span,{className:"code-line",children:["  ",(0,a.jsxs)(e.span,{className:"token tag",children:[(0,a.jsxs)(e.span,{className:"token tag",children:[(0,a.jsx)(e.span,{className:"token punctuation",children:"<"}),"transition-group"]})," ",(0,a.jsx)(e.span,{className:"token attr-name",children:"name"}),(0,a.jsxs)(e.span,{className:"token attr-value",children:[(0,a.jsx)(e.span,{className:"token punctuation attr-equals",children:"="}),(0,a.jsx)(e.span,{className:"token punctuation",children:'"'}),"fade",(0,a.jsx)(e.span,{className:"token punctuation",children:'"'})]})," ",(0,a.jsx)(e.span,{className:"token attr-name",children:"class"}),(0,a.jsxs)(e.span,{className:"token attr-value",children:[(0,a.jsx)(e.span,{className:"token punctuation attr-equals",children:"="}),(0,a.jsx)(e.span,{className:"token punctuation",children:'"'}),"app",(0,a.jsx)(e.span,{className:"token punctuation",children:'"'})]}),(0,a.jsx)(e.span,{className:"token punctuation",children:">"})]}),"\n"]}),(0,a.jsxs)(e.span,{className:"code-line",children:["    ",(0,a.jsxs)(e.span,{className:"token tag",children:[(0,a.jsxs)(e.span,{className:"token tag",children:[(0,a.jsx)(e.span,{className:"token punctuation",children:"<"}),"Loader"]})," ",(0,a.jsx)(e.span,{className:"token attr-name",children:"key"}),(0,a.jsxs)(e.span,{className:"token attr-value",children:[(0,a.jsx)(e.span,{className:"token punctuation attr-equals",children:"="}),(0,a.jsx)(e.span,{className:"token punctuation",children:'"'}),"app-loader",(0,a.jsx)(e.span,{className:"token punctuation",children:'"'})]})," ",(0,a.jsx)(e.span,{className:"token attr-name",children:"v-if"}),(0,a.jsxs)(e.span,{className:"token attr-value",children:[(0,a.jsx)(e.span,{className:"token punctuation attr-equals",children:"="}),(0,a.jsx)(e.span,{className:"token punctuation",children:'"'}),"!isStateReady",(0,a.jsx)(e.span,{className:"token punctuation",children:'"'})]})," ",(0,a.jsx)(e.span,{className:"token punctuation",children:"/>"})]}),"\n"]}),(0,a.jsxs)(e.span,{className:"code-line",children:["    ",(0,a.jsxs)(e.span,{className:"token tag",children:[(0,a.jsxs)(e.span,{className:"token tag",children:[(0,a.jsx)(e.span,{className:"token punctuation",children:"<"}),"Content"]})," ",(0,a.jsx)(e.span,{className:"token attr-name",children:"key"}),(0,a.jsxs)(e.span,{className:"token attr-value",children:[(0,a.jsx)(e.span,{className:"token punctuation attr-equals",children:"="}),(0,a.jsx)(e.span,{className:"token punctuation",children:'"'}),"app-content",(0,a.jsx)(e.span,{className:"token punctuation",children:'"'})]})," ",(0,a.jsx)(e.span,{className:"token attr-name",children:"v-if"}),(0,a.jsxs)(e.span,{className:"token attr-value",children:[(0,a.jsx)(e.span,{className:"token punctuation attr-equals",children:"="}),(0,a.jsx)(e.span,{className:"token punctuation",children:'"'}),"isStateReady",(0,a.jsx)(e.span,{className:"token punctuation",children:'"'})]})," ",(0,a.jsx)(e.span,{className:"token punctuation",children:"/>"})]}),"\n"]}),(0,a.jsxs)(e.span,{className:"code-line",children:["  ",(0,a.jsxs)(e.span,{className:"token tag",children:[(0,a.jsxs)(e.span,{className:"token tag",children:[(0,a.jsx)(e.span,{className:"token punctuation",children:"</"}),"transition-group"]}),(0,a.jsx)(e.span,{className:"token punctuation",children:">"})]}),"\n"]}),(0,a.jsxs)(e.span,{className:"code-line",children:[(0,a.jsxs)(e.span,{className:"token tag",children:[(0,a.jsxs)(e.span,{className:"token tag",children:[(0,a.jsx)(e.span,{className:"token punctuation",children:"</"}),"template"]}),(0,a.jsx)(e.span,{className:"token punctuation",children:">"})]}),"\n"]}),(0,a.jsx)(e.span,{className:"code-line",children:"\n"}),(0,a.jsxs)(e.span,{className:"code-line",children:[(0,a.jsxs)(e.span,{className:"token tag",children:[(0,a.jsxs)(e.span,{className:"token tag",children:[(0,a.jsx)(e.span,{className:"token punctuation",children:"<"}),"script"]}),(0,a.jsx)(e.span,{className:"token punctuation",children:">"})]}),(0,a.jsx)(e.span,{className:"token script",children:(0,a.jsx)(e.span,{className:"token language-javascript",children:"\n"})})]}),(0,a.jsx)(e.span,{className:"code-line",children:(0,a.jsx)(e.span,{className:"token script",children:(0,a.jsxs)(e.span,{className:"token language-javascript",children:[(0,a.jsx)(e.span,{className:"token keyword module",children:"import"})," ",(0,a.jsx)(e.span,{className:"token imports",children:(0,a.jsx)(e.span,{className:"token maybe-class-name",children:"Loader"})})," ",(0,a.jsx)(e.span,{className:"token keyword module",children:"from"})," ",(0,a.jsx)(e.span,{className:"token string",children:'"./components/Loader.vue"'}),(0,a.jsx)(e.span,{className:"token punctuation",children:";"}),"\n"]})})}),(0,a.jsx)(e.span,{className:"code-line",children:(0,a.jsx)(e.span,{className:"token script",children:(0,a.jsxs)(e.span,{className:"token language-javascript",children:[(0,a.jsx)(e.span,{className:"token keyword module",children:"import"})," ",(0,a.jsx)(e.span,{className:"token imports",children:(0,a.jsx)(e.span,{className:"token maybe-class-name",children:"Content"})})," ",(0,a.jsx)(e.span,{className:"token keyword module",children:"from"})," ",(0,a.jsx)(e.span,{className:"token string",children:'"./components/Content.vue"'}),(0,a.jsx)(e.span,{className:"token punctuation",children:";"}),"\n"]})})}),(0,a.jsx)(e.span,{className:"code-line",children:(0,a.jsx)(e.span,{className:"token script",children:(0,a.jsx)(e.span,{className:"token language-javascript",children:"\n"})})}),(0,a.jsx)(e.span,{className:"code-line",children:(0,a.jsx)(e.span,{className:"token script",children:(0,a.jsxs)(e.span,{className:"token language-javascript",children:[(0,a.jsx)(e.span,{className:"token keyword module",children:"export"})," ",(0,a.jsx)(e.span,{className:"token keyword module",children:"default"})," ",(0,a.jsx)(e.span,{className:"token punctuation",children:"{"}),"\n"]})})}),(0,a.jsx)(e.span,{className:"code-line",children:(0,a.jsx)(e.span,{className:"token script",children:(0,a.jsxs)(e.span,{className:"token language-javascript",children:["  ",(0,a.jsx)(e.span,{className:"token literal-property property",children:"name"}),(0,a.jsx)(e.span,{className:"token operator",children:":"})," ",(0,a.jsx)(e.span,{className:"token string",children:'"App"'}),(0,a.jsx)(e.span,{className:"token punctuation",children:","}),"\n"]})})}),(0,a.jsx)(e.span,{className:"code-line",children:(0,a.jsx)(e.span,{className:"token script",children:(0,a.jsxs)(e.span,{className:"token language-javascript",children:["  ",(0,a.jsx)(e.span,{className:"token literal-property property",children:"components"}),(0,a.jsx)(e.span,{className:"token operator",children:":"})," ",(0,a.jsx)(e.span,{className:"token punctuation",children:"{"}),"\n"]})})}),(0,a.jsx)(e.span,{className:"code-line",children:(0,a.jsx)(e.span,{className:"token script",children:(0,a.jsxs)(e.span,{className:"token language-javascript",children:["    ",(0,a.jsx)(e.span,{className:"token maybe-class-name",children:"Loader"}),(0,a.jsx)(e.span,{className:"token punctuation",children:","}),"\n"]})})}),(0,a.jsx)(e.span,{className:"code-line",children:(0,a.jsx)(e.span,{className:"token script",children:(0,a.jsxs)(e.span,{className:"token language-javascript",children:["    ",(0,a.jsx)(e.span,{className:"token maybe-class-name",children:"Content"}),"\n"]})})}),(0,a.jsx)(e.span,{className:"code-line",children:(0,a.jsx)(e.span,{className:"token script",children:(0,a.jsxs)(e.span,{className:"token language-javascript",children:["  ",(0,a.jsx)(e.span,{className:"token punctuation",children:"}"}),(0,a.jsx)(e.span,{className:"token punctuation",children:","}),"\n"]})})}),(0,a.jsx)(e.span,{className:"code-line",children:(0,a.jsx)(e.span,{className:"token script",children:(0,a.jsx)(e.span,{className:"token language-javascript",children:"\n"})})}),(0,a.jsx)(e.span,{className:"code-line",children:(0,a.jsx)(e.span,{className:"token script",children:(0,a.jsxs)(e.span,{className:"token language-javascript",children:["  ",(0,a.jsx)(e.span,{className:"token function-variable function",children:"data"}),(0,a.jsx)(e.span,{className:"token operator",children:":"})," ",(0,a.jsx)(e.span,{className:"token punctuation",children:"("}),(0,a.jsx)(e.span,{className:"token punctuation",children:")"})," ",(0,a.jsx)(e.span,{className:"token arrow operator",children:"=>"})," ",(0,a.jsx)(e.span,{className:"token punctuation",children:"("}),(0,a.jsx)(e.span,{className:"token punctuation",children:"{"}),"\n"]})})}),(0,a.jsx)(e.span,{className:"code-line",children:(0,a.jsx)(e.span,{className:"token script",children:(0,a.jsxs)(e.span,{className:"token language-javascript",children:["    ",(0,a.jsx)(e.span,{className:"token literal-property property",children:"isStateReady"}),(0,a.jsx)(e.span,{className:"token operator",children:":"})," ",(0,a.jsx)(e.span,{className:"token boolean",children:"false"}),"\n"]})})}),(0,a.jsx)(e.span,{className:"code-line",children:(0,a.jsx)(e.span,{className:"token script",children:(0,a.jsxs)(e.span,{className:"token language-javascript",children:["  ",(0,a.jsx)(e.span,{className:"token punctuation",children:"}"}),(0,a.jsx)(e.span,{className:"token punctuation",children:")"}),(0,a.jsx)(e.span,{className:"token punctuation",children:","}),"\n"]})})}),(0,a.jsx)(e.span,{className:"code-line",children:(0,a.jsx)(e.span,{className:"token script",children:(0,a.jsx)(e.span,{className:"token language-javascript",children:"\n"})})}),(0,a.jsx)(e.span,{className:"code-line",children:(0,a.jsx)(e.span,{className:"token script",children:(0,a.jsxs)(e.span,{className:"token language-javascript",children:["  ",(0,a.jsx)(e.span,{className:"token function",children:"created"}),(0,a.jsx)(e.span,{className:"token punctuation",children:"("}),(0,a.jsx)(e.span,{className:"token punctuation",children:")"})," ",(0,a.jsx)(e.span,{className:"token punctuation",children:"{"}),"\n"]})})}),(0,a.jsx)(e.span,{className:"code-line",children:(0,a.jsx)(e.span,{className:"token script",children:(0,a.jsxs)(e.span,{className:"token language-javascript",children:["    ",(0,a.jsx)(e.span,{className:"token comment",children:'// This event is fired by the "persistent" Vuex plugin when the state is'}),"\n"]})})}),(0,a.jsx)(e.span,{className:"code-line",children:(0,a.jsx)(e.span,{className:"token script",children:(0,a.jsxs)(e.span,{className:"token language-javascript",children:["    ",(0,a.jsx)(e.span,{className:"token comment",children:"// loaded from local storage (i.e. IndexedDB):"}),"\n"]})})}),(0,a.jsx)(e.span,{className:"code-line",children:(0,a.jsx)(e.span,{className:"token script",children:(0,a.jsxs)(e.span,{className:"token language-javascript",children:["    ",(0,a.jsx)(e.span,{className:"token keyword",children:"this"}),(0,a.jsx)(e.span,{className:"token punctuation",children:"."}),(0,a.jsx)(e.span,{className:"token property-access",children:"$store"}),(0,a.jsx)(e.span,{className:"token punctuation",children:"."}),(0,a.jsx)(e.span,{className:"token property-access",children:"_vm"}),(0,a.jsx)(e.span,{className:"token punctuation",children:"."}),(0,a.jsx)(e.span,{className:"token property-access",children:"$root"}),(0,a.jsx)(e.span,{className:"token punctuation",children:"."}),(0,a.jsx)(e.span,{className:"token method function property-access",children:"$on"}),(0,a.jsx)(e.span,{className:"token punctuation",children:"("}),(0,a.jsx)(e.span,{className:"token string",children:'"storageReady"'}),(0,a.jsx)(e.span,{className:"token punctuation",children:","})," ",(0,a.jsx)(e.span,{className:"token punctuation",children:"("}),(0,a.jsx)(e.span,{className:"token punctuation",children:")"})," ",(0,a.jsx)(e.span,{className:"token arrow operator",children:"=>"})," ",(0,a.jsx)(e.span,{className:"token punctuation",children:"{"}),"\n"]})})}),(0,a.jsx)(e.span,{className:"code-line",children:(0,a.jsx)(e.span,{className:"token script",children:(0,a.jsxs)(e.span,{className:"token language-javascript",children:["      ",(0,a.jsx)(e.span,{className:"token keyword",children:"this"}),(0,a.jsx)(e.span,{className:"token punctuation",children:"."}),(0,a.jsx)(e.span,{className:"token property-access",children:"isStateReady"})," ",(0,a.jsx)(e.span,{className:"token operator",children:"="})," ",(0,a.jsx)(e.span,{className:"token boolean",children:"true"}),(0,a.jsx)(e.span,{className:"token punctuation",children:";"}),"\n"]})})}),(0,a.jsx)(e.span,{className:"code-line",children:(0,a.jsx)(e.span,{className:"token script",children:(0,a.jsxs)(e.span,{className:"token language-javascript",children:["    ",(0,a.jsx)(e.span,{className:"token punctuation",children:"}"}),(0,a.jsx)(e.span,{className:"token punctuation",children:")"}),(0,a.jsx)(e.span,{className:"token punctuation",children:";"}),"\n"]})})}),(0,a.jsx)(e.span,{className:"code-line",children:(0,a.jsx)(e.span,{className:"token script",children:(0,a.jsxs)(e.span,{className:"token language-javascript",children:["  ",(0,a.jsx)(e.span,{className:"token punctuation",children:"}"}),"\n"]})})}),(0,a.jsx)(e.span,{className:"code-line",children:(0,a.jsx)(e.span,{className:"token script",children:(0,a.jsxs)(e.span,{className:"token language-javascript",children:[(0,a.jsx)(e.span,{className:"token punctuation",children:"}"}),(0,a.jsx)(e.span,{className:"token punctuation",children:";"}),"\n"]})})}),(0,a.jsxs)(e.span,{className:"code-line",children:[(0,a.jsx)(e.span,{className:"token script",children:(0,a.jsx)(e.span,{className:"token language-javascript"})}),(0,a.jsxs)(e.span,{className:"token tag",children:[(0,a.jsxs)(e.span,{className:"token tag",children:[(0,a.jsx)(e.span,{className:"token punctuation",children:"</"}),"script"]}),(0,a.jsx)(e.span,{className:"token punctuation",children:">"})]}),"\n"]})]})}),"\n",(0,a.jsxs)(e.h2,{id:"testing-offline-first-applications",children:[(0,a.jsx)(e.a,{"aria-hidden":"true",tabIndex:"-1",href:"#testing-offline-first-applications",children:(0,a.jsx)(e.span,{className:"icon icon-link"})}),"Testing offline-first applications"]}),"\n",(0,a.jsx)(e.p,{children:"Google Chrome’s DevTools offers a lot of functions to test the PWA features of your web application. However, some of them require HTTPS certificates, even on localhost. Let’s see how to properly set up a testing environment to test our Vue application."}),"\n",(0,a.jsxs)(e.h3,{id:"creating-a-development-environment-with-https",children:[(0,a.jsx)(e.a,{"aria-hidden":"true",tabIndex:"-1",href:"#creating-a-development-environment-with-https",children:(0,a.jsx)(e.span,{className:"icon icon-link"})}),"Creating a development environment with HTTPS"]}),"\n",(0,a.jsxs)(e.p,{children:["To test service workers and other features locally, we will need to generate our own, self-signed certificate and add it to our OS’s trust store. This process is described on ",(0,a.jsx)(e.a,{href:"https://letsencrypt.org/docs/certificates-for-localhost/",rel:"nofollow noopener noreferrer",target:"_blank",children:"letsencrypt page"})," – it requires only the following command to generate certificates:"]}),"\n",(0,a.jsx)(e.pre,{className:"language-bash",children:(0,a.jsxs)(e.code,{className:"language-bash code-highlight",children:[(0,a.jsxs)(e.span,{className:"code-line",children:["openssl req ",(0,a.jsx)(e.span,{className:"token parameter variable",children:"-x509"})," ",(0,a.jsx)(e.span,{className:"token parameter variable",children:"-out"})," localhost.crt ",(0,a.jsx)(e.span,{className:"token parameter variable",children:"-keyout"})," localhost.key ",(0,a.jsx)(e.span,{className:"token punctuation",children:"\\"}),"\n"]}),(0,a.jsxs)(e.span,{className:"code-line",children:["  ",(0,a.jsx)(e.span,{className:"token parameter variable",children:"-newkey"})," rsa:2048 ",(0,a.jsx)(e.span,{className:"token parameter variable",children:"-nodes"})," ",(0,a.jsx)(e.span,{className:"token parameter variable",children:"-sha256"})," ",(0,a.jsx)(e.span,{className:"token punctuation",children:"\\"}),"\n"]}),(0,a.jsxs)(e.span,{className:"code-line",children:["  ",(0,a.jsx)(e.span,{className:"token parameter variable",children:"-subj"})," ",(0,a.jsx)(e.span,{className:"token string",children:'"/CN=localhost"'})," ",(0,a.jsx)(e.span,{className:"token parameter variable",children:"-extensions"})," EXT ",(0,a.jsx)(e.span,{className:"token parameter variable",children:"-config"})," ",(0,a.jsx)(e.span,{className:"token operator",children:"<"}),(0,a.jsx)(e.span,{className:"token punctuation",children:"("})," ",(0,a.jsx)(e.span,{className:"token punctuation",children:"\\"}),"\n"]}),(0,a.jsxs)(e.span,{className:"code-line",children:["   ",(0,a.jsx)(e.span,{className:"token builtin class-name",children:"printf"})," ",(0,a.jsxs)(e.span,{className:"token string",children:['"[dn]',(0,a.jsx)(e.span,{className:"token entity",title:"\\n",children:"\\n"}),"CN=localhost",(0,a.jsx)(e.span,{className:"token entity",title:"\\n",children:"\\n"}),"[req]",(0,a.jsx)(e.span,{className:"token entity",title:"\\n",children:"\\n"}),"distinguished_name = dn",(0,a.jsx)(e.span,{className:"token entity",title:"\\n",children:"\\n"}),"[EXT]",(0,a.jsx)(e.span,{className:"token entity",title:"\\n",children:"\\n"}),"subjectAltName=DNS:localhost",(0,a.jsx)(e.span,{className:"token entity",title:"\\n",children:"\\n"}),"keyUsage=digitalSignature",(0,a.jsx)(e.span,{className:"token entity",title:"\\n",children:"\\n"}),'extendedKeyUsage=serverAuth"']}),(0,a.jsx)(e.span,{className:"token punctuation",children:")"}),"\n"]})]})}),"\n",(0,a.jsxs)(e.p,{children:["Once ",(0,a.jsx)(e.code,{children:"localhost.crt"})," is installed and trusted on our machine, we can modify ",(0,a.jsx)(e.code,{children:"vue.config.js"})," to use the generated certificates, as follows:"]}),"\n",(0,a.jsx)(e.pre,{className:"language-typescript",children:(0,a.jsxs)(e.code,{className:"language-typescript code-highlight",children:[(0,a.jsxs)(e.span,{className:"code-line",children:[(0,a.jsx)(e.span,{className:"token keyword",children:"const"})," fs ",(0,a.jsx)(e.span,{className:"token operator",children:"="})," ",(0,a.jsx)(e.span,{className:"token keyword",children:"require"}),(0,a.jsx)(e.span,{className:"token punctuation",children:"("}),(0,a.jsx)(e.span,{className:"token string",children:'"fs"'}),(0,a.jsx)(e.span,{className:"token punctuation",children:")"}),(0,a.jsx)(e.span,{className:"token punctuation",children:";"}),"\n"]}),(0,a.jsx)(e.span,{className:"code-line",children:"\n"}),(0,a.jsxs)(e.span,{className:"code-line",children:[(0,a.jsx)(e.span,{className:"token keyword",children:"const"})," config ",(0,a.jsx)(e.span,{className:"token operator",children:"="})," ",(0,a.jsx)(e.span,{className:"token punctuation",children:"{"}),(0,a.jsx)(e.span,{className:"token punctuation",children:"}"}),(0,a.jsx)(e.span,{className:"token punctuation",children:";"}),"\n"]}),(0,a.jsx)(e.span,{className:"code-line",children:"\n"}),(0,a.jsxs)(e.span,{className:"code-line",children:[(0,a.jsx)(e.span,{className:"token keyword",children:"if"})," ",(0,a.jsx)(e.span,{className:"token punctuation",children:"("}),"process",(0,a.jsx)(e.span,{className:"token punctuation",children:"."}),"env",(0,a.jsx)(e.span,{className:"token punctuation",children:"."}),(0,a.jsx)(e.span,{className:"token constant",children:"NODE_ENV"})," ",(0,a.jsx)(e.span,{className:"token operator",children:"==="})," ",(0,a.jsx)(e.span,{className:"token string",children:'"production"'}),(0,a.jsx)(e.span,{className:"token punctuation",children:")"})," ",(0,a.jsx)(e.span,{className:"token punctuation",children:"{"}),"\n"]}),(0,a.jsxs)(e.span,{className:"code-line",children:["  config",(0,a.jsx)(e.span,{className:"token punctuation",children:"."}),"devServer ",(0,a.jsx)(e.span,{className:"token operator",children:"="})," ",(0,a.jsx)(e.span,{className:"token punctuation",children:"{"}),"\n"]}),(0,a.jsxs)(e.span,{className:"code-line",children:["    https",(0,a.jsx)(e.span,{className:"token operator",children:":"})," ",(0,a.jsx)(e.span,{className:"token punctuation",children:"{"}),"\n"]}),(0,a.jsxs)(e.span,{className:"code-line",children:["      key",(0,a.jsx)(e.span,{className:"token operator",children:":"})," fs",(0,a.jsx)(e.span,{className:"token punctuation",children:"."}),(0,a.jsx)(e.span,{className:"token function",children:"readFileSync"}),(0,a.jsx)(e.span,{className:"token punctuation",children:"("}),(0,a.jsx)(e.span,{className:"token string",children:'"localhost.key"'}),(0,a.jsx)(e.span,{className:"token punctuation",children:")"}),(0,a.jsx)(e.span,{className:"token punctuation",children:","}),"\n"]}),(0,a.jsxs)(e.span,{className:"code-line",children:["      cert",(0,a.jsx)(e.span,{className:"token operator",children:":"})," fs",(0,a.jsx)(e.span,{className:"token punctuation",children:"."}),(0,a.jsx)(e.span,{className:"token function",children:"readFileSync"}),(0,a.jsx)(e.span,{className:"token punctuation",children:"("}),(0,a.jsx)(e.span,{className:"token string",children:'"localhost.crt"'}),(0,a.jsx)(e.span,{className:"token punctuation",children:")"}),"\n"]}),(0,a.jsxs)(e.span,{className:"code-line",children:["    ",(0,a.jsx)(e.span,{className:"token punctuation",children:"}"}),"\n"]}),(0,a.jsxs)(e.span,{className:"code-line",children:["  ",(0,a.jsx)(e.span,{className:"token punctuation",children:"}"}),(0,a.jsx)(e.span,{className:"token punctuation",children:";"}),"\n"]}),(0,a.jsxs)(e.span,{className:"code-line",children:[(0,a.jsx)(e.span,{className:"token punctuation",children:"}"}),"\n"]}),(0,a.jsx)(e.span,{className:"code-line",children:"\n"}),(0,a.jsxs)(e.span,{className:"code-line",children:["module",(0,a.jsx)(e.span,{className:"token punctuation",children:"."}),"exports ",(0,a.jsx)(e.span,{className:"token operator",children:"="})," config",(0,a.jsx)(e.span,{className:"token punctuation",children:";"}),"\n"]})]})}),"\n",(0,a.jsxs)(e.p,{children:["We can add some utility scripts in our ",(0,a.jsx)(e.code,{children:"package.json"})," to facilitate our work:"]}),"\n",(0,a.jsx)(e.pre,{className:"language-json",children:(0,a.jsxs)(e.code,{className:"language-json code-highlight",children:[(0,a.jsxs)(e.span,{className:"code-line",children:[(0,a.jsx)(e.span,{className:"token punctuation",children:"{"}),"\n"]}),(0,a.jsxs)(e.span,{className:"code-line",children:["  ",(0,a.jsx)(e.span,{className:"token property",children:'"scripts"'}),(0,a.jsx)(e.span,{className:"token operator",children:":"})," ",(0,a.jsx)(e.span,{className:"token punctuation",children:"{"}),"\n"]}),(0,a.jsxs)(e.span,{className:"code-line",children:["    ",(0,a.jsx)(e.span,{className:"token property",children:'"serve:prod"'}),(0,a.jsx)(e.span,{className:"token operator",children:":"})," ",(0,a.jsx)(e.span,{className:"token string",children:'"vue-cli-service build --mode=production --watch & node ./serve.js"'}),(0,a.jsx)(e.span,{className:"token punctuation",children:","}),"\n"]}),(0,a.jsxs)(e.span,{className:"code-line",children:["    ",(0,a.jsx)(e.span,{className:"token property",children:'"serve:dev"'}),(0,a.jsx)(e.span,{className:"token operator",children:":"})," ",(0,a.jsx)(e.span,{className:"token string",children:'"vue-cli-service serve --mode=development"'}),(0,a.jsx)(e.span,{className:"token punctuation",children:","}),"\n"]}),(0,a.jsxs)(e.span,{className:"code-line",children:["    ",(0,a.jsx)(e.span,{className:"token property",children:'"serve"'}),(0,a.jsx)(e.span,{className:"token operator",children:":"})," ",(0,a.jsx)(e.span,{className:"token string",children:'"vue-cli-service serve"'}),"\n"]}),(0,a.jsxs)(e.span,{className:"code-line",children:["  ",(0,a.jsx)(e.span,{className:"token punctuation",children:"}"}),"\n"]}),(0,a.jsxs)(e.span,{className:"code-line",children:[(0,a.jsx)(e.span,{className:"token punctuation",children:"}"}),"\n"]})]})}),"\n",(0,a.jsx)(e.p,{children:"Now, we can run:"}),"\n",(0,a.jsx)(e.pre,{className:"language-bash",children:(0,a.jsx)(e.code,{className:"language-bash code-highlight",children:(0,a.jsxs)(e.span,{className:"code-line",children:["$ ",(0,a.jsx)(e.span,{className:"token function",children:"npm"})," run serve:prod\n"]})})}),"\n",(0,a.jsx)(e.p,{children:"…and test our PWA here."}),"\n",(0,a.jsxs)(e.h3,{id:"testing-the-application-in-offline-mode",children:[(0,a.jsx)(e.a,{"aria-hidden":"true",tabIndex:"-1",href:"#testing-the-application-in-offline-mode",children:(0,a.jsx)(e.span,{className:"icon icon-link"})}),"Testing the application in offline mode"]}),"\n",(0,a.jsx)(e.p,{children:"You can test your Progressive Web Applications directly in the browser, without the need to manually disable network connections."}),"\n",(0,a.jsxs)(e.ol,{children:["\n",(0,a.jsxs)(e.li,{children:["Go to ",(0,a.jsx)(e.strong,{children:"Network"})," panel;"]}),"\n",(0,a.jsxs)(e.li,{children:["Click ",(0,a.jsx)(e.strong,{children:"Offline"})," in the bar."]}),"\n"]}),"\n",(0,a.jsxs)(e.h3,{id:"testing-the-add-to-home-screen-experience",children:[(0,a.jsx)(e.a,{"aria-hidden":"true",tabIndex:"-1",href:"#testing-the-add-to-home-screen-experience",children:(0,a.jsx)(e.span,{className:"icon icon-link"})}),"Testing the “add to home screen” experience"]}),"\n",(0,a.jsxs)(e.ol,{children:["\n",(0,a.jsxs)(e.li,{children:["Go to the ",(0,a.jsx)(e.strong,{children:"Application"})," panel;"]}),"\n",(0,a.jsxs)(e.li,{children:["Go to the ",(0,a.jsx)(e.strong,{children:"Manifest"})," tab;"]}),"\n",(0,a.jsxs)(e.li,{children:["Click ",(0,a.jsx)(e.strong,{children:"Add to home screen"}),"."]}),"\n"]}),"\n",(0,a.jsxs)(e.h3,{id:"making-a-general-progressive-web-app-audit",children:[(0,a.jsx)(e.a,{"aria-hidden":"true",tabIndex:"-1",href:"#making-a-general-progressive-web-app-audit",children:(0,a.jsx)(e.span,{className:"icon icon-link"})}),"Making a general Progressive Web App audit"]}),"\n",(0,a.jsxs)(e.ol,{children:["\n",(0,a.jsxs)(e.li,{children:["Go to the ",(0,a.jsx)(e.strong,{children:"Audits"})," panel (Lighthouse);"]}),"\n",(0,a.jsxs)(e.li,{children:["Select ",(0,a.jsx)(e.strong,{children:"Progressive Web App"}),";"]}),"\n",(0,a.jsxs)(e.li,{children:["Click ",(0,a.jsx)(e.strong,{children:"Run audits"}),"."]}),"\n"]}),"\n",(0,a.jsxs)(e.h2,{id:"conclusion",children:[(0,a.jsx)(e.a,{"aria-hidden":"true",tabIndex:"-1",href:"#conclusion",children:(0,a.jsx)(e.span,{className:"icon icon-link"})}),"Conclusion"]}),"\n",(0,a.jsx)(e.p,{children:"In this article, we learned how to create a great base for offline-first, PWAs using Vue, web manifest, and other standards. There’s a lot more to consider to make a great native-like feeling and keep your user engaged. Here are some points to consider:"}),"\n",(0,a.jsxs)(e.ul,{children:["\n",(0,a.jsx)(e.li,{children:"Keyboard shortcuts;"}),"\n",(0,a.jsx)(e.li,{children:"Notification & icon badges;"}),"\n"]})]})}e.Z=function(s){void 0===s&&(s={});const{wrapper:e}=Object.assign({},(0,c.a)(),s.components);return e?(0,a.jsx)(e,Object.assign({},s,{children:(0,a.jsx)(l,s)})):l(s)}}}]);
//# sourceMappingURL=b8155cba-dc54d3c26b18fede7f70.js.map